{"version":3,"file":"bundle.js","mappings":"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ACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,EACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,EACb,IAAO,IAAM,GACb,IAAO,IAAM,EACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,GAAM,IAAM,GACZ,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,EACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,EACb,IAAO,IAAM,EACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,EACb,IAAO,IAAM,EACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,EACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,GAAM,IAAM,GACZ,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,EACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,EACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,GACb,IAAO,IAAM,G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","sources":["webpack://@luxlunaris/react-boilerplate/./node_modules/excalibur/build/esm/excalibur.js","webpack://@luxlunaris/react-boilerplate/./app/src/Floor.ts","webpack://@luxlunaris/react-boilerplate/./app/src/Level1.ts","webpack://@luxlunaris/react-boilerplate/./app/src/Samurai.ts","webpack://@luxlunaris/react-boilerplate/./app/src/index.ts","webpack://@luxlunaris/react-boilerplate/./app/src/resources.ts","webpack://@luxlunaris/react-boilerplate/./app/res/block.png","webpack://@luxlunaris/react-boilerplate/./app/res/samurai/attack1.png","webpack://@luxlunaris/react-boilerplate/./app/res/samurai/die.png","webpack://@luxlunaris/react-boilerplate/./app/res/samurai/fall.png","webpack://@luxlunaris/react-boilerplate/./app/res/samurai/idle.png","webpack://@luxlunaris/react-boilerplate/./app/res/samurai/jump.png","webpack://@luxlunaris/react-boilerplate/./app/res/samurai/run.png","webpack://@luxlunaris/react-boilerplate/./app/res/samurai/take-hit.png","webpack://@luxlunaris/react-boilerplate/webpack/bootstrap","webpack://@luxlunaris/react-boilerplate/webpack/runtime/define property getters","webpack://@luxlunaris/react-boilerplate/webpack/runtime/hasOwnProperty shorthand","webpack://@luxlunaris/react-boilerplate/webpack/runtime/make namespace object","webpack://@luxlunaris/react-boilerplate/webpack/startup"],"sourcesContent":["/*!\n * excalibur - 0.25.3 - 2022-2-5\n * https://github.com/excaliburjs/Excalibur\n * Copyright (c) 2022 Excalibur.js <https://github.com/excaliburjs/Excalibur/graphs/contributors>\n * Licensed BSD-2-Clause\n * @preserve\n */\n/******/ var __webpack_modules__ = ({\n\n/***/ 4662:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n__webpack_require__(3430);\nvar entryUnbind = __webpack_require__(8791);\n\nmodule.exports = entryUnbind('Array', 'sort');\n\n\n/***/ }),\n\n/***/ 8343:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n__webpack_require__(4769);\nvar path = __webpack_require__(9276);\n\nmodule.exports = path.Object.keys;\n\n\n/***/ }),\n\n/***/ 7111:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar global = __webpack_require__(9859);\nvar isCallable = __webpack_require__(6733);\nvar tryToString = __webpack_require__(9821);\n\nvar TypeError = global.TypeError;\n\n// `Assert: IsCallable(argument) is true`\nmodule.exports = function (argument) {\n  if (isCallable(argument)) return argument;\n  throw TypeError(tryToString(argument) + ' is not a function');\n};\n\n\n/***/ }),\n\n/***/ 1176:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar global = __webpack_require__(9859);\nvar isObject = __webpack_require__(5052);\n\nvar String = global.String;\nvar TypeError = global.TypeError;\n\n// `Assert: Type(argument) is Object`\nmodule.exports = function (argument) {\n  if (isObject(argument)) return argument;\n  throw TypeError(String(argument) + ' is not an object');\n};\n\n\n/***/ }),\n\n/***/ 9540:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar toIndexedObject = __webpack_require__(905);\nvar toAbsoluteIndex = __webpack_require__(3231);\nvar lengthOfArrayLike = __webpack_require__(9646);\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = lengthOfArrayLike(O);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n\n\n/***/ }),\n\n/***/ 6038:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar fails = __webpack_require__(4229);\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal -- required for testing\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n\n\n/***/ }),\n\n/***/ 9794:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar global = __webpack_require__(9859);\nvar toAbsoluteIndex = __webpack_require__(3231);\nvar lengthOfArrayLike = __webpack_require__(9646);\nvar createProperty = __webpack_require__(2324);\n\nvar Array = global.Array;\nvar max = Math.max;\n\nmodule.exports = function (O, start, end) {\n  var length = lengthOfArrayLike(O);\n  var k = toAbsoluteIndex(start, length);\n  var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n  var result = Array(max(fin - k, 0));\n  for (var n = 0; k < fin; k++, n++) createProperty(result, n, O[k]);\n  result.length = n;\n  return result;\n};\n\n\n/***/ }),\n\n/***/ 3867:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar arraySlice = __webpack_require__(9794);\n\nvar floor = Math.floor;\n\nvar mergeSort = function (array, comparefn) {\n  var length = array.length;\n  var middle = floor(length / 2);\n  return length < 8 ? insertionSort(array, comparefn) : merge(\n    array,\n    mergeSort(arraySlice(array, 0, middle), comparefn),\n    mergeSort(arraySlice(array, middle), comparefn),\n    comparefn\n  );\n};\n\nvar insertionSort = function (array, comparefn) {\n  var length = array.length;\n  var i = 1;\n  var element, j;\n\n  while (i < length) {\n    j = i;\n    element = array[i];\n    while (j && comparefn(array[j - 1], element) > 0) {\n      array[j] = array[--j];\n    }\n    if (j !== i++) array[j] = element;\n  } return array;\n};\n\nvar merge = function (array, left, right, comparefn) {\n  var llength = left.length;\n  var rlength = right.length;\n  var lindex = 0;\n  var rindex = 0;\n\n  while (lindex < llength || rindex < rlength) {\n    array[lindex + rindex] = (lindex < llength && rindex < rlength)\n      ? comparefn(left[lindex], right[rindex]) <= 0 ? left[lindex++] : right[rindex++]\n      : lindex < llength ? left[lindex++] : right[rindex++];\n  } return array;\n};\n\nmodule.exports = mergeSort;\n\n\n/***/ }),\n\n/***/ 7079:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar uncurryThis = __webpack_require__(5968);\n\nvar toString = uncurryThis({}.toString);\nvar stringSlice = uncurryThis(''.slice);\n\nmodule.exports = function (it) {\n  return stringSlice(toString(it), 8, -1);\n};\n\n\n/***/ }),\n\n/***/ 1589:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar global = __webpack_require__(9859);\nvar TO_STRING_TAG_SUPPORT = __webpack_require__(1601);\nvar isCallable = __webpack_require__(6733);\nvar classofRaw = __webpack_require__(7079);\nvar wellKnownSymbol = __webpack_require__(95);\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar Object = global.Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n\n\n/***/ }),\n\n/***/ 7081:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar hasOwn = __webpack_require__(8270);\nvar ownKeys = __webpack_require__(4826);\nvar getOwnPropertyDescriptorModule = __webpack_require__(7933);\nvar definePropertyModule = __webpack_require__(1787);\n\nmodule.exports = function (target, source, exceptions) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {\n      defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n    }\n  }\n};\n\n\n/***/ }),\n\n/***/ 5762:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar DESCRIPTORS = __webpack_require__(7400);\nvar definePropertyModule = __webpack_require__(1787);\nvar createPropertyDescriptor = __webpack_require__(5358);\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\n\n/***/ }),\n\n/***/ 5358:\n/***/ ((module) => {\n\nmodule.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\n\n/***/ }),\n\n/***/ 2324:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar toPropertyKey = __webpack_require__(9310);\nvar definePropertyModule = __webpack_require__(1787);\nvar createPropertyDescriptor = __webpack_require__(5358);\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPropertyKey(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n\n\n/***/ }),\n\n/***/ 7400:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar fails = __webpack_require__(4229);\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n\n\n/***/ }),\n\n/***/ 2635:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar global = __webpack_require__(9859);\nvar isObject = __webpack_require__(5052);\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n\n\n/***/ }),\n\n/***/ 2671:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar userAgent = __webpack_require__(598);\n\nvar firefox = userAgent.match(/firefox\\/(\\d+)/i);\n\nmodule.exports = !!firefox && +firefox[1];\n\n\n/***/ }),\n\n/***/ 8506:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar UA = __webpack_require__(598);\n\nmodule.exports = /MSIE|Trident/.test(UA);\n\n\n/***/ }),\n\n/***/ 598:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar getBuiltIn = __webpack_require__(1333);\n\nmodule.exports = getBuiltIn('navigator', 'userAgent') || '';\n\n\n/***/ }),\n\n/***/ 6358:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar global = __webpack_require__(9859);\nvar userAgent = __webpack_require__(598);\n\nvar process = global.process;\nvar Deno = global.Deno;\nvar versions = process && process.versions || Deno && Deno.version;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  // in old Chrome, versions of V8 isn't V8 = Chrome / 10\n  // but their correct versions are not interesting for us\n  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);\n}\n\n// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`\n// so check `userAgent` even if `.v8` exists, but 0\nif (!version && userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = +match[1];\n  }\n}\n\nmodule.exports = version;\n\n\n/***/ }),\n\n/***/ 9811:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar userAgent = __webpack_require__(598);\n\nvar webkit = userAgent.match(/AppleWebKit\\/(\\d+)\\./);\n\nmodule.exports = !!webkit && +webkit[1];\n\n\n/***/ }),\n\n/***/ 8791:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar global = __webpack_require__(9859);\nvar uncurryThis = __webpack_require__(5968);\n\nmodule.exports = function (CONSTRUCTOR, METHOD) {\n  return uncurryThis(global[CONSTRUCTOR].prototype[METHOD]);\n};\n\n\n/***/ }),\n\n/***/ 3837:\n/***/ ((module) => {\n\n// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n\n\n/***/ }),\n\n/***/ 3103:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar global = __webpack_require__(9859);\nvar getOwnPropertyDescriptor = (__webpack_require__(7933).f);\nvar createNonEnumerableProperty = __webpack_require__(5762);\nvar redefine = __webpack_require__(7487);\nvar setGlobal = __webpack_require__(2079);\nvar copyConstructorProperties = __webpack_require__(7081);\nvar isForced = __webpack_require__(6541);\n\n/*\n  options.target      - name of the target object\n  options.global      - target is the global object\n  options.stat        - export as static methods of target\n  options.proto       - export as prototype methods of target\n  options.real        - real prototype method for the `pure` version\n  options.forced      - export even if the native feature is available\n  options.bind        - bind methods to the target, required for the `pure` version\n  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe      - use the simple assignment of property instead of delete + defineProperty\n  options.sham        - add a flag to not completely full polyfills\n  options.enumerable  - export as enumerable property\n  options.noTargetGet - prevent calling a getter on target\n  options.name        - the .name of the function if it does not match the key\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || setGlobal(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.noTargetGet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty == typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    // extend global\n    redefine(target, key, sourceProperty, options);\n  }\n};\n\n\n/***/ }),\n\n/***/ 4229:\n/***/ ((module) => {\n\nmodule.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n\n\n/***/ }),\n\n/***/ 7188:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar fails = __webpack_require__(4229);\n\nmodule.exports = !fails(function () {\n  var test = (function () { /* empty */ }).bind();\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return typeof test != 'function' || test.hasOwnProperty('prototype');\n});\n\n\n/***/ }),\n\n/***/ 266:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar NATIVE_BIND = __webpack_require__(7188);\n\nvar call = Function.prototype.call;\n\nmodule.exports = NATIVE_BIND ? call.bind(call) : function () {\n  return call.apply(call, arguments);\n};\n\n\n/***/ }),\n\n/***/ 1805:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar DESCRIPTORS = __webpack_require__(7400);\nvar hasOwn = __webpack_require__(8270);\n\nvar FunctionPrototype = Function.prototype;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;\n\nvar EXISTS = hasOwn(FunctionPrototype, 'name');\n// additional protection from minified / mangled / dropped function names\nvar PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';\nvar CONFIGURABLE = EXISTS && (!DESCRIPTORS || (DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable));\n\nmodule.exports = {\n  EXISTS: EXISTS,\n  PROPER: PROPER,\n  CONFIGURABLE: CONFIGURABLE\n};\n\n\n/***/ }),\n\n/***/ 5968:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar NATIVE_BIND = __webpack_require__(7188);\n\nvar FunctionPrototype = Function.prototype;\nvar bind = FunctionPrototype.bind;\nvar call = FunctionPrototype.call;\nvar uncurryThis = NATIVE_BIND && bind.bind(call, call);\n\nmodule.exports = NATIVE_BIND ? function (fn) {\n  return fn && uncurryThis(fn);\n} : function (fn) {\n  return fn && function () {\n    return call.apply(fn, arguments);\n  };\n};\n\n\n/***/ }),\n\n/***/ 1333:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar global = __webpack_require__(9859);\nvar isCallable = __webpack_require__(6733);\n\nvar aFunction = function (argument) {\n  return isCallable(argument) ? argument : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(global[namespace]) : global[namespace] && global[namespace][method];\n};\n\n\n/***/ }),\n\n/***/ 5300:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar aCallable = __webpack_require__(7111);\n\n// `GetMethod` abstract operation\n// https://tc39.es/ecma262/#sec-getmethod\nmodule.exports = function (V, P) {\n  var func = V[P];\n  return func == null ? undefined : aCallable(func);\n};\n\n\n/***/ }),\n\n/***/ 9859:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line es/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof __webpack_require__.g == 'object' && __webpack_require__.g) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n\n\n/***/ }),\n\n/***/ 8270:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar uncurryThis = __webpack_require__(5968);\nvar toObject = __webpack_require__(2991);\n\nvar hasOwnProperty = uncurryThis({}.hasOwnProperty);\n\n// `HasOwnProperty` abstract operation\n// https://tc39.es/ecma262/#sec-hasownproperty\nmodule.exports = Object.hasOwn || function hasOwn(it, key) {\n  return hasOwnProperty(toObject(it), key);\n};\n\n\n/***/ }),\n\n/***/ 5977:\n/***/ ((module) => {\n\nmodule.exports = {};\n\n\n/***/ }),\n\n/***/ 4394:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar DESCRIPTORS = __webpack_require__(7400);\nvar fails = __webpack_require__(4229);\nvar createElement = __webpack_require__(2635);\n\n// Thanks to IE8 for its funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n\n\n/***/ }),\n\n/***/ 9337:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar global = __webpack_require__(9859);\nvar uncurryThis = __webpack_require__(5968);\nvar fails = __webpack_require__(4229);\nvar classof = __webpack_require__(7079);\n\nvar Object = global.Object;\nvar split = uncurryThis(''.split);\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split(it, '') : Object(it);\n} : Object;\n\n\n/***/ }),\n\n/***/ 8511:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar uncurryThis = __webpack_require__(5968);\nvar isCallable = __webpack_require__(6733);\nvar store = __webpack_require__(5353);\n\nvar functionToString = uncurryThis(Function.toString);\n\n// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper\nif (!isCallable(store.inspectSource)) {\n  store.inspectSource = function (it) {\n    return functionToString(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n\n\n/***/ }),\n\n/***/ 6407:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar NATIVE_WEAK_MAP = __webpack_require__(8694);\nvar global = __webpack_require__(9859);\nvar uncurryThis = __webpack_require__(5968);\nvar isObject = __webpack_require__(5052);\nvar createNonEnumerableProperty = __webpack_require__(5762);\nvar hasOwn = __webpack_require__(8270);\nvar shared = __webpack_require__(5353);\nvar sharedKey = __webpack_require__(4399);\nvar hiddenKeys = __webpack_require__(5977);\n\nvar OBJECT_ALREADY_INITIALIZED = 'Object already initialized';\nvar TypeError = global.TypeError;\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store = shared.state || (shared.state = new WeakMap());\n  var wmget = uncurryThis(store.get);\n  var wmhas = uncurryThis(store.has);\n  var wmset = uncurryThis(store.set);\n  set = function (it, metadata) {\n    if (wmhas(store, it)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    wmset(store, it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return wmget(store, it) || {};\n  };\n  has = function (it) {\n    return wmhas(store, it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    if (hasOwn(it, STATE)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return hasOwn(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return hasOwn(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n\n\n/***/ }),\n\n/***/ 6733:\n/***/ ((module) => {\n\n// `IsCallable` abstract operation\n// https://tc39.es/ecma262/#sec-iscallable\nmodule.exports = function (argument) {\n  return typeof argument == 'function';\n};\n\n\n/***/ }),\n\n/***/ 6541:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar fails = __webpack_require__(4229);\nvar isCallable = __webpack_require__(6733);\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : isCallable(detection) ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n\n\n/***/ }),\n\n/***/ 5052:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar isCallable = __webpack_require__(6733);\n\nmodule.exports = function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it);\n};\n\n\n/***/ }),\n\n/***/ 4231:\n/***/ ((module) => {\n\nmodule.exports = false;\n\n\n/***/ }),\n\n/***/ 9395:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar global = __webpack_require__(9859);\nvar getBuiltIn = __webpack_require__(1333);\nvar isCallable = __webpack_require__(6733);\nvar isPrototypeOf = __webpack_require__(1321);\nvar USE_SYMBOL_AS_UID = __webpack_require__(6969);\n\nvar Object = global.Object;\n\nmodule.exports = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  var $Symbol = getBuiltIn('Symbol');\n  return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, Object(it));\n};\n\n\n/***/ }),\n\n/***/ 9646:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar toLength = __webpack_require__(4237);\n\n// `LengthOfArrayLike` abstract operation\n// https://tc39.es/ecma262/#sec-lengthofarraylike\nmodule.exports = function (obj) {\n  return toLength(obj.length);\n};\n\n\n/***/ }),\n\n/***/ 3839:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n/* eslint-disable es/no-symbol -- required for testing */\nvar V8_VERSION = __webpack_require__(6358);\nvar fails = __webpack_require__(4229);\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  var symbol = Symbol();\n  // Chrome 38 Symbol has incorrect toString conversion\n  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances\n  return !String(symbol) || !(Object(symbol) instanceof Symbol) ||\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION && V8_VERSION < 41;\n});\n\n\n/***/ }),\n\n/***/ 8694:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar global = __webpack_require__(9859);\nvar isCallable = __webpack_require__(6733);\nvar inspectSource = __webpack_require__(8511);\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = isCallable(WeakMap) && /native code/.test(inspectSource(WeakMap));\n\n\n/***/ }),\n\n/***/ 1787:\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\n\nvar global = __webpack_require__(9859);\nvar DESCRIPTORS = __webpack_require__(7400);\nvar IE8_DOM_DEFINE = __webpack_require__(4394);\nvar V8_PROTOTYPE_DEFINE_BUG = __webpack_require__(7137);\nvar anObject = __webpack_require__(1176);\nvar toPropertyKey = __webpack_require__(9310);\n\nvar TypeError = global.TypeError;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar ENUMERABLE = 'enumerable';\nvar CONFIGURABLE = 'configurable';\nvar WRITABLE = 'writable';\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {\n    var current = $getOwnPropertyDescriptor(O, P);\n    if (current && current[WRITABLE]) {\n      O[P] = Attributes.value;\n      Attributes = {\n        configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],\n        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],\n        writable: false\n      };\n    }\n  } return $defineProperty(O, P, Attributes);\n} : $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\n\n/***/ }),\n\n/***/ 7933:\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\n\nvar DESCRIPTORS = __webpack_require__(7400);\nvar call = __webpack_require__(266);\nvar propertyIsEnumerableModule = __webpack_require__(9195);\nvar createPropertyDescriptor = __webpack_require__(5358);\nvar toIndexedObject = __webpack_require__(905);\nvar toPropertyKey = __webpack_require__(9310);\nvar hasOwn = __webpack_require__(8270);\nvar IE8_DOM_DEFINE = __webpack_require__(4394);\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPropertyKey(P);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (hasOwn(O, P)) return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);\n};\n\n\n/***/ }),\n\n/***/ 8151:\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\n\nvar internalObjectKeys = __webpack_require__(140);\nvar enumBugKeys = __webpack_require__(3837);\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n// eslint-disable-next-line es/no-object-getownpropertynames -- safe\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n\n\n/***/ }),\n\n/***/ 894:\n/***/ ((__unused_webpack_module, exports) => {\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe\nexports.f = Object.getOwnPropertySymbols;\n\n\n/***/ }),\n\n/***/ 1321:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar uncurryThis = __webpack_require__(5968);\n\nmodule.exports = uncurryThis({}.isPrototypeOf);\n\n\n/***/ }),\n\n/***/ 140:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar uncurryThis = __webpack_require__(5968);\nvar hasOwn = __webpack_require__(8270);\nvar toIndexedObject = __webpack_require__(905);\nvar indexOf = (__webpack_require__(9540).indexOf);\nvar hiddenKeys = __webpack_require__(5977);\n\nvar push = uncurryThis([].push);\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (hasOwn(O, key = names[i++])) {\n    ~indexOf(result, key) || push(result, key);\n  }\n  return result;\n};\n\n\n/***/ }),\n\n/***/ 5632:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar internalObjectKeys = __webpack_require__(140);\nvar enumBugKeys = __webpack_require__(3837);\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n// eslint-disable-next-line es/no-object-keys -- safe\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n\n\n/***/ }),\n\n/***/ 9195:\n/***/ ((__unused_webpack_module, exports) => {\n\n\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n\n\n/***/ }),\n\n/***/ 2914:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar global = __webpack_require__(9859);\nvar call = __webpack_require__(266);\nvar isCallable = __webpack_require__(6733);\nvar isObject = __webpack_require__(5052);\n\nvar TypeError = global.TypeError;\n\n// `OrdinaryToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-ordinarytoprimitive\nmodule.exports = function (input, pref) {\n  var fn, val;\n  if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input))) return val;\n  if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n/***/ }),\n\n/***/ 4826:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar getBuiltIn = __webpack_require__(1333);\nvar uncurryThis = __webpack_require__(5968);\nvar getOwnPropertyNamesModule = __webpack_require__(8151);\nvar getOwnPropertySymbolsModule = __webpack_require__(894);\nvar anObject = __webpack_require__(1176);\n\nvar concat = uncurryThis([].concat);\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;\n};\n\n\n/***/ }),\n\n/***/ 9276:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar global = __webpack_require__(9859);\n\nmodule.exports = global;\n\n\n/***/ }),\n\n/***/ 7487:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar global = __webpack_require__(9859);\nvar isCallable = __webpack_require__(6733);\nvar hasOwn = __webpack_require__(8270);\nvar createNonEnumerableProperty = __webpack_require__(5762);\nvar setGlobal = __webpack_require__(2079);\nvar inspectSource = __webpack_require__(8511);\nvar InternalStateModule = __webpack_require__(6407);\nvar CONFIGURABLE_FUNCTION_NAME = (__webpack_require__(1805).CONFIGURABLE);\n\nvar getInternalState = InternalStateModule.get;\nvar enforceInternalState = InternalStateModule.enforce;\nvar TEMPLATE = String(String).split('String');\n\n(module.exports = function (O, key, value, options) {\n  var unsafe = options ? !!options.unsafe : false;\n  var simple = options ? !!options.enumerable : false;\n  var noTargetGet = options ? !!options.noTargetGet : false;\n  var name = options && options.name !== undefined ? options.name : key;\n  var state;\n  if (isCallable(value)) {\n    if (String(name).slice(0, 7) === 'Symbol(') {\n      name = '[' + String(name).replace(/^Symbol\\(([^)]*)\\)/, '$1') + ']';\n    }\n    if (!hasOwn(value, 'name') || (CONFIGURABLE_FUNCTION_NAME && value.name !== name)) {\n      createNonEnumerableProperty(value, 'name', name);\n    }\n    state = enforceInternalState(value);\n    if (!state.source) {\n      state.source = TEMPLATE.join(typeof name == 'string' ? name : '');\n    }\n  }\n  if (O === global) {\n    if (simple) O[key] = value;\n    else setGlobal(key, value);\n    return;\n  } else if (!unsafe) {\n    delete O[key];\n  } else if (!noTargetGet && O[key]) {\n    simple = true;\n  }\n  if (simple) O[key] = value;\n  else createNonEnumerableProperty(O, key, value);\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, 'toString', function toString() {\n  return isCallable(this) && getInternalState(this).source || inspectSource(this);\n});\n\n\n/***/ }),\n\n/***/ 8885:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar global = __webpack_require__(9859);\n\nvar TypeError = global.TypeError;\n\n// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on \" + it);\n  return it;\n};\n\n\n/***/ }),\n\n/***/ 2079:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar global = __webpack_require__(9859);\n\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nmodule.exports = function (key, value) {\n  try {\n    defineProperty(global, key, { value: value, configurable: true, writable: true });\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n\n\n/***/ }),\n\n/***/ 4399:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar shared = __webpack_require__(3036);\nvar uid = __webpack_require__(1441);\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n\n\n/***/ }),\n\n/***/ 5353:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar global = __webpack_require__(9859);\nvar setGlobal = __webpack_require__(2079);\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || setGlobal(SHARED, {});\n\nmodule.exports = store;\n\n\n/***/ }),\n\n/***/ 3036:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar IS_PURE = __webpack_require__(4231);\nvar store = __webpack_require__(5353);\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.21.0',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: '© 2014-2022 Denis Pushkarev (zloirock.ru)',\n  license: 'https://github.com/zloirock/core-js/blob/v3.21.0/LICENSE',\n  source: 'https://github.com/zloirock/core-js'\n});\n\n\n/***/ }),\n\n/***/ 3231:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar toIntegerOrInfinity = __webpack_require__(3329);\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toIntegerOrInfinity(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n\n\n/***/ }),\n\n/***/ 905:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = __webpack_require__(9337);\nvar requireObjectCoercible = __webpack_require__(8885);\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n\n\n/***/ }),\n\n/***/ 3329:\n/***/ ((module) => {\n\nvar ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `ToIntegerOrInfinity` abstract operation\n// https://tc39.es/ecma262/#sec-tointegerorinfinity\nmodule.exports = function (argument) {\n  var number = +argument;\n  // eslint-disable-next-line no-self-compare -- safe\n  return number !== number || number === 0 ? 0 : (number > 0 ? floor : ceil)(number);\n};\n\n\n/***/ }),\n\n/***/ 4237:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar toIntegerOrInfinity = __webpack_require__(3329);\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toIntegerOrInfinity(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n\n\n/***/ }),\n\n/***/ 2991:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar global = __webpack_require__(9859);\nvar requireObjectCoercible = __webpack_require__(8885);\n\nvar Object = global.Object;\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return Object(requireObjectCoercible(argument));\n};\n\n\n/***/ }),\n\n/***/ 2066:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar global = __webpack_require__(9859);\nvar call = __webpack_require__(266);\nvar isObject = __webpack_require__(5052);\nvar isSymbol = __webpack_require__(9395);\nvar getMethod = __webpack_require__(5300);\nvar ordinaryToPrimitive = __webpack_require__(2914);\nvar wellKnownSymbol = __webpack_require__(95);\n\nvar TypeError = global.TypeError;\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\nmodule.exports = function (input, pref) {\n  if (!isObject(input) || isSymbol(input)) return input;\n  var exoticToPrim = getMethod(input, TO_PRIMITIVE);\n  var result;\n  if (exoticToPrim) {\n    if (pref === undefined) pref = 'default';\n    result = call(exoticToPrim, input, pref);\n    if (!isObject(result) || isSymbol(result)) return result;\n    throw TypeError(\"Can't convert object to primitive value\");\n  }\n  if (pref === undefined) pref = 'number';\n  return ordinaryToPrimitive(input, pref);\n};\n\n\n/***/ }),\n\n/***/ 9310:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar toPrimitive = __webpack_require__(2066);\nvar isSymbol = __webpack_require__(9395);\n\n// `ToPropertyKey` abstract operation\n// https://tc39.es/ecma262/#sec-topropertykey\nmodule.exports = function (argument) {\n  var key = toPrimitive(argument, 'string');\n  return isSymbol(key) ? key : key + '';\n};\n\n\n/***/ }),\n\n/***/ 1601:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar wellKnownSymbol = __webpack_require__(95);\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n\n\n/***/ }),\n\n/***/ 3326:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar global = __webpack_require__(9859);\nvar classof = __webpack_require__(1589);\n\nvar String = global.String;\n\nmodule.exports = function (argument) {\n  if (classof(argument) === 'Symbol') throw TypeError('Cannot convert a Symbol value to a string');\n  return String(argument);\n};\n\n\n/***/ }),\n\n/***/ 9821:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar global = __webpack_require__(9859);\n\nvar String = global.String;\n\nmodule.exports = function (argument) {\n  try {\n    return String(argument);\n  } catch (error) {\n    return 'Object';\n  }\n};\n\n\n/***/ }),\n\n/***/ 1441:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar uncurryThis = __webpack_require__(5968);\n\nvar id = 0;\nvar postfix = Math.random();\nvar toString = uncurryThis(1.0.toString);\n\nmodule.exports = function (key) {\n  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);\n};\n\n\n/***/ }),\n\n/***/ 6969:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\n/* eslint-disable es/no-symbol -- required for testing */\nvar NATIVE_SYMBOL = __webpack_require__(3839);\n\nmodule.exports = NATIVE_SYMBOL\n  && !Symbol.sham\n  && typeof Symbol.iterator == 'symbol';\n\n\n/***/ }),\n\n/***/ 7137:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar DESCRIPTORS = __webpack_require__(7400);\nvar fails = __webpack_require__(4229);\n\n// V8 ~ Chrome 36-\n// https://bugs.chromium.org/p/v8/issues/detail?id=3334\nmodule.exports = DESCRIPTORS && fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(function () { /* empty */ }, 'prototype', {\n    value: 42,\n    writable: false\n  }).prototype != 42;\n});\n\n\n/***/ }),\n\n/***/ 95:\n/***/ ((module, __unused_webpack_exports, __webpack_require__) => {\n\nvar global = __webpack_require__(9859);\nvar shared = __webpack_require__(3036);\nvar hasOwn = __webpack_require__(8270);\nvar uid = __webpack_require__(1441);\nvar NATIVE_SYMBOL = __webpack_require__(3839);\nvar USE_SYMBOL_AS_UID = __webpack_require__(6969);\n\nvar WellKnownSymbolsStore = shared('wks');\nvar Symbol = global.Symbol;\nvar symbolFor = Symbol && Symbol['for'];\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!hasOwn(WellKnownSymbolsStore, name) || !(NATIVE_SYMBOL || typeof WellKnownSymbolsStore[name] == 'string')) {\n    var description = 'Symbol.' + name;\n    if (NATIVE_SYMBOL && hasOwn(Symbol, name)) {\n      WellKnownSymbolsStore[name] = Symbol[name];\n    } else if (USE_SYMBOL_AS_UID && symbolFor) {\n      WellKnownSymbolsStore[name] = symbolFor(description);\n    } else {\n      WellKnownSymbolsStore[name] = createWellKnownSymbol(description);\n    }\n  } return WellKnownSymbolsStore[name];\n};\n\n\n/***/ }),\n\n/***/ 3430:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\n\nvar $ = __webpack_require__(3103);\nvar uncurryThis = __webpack_require__(5968);\nvar aCallable = __webpack_require__(7111);\nvar toObject = __webpack_require__(2991);\nvar lengthOfArrayLike = __webpack_require__(9646);\nvar toString = __webpack_require__(3326);\nvar fails = __webpack_require__(4229);\nvar internalSort = __webpack_require__(3867);\nvar arrayMethodIsStrict = __webpack_require__(6038);\nvar FF = __webpack_require__(2671);\nvar IE_OR_EDGE = __webpack_require__(8506);\nvar V8 = __webpack_require__(6358);\nvar WEBKIT = __webpack_require__(9811);\n\nvar test = [];\nvar un$Sort = uncurryThis(test.sort);\nvar push = uncurryThis(test.push);\n\n// IE8-\nvar FAILS_ON_UNDEFINED = fails(function () {\n  test.sort(undefined);\n});\n// V8 bug\nvar FAILS_ON_NULL = fails(function () {\n  test.sort(null);\n});\n// Old WebKit\nvar STRICT_METHOD = arrayMethodIsStrict('sort');\n\nvar STABLE_SORT = !fails(function () {\n  // feature detection can be too slow, so check engines versions\n  if (V8) return V8 < 70;\n  if (FF && FF > 3) return;\n  if (IE_OR_EDGE) return true;\n  if (WEBKIT) return WEBKIT < 603;\n\n  var result = '';\n  var code, chr, value, index;\n\n  // generate an array with more 512 elements (Chakra and old V8 fails only in this case)\n  for (code = 65; code < 76; code++) {\n    chr = String.fromCharCode(code);\n\n    switch (code) {\n      case 66: case 69: case 70: case 72: value = 3; break;\n      case 68: case 71: value = 4; break;\n      default: value = 2;\n    }\n\n    for (index = 0; index < 47; index++) {\n      test.push({ k: chr + index, v: value });\n    }\n  }\n\n  test.sort(function (a, b) { return b.v - a.v; });\n\n  for (index = 0; index < test.length; index++) {\n    chr = test[index].k.charAt(0);\n    if (result.charAt(result.length - 1) !== chr) result += chr;\n  }\n\n  return result !== 'DGBEFHACIJK';\n});\n\nvar FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || !STRICT_METHOD || !STABLE_SORT;\n\nvar getSortCompare = function (comparefn) {\n  return function (x, y) {\n    if (y === undefined) return -1;\n    if (x === undefined) return 1;\n    if (comparefn !== undefined) return +comparefn(x, y) || 0;\n    return toString(x) > toString(y) ? 1 : -1;\n  };\n};\n\n// `Array.prototype.sort` method\n// https://tc39.es/ecma262/#sec-array.prototype.sort\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  sort: function sort(comparefn) {\n    if (comparefn !== undefined) aCallable(comparefn);\n\n    var array = toObject(this);\n\n    if (STABLE_SORT) return comparefn === undefined ? un$Sort(array) : un$Sort(array, comparefn);\n\n    var items = [];\n    var arrayLength = lengthOfArrayLike(array);\n    var itemsLength, index;\n\n    for (index = 0; index < arrayLength; index++) {\n      if (index in array) push(items, array[index]);\n    }\n\n    internalSort(items, getSortCompare(comparefn));\n\n    itemsLength = items.length;\n    index = 0;\n\n    while (index < itemsLength) array[index] = items[index++];\n    while (index < arrayLength) delete array[index++];\n\n    return array;\n  }\n});\n\n\n/***/ }),\n\n/***/ 4769:\n/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {\n\nvar $ = __webpack_require__(3103);\nvar toObject = __webpack_require__(2991);\nvar nativeKeys = __webpack_require__(5632);\nvar fails = __webpack_require__(4229);\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n\n\n/***/ }),\n\n/***/ 1388:\n/***/ ((module, __webpack_exports__, __webpack_require__) => {\n\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Z\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(272);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2609);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"/* Buttons styles start */\\r\\n\\r\\nbutton#excalibur-play {\\r\\n  display: inline-block;\\r\\n  position: relative;\\r\\n  z-index: 999;\\r\\n  border-radius: 6px;\\r\\n  border: none;\\r\\n  /*border: 3px solid;\\r\\n    border-color: white;\\r\\n    box-shadow: 0 0 10px #ccc;*/\\r\\n  padding: 1rem 1.5rem 1rem 4rem;\\r\\n  margin: 0;\\r\\n  text-decoration: none;\\r\\n  background: #00b233;\\r\\n  color: #ffffff;\\r\\n  font-family: sans-serif;\\r\\n  font-size: 2rem;\\r\\n  white-space: nowrap;\\r\\n  line-height: 1;\\r\\n  cursor: pointer;\\r\\n  text-align: center;\\r\\n  transition: background 250ms ease-in-out, transform 150ms ease;\\r\\n  -webkit-appearance: none;\\r\\n  -moz-appearance: none;\\r\\n\\r\\n  -webkit-animation: excalibur-button-fadein 200ms; /* Safari, Chrome and Opera > 12.1 */\\r\\n  -moz-animation: excalibur-button-fadein 200ms; /* Firefox < 16 */\\r\\n  -ms-animation: excalibur-button-fadein 200ms; /* Internet Explorer */\\r\\n  -o-animation: excalibur-button-fadein 200ms; /* Opera < 12.1 */\\r\\n  animation: excalibur-button-fadein 200ms;\\r\\n}\\r\\n\\r\\n/*\\r\\nbutton#excalibur-play {\\r\\n  display: none;\\r\\n}*/\\r\\n\\r\\nbutton#excalibur-play:after {\\r\\n  position: absolute;\\r\\n  content: '';\\r\\n  border: 8px solid;\\r\\n  border-color: transparent transparent transparent white;\\r\\n  left: 35px;\\r\\n  top: 24px;\\r\\n  width: 0;\\r\\n  height: 0;\\r\\n}\\r\\n\\r\\nbutton#excalibur-play:before {\\r\\n  position: absolute;\\r\\n  content: '';\\r\\n  border: 3px solid;\\r\\n  left: 19px;\\r\\n  top: 14px;\\r\\n  border-radius: 20px;\\r\\n  width: 30px;\\r\\n  height: 30px;\\r\\n}\\r\\n\\r\\nbutton#excalibur-play:hover,\\r\\nbutton#excalibur-play:focus {\\r\\n  background: #00982c;\\r\\n}\\r\\n\\r\\nbutton#excalibur-play:focus {\\r\\n  outline: 1px solid #fff;\\r\\n  outline-offset: -4px;\\r\\n}\\r\\n\\r\\nbutton#excalibur-play:active {\\r\\n  transform: scale(0.99);\\r\\n}\\r\\n\\r\\n@keyframes excalibur-button-fadein {\\r\\n  from {\\r\\n    opacity: 0;\\r\\n  }\\r\\n  to {\\r\\n    opacity: 1;\\r\\n  }\\r\\n}\\r\\n\\r\\n/* Firefox < 16 */\\r\\n@-moz-keyframes excalibur-button-fadein {\\r\\n  from {\\r\\n    opacity: 0;\\r\\n  }\\r\\n  to {\\r\\n    opacity: 1;\\r\\n  }\\r\\n}\\r\\n\\r\\n/* Safari, Chrome and Opera > 12.1 */\\r\\n@-webkit-keyframes excalibur-button-fadein {\\r\\n  from {\\r\\n    opacity: 0;\\r\\n  }\\r\\n  to {\\r\\n    opacity: 1;\\r\\n  }\\r\\n}\\r\\n\\r\\n/* Internet Explorer */\\r\\n@-ms-keyframes excalibur-button-fadein {\\r\\n  from {\\r\\n    opacity: 0;\\r\\n  }\\r\\n  to {\\r\\n    opacity: 1;\\r\\n  }\\r\\n}\\r\\n\\r\\n/* Opera < 12.1 */\\r\\n@-o-keyframes excalibur-button-fadein {\\r\\n  from {\\r\\n    opacity: 0;\\r\\n  }\\r\\n  to {\\r\\n    opacity: 1;\\r\\n  }\\r\\n}\\r\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./Loader.css\"],\"names\":[],\"mappings\":\"AAAA,yBAAyB;;AAEzB;EACE,qBAAqB;EACrB,kBAAkB;EAClB,YAAY;EACZ,kBAAkB;EAClB,YAAY;EACZ;;+BAE6B;EAC7B,8BAA8B;EAC9B,SAAS;EACT,qBAAqB;EACrB,mBAAmB;EACnB,cAAc;EACd,uBAAuB;EACvB,eAAe;EACf,mBAAmB;EACnB,cAAc;EACd,eAAe;EACf,kBAAkB;EAClB,8DAA8D;EAC9D,wBAAwB;EACxB,qBAAqB;;EAErB,gDAAgD,EAAE,oCAAoC;EACtF,6CAA6C,EAAE,iBAAiB;EAChE,4CAA4C,EAAE,sBAAsB;EACpE,2CAA2C,EAAE,iBAAiB;EAC9D,wCAAwC;AAC1C;;AAEA;;;EAGE;;AAEF;EACE,kBAAkB;EAClB,WAAW;EACX,iBAAiB;EACjB,uDAAuD;EACvD,UAAU;EACV,SAAS;EACT,QAAQ;EACR,SAAS;AACX;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,iBAAiB;EACjB,UAAU;EACV,SAAS;EACT,mBAAmB;EACnB,WAAW;EACX,YAAY;AACd;;AAEA;;EAEE,mBAAmB;AACrB;;AAEA;EACE,uBAAuB;EACvB,oBAAoB;AACtB;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,iBAAiB;AACjB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,oCAAoC;AACpC;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,sBAAsB;AACtB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,iBAAiB;AACjB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF\",\"sourcesContent\":[\"/* Buttons styles start */\\r\\n\\r\\nbutton#excalibur-play {\\r\\n  display: inline-block;\\r\\n  position: relative;\\r\\n  z-index: 999;\\r\\n  border-radius: 6px;\\r\\n  border: none;\\r\\n  /*border: 3px solid;\\r\\n    border-color: white;\\r\\n    box-shadow: 0 0 10px #ccc;*/\\r\\n  padding: 1rem 1.5rem 1rem 4rem;\\r\\n  margin: 0;\\r\\n  text-decoration: none;\\r\\n  background: #00b233;\\r\\n  color: #ffffff;\\r\\n  font-family: sans-serif;\\r\\n  font-size: 2rem;\\r\\n  white-space: nowrap;\\r\\n  line-height: 1;\\r\\n  cursor: pointer;\\r\\n  text-align: center;\\r\\n  transition: background 250ms ease-in-out, transform 150ms ease;\\r\\n  -webkit-appearance: none;\\r\\n  -moz-appearance: none;\\r\\n\\r\\n  -webkit-animation: excalibur-button-fadein 200ms; /* Safari, Chrome and Opera > 12.1 */\\r\\n  -moz-animation: excalibur-button-fadein 200ms; /* Firefox < 16 */\\r\\n  -ms-animation: excalibur-button-fadein 200ms; /* Internet Explorer */\\r\\n  -o-animation: excalibur-button-fadein 200ms; /* Opera < 12.1 */\\r\\n  animation: excalibur-button-fadein 200ms;\\r\\n}\\r\\n\\r\\n/*\\r\\nbutton#excalibur-play {\\r\\n  display: none;\\r\\n}*/\\r\\n\\r\\nbutton#excalibur-play:after {\\r\\n  position: absolute;\\r\\n  content: '';\\r\\n  border: 8px solid;\\r\\n  border-color: transparent transparent transparent white;\\r\\n  left: 35px;\\r\\n  top: 24px;\\r\\n  width: 0;\\r\\n  height: 0;\\r\\n}\\r\\n\\r\\nbutton#excalibur-play:before {\\r\\n  position: absolute;\\r\\n  content: '';\\r\\n  border: 3px solid;\\r\\n  left: 19px;\\r\\n  top: 14px;\\r\\n  border-radius: 20px;\\r\\n  width: 30px;\\r\\n  height: 30px;\\r\\n}\\r\\n\\r\\nbutton#excalibur-play:hover,\\r\\nbutton#excalibur-play:focus {\\r\\n  background: #00982c;\\r\\n}\\r\\n\\r\\nbutton#excalibur-play:focus {\\r\\n  outline: 1px solid #fff;\\r\\n  outline-offset: -4px;\\r\\n}\\r\\n\\r\\nbutton#excalibur-play:active {\\r\\n  transform: scale(0.99);\\r\\n}\\r\\n\\r\\n@keyframes excalibur-button-fadein {\\r\\n  from {\\r\\n    opacity: 0;\\r\\n  }\\r\\n  to {\\r\\n    opacity: 1;\\r\\n  }\\r\\n}\\r\\n\\r\\n/* Firefox < 16 */\\r\\n@-moz-keyframes excalibur-button-fadein {\\r\\n  from {\\r\\n    opacity: 0;\\r\\n  }\\r\\n  to {\\r\\n    opacity: 1;\\r\\n  }\\r\\n}\\r\\n\\r\\n/* Safari, Chrome and Opera > 12.1 */\\r\\n@-webkit-keyframes excalibur-button-fadein {\\r\\n  from {\\r\\n    opacity: 0;\\r\\n  }\\r\\n  to {\\r\\n    opacity: 1;\\r\\n  }\\r\\n}\\r\\n\\r\\n/* Internet Explorer */\\r\\n@-ms-keyframes excalibur-button-fadein {\\r\\n  from {\\r\\n    opacity: 0;\\r\\n  }\\r\\n  to {\\r\\n    opacity: 1;\\r\\n  }\\r\\n}\\r\\n\\r\\n/* Opera < 12.1 */\\r\\n@-o-keyframes excalibur-button-fadein {\\r\\n  from {\\r\\n    opacity: 0;\\r\\n  }\\r\\n  to {\\r\\n    opacity: 1;\\r\\n  }\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ 2609:\n/***/ ((module) => {\n\n\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n\n      content += cssWithMappingToString(item);\n\n      if (needLayer) {\n        content += \"}\";\n      }\n\n      if (item[2]) {\n        content += \"}\";\n      }\n\n      if (item[4]) {\n        content += \"}\";\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n\n\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\n/***/ }),\n\n/***/ 272:\n/***/ ((module) => {\n\n\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n\n  return [content].join(\"\\n\");\n};\n\n/***/ })\n\n/******/ });\n/************************************************************************/\n/******/ // The module cache\n/******/ var __webpack_module_cache__ = {};\n/******/ \n/******/ // The require function\n/******/ function __webpack_require__(moduleId) {\n/******/ \t// Check if module is in cache\n/******/ \tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \tif (cachedModule !== undefined) {\n/******/ \t\treturn cachedModule.exports;\n/******/ \t}\n/******/ \t// Create a new module (and put it into the cache)\n/******/ \tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\tid: moduleId,\n/******/ \t\t// no module.loaded needed\n/******/ \t\texports: {}\n/******/ \t};\n/******/ \n/******/ \t// Execute the module function\n/******/ \t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \n/******/ \t// Return the exports of the module\n/******/ \treturn module.exports;\n/******/ }\n/******/ \n/************************************************************************/\n/******/ /* webpack/runtime/compat get default export */\n/******/ (() => {\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = (module) => {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\t() => (module['default']) :\n/******/ \t\t\t() => (module);\n/******/ \t\t__webpack_require__.d(getter, { a: getter });\n/******/ \t\treturn getter;\n/******/ \t};\n/******/ })();\n/******/ \n/******/ /* webpack/runtime/define property getters */\n/******/ (() => {\n/******/ \t// define getter functions for harmony exports\n/******/ \t__webpack_require__.d = (exports, definition) => {\n/******/ \t\tfor(var key in definition) {\n/******/ \t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n/******/ \t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t}\n/******/ \t\t}\n/******/ \t};\n/******/ })();\n/******/ \n/******/ /* webpack/runtime/global */\n/******/ (() => {\n/******/ \t__webpack_require__.g = (function() {\n/******/ \t\tif (typeof globalThis === 'object') return globalThis;\n/******/ \t\ttry {\n/******/ \t\t\treturn this || new Function('return this')();\n/******/ \t\t} catch (e) {\n/******/ \t\t\tif (typeof window === 'object') return window;\n/******/ \t\t}\n/******/ \t})();\n/******/ })();\n/******/ \n/******/ /* webpack/runtime/hasOwnProperty shorthand */\n/******/ (() => {\n/******/ \t__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))\n/******/ })();\n/******/ \n/******/ /* webpack/runtime/make namespace object */\n/******/ (() => {\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = (exports) => {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/ })();\n/******/ \n/************************************************************************/\nvar __webpack_exports__ = {};\n// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.\n(() => {\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"fWn\": () => (/* reexport */ ActionContext),\n  \"Ia8\": () => (/* reexport */ ActionQueue),\n  \"hLI\": () => (/* reexport */ ActionsComponent),\n  \"yyv\": () => (/* reexport */ ActionsSystem),\n  \"tX5\": () => (/* reexport */ ActivateEvent),\n  \"vtX\": () => (/* reexport */ Actor),\n  \"r7K\": () => (/* reexport */ AddedComponent),\n  \"lCh\": () => (/* reexport */ AddedEntity),\n  \"fwF\": () => (/* reexport */ Animation),\n  \"sce\": () => (/* reexport */ AnimationDirection),\n  \"_c7\": () => (/* reexport */ AnimationStrategy),\n  \"KUs\": () => (/* reexport */ ArcadeSolver),\n  \"Ajp\": () => (/* reexport */ AudioContextFactory),\n  \"RDh\": () => (/* reexport */ Axis),\n  \"_H9\": () => (/* reexport */ BaseAlign),\n  \"Ulf\": () => (/* reexport */ BinaryTreeNode),\n  \"mxs\": () => (/* reexport */ Blink),\n  \"OmD\": () => (/* reexport */ BodyComponent),\n  \"kBf\": () => (/* reexport */ BoundingBox),\n  \"C4F\": () => (/* reexport */ BroadphaseStrategy),\n  \"NQt\": () => (/* reexport */ BrowserComponent),\n  \"JjN\": () => (/* reexport */ BrowserEvents),\n  \"V1s\": () => (/* reexport */ Camera),\n  \"Xz7\": () => (/* reexport */ Canvas),\n  \"bLd\": () => (/* reexport */ Cell),\n  \"Cdc\": () => (/* reexport */ Circle),\n  \"FKn\": () => (/* reexport */ CircleCollider),\n  \"wTW\": () => (/* reexport */ Class),\n  \"SUY\": () => (/* reexport */ Clock),\n  \"ab2\": () => (/* reexport */ ClosestLine),\n  \"GfZ\": () => (/* reexport */ ClosestLineJumpTable),\n  \"YMS\": () => (/* reexport */ Collider),\n  \"oyv\": () => (/* reexport */ ColliderComponent),\n  \"aUb\": () => (/* reexport */ CollisionContact),\n  \"SdD\": () => (/* reexport */ CollisionEndEvent),\n  \"JUv\": () => (/* reexport */ CollisionGroup),\n  \"jEj\": () => (/* reexport */ CollisionGroupManager),\n  \"TFq\": () => (/* reexport */ CollisionJumpTable),\n  \"HDU\": () => (/* reexport */ CollisionPostSolveEvent),\n  \"R_y\": () => (/* reexport */ CollisionPreSolveEvent),\n  \"ydN\": () => (/* reexport */ CollisionResolutionStrategy),\n  \"_N2\": () => (/* reexport */ CollisionSolver),\n  \"t50\": () => (/* reexport */ CollisionStartEvent),\n  \"s$$\": () => (/* reexport */ CollisionSystem),\n  \"v2G\": () => (/* reexport */ CollisionType),\n  \"Ilk\": () => (/* reexport */ Color),\n  \"s9i\": () => (/* reexport */ ColorBlindFlags),\n  \"dxL\": () => (/* reexport */ ColorBlindnessMode),\n  \"LLX\": () => (/* reexport */ ColorBlindnessPostProcessor),\n  \"wA2\": () => (/* reexport */ Component),\n  \"R_p\": () => (/* reexport */ CompositeCollider),\n  \"IQ$\": () => (/* reexport */ Configurable),\n  \"I5F\": () => (/* reexport */ ConsoleAppender),\n  \"X8$\": () => (/* reexport */ ContactConstraintPoint),\n  \"FR6\": () => (/* reexport */ ContactEndEvent),\n  \"U8o\": () => (/* reexport */ ContactStartEvent),\n  \"kbG\": () => (/* reexport */ CoordPlane),\n  \"oeJ\": () => (/* reexport */ CullingBox),\n  \"iS_\": () => (/* reexport */ DeactivateEvent),\n  \"cGG\": () => (/* reexport */ Debug),\n  \"RPN\": () => (/* reexport */ DebugGraphicsComponent),\n  \"skb\": () => (/* reexport */ DebugSystem),\n  \"SLU\": () => (/* reexport */ DebugText),\n  \"RdJ\": () => (/* reexport */ DegreeOfFreedom),\n  \"gU7\": () => (/* reexport */ Detector),\n  \"LSk\": () => (/* reexport */ Die),\n  \"Nmp\": () => (/* reexport */ Direction),\n  \"d1Y\": () => (/* reexport */ DisplayMode),\n  \"xrL\": () => (/* reexport */ DynamicTree),\n  \"sRW\": () => (/* reexport */ DynamicTreeCollisionProcessor),\n  \"cmV\": () => (/* binding */ EX_VERSION),\n  \"N0Q\": () => (/* reexport */ EaseTo),\n  \"q8b\": () => (/* reexport */ EasingFunctions),\n  \"ynB\": () => (/* reexport */ EdgeCollider),\n  \"jT9\": () => (/* reexport */ ElasticToActorStrategy),\n  \"wAz\": () => (/* reexport */ EmitterType),\n  \"D4V\": () => (/* reexport */ Engine),\n  \"N6H\": () => (/* reexport */ EnterTriggerEvent),\n  \"W1A\": () => (/* reexport */ EnterViewPortEvent),\n  \"JHW\": () => (/* reexport */ Entity),\n  \"v2K\": () => (/* reexport */ EntityManager),\n  \"pBf\": () => (/* reexport */ EventDispatcher),\n  \"GMl\": () => (/* reexport */ EventTypes),\n  \"zW2\": () => (/* reexport */ Events_namespaceObject),\n  \"B0K\": () => (/* reexport */ ExResponse),\n  \"Nv7\": () => (/* reexport */ ExcaliburGraphicsContext2DCanvas),\n  \"C_p\": () => (/* reexport */ ExcaliburGraphicsContextWebGL),\n  \"iqw\": () => (/* reexport */ ExcaliburWebGLContextAccessor),\n  \"MUA\": () => (/* reexport */ ExitTriggerEvent),\n  \"xqU\": () => (/* reexport */ ExitViewPortEvent),\n  \"peG\": () => (/* reexport */ Experiments),\n  \"pTp\": () => (/* reexport */ Fade),\n  \"vUK\": () => (/* reexport */ Flags),\n  \"j9l\": () => (/* reexport */ Follow),\n  \"Zxw\": () => (/* reexport */ Font),\n  \"Hdx\": () => (/* reexport */ FontStyle),\n  \"Z$d\": () => (/* reexport */ FontUnit),\n  \"iqV\": () => (/* reexport */ FpsSampler),\n  \"o$7\": () => (/* reexport */ FrameStats),\n  \"Zm$\": () => (/* reexport */ GameEvent),\n  \"$QH\": () => (/* reexport */ GameStartEvent),\n  \"i78\": () => (/* reexport */ GameStopEvent),\n  \"h6u\": () => (/* reexport */ GamepadAxisEvent),\n  \"hts\": () => (/* reexport */ GamepadButtonEvent),\n  \"j88\": () => (/* reexport */ GamepadConnectEvent),\n  \"VME\": () => (/* reexport */ GamepadDisconnectEvent),\n  \"nt\": () => (/* reexport */ Gif),\n  \"Ukr\": () => (/* reexport */ GlobalCoordinates),\n  \"zsu\": () => (/* reexport */ Graphic),\n  \"oA6\": () => (/* reexport */ GraphicsComponent),\n  \"TVh\": () => (/* reexport */ GraphicsGroup),\n  \"TwZ\": () => (/* reexport */ GraphicsLayer),\n  \"GTT\": () => (/* reexport */ GraphicsLayers),\n  \"xxj\": () => (/* reexport */ GraphicsSystem),\n  \"XdK\": () => (/* reexport */ HiddenEvent),\n  \"Jmb\": () => (/* reexport */ ImageFiltering),\n  \"cXo\": () => (/* reexport */ ImageSource),\n  \"Dm5\": () => (/* reexport */ InitializeEvent),\n  \"IIB\": () => (/* reexport */ Input_Index_namespaceObject),\n  \"zI0\": () => (/* reexport */ Integrator),\n  \"SKZ\": () => (/* reexport */ KillEvent),\n  \"__J\": () => (/* reexport */ Label_Label),\n  \"Dvr\": () => (/* reexport */ Legacy),\n  \"Tf9\": () => (/* reexport */ Drawing_Index_namespaceObject),\n  \"RI$\": () => (/* reexport */ LimitCameraBoundsStrategy),\n  \"x12\": () => (/* reexport */ Line),\n  \"aNw\": () => (/* reexport */ Loader),\n  \"xwn\": () => (/* reexport */ LockCameraToActorAxisStrategy),\n  \"dNK\": () => (/* reexport */ LockCameraToActorStrategy),\n  \"ini\": () => (/* reexport */ LogLevel),\n  \"YdH\": () => (/* reexport */ Logger),\n  \"y3G\": () => (/* reexport */ Matrix),\n  \"l57\": () => (/* reexport */ MatrixLocations),\n  \"xn0\": () => (/* reexport */ MediaEvent),\n  \"t2V\": () => (/* reexport */ Meet),\n  \"ZyS\": () => (/* reexport */ MockedElement),\n  \"uxB\": () => (/* reexport */ MotionComponent),\n  \"cpd\": () => (/* reexport */ MotionSystem),\n  \"fiy\": () => (/* reexport */ MoveBy),\n  \"$XZ\": () => (/* reexport */ MoveTo),\n  \"uqK\": () => (/* reexport */ NativeSoundEvent),\n  \"STE\": () => (/* reexport */ NativeSoundProcessedEvent),\n  \"y$z\": () => (/* reexport */ Observable),\n  \"sOq\": () => (/* reexport */ Pair),\n  \"Sqs\": () => (/* reexport */ ParseGif),\n  \"hpZ\": () => (/* reexport */ Particle),\n  \"Vol\": () => (/* reexport */ ParticleEmitter),\n  \"wIZ\": () => (/* reexport */ Physics),\n  \"cBi\": () => (/* reexport */ PhysicsStats),\n  \"RFv\": () => (/* reexport */ PointerComponent),\n  \"kfC\": () => (/* reexport */ PointerSystem),\n  \"mgq\": () => (/* reexport */ Polygon_Polygon),\n  \"YVA\": () => (/* reexport */ PolygonCollider),\n  \"Kgp\": () => (/* reexport */ Pool),\n  \"HH$\": () => (/* reexport */ PostCollisionEvent),\n  \"M_d\": () => (/* reexport */ PostDebugDrawEvent),\n  \"rgh\": () => (/* reexport */ PostDrawEvent),\n  \"Ra6\": () => (/* reexport */ PostFrameEvent),\n  \"KhR\": () => (/* reexport */ PostKillEvent),\n  \"BS5\": () => (/* reexport */ PostUpdateEvent),\n  \"xhz\": () => (/* reexport */ PreCollisionEvent),\n  \"xOq\": () => (/* reexport */ PreDebugDrawEvent),\n  \"a9j\": () => (/* reexport */ PreDrawEvent),\n  \"bHk\": () => (/* reexport */ PreFrameEvent),\n  \"CgK\": () => (/* reexport */ PreKillEvent),\n  \"cuY\": () => (/* reexport */ PreUpdateEvent),\n  \"kvE\": () => (/* reexport */ Projection),\n  \"JDb\": () => (/* reexport */ Promises_Promise),\n  \"Cbi\": () => (/* reexport */ PromiseState),\n  \"SBu\": () => (/* reexport */ QuadIndexBuffer),\n  \"AE_\": () => (/* reexport */ Query),\n  \"ctO\": () => (/* reexport */ QueryManager),\n  \"OLH\": () => (/* reexport */ RadiusAroundActorStrategy),\n  \"kky\": () => (/* reexport */ Random),\n  \"nSF\": () => (/* reexport */ Raster),\n  \"zHn\": () => (/* reexport */ Ray),\n  \"zwx\": () => (/* reexport */ RealisticSolver),\n  \"AeJ\": () => (/* reexport */ Rectangle),\n  \"hLz\": () => (/* reexport */ RemovedComponent),\n  \"D9g\": () => (/* reexport */ RemovedEntity),\n  \"wA\": () => (/* reexport */ Repeat),\n  \"jhr\": () => (/* reexport */ RepeatForever),\n  \"GVs\": () => (/* reexport */ Resolution),\n  \"_zO\": () => (/* reexport */ Resource),\n  \"w6$\": () => (/* reexport */ RotateBy),\n  \"mhV\": () => (/* reexport */ RotateTo),\n  \"MOD\": () => (/* reexport */ RotationType),\n  \"kwd\": () => (/* reexport */ ScaleBy),\n  \"Lmr\": () => (/* reexport */ ScaleTo),\n  \"xsS\": () => (/* reexport */ Scene),\n  \"lLr\": () => (/* reexport */ Screen),\n  \"Z$r\": () => (/* reexport */ ScreenAppender),\n  \"IXb\": () => (/* reexport */ ScreenElement_ScreenElement),\n  \"SGH\": () => (/* reexport */ ScreenShader),\n  \"SMj\": () => (/* reexport */ ScrollPreventionMode),\n  \"exe\": () => (/* reexport */ Shader),\n  \"bnF\": () => (/* reexport */ Shape),\n  \"MFA\": () => (/* reexport */ Side),\n  \"$XC\": () => (/* reexport */ SortedList),\n  \"$uU\": () => (/* reexport */ Sound),\n  \"jyi\": () => (/* reexport */ Sprite),\n  \"E03\": () => (/* reexport */ SpriteFont_SpriteFont),\n  \"V6q\": () => (/* reexport */ SpriteSheet),\n  \"rg2\": () => (/* reexport */ StandardClock),\n  \"nVo\": () => (/* reexport */ StrategyContainer),\n  \"F6N\": () => (/* reexport */ Stream),\n  \"ad3\": () => (/* reexport */ SubscribeEvent),\n  \"xP7\": () => (/* reexport */ System),\n  \"Odq\": () => (/* reexport */ SystemManager),\n  \"Zif\": () => (/* reexport */ SystemType),\n  \"ZGJ\": () => (/* reexport */ TagComponent),\n  \"MJk\": () => (/* reexport */ TestClock),\n  \"xvT\": () => (/* reexport */ Text),\n  \"PHM\": () => (/* reexport */ TextAlign),\n  \"dpR\": () => (/* reexport */ TextureLoader),\n  \"KwO\": () => (/* reexport */ TileMap),\n  \"B7y\": () => (/* reexport */ Timer),\n  \"SFp\": () => (/* reexport */ Traits_Index_namespaceObject),\n  \"Uvn\": () => (/* reexport */ TransformComponent),\n  \"OFT\": () => (/* reexport */ TreeNode),\n  \"xzN\": () => (/* reexport */ Trigger_Trigger),\n  \"M5Z\": () => (/* reexport */ TwoPI),\n  \"H6j\": () => (/* reexport */ UnsubscribeEvent),\n  \"ZrN\": () => (/* reexport */ Util_Index_namespaceObject),\n  \"OWs\": () => (/* reexport */ Vector),\n  \"dF9\": () => (/* reexport */ VectorView),\n  \"oZy\": () => (/* reexport */ VertexBuffer),\n  \"rD2\": () => (/* reexport */ VertexLayout),\n  \"VHo\": () => (/* reexport */ VisibleEvent),\n  \"ohE\": () => (/* reexport */ WebAudio),\n  \"R$E\": () => (/* reexport */ WebAudioInstance),\n  \"q3I\": () => (/* reexport */ World),\n  \"Pab\": () => (/* reexport */ canonicalizeAngle),\n  \"uZ5\": () => (/* reexport */ clamp),\n  \"McK\": () => (/* reexport */ createId),\n  \"F9c\": () => (/* reexport */ frac),\n  \"k0b\": () => (/* reexport */ hasGraphicsTick),\n  \"hnT\": () => (/* reexport */ hasOnInitialize),\n  \"RSJ\": () => (/* reexport */ hasOnPostUpdate),\n  \"Mku\": () => (/* reexport */ hasOnPreUpdate),\n  \"h90\": () => (/* reexport */ hasPostDraw),\n  \"rms\": () => (/* reexport */ hasPreDraw),\n  \"ErP\": () => (/* reexport */ has_initialize),\n  \"aVg\": () => (/* reexport */ has_postupdate),\n  \"lPc\": () => (/* reexport */ has_preupdate),\n  \"Z8E\": () => (/* reexport */ isAddedComponent),\n  \"NNA\": () => (/* reexport */ isAddedSystemEntity),\n  \"yFn\": () => (/* reexport */ isRemoveSystemEntity),\n  \"lNv\": () => (/* reexport */ isRemovedComponent),\n  \"MZQ\": () => (/* reexport */ maxMessages),\n  \"FUM\": () => (/* reexport */ obsolete),\n  \"vdf\": () => (/* reexport */ randomInRange),\n  \"iaL\": () => (/* reexport */ randomIntInRange),\n  \"w6H\": () => (/* reexport */ range),\n  \"Q4c\": () => (/* reexport */ resetObsoleteCounter),\n  \"Xxe\": () => (/* reexport */ sign),\n  \"Uxb\": () => (/* reexport */ toDegrees),\n  \"Yr5\": () => (/* reexport */ toRadians),\n  \"Bhw\": () => (/* reexport */ vec),\n  \"yOA\": () => (/* reexport */ webgl_util_namespaceObject)\n});\n\n// NAMESPACE OBJECT: ./Graphics/Context/webgl-util.ts\nvar webgl_util_namespaceObject = {};\n__webpack_require__.r(webgl_util_namespaceObject);\n__webpack_require__.d(webgl_util_namespaceObject, {\n  \"ensurePowerOfTwo\": () => (ensurePowerOfTwo),\n  \"getAttributeComponentSize\": () => (getAttributeComponentSize),\n  \"getAttributePointerType\": () => (getAttributePointerType),\n  \"getGlTypeSizeBytes\": () => (getGlTypeSizeBytes),\n  \"isPowerOfTwo\": () => (isPowerOfTwo),\n  \"nextHighestPowerOfTwo\": () => (nextHighestPowerOfTwo)\n});\n\n// NAMESPACE OBJECT: ./Events.ts\nvar Events_namespaceObject = {};\n__webpack_require__.r(Events_namespaceObject);\n__webpack_require__.d(Events_namespaceObject, {\n  \"ActivateEvent\": () => (ActivateEvent),\n  \"CollisionEndEvent\": () => (CollisionEndEvent),\n  \"CollisionPostSolveEvent\": () => (CollisionPostSolveEvent),\n  \"CollisionPreSolveEvent\": () => (CollisionPreSolveEvent),\n  \"CollisionStartEvent\": () => (CollisionStartEvent),\n  \"ContactEndEvent\": () => (ContactEndEvent),\n  \"ContactStartEvent\": () => (ContactStartEvent),\n  \"DeactivateEvent\": () => (DeactivateEvent),\n  \"EnterTriggerEvent\": () => (EnterTriggerEvent),\n  \"EnterViewPortEvent\": () => (EnterViewPortEvent),\n  \"EventTypes\": () => (EventTypes),\n  \"ExitTriggerEvent\": () => (ExitTriggerEvent),\n  \"ExitViewPortEvent\": () => (ExitViewPortEvent),\n  \"GameEvent\": () => (GameEvent),\n  \"GameStartEvent\": () => (GameStartEvent),\n  \"GameStopEvent\": () => (GameStopEvent),\n  \"GamepadAxisEvent\": () => (GamepadAxisEvent),\n  \"GamepadButtonEvent\": () => (GamepadButtonEvent),\n  \"GamepadConnectEvent\": () => (GamepadConnectEvent),\n  \"GamepadDisconnectEvent\": () => (GamepadDisconnectEvent),\n  \"HiddenEvent\": () => (HiddenEvent),\n  \"InitializeEvent\": () => (InitializeEvent),\n  \"KillEvent\": () => (KillEvent),\n  \"PostCollisionEvent\": () => (PostCollisionEvent),\n  \"PostDebugDrawEvent\": () => (PostDebugDrawEvent),\n  \"PostDrawEvent\": () => (PostDrawEvent),\n  \"PostFrameEvent\": () => (PostFrameEvent),\n  \"PostKillEvent\": () => (PostKillEvent),\n  \"PostUpdateEvent\": () => (PostUpdateEvent),\n  \"PreCollisionEvent\": () => (PreCollisionEvent),\n  \"PreDebugDrawEvent\": () => (PreDebugDrawEvent),\n  \"PreDrawEvent\": () => (PreDrawEvent),\n  \"PreFrameEvent\": () => (PreFrameEvent),\n  \"PreKillEvent\": () => (PreKillEvent),\n  \"PreUpdateEvent\": () => (PreUpdateEvent),\n  \"SubscribeEvent\": () => (SubscribeEvent),\n  \"UnsubscribeEvent\": () => (UnsubscribeEvent),\n  \"VisibleEvent\": () => (VisibleEvent)\n});\n\n// NAMESPACE OBJECT: ./Drawing/SpriteEffects.ts\nvar SpriteEffects_namespaceObject = {};\n__webpack_require__.r(SpriteEffects_namespaceObject);\n__webpack_require__.d(SpriteEffects_namespaceObject, {\n  \"Colorize\": () => (Colorize),\n  \"Darken\": () => (Darken),\n  \"Desaturate\": () => (Desaturate),\n  \"Fill\": () => (Fill),\n  \"Grayscale\": () => (Grayscale),\n  \"Invert\": () => (Invert),\n  \"Lighten\": () => (Lighten),\n  \"Opacity\": () => (Opacity),\n  \"Saturate\": () => (Saturate)\n});\n\n// NAMESPACE OBJECT: ./Util/DrawUtil.ts\nvar DrawUtil_namespaceObject = {};\n__webpack_require__.r(DrawUtil_namespaceObject);\n__webpack_require__.d(DrawUtil_namespaceObject, {\n  \"circle\": () => (circle),\n  \"line\": () => (line),\n  \"point\": () => (point),\n  \"roundRect\": () => (roundRect),\n  \"vector\": () => (vector)\n});\n\n// NAMESPACE OBJECT: ./Drawing/Index.ts\nvar Drawing_Index_namespaceObject = {};\n__webpack_require__.r(Drawing_Index_namespaceObject);\n__webpack_require__.d(Drawing_Index_namespaceObject, {\n  \"Animation\": () => (Animation_Animation),\n  \"CanvasDrawComponent\": () => (CanvasDrawComponent),\n  \"CanvasDrawingSystem\": () => (CanvasDrawingSystem),\n  \"Effects\": () => (SpriteEffects_namespaceObject),\n  \"Polygon\": () => (Polygon),\n  \"Sprite\": () => (Sprite_Sprite),\n  \"SpriteFont\": () => (SpriteFont),\n  \"SpriteSheet\": () => (SpriteSheet_SpriteSheet),\n  \"Texture\": () => (Texture)\n});\n\n// NAMESPACE OBJECT: ./Input/Index.ts\nvar Input_Index_namespaceObject = {};\n__webpack_require__.r(Input_Index_namespaceObject);\n__webpack_require__.d(Input_Index_namespaceObject, {\n  \"Axes\": () => (Axes),\n  \"Buttons\": () => (Buttons),\n  \"Gamepad\": () => (Gamepad),\n  \"Gamepads\": () => (Gamepads),\n  \"KeyEvent\": () => (KeyEvent),\n  \"Keyboard\": () => (Keyboard),\n  \"Keys\": () => (Keys),\n  \"NativePointerButton\": () => (NativePointerButton),\n  \"PointerButton\": () => (PointerButton),\n  \"PointerComponent\": () => (PointerComponent),\n  \"PointerEvent\": () => (PointerEvent),\n  \"PointerEventReceiver\": () => (PointerEventReceiver),\n  \"PointerScope\": () => (PointerScope),\n  \"PointerSystem\": () => (PointerSystem),\n  \"PointerType\": () => (PointerType),\n  \"WheelDeltaMode\": () => (WheelDeltaMode),\n  \"WheelEvent\": () => (WheelEvent)\n});\n\n// NAMESPACE OBJECT: ./Traits/Index.ts\nvar Traits_Index_namespaceObject = {};\n__webpack_require__.r(Traits_Index_namespaceObject);\n__webpack_require__.d(Traits_Index_namespaceObject, {\n  \"OffscreenCulling\": () => (OffscreenCulling)\n});\n\n// NAMESPACE OBJECT: ./Util/Index.ts\nvar Util_Index_namespaceObject = {};\n__webpack_require__.r(Util_Index_namespaceObject);\n__webpack_require__.d(Util_Index_namespaceObject, {\n  \"Collection\": () => (Collection),\n  \"ConsoleAppender\": () => (ConsoleAppender),\n  \"DrawUtil\": () => (DrawUtil_namespaceObject),\n  \"EasingFunctions\": () => (EasingFunctions),\n  \"LogLevel\": () => (LogLevel),\n  \"Logger\": () => (Logger),\n  \"Observable\": () => (Observable),\n  \"ScreenAppender\": () => (ScreenAppender),\n  \"TwoPI\": () => (Util_TwoPI),\n  \"addItemToArray\": () => (addItemToArray),\n  \"canonicalizeAngle\": () => (Util_canonicalizeAngle),\n  \"clamp\": () => (Util_clamp),\n  \"contains\": () => (contains),\n  \"delay\": () => (delay),\n  \"fail\": () => (fail),\n  \"getOppositeSide\": () => (getOppositeSide),\n  \"getPosition\": () => (getPosition),\n  \"getSideFromDirection\": () => (getSideFromDirection),\n  \"randomInRange\": () => (Util_randomInRange),\n  \"randomIntInRange\": () => (Util_randomIntInRange),\n  \"range\": () => (Util_range),\n  \"removeItemFromArray\": () => (removeItemFromArray),\n  \"toDegrees\": () => (Util_toDegrees),\n  \"toRadians\": () => (Util_toRadians)\n});\n\n// EXTERNAL MODULE: ../../node_modules/core-js/es/array/sort.js\nvar sort = __webpack_require__(4662);\n// EXTERNAL MODULE: ../../node_modules/core-js/es/object/keys.js\nvar keys = __webpack_require__(8343);\n;// CONCATENATED MODULE: ./Polyfill.ts\n\r\n\r\n/**\r\n * Polyfill adding function\r\n */\r\nfunction polyfill() {\r\n    /* istanbul ignore next */\r\n    if (typeof window === 'undefined') {\r\n        window = {\r\n            audioContext: function () {\r\n                return;\r\n            }\r\n        };\r\n    }\r\n    /* istanbul ignore next */\r\n    if (typeof window !== 'undefined' && !window.requestAnimationFrame) {\r\n        window.requestAnimationFrame =\r\n            window.webkitRequestAnimationFrame ||\r\n                window.mozRequestAnimationFrame ||\r\n                function (callback) {\r\n                    window.setInterval(callback, 1000 / 60);\r\n                };\r\n    }\r\n    /* istanbul ignore next */\r\n    if (typeof window !== 'undefined' && !window.cancelAnimationFrame) {\r\n        window.cancelAnimationFrame =\r\n            window.webkitCancelAnimationFrame ||\r\n                window.mozCancelAnimationFrame ||\r\n                function () {\r\n                    return;\r\n                };\r\n    }\r\n    /* istanbul ignore next */\r\n    if (typeof window !== 'undefined' && !window.AudioContext) {\r\n        if (window.webkitAudioContext) {\r\n            const ctx = window.webkitAudioContext;\r\n            const replaceMe = ctx.prototype.decodeAudioData;\r\n            window.webkitAudioContext.prototype.decodeAudioData = function (arrayBuffer) {\r\n                return new Promise((resolve, reject) => {\r\n                    replaceMe.call(this, arrayBuffer, resolve, reject);\r\n                });\r\n            };\r\n        }\r\n        window.AudioContext =\r\n            window.AudioContext ||\r\n                window.webkitAudioContext ||\r\n                window.mozAudioContext ||\r\n                window.msAudioContext ||\r\n                window.oAudioContext;\r\n    }\r\n    /* istanbul ignore next */\r\n    if (typeof window !== 'undefined' && !window.devicePixelRatio) {\r\n        window.devicePixelRatio = window.devicePixelRatio || 1;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Flags.ts\n/**\r\n * Features in preview\r\n */\r\nvar Experiments;\r\n(function (Experiments) {\r\n    Experiments[\"WebGL\"] = \"use-webgl\";\r\n})(Experiments || (Experiments = {}));\r\n/**\r\n * Legacy features that will go away\r\n */\r\nvar Legacy;\r\n(function (Legacy) {\r\n    Legacy[\"Canvas\"] = \"use-canvas-context\";\r\n    Legacy[\"LegacyDrawing\"] = \"use-legacy-drawing\";\r\n})(Legacy || (Legacy = {}));\r\n/**\r\n * Flags is a feature flag implementation for Excalibur. They can only be operated **before [[Engine]] construction**\r\n * after which they are frozen and are read-only.\r\n *\r\n * Flags are used to enable experimental or preview features in Excalibur.\r\n */\r\nclass Flags {\r\n    /**\r\n     * Freeze all flag modifications making them readonly\r\n     */\r\n    static freeze() {\r\n        Flags._FROZEN = true;\r\n    }\r\n    /**\r\n     * Resets internal flag state, not meant to be called by users. Only used for testing.\r\n     *\r\n     * Calling this in your game is UNSUPPORTED\r\n     * @internal\r\n     */\r\n    static _reset() {\r\n        Flags._FROZEN = false;\r\n        Flags._FLAGS = {};\r\n    }\r\n    /**\r\n     * Turn on webgl support\r\n     */\r\n    static useWebGL() {\r\n        Flags.enable(Experiments.WebGL);\r\n    }\r\n    static useCanvasGraphicsContext() {\r\n        Flags.enable(Legacy.Canvas);\r\n    }\r\n    /**\r\n     * @deprecated Recommended not to use legacy drawing, going away in v0.26.0\r\n     */\r\n    static useLegacyDrawing() {\r\n        Flags.enable(Legacy.LegacyDrawing);\r\n    }\r\n    /**\r\n     * Enable a specific feature flag by name. **Note: can only be set before [[Engine]] constructor time**\r\n     * @param flagName\r\n     */\r\n    static enable(flagName) {\r\n        if (this._FROZEN) {\r\n            throw Error('Feature flags can only be enabled before Engine constructor time');\r\n        }\r\n        Flags._FLAGS[flagName] = true;\r\n    }\r\n    /**\r\n     * Disable a specific feature flag by name. **Note: can only be set before [[Engine]] constructor time**\r\n     * @param flagName\r\n     */\r\n    static disable(flagName) {\r\n        if (this._FROZEN) {\r\n            throw Error('Feature flags can only be disabled before Engine constructor time');\r\n        }\r\n        Flags._FLAGS[flagName] = false;\r\n    }\r\n    /**\r\n     * Check if a flag is enabled. If the flag is disabled or does not exist `false` is returned\r\n     * @param flagName\r\n     */\r\n    static isEnabled(flagName) {\r\n        return !!Flags._FLAGS[flagName];\r\n    }\r\n    /**\r\n     * Show a list of currently known flags\r\n     */\r\n    static show() {\r\n        return Object.keys(Flags._FLAGS);\r\n    }\r\n}\r\nFlags._FROZEN = false;\r\nFlags._FLAGS = {};\r\n\n;// CONCATENATED MODULE: ./Id.ts\n/**\r\n * Create a branded ID type from a number\r\n */\r\nfunction createId(type, value) {\r\n    return { type, value };\r\n}\r\n;\r\n\n;// CONCATENATED MODULE: ./Util/Log.ts\n/* eslint-disable no-console */\r\n/**\r\n * Logging level that Excalibur will tag\r\n */\r\nvar LogLevel;\r\n(function (LogLevel) {\r\n    LogLevel[LogLevel[\"Debug\"] = 0] = \"Debug\";\r\n    LogLevel[LogLevel[\"Info\"] = 1] = \"Info\";\r\n    LogLevel[LogLevel[\"Warn\"] = 2] = \"Warn\";\r\n    LogLevel[LogLevel[\"Error\"] = 3] = \"Error\";\r\n    LogLevel[LogLevel[\"Fatal\"] = 4] = \"Fatal\";\r\n})(LogLevel || (LogLevel = {}));\r\n/**\r\n * Static singleton that represents the logging facility for Excalibur.\r\n * Excalibur comes built-in with a [[ConsoleAppender]] and [[ScreenAppender]].\r\n * Derive from [[Appender]] to create your own logging appenders.\r\n */\r\nclass Logger {\r\n    constructor() {\r\n        this._appenders = [];\r\n        /**\r\n         * Gets or sets the default logging level. Excalibur will only log\r\n         * messages if equal to or above this level. Default: [[LogLevel.Info]]\r\n         */\r\n        this.defaultLevel = LogLevel.Info;\r\n        if (Logger._INSTANCE) {\r\n            throw new Error('Logger is a singleton');\r\n        }\r\n        Logger._INSTANCE = this;\r\n        // Default console appender\r\n        Logger._INSTANCE.addAppender(new ConsoleAppender());\r\n        return Logger._INSTANCE;\r\n    }\r\n    /**\r\n     * Gets the current static instance of Logger\r\n     */\r\n    static getInstance() {\r\n        if (Logger._INSTANCE == null) {\r\n            Logger._INSTANCE = new Logger();\r\n        }\r\n        return Logger._INSTANCE;\r\n    }\r\n    /**\r\n     * Adds a new [[Appender]] to the list of appenders to write to\r\n     */\r\n    addAppender(appender) {\r\n        this._appenders.push(appender);\r\n    }\r\n    /**\r\n     * Clears all appenders from the logger\r\n     */\r\n    clearAppenders() {\r\n        this._appenders.length = 0;\r\n    }\r\n    /**\r\n     * Logs a message at a given LogLevel\r\n     * @param level  The LogLevel`to log the message at\r\n     * @param args   An array of arguments to write to an appender\r\n     */\r\n    _log(level, args) {\r\n        if (level == null) {\r\n            level = this.defaultLevel;\r\n        }\r\n        const len = this._appenders.length;\r\n        for (let i = 0; i < len; i++) {\r\n            if (level >= this.defaultLevel) {\r\n                this._appenders[i].log(level, args);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Writes a log message at the [[LogLevel.Debug]] level\r\n     * @param args  Accepts any number of arguments\r\n     */\r\n    debug(...args) {\r\n        this._log(LogLevel.Debug, args);\r\n    }\r\n    /**\r\n     * Writes a log message at the [[LogLevel.Info]] level\r\n     * @param args  Accepts any number of arguments\r\n     */\r\n    info(...args) {\r\n        this._log(LogLevel.Info, args);\r\n    }\r\n    /**\r\n     * Writes a log message at the [[LogLevel.Warn]] level\r\n     * @param args  Accepts any number of arguments\r\n     */\r\n    warn(...args) {\r\n        this._log(LogLevel.Warn, args);\r\n    }\r\n    /**\r\n     * Writes a log message at the [[LogLevel.Error]] level\r\n     * @param args  Accepts any number of arguments\r\n     */\r\n    error(...args) {\r\n        this._log(LogLevel.Error, args);\r\n    }\r\n    /**\r\n     * Writes a log message at the [[LogLevel.Fatal]] level\r\n     * @param args  Accepts any number of arguments\r\n     */\r\n    fatal(...args) {\r\n        this._log(LogLevel.Fatal, args);\r\n    }\r\n}\r\nLogger._INSTANCE = null;\r\n/**\r\n * Console appender for browsers (i.e. `console.log`)\r\n */\r\nclass ConsoleAppender {\r\n    /**\r\n     * Logs a message at the given [[LogLevel]]\r\n     * @param level  Level to log at\r\n     * @param args   Arguments to log\r\n     */\r\n    log(level, args) {\r\n        // Check for console support\r\n        if (!console && !console.log && console.warn && console.error) {\r\n            // todo maybe do something better than nothing\r\n            return;\r\n        }\r\n        // Create a new console args array\r\n        const consoleArgs = [];\r\n        consoleArgs.unshift.apply(consoleArgs, args);\r\n        consoleArgs.unshift('[' + LogLevel[level] + '] : ');\r\n        if (level < LogLevel.Warn) {\r\n            // Call .log for Debug/Info\r\n            if (console.log.apply) {\r\n                // this is required on some older browsers that don't support apply on console.log :(\r\n                console.log.apply(console, consoleArgs);\r\n            }\r\n            else {\r\n                console.log(consoleArgs.join(' '));\r\n            }\r\n        }\r\n        else if (level < LogLevel.Error) {\r\n            // Call .warn for Warn\r\n            if (console.warn.apply) {\r\n                console.warn.apply(console, consoleArgs);\r\n            }\r\n            else {\r\n                console.warn(consoleArgs.join(' '));\r\n            }\r\n        }\r\n        else {\r\n            // Call .error for Error/Fatal\r\n            if (console.error.apply) {\r\n                console.error.apply(console, consoleArgs);\r\n            }\r\n            else {\r\n                console.error(consoleArgs.join(' '));\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * On-screen (canvas) appender\r\n */\r\nclass ScreenAppender {\r\n    /**\r\n     * @param width   Width of the screen appender in pixels\r\n     * @param height  Height of the screen appender in pixels\r\n     */\r\n    constructor(width, height) {\r\n        // @todo Clean this up\r\n        this._messages = [];\r\n        this._canvas = document.createElement('canvas');\r\n        this._canvas.width = width || window.innerWidth;\r\n        this._canvas.height = height || window.innerHeight;\r\n        this._canvas.style.position = 'absolute';\r\n        // eslint-disable-next-line\r\n        this._ctx = this._canvas.getContext('2d'); // eslint-disable-line\r\n        document.body.appendChild(this._canvas);\r\n    }\r\n    /**\r\n     * Logs a message at the given [[LogLevel]]\r\n     * @param level  Level to log at\r\n     * @param args   Arguments to log\r\n     */\r\n    log(level, args) {\r\n        const message = args.join(',');\r\n        this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);\r\n        this._messages.unshift('[' + LogLevel[level] + '] : ' + message);\r\n        let pos = 10;\r\n        let opacity = 1.0;\r\n        for (let i = 0; i < this._messages.length; i++) {\r\n            this._ctx.fillStyle = 'rgba(255,255,255,' + opacity.toFixed(2) + ')';\r\n            this._ctx.fillText(this._messages[i], 200, pos);\r\n            pos += 10;\r\n            opacity = opacity > 0 ? opacity - 0.05 : 0;\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Util/Decorators.ts\n\r\n\r\nconst maxMessages = 5;\r\nconst obsoleteMessage = {};\r\nconst resetObsoleteCounter = () => {\r\n    for (const message in obsoleteMessage) {\r\n        obsoleteMessage[message] = 0;\r\n    }\r\n};\r\nconst logMessage = (message, options) => {\r\n    const suppressObsoleteMessages = Flags.isEnabled('suppress-obsolete-message');\r\n    if (obsoleteMessage[message] < maxMessages && !suppressObsoleteMessages) {\r\n        Logger.getInstance().warn(message);\r\n        // tslint:disable-next-line: no-console\r\n        if (console.trace && options.showStackTrace) {\r\n            // tslint:disable-next-line: no-console\r\n            console.trace();\r\n        }\r\n    }\r\n    obsoleteMessage[message]++;\r\n};\r\n/**\r\n * Obsolete decorator for marking Excalibur methods obsolete, you can optionally specify a custom message and/or alternate replacement\r\n * method do the deprecated one. Inspired by https://github.com/jayphelps/core-decorators.js\r\n */\r\nfunction obsolete(options) {\r\n    options = {\r\n        message: 'This feature will be removed in future versions of Excalibur.',\r\n        alternateMethod: null,\r\n        showStackTrace: false,\r\n        ...options\r\n    };\r\n    return function (target, property, descriptor) {\r\n        if (descriptor &&\r\n            !(typeof descriptor.value === 'function' || typeof descriptor.get === 'function' || typeof descriptor.set === 'function')) {\r\n            throw new SyntaxError('Only classes/functions/getters/setters can be marked as obsolete');\r\n        }\r\n        const methodSignature = `${target.name || ''}${target.name && property ? '.' : ''}${property ? property : ''}`;\r\n        const message = `${methodSignature} is marked obsolete: ${options.message}` +\r\n            (options.alternateMethod ? ` Use ${options.alternateMethod} instead` : '');\r\n        if (!obsoleteMessage[message]) {\r\n            obsoleteMessage[message] = 0;\r\n        }\r\n        // If descriptor is null it is a class\r\n        const method = descriptor ? { ...descriptor } : target;\r\n        if (!descriptor) {\r\n            // with es2015 classes we need to change our decoration tactic\r\n            class DecoratedClass extends method {\r\n                constructor(...args) {\r\n                    logMessage(message, options);\r\n                    super(...args);\r\n                }\r\n            }\r\n            return DecoratedClass;\r\n        }\r\n        if (descriptor && descriptor.value) {\r\n            method.value = function () {\r\n                logMessage(message, options);\r\n                return descriptor.value.apply(this, arguments);\r\n            };\r\n            return method;\r\n        }\r\n        if (descriptor && descriptor.get) {\r\n            method.get = function () {\r\n                logMessage(message, options);\r\n                return descriptor.get.apply(this, arguments);\r\n            };\r\n        }\r\n        if (descriptor && descriptor.set) {\r\n            method.set = function () {\r\n                logMessage(message, options);\r\n                return descriptor.set.apply(this, arguments);\r\n            };\r\n        }\r\n        return method;\r\n    };\r\n}\r\n\n;// CONCATENATED MODULE: ./Math/vector.ts\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\n\r\n/**\r\n * A 2D vector on a plane.\r\n */\r\nclass Vector {\r\n    /**\r\n     * @param x  X component of the Vector\r\n     * @param y  Y component of the Vector\r\n     */\r\n    constructor(x, y) {\r\n        this._x = 0;\r\n        this._y = 0;\r\n        this._x = x;\r\n        this._y = y;\r\n    }\r\n    /**\r\n     * A (0, 0) vector\r\n     */\r\n    static get Zero() {\r\n        return new Vector(0, 0);\r\n    }\r\n    /**\r\n     * A (1, 1) vector\r\n     */\r\n    static get One() {\r\n        return new Vector(1, 1);\r\n    }\r\n    /**\r\n     * A (0.5, 0.5) vector\r\n     */\r\n    static get Half() {\r\n        return new Vector(0.5, 0.5);\r\n    }\r\n    /**\r\n     * A unit vector pointing up (0, -1)\r\n     */\r\n    static get Up() {\r\n        return new Vector(0, -1);\r\n    }\r\n    /**\r\n     * A unit vector pointing down (0, 1)\r\n     */\r\n    static get Down() {\r\n        return new Vector(0, 1);\r\n    }\r\n    /**\r\n     * A unit vector pointing left (-1, 0)\r\n     */\r\n    static get Left() {\r\n        return new Vector(-1, 0);\r\n    }\r\n    /**\r\n     * A unit vector pointing right (1, 0)\r\n     */\r\n    static get Right() {\r\n        return new Vector(1, 0);\r\n    }\r\n    /**\r\n     * Returns a vector of unit length in the direction of the specified angle in Radians.\r\n     * @param angle The angle to generate the vector\r\n     */\r\n    static fromAngle(angle) {\r\n        return new Vector(Math.cos(angle), Math.sin(angle));\r\n    }\r\n    /**\r\n     * Checks if vector is not null, undefined, or if any of its components are NaN or Infinity.\r\n     */\r\n    static isValid(vec) {\r\n        if (vec === null || vec === undefined) {\r\n            return false;\r\n        }\r\n        if (isNaN(vec.x) || isNaN(vec.y)) {\r\n            return false;\r\n        }\r\n        if (vec.x === Infinity || vec.y === Infinity || vec.x === -Infinity || vec.y === -Infinity) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * Calculates distance between two Vectors\r\n     * @param vec1\r\n     * @param vec2\r\n     */\r\n    static distance(vec1, vec2) {\r\n        return Math.sqrt(Math.pow(vec1.x - vec2.x, 2) + Math.pow(vec1.y - vec2.y, 2));\r\n    }\r\n    /**\r\n     * Get the x component of the vector\r\n     */\r\n    get x() {\r\n        return this._x;\r\n    }\r\n    /**\r\n     * Set the x component, THIS MUTATES the current vector. It is usually better to create a new vector.\r\n     * @warning **Be very careful setting components on shared vectors, mutating shared vectors can cause hard to find bugs**\r\n     */\r\n    set x(val) {\r\n        this._x = val;\r\n    }\r\n    /**\r\n     * Get the y component of the vector\r\n     */\r\n    get y() {\r\n        return this._y;\r\n    }\r\n    /**\r\n     * Set the y component, THIS MUTATES the current vector. It is usually better to create a new vector.\r\n     * @warning **Be very careful setting components on shared vectors, mutating shared vectors can cause hard to find bugs**\r\n     */\r\n    set y(val) {\r\n        this._y = val;\r\n    }\r\n    /**\r\n     * Sets the x and y components at once, THIS MUTATES the current vector. It is usually better to create a new vector.\r\n     *\r\n     * @warning **Be very careful using this, mutating vectors can cause hard to find bugs**\r\n     */\r\n    setTo(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    /**\r\n     * Compares this point against another and tests for equality\r\n     * @param vector The other point to compare to\r\n     * @param tolerance Amount of euclidean distance off we are willing to tolerate\r\n     */\r\n    equals(vector, tolerance = 0.001) {\r\n        return Math.abs(this.x - vector.x) <= tolerance && Math.abs(this.y - vector.y) <= tolerance;\r\n    }\r\n    /**\r\n     * The distance to another vector. If no other Vector is specified, this will return the [[magnitude]].\r\n     * @param v  The other vector. Leave blank to use origin vector.\r\n     */\r\n    distance(v) {\r\n        if (!v) {\r\n            v = Vector.Zero;\r\n        }\r\n        return Math.sqrt(Math.pow(this.x - v.x, 2) + Math.pow(this.y - v.y, 2));\r\n    }\r\n    squareDistance(v) {\r\n        if (!v) {\r\n            v = Vector.Zero;\r\n        }\r\n        return Math.pow(this.x - v.x, 2) + Math.pow(this.y - v.y, 2);\r\n    }\r\n    /**\r\n     * The magnitude (size) of the Vector\r\n     * @deprecated magnitude will be removed in favour of '.size' in version 0.25.0\r\n     */\r\n    magnitude() {\r\n        return this.distance();\r\n    }\r\n    /**\r\n     * The size (magnitude) of the Vector\r\n     */\r\n    get size() {\r\n        return this.distance();\r\n    }\r\n    /**\r\n     * Setting the size mutates the current vector\r\n     *\r\n     * @warning Can be used to set the size of the vector, **be very careful using this, mutating vectors can cause hard to find bugs**\r\n     */\r\n    set size(newLength) {\r\n        const v = this.normalize().scale(newLength);\r\n        this.setTo(v.x, v.y);\r\n    }\r\n    /**\r\n     * Normalizes a vector to have a magnitude of 1.\r\n     */\r\n    normalize() {\r\n        const d = this.distance();\r\n        if (d > 0) {\r\n            return new Vector(this.x / d, this.y / d);\r\n        }\r\n        else {\r\n            return new Vector(0, 1);\r\n        }\r\n    }\r\n    /**\r\n     * Returns the average (midpoint) between the current point and the specified\r\n     */\r\n    average(vec) {\r\n        return this.add(vec).scale(0.5);\r\n    }\r\n    scale(sizeOrScale) {\r\n        if (sizeOrScale instanceof Vector) {\r\n            return new Vector(this.x * sizeOrScale.x, this.y * sizeOrScale.y);\r\n        }\r\n        else {\r\n            return new Vector(this.x * sizeOrScale, this.y * sizeOrScale);\r\n        }\r\n    }\r\n    /**\r\n     * Adds one vector to another\r\n     * @param v The vector to add\r\n     */\r\n    add(v) {\r\n        return new Vector(this.x + v.x, this.y + v.y);\r\n    }\r\n    /**\r\n     * Subtracts a vector from another, if you subtract vector `B.sub(A)` the resulting vector points from A -> B\r\n     * @param v The vector to subtract\r\n     */\r\n    sub(v) {\r\n        return new Vector(this.x - v.x, this.y - v.y);\r\n    }\r\n    /**\r\n     * Adds one vector to this one modifying the original\r\n     * @param v The vector to add\r\n     * @warning Be very careful using this, mutating vectors can cause hard to find bugs\r\n     */\r\n    addEqual(v) {\r\n        this.setTo(this.x + v.x, this.y + v.y);\r\n        return this;\r\n    }\r\n    /**\r\n     * Subtracts a vector from this one modifying the original\r\n     * @param v The vector to subtract\r\n     * @warning Be very careful using this, mutating vectors can cause hard to find bugs\r\n     */\r\n    subEqual(v) {\r\n        this.setTo(this.x - v.x, this.y - v.y);\r\n        return this;\r\n    }\r\n    /**\r\n     * Scales this vector by a factor of size and modifies the original\r\n     * @warning Be very careful using this, mutating vectors can cause hard to find bugs\r\n     */\r\n    scaleEqual(size) {\r\n        this.setTo(this.x * size, this.y * size);\r\n        return this;\r\n    }\r\n    /**\r\n     * Performs a dot product with another vector\r\n     * @param v  The vector to dot\r\n     */\r\n    dot(v) {\r\n        return this.x * v.x + this.y * v.y;\r\n    }\r\n    cross(v) {\r\n        if (v instanceof Vector) {\r\n            return this.x * v.y - this.y * v.x;\r\n        }\r\n        else if (typeof v === 'number') {\r\n            return new Vector(v * this.y, -v * this.x);\r\n        }\r\n    }\r\n    static cross(num, vec) {\r\n        return new Vector(-num * vec.y, num * vec.x);\r\n    }\r\n    /**\r\n     * Returns the perpendicular vector to this one\r\n     */\r\n    perpendicular() {\r\n        return new Vector(this.y, -this.x);\r\n    }\r\n    /**\r\n     * Returns the normal vector to this one, same as the perpendicular of length 1\r\n     */\r\n    normal() {\r\n        return this.perpendicular().normalize();\r\n    }\r\n    /**\r\n     * Negate the current vector\r\n     */\r\n    negate() {\r\n        return this.scale(-1);\r\n    }\r\n    /**\r\n     * Returns the angle of this vector.\r\n     */\r\n    toAngle() {\r\n        return Math.atan2(this.y, this.x);\r\n    }\r\n    /**\r\n     * Rotates the current vector around a point by a certain number of\r\n     * degrees in radians\r\n     */\r\n    rotate(angle, anchor) {\r\n        if (!anchor) {\r\n            anchor = new Vector(0, 0);\r\n        }\r\n        const sinAngle = Math.sin(angle);\r\n        const cosAngle = Math.cos(angle);\r\n        const x = cosAngle * (this.x - anchor.x) - sinAngle * (this.y - anchor.y) + anchor.x;\r\n        const y = sinAngle * (this.x - anchor.x) + cosAngle * (this.y - anchor.y) + anchor.y;\r\n        return new Vector(x, y);\r\n    }\r\n    /**\r\n     * Creates new vector that has the same values as the previous.\r\n     */\r\n    clone() {\r\n        return new Vector(this.x, this.y);\r\n    }\r\n    /**\r\n     * Returns a string representation of the vector.\r\n     */\r\n    toString(fixed) {\r\n        if (fixed) {\r\n            return `(${this.x.toFixed(fixed)}, ${this.y.toFixed(fixed)})`;\r\n        }\r\n        return `(${this.x}, ${this.y})`;\r\n    }\r\n}\r\n__decorate([\r\n    obsolete({ message: 'will be removed in favour of `.size` in version 0.25.0' })\r\n], Vector.prototype, \"magnitude\", null);\r\n/**\r\n * Shorthand for creating new Vectors - returns a new Vector instance with the\r\n * provided X and Y components.\r\n *\r\n * @param x  X component of the Vector\r\n * @param y  Y component of the Vector\r\n */\r\nfunction vec(x, y) {\r\n    return new Vector(x, y);\r\n}\r\n\n;// CONCATENATED MODULE: ./Color.ts\nvar Color_decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\n\r\n/**\r\n * Provides standard colors (e.g. [[Color.Black]])\r\n * but you can also create custom colors using RGB, HSL, or Hex. Also provides\r\n * useful color operations like [[Color.lighten]], [[Color.darken]], and more.\r\n */\r\nclass Color {\r\n    /**\r\n     * Creates a new instance of Color from an r, g, b, a\r\n     *\r\n     * @param r  The red component of color (0-255)\r\n     * @param g  The green component of color (0-255)\r\n     * @param b  The blue component of color (0-255)\r\n     * @param a  The alpha component of color (0-1.0)\r\n     */\r\n    constructor(r, g, b, a) {\r\n        this.r = r;\r\n        this.g = g;\r\n        this.b = b;\r\n        this.a = a != null ? a : 1;\r\n    }\r\n    /**\r\n     * Creates a new instance of Color from an r, g, b, a\r\n     *\r\n     * @param r  The red component of color (0-255)\r\n     * @param g  The green component of color (0-255)\r\n     * @param b  The blue component of color (0-255)\r\n     * @param a  The alpha component of color (0-1.0)\r\n     */\r\n    static fromRGB(r, g, b, a) {\r\n        return new Color(r, g, b, a);\r\n    }\r\n    /**\r\n     * Creates a new instance of Color from a rgb string\r\n     *\r\n     * @param string  CSS color string of the form rgba(255, 255, 255, 1) or rgb(255, 255, 255)\r\n     */\r\n    static fromRGBString(string) {\r\n        const rgbaRegEx = /^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+(?:\\.\\d+)?))?\\)/i;\r\n        let match = null;\r\n        if ((match = string.match(rgbaRegEx))) {\r\n            const r = parseInt(match[1], 10);\r\n            const g = parseInt(match[2], 10);\r\n            const b = parseInt(match[3], 10);\r\n            let a = 1;\r\n            if (match[4]) {\r\n                a = parseFloat(match[4]);\r\n            }\r\n            return new Color(r, g, b, a);\r\n        }\r\n        else {\r\n            throw new Error('Invalid rgb/a string: ' + string);\r\n        }\r\n    }\r\n    /**\r\n     * Creates a new instance of Color from a hex string\r\n     *\r\n     * @param hex  CSS color string of the form #ffffff, the alpha component is optional\r\n     */\r\n    static fromHex(hex) {\r\n        const hexRegEx = /^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i;\r\n        let match = null;\r\n        if ((match = hex.match(hexRegEx))) {\r\n            const r = parseInt(match[1], 16);\r\n            const g = parseInt(match[2], 16);\r\n            const b = parseInt(match[3], 16);\r\n            let a = 1;\r\n            if (match[4]) {\r\n                a = parseInt(match[4], 16) / 255;\r\n            }\r\n            return new Color(r, g, b, a);\r\n        }\r\n        else {\r\n            throw new Error('Invalid hex string: ' + hex);\r\n        }\r\n    }\r\n    /**\r\n     * Creates a new instance of Color from hsla values\r\n     *\r\n     * @param h  Hue is represented [0-1]\r\n     * @param s  Saturation is represented [0-1]\r\n     * @param l  Luminance is represented [0-1]\r\n     * @param a  Alpha is represented [0-1]\r\n     */\r\n    static fromHSL(h, s, l, a = 1.0) {\r\n        const temp = new HSLColor(h, s, l, a);\r\n        return temp.toRGBA();\r\n    }\r\n    /**\r\n     * Lightens the current color by a specified amount\r\n     *\r\n     * @param factor  The amount to lighten by [0-1]\r\n     */\r\n    lighten(factor = 0.1) {\r\n        const temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\r\n        temp.l += (1 - temp.l) * factor;\r\n        return temp.toRGBA();\r\n    }\r\n    /**\r\n     * Darkens the current color by a specified amount\r\n     *\r\n     * @param factor  The amount to darken by [0-1]\r\n     */\r\n    darken(factor = 0.1) {\r\n        const temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\r\n        temp.l -= temp.l * factor;\r\n        return temp.toRGBA();\r\n    }\r\n    /**\r\n     * Saturates the current color by a specified amount\r\n     *\r\n     * @param factor  The amount to saturate by [0-1]\r\n     */\r\n    saturate(factor = 0.1) {\r\n        const temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\r\n        temp.s += temp.s * factor;\r\n        return temp.toRGBA();\r\n    }\r\n    /**\r\n     * Desaturates the current color by a specified amount\r\n     *\r\n     * @param factor  The amount to desaturate by [0-1]\r\n     */\r\n    desaturate(factor = 0.1) {\r\n        const temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\r\n        temp.s -= temp.s * factor;\r\n        return temp.toRGBA();\r\n    }\r\n    /**\r\n     * Multiplies a color by another, results in a darker color\r\n     *\r\n     * @param color  The other color\r\n     */\r\n    multiply(color) {\r\n        const newR = (((color.r / 255) * this.r) / 255) * 255;\r\n        const newG = (((color.g / 255) * this.g) / 255) * 255;\r\n        const newB = (((color.b / 255) * this.b) / 255) * 255;\r\n        const newA = color.a * this.a;\r\n        return new Color(newR, newG, newB, newA);\r\n    }\r\n    /**\r\n     * Multiplies a color by another, results in a darker color\r\n     * @param color\r\n     * @deprecated Alias for incorrect spelling used in older versions, use multiply instead, will be removed in v0.25.0\r\n     */\r\n    mulitiply(color) {\r\n        return this.multiply(color);\r\n    }\r\n    /**\r\n     * Screens a color by another, results in a lighter color\r\n     *\r\n     * @param color  The other color\r\n     */\r\n    screen(color) {\r\n        const color1 = color.invert();\r\n        const color2 = color.invert();\r\n        return color1.multiply(color2).invert();\r\n    }\r\n    /**\r\n     * Inverts the current color\r\n     */\r\n    invert() {\r\n        return new Color(255 - this.r, 255 - this.g, 255 - this.b, 1.0 - this.a);\r\n    }\r\n    /**\r\n     * Averages the current color with another\r\n     *\r\n     * @param color  The other color\r\n     */\r\n    average(color) {\r\n        const newR = (color.r + this.r) / 2;\r\n        const newG = (color.g + this.g) / 2;\r\n        const newB = (color.b + this.b) / 2;\r\n        const newA = (color.a + this.a) / 2;\r\n        return new Color(newR, newG, newB, newA);\r\n    }\r\n    equal(color) {\r\n        return this.toString() === color.toString();\r\n    }\r\n    /**\r\n     * Returns a CSS string representation of a color.\r\n     *\r\n     * @param format Color representation, accepts: rgb, hsl, or hex\r\n     */\r\n    toString(format = 'rgb') {\r\n        switch (format) {\r\n            case 'rgb':\r\n                return this.toRGBA();\r\n            case 'hsl':\r\n                return this.toHSLA();\r\n            case 'hex':\r\n                return this.toHex();\r\n            default:\r\n                throw new Error('Invalid Color format');\r\n        }\r\n    }\r\n    /**\r\n     * Returns Hex Value of a color component\r\n     * @param c color component\r\n     * @see https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb\r\n     */\r\n    _componentToHex(c) {\r\n        const hex = c.toString(16);\r\n        return hex.length === 1 ? '0' + hex : hex;\r\n    }\r\n    /**\r\n     * Return Hex representation of a color.\r\n     */\r\n    toHex() {\r\n        return '#' + this._componentToHex(this.r) + this._componentToHex(this.g) + this._componentToHex(this.b);\r\n    }\r\n    /**\r\n     * Return RGBA representation of a color.\r\n     */\r\n    toRGBA() {\r\n        const result = String(this.r.toFixed(0)) + ', ' + String(this.g.toFixed(0)) + ', ' + String(this.b.toFixed(0));\r\n        if (this.a !== undefined || this.a !== null) {\r\n            return 'rgba(' + result + ', ' + String(this.a) + ')';\r\n        }\r\n        return 'rgb(' + result + ')';\r\n    }\r\n    /**\r\n     * Return HSLA representation of a color.\r\n     */\r\n    toHSLA() {\r\n        return HSLColor.fromRGBA(this.r, this.g, this.b, this.a).toString();\r\n    }\r\n    /**\r\n     * Returns a CSS string representation of a color.\r\n     */\r\n    fillStyle() {\r\n        return this.toString();\r\n    }\r\n    /**\r\n     * Returns a clone of the current color.\r\n     */\r\n    clone() {\r\n        return new Color(this.r, this.g, this.b, this.a);\r\n    }\r\n    /**\r\n     * Black (#000000)\r\n     */\r\n    static get Black() {\r\n        return Color.fromHex('#000000');\r\n    }\r\n    /**\r\n     * White (#FFFFFF)\r\n     */\r\n    static get White() {\r\n        return Color.fromHex('#FFFFFF');\r\n    }\r\n    /**\r\n     * Gray (#808080)\r\n     */\r\n    static get Gray() {\r\n        return Color.fromHex('#808080');\r\n    }\r\n    /**\r\n     * Light gray (#D3D3D3)\r\n     */\r\n    static get LightGray() {\r\n        return Color.fromHex('#D3D3D3');\r\n    }\r\n    /**\r\n     * Dark gray (#A9A9A9)\r\n     */\r\n    static get DarkGray() {\r\n        return Color.fromHex('#A9A9A9');\r\n    }\r\n    /**\r\n     * Yellow (#FFFF00)\r\n     */\r\n    static get Yellow() {\r\n        return Color.fromHex('#FFFF00');\r\n    }\r\n    /**\r\n     * Orange (#FFA500)\r\n     */\r\n    static get Orange() {\r\n        return Color.fromHex('#FFA500');\r\n    }\r\n    /**\r\n     * Red (#FF0000)\r\n     */\r\n    static get Red() {\r\n        return Color.fromHex('#FF0000');\r\n    }\r\n    /**\r\n     * Vermilion (#FF5B31)\r\n     */\r\n    static get Vermilion() {\r\n        return Color.fromHex('#FF5B31');\r\n    }\r\n    /**\r\n     * Vermilion (#FF5B31)\r\n     * @deprecated Alias for incorrect spelling used in older versions, use multiply instead, will be removed in v0.25.0\r\n     */\r\n    static get Vermillion() {\r\n        return Color.Vermilion;\r\n    }\r\n    /**\r\n     * Rose (#FF007F)\r\n     */\r\n    static get Rose() {\r\n        return Color.fromHex('#FF007F');\r\n    }\r\n    /**\r\n     * Magenta (#FF00FF)\r\n     */\r\n    static get Magenta() {\r\n        return Color.fromHex('#FF00FF');\r\n    }\r\n    /**\r\n     * Violet (#7F00FF)\r\n     */\r\n    static get Violet() {\r\n        return Color.fromHex('#7F00FF');\r\n    }\r\n    /**\r\n     * Blue (#0000FF)\r\n     */\r\n    static get Blue() {\r\n        return Color.fromHex('#0000FF');\r\n    }\r\n    /**\r\n     * Azure (#007FFF)\r\n     */\r\n    static get Azure() {\r\n        return Color.fromHex('#007FFF');\r\n    }\r\n    /**\r\n     * Cyan (#00FFFF)\r\n     */\r\n    static get Cyan() {\r\n        return Color.fromHex('#00FFFF');\r\n    }\r\n    /**\r\n     * Viridian (#59978F)\r\n     */\r\n    static get Viridian() {\r\n        return Color.fromHex('#59978F');\r\n    }\r\n    /**\r\n     * Green (#00FF00)\r\n     */\r\n    static get Green() {\r\n        return Color.fromHex('#00FF00');\r\n    }\r\n    /**\r\n     * Chartreuse (#7FFF00)\r\n     */\r\n    static get Chartreuse() {\r\n        return Color.fromHex('#7FFF00');\r\n    }\r\n    /**\r\n     * Transparent (#FFFFFF00)\r\n     */\r\n    static get Transparent() {\r\n        return Color.fromHex('#FFFFFF00');\r\n    }\r\n    /**\r\n     * ExcaliburBlue (#176BAA)\r\n     */\r\n    static get ExcaliburBlue() {\r\n        return Color.fromHex('#176BAA');\r\n    }\r\n}\r\nColor_decorate([\r\n    obsolete({ message: 'Alias for incorrect spelling used in older versions, use multiply instead, will be removed in v0.25.0' })\r\n], Color.prototype, \"mulitiply\", null);\r\nColor_decorate([\r\n    obsolete({\r\n        message: 'Alias for incorrect spelling used in older versions',\r\n        alternateMethod: 'Vermilion'\r\n    })\r\n], Color, \"Vermillion\", null);\r\n/**\r\n * Internal HSL Color representation\r\n *\r\n * http://en.wikipedia.org/wiki/HSL_and_HSV\r\n * http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\r\n */\r\nclass HSLColor {\r\n    constructor(h, s, l, a) {\r\n        this.h = h;\r\n        this.s = s;\r\n        this.l = l;\r\n        this.a = a;\r\n    }\r\n    static hue2rgb(p, q, t) {\r\n        if (t < 0) {\r\n            t += 1;\r\n        }\r\n        if (t > 1) {\r\n            t -= 1;\r\n        }\r\n        if (t < 1 / 6) {\r\n            return p + (q - p) * 6 * t;\r\n        }\r\n        if (t < 1 / 2) {\r\n            return q;\r\n        }\r\n        if (t < 2 / 3) {\r\n            return p + (q - p) * (2 / 3 - t) * 6;\r\n        }\r\n        return p;\r\n    }\r\n    static fromRGBA(r, g, b, a) {\r\n        r /= 255;\r\n        g /= 255;\r\n        b /= 255;\r\n        const max = Math.max(r, g, b), min = Math.min(r, g, b);\r\n        let h, s;\r\n        const l = (max + min) / 2;\r\n        if (max === min) {\r\n            h = s = 0; // achromatic\r\n        }\r\n        else {\r\n            const d = max - min;\r\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n            switch (max) {\r\n                case r:\r\n                    h = (g - b) / d + (g < b ? 6 : 0);\r\n                    break;\r\n                case g:\r\n                    h = (b - r) / d + 2;\r\n                    break;\r\n                case b:\r\n                    h = (r - g) / d + 4;\r\n                    break;\r\n            }\r\n            h /= 6;\r\n        }\r\n        return new HSLColor(h, s, l, a);\r\n    }\r\n    toRGBA() {\r\n        let r, g, b;\r\n        if (this.s === 0) {\r\n            r = g = b = this.l; // achromatic\r\n        }\r\n        else {\r\n            const q = this.l < 0.5 ? this.l * (1 + this.s) : this.l + this.s - this.l * this.s;\r\n            const p = 2 * this.l - q;\r\n            r = HSLColor.hue2rgb(p, q, this.h + 1 / 3);\r\n            g = HSLColor.hue2rgb(p, q, this.h);\r\n            b = HSLColor.hue2rgb(p, q, this.h - 1 / 3);\r\n        }\r\n        return new Color(r * 255, g * 255, b * 255, this.a);\r\n    }\r\n    toString() {\r\n        const h = this.h.toFixed(0), s = this.s.toFixed(0), l = this.l.toFixed(0), a = this.a.toFixed(0);\r\n        return `hsla(${h}, ${s}, ${l}, ${a})`;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Side.ts\n\r\n/**\r\n * An enum that describes the sides of an axis aligned box for collision\r\n */\r\nvar Side;\r\n(function (Side) {\r\n    Side[\"None\"] = \"None\";\r\n    Side[\"Top\"] = \"Top\";\r\n    Side[\"Bottom\"] = \"Bottom\";\r\n    Side[\"Left\"] = \"Left\";\r\n    Side[\"Right\"] = \"Right\";\r\n})(Side || (Side = {}));\r\n(function (Side) {\r\n    /**\r\n     * Returns the opposite side from the current\r\n     */\r\n    function getOpposite(side) {\r\n        if (side === Side.Top) {\r\n            return Side.Bottom;\r\n        }\r\n        if (side === Side.Bottom) {\r\n            return Side.Top;\r\n        }\r\n        if (side === Side.Left) {\r\n            return Side.Right;\r\n        }\r\n        if (side === Side.Right) {\r\n            return Side.Left;\r\n        }\r\n        return Side.None;\r\n    }\r\n    Side.getOpposite = getOpposite;\r\n    /**\r\n     * Given a vector, return the Side most in that direction (via dot product)\r\n     */\r\n    function fromDirection(direction) {\r\n        const directions = [Vector.Left, Vector.Right, Vector.Up, Vector.Down];\r\n        const directionEnum = [Side.Left, Side.Right, Side.Top, Side.Bottom];\r\n        let max = -Number.MAX_VALUE;\r\n        let maxIndex = -1;\r\n        for (let i = 0; i < directions.length; i++) {\r\n            if (directions[i].dot(direction) > max) {\r\n                max = directions[i].dot(direction);\r\n                maxIndex = i;\r\n            }\r\n        }\r\n        return directionEnum[maxIndex];\r\n    }\r\n    Side.fromDirection = fromDirection;\r\n})(Side || (Side = {}));\r\n\n;// CONCATENATED MODULE: ./Collision/BoundingBox.ts\n\r\n\r\n\r\n/**\r\n * Axis Aligned collision primitive for Excalibur.\r\n */\r\nclass BoundingBox {\r\n    /**\r\n     * Constructor allows passing of either an object with all coordinate components,\r\n     * or the coordinate components passed separately.\r\n     * @param leftOrOptions    Either x coordinate of the left edge or an options object\r\n     * containing the four coordinate components.\r\n     * @param top     y coordinate of the top edge\r\n     * @param right   x coordinate of the right edge\r\n     * @param bottom  y coordinate of the bottom edge\r\n     */\r\n    constructor(leftOrOptions = 0, top = 0, right = 0, bottom = 0) {\r\n        if (typeof leftOrOptions === 'object') {\r\n            this.left = leftOrOptions.left;\r\n            this.top = leftOrOptions.top;\r\n            this.right = leftOrOptions.right;\r\n            this.bottom = leftOrOptions.bottom;\r\n        }\r\n        else if (typeof leftOrOptions === 'number') {\r\n            this.left = leftOrOptions;\r\n            this.top = top;\r\n            this.right = right;\r\n            this.bottom = bottom;\r\n        }\r\n    }\r\n    /**\r\n     * Given bounding box A & B, returns the side relative to A when intersection is performed.\r\n     * @param intersection Intersection vector between 2 bounding boxes\r\n     */\r\n    static getSideFromIntersection(intersection) {\r\n        if (!intersection) {\r\n            return Side.None;\r\n        }\r\n        if (intersection) {\r\n            if (Math.abs(intersection.x) > Math.abs(intersection.y)) {\r\n                if (intersection.x < 0) {\r\n                    return Side.Right;\r\n                }\r\n                return Side.Left;\r\n            }\r\n            else {\r\n                if (intersection.y < 0) {\r\n                    return Side.Bottom;\r\n                }\r\n                return Side.Top;\r\n            }\r\n        }\r\n        return Side.None;\r\n    }\r\n    static fromPoints(points) {\r\n        let minX = Infinity;\r\n        let minY = Infinity;\r\n        let maxX = -Infinity;\r\n        let maxY = -Infinity;\r\n        for (let i = 0; i < points.length; i++) {\r\n            if (points[i].x < minX) {\r\n                minX = points[i].x;\r\n            }\r\n            if (points[i].x > maxX) {\r\n                maxX = points[i].x;\r\n            }\r\n            if (points[i].y < minY) {\r\n                minY = points[i].y;\r\n            }\r\n            if (points[i].y > maxY) {\r\n                maxY = points[i].y;\r\n            }\r\n        }\r\n        return new BoundingBox(minX, minY, maxX, maxY);\r\n    }\r\n    static fromDimension(width, height, anchor = Vector.Half, pos = Vector.Zero) {\r\n        return new BoundingBox(-width * anchor.x + pos.x, -height * anchor.y + pos.y, width - width * anchor.x + pos.x, height - height * anchor.y + pos.y);\r\n    }\r\n    /**\r\n     * Returns the calculated width of the bounding box\r\n     */\r\n    get width() {\r\n        return this.right - this.left;\r\n    }\r\n    /**\r\n     * Returns the calculated height of the bounding box\r\n     */\r\n    get height() {\r\n        return this.bottom - this.top;\r\n    }\r\n    /**\r\n     * Return whether the bounding box has zero dimensions in height,width or both\r\n     */\r\n    hasZeroDimensions() {\r\n        return this.width === 0 || this.height === 0;\r\n    }\r\n    /**\r\n     * Returns the center of the bounding box\r\n     */\r\n    get center() {\r\n        return new Vector((this.left + this.right) / 2, (this.top + this.bottom) / 2);\r\n    }\r\n    translate(pos) {\r\n        return new BoundingBox(this.left + pos.x, this.top + pos.y, this.right + pos.x, this.bottom + pos.y);\r\n    }\r\n    /**\r\n     * Rotates a bounding box by and angle and around a point, if no point is specified (0, 0) is used by default. The resulting bounding\r\n     * box is also axis-align. This is useful when a new axis-aligned bounding box is needed for rotated geometry.\r\n     */\r\n    rotate(angle, point = Vector.Zero) {\r\n        const points = this.getPoints().map((p) => p.rotate(angle, point));\r\n        return BoundingBox.fromPoints(points);\r\n    }\r\n    scale(scale, point = Vector.Zero) {\r\n        const shifted = this.translate(point);\r\n        return new BoundingBox(shifted.left * scale.x, shifted.top * scale.y, shifted.right * scale.x, shifted.bottom * scale.y);\r\n    }\r\n    transform(matrix) {\r\n        const points = this.getPoints().map((p) => matrix.multv(p));\r\n        return BoundingBox.fromPoints(points);\r\n    }\r\n    /**\r\n     * Returns the perimeter of the bounding box\r\n     */\r\n    getPerimeter() {\r\n        const wx = this.width;\r\n        const wy = this.height;\r\n        return 2 * (wx + wy);\r\n    }\r\n    getPoints() {\r\n        const results = [];\r\n        results.push(new Vector(this.left, this.top));\r\n        results.push(new Vector(this.right, this.top));\r\n        results.push(new Vector(this.right, this.bottom));\r\n        results.push(new Vector(this.left, this.bottom));\r\n        return results;\r\n    }\r\n    /**\r\n     * Determines whether a ray intersects with a bounding box\r\n     */\r\n    rayCast(ray, farClipDistance = Infinity) {\r\n        // algorithm from https://tavianator.com/fast-branchless-raybounding-box-intersections/\r\n        let tmin = -Infinity;\r\n        let tmax = +Infinity;\r\n        const xinv = ray.dir.x === 0 ? Number.MAX_VALUE : 1 / ray.dir.x;\r\n        const yinv = ray.dir.y === 0 ? Number.MAX_VALUE : 1 / ray.dir.y;\r\n        const tx1 = (this.left - ray.pos.x) * xinv;\r\n        const tx2 = (this.right - ray.pos.x) * xinv;\r\n        tmin = Math.min(tx1, tx2);\r\n        tmax = Math.max(tx1, tx2);\r\n        const ty1 = (this.top - ray.pos.y) * yinv;\r\n        const ty2 = (this.bottom - ray.pos.y) * yinv;\r\n        tmin = Math.max(tmin, Math.min(ty1, ty2));\r\n        tmax = Math.min(tmax, Math.max(ty1, ty2));\r\n        return tmax >= Math.max(0, tmin) && tmin < farClipDistance;\r\n    }\r\n    rayCastTime(ray, farClipDistance = Infinity) {\r\n        // algorithm from https://tavianator.com/fast-branchless-raybounding-box-intersections/\r\n        let tmin = -Infinity;\r\n        let tmax = +Infinity;\r\n        const xinv = ray.dir.x === 0 ? Number.MAX_VALUE : 1 / ray.dir.x;\r\n        const yinv = ray.dir.y === 0 ? Number.MAX_VALUE : 1 / ray.dir.y;\r\n        const tx1 = (this.left - ray.pos.x) * xinv;\r\n        const tx2 = (this.right - ray.pos.x) * xinv;\r\n        tmin = Math.min(tx1, tx2);\r\n        tmax = Math.max(tx1, tx2);\r\n        const ty1 = (this.top - ray.pos.y) * yinv;\r\n        const ty2 = (this.bottom - ray.pos.y) * yinv;\r\n        tmin = Math.max(tmin, Math.min(ty1, ty2));\r\n        tmax = Math.min(tmax, Math.max(ty1, ty2));\r\n        if (tmax >= Math.max(0, tmin) && tmin < farClipDistance) {\r\n            return tmin;\r\n        }\r\n        return -1;\r\n    }\r\n    contains(val) {\r\n        if (val instanceof Vector) {\r\n            return this.left <= val.x && this.top <= val.y && this.bottom >= val.y && this.right >= val.x;\r\n        }\r\n        else if (val instanceof BoundingBox) {\r\n            if (this.left < val.left && this.top < val.top && val.bottom < this.bottom && val.right < this.right) {\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Combines this bounding box and another together returning a new bounding box\r\n     * @param other  The bounding box to combine\r\n     */\r\n    combine(other) {\r\n        const compositeBB = new BoundingBox(Math.min(this.left, other.left), Math.min(this.top, other.top), Math.max(this.right, other.right), Math.max(this.bottom, other.bottom));\r\n        return compositeBB;\r\n    }\r\n    get dimensions() {\r\n        return new Vector(this.width, this.height);\r\n    }\r\n    /**\r\n     * Test wether this bounding box intersects with another returning\r\n     * the intersection vector that can be used to resolve the collision. If there\r\n     * is no intersection null is returned.\r\n     *\r\n     * @param other  Other [[BoundingBox]] to test intersection with\r\n     * @returns A Vector in the direction of the current BoundingBox, this <- other\r\n     */\r\n    intersect(other) {\r\n        const totalBoundingBox = this.combine(other);\r\n        // If the total bounding box is less than or equal the sum of the 2 bounds then there is collision\r\n        if (totalBoundingBox.width < other.width + this.width &&\r\n            totalBoundingBox.height < other.height + this.height &&\r\n            !totalBoundingBox.dimensions.equals(other.dimensions) &&\r\n            !totalBoundingBox.dimensions.equals(this.dimensions)) {\r\n            // collision\r\n            let overlapX = 0;\r\n            // right edge is between the other's left and right edge\r\n            /**\r\n             *     +-this-+\r\n             *     |      |\r\n             *     |    +-other-+\r\n             *     +----|-+     |\r\n             *          |       |\r\n             *          +-------+\r\n             *         <---\r\n             *          ^ overlap\r\n             */\r\n            if (this.right >= other.left && this.right <= other.right) {\r\n                overlapX = other.left - this.right;\r\n                // right edge is past the other's right edge\r\n                /**\r\n                 *     +-other-+\r\n                 *     |       |\r\n                 *     |    +-this-+\r\n                 *     +----|--+   |\r\n                 *          |      |\r\n                 *          +------+\r\n                 *          --->\r\n                 *          ^ overlap\r\n                 */\r\n            }\r\n            else {\r\n                overlapX = other.right - this.left;\r\n            }\r\n            let overlapY = 0;\r\n            // top edge is between the other's top and bottom edge\r\n            /**\r\n             *     +-other-+\r\n             *     |       |\r\n             *     |    +-this-+   | <- overlap\r\n             *     +----|--+   |   |\r\n             *          |      |  \\ /\r\n             *          +------+   '\r\n             */\r\n            if (this.top <= other.bottom && this.top >= other.top) {\r\n                overlapY = other.bottom - this.top;\r\n                // top edge is above the other top edge\r\n                /**\r\n                 *     +-this-+         .\r\n                 *     |      |        / \\\r\n                 *     |    +-other-+   | <- overlap\r\n                 *     +----|-+     |   |\r\n                 *          |       |\r\n                 *          +-------+\r\n                 */\r\n            }\r\n            else {\r\n                overlapY = other.top - this.bottom;\r\n            }\r\n            if (Math.abs(overlapX) < Math.abs(overlapY)) {\r\n                return new Vector(overlapX, 0);\r\n            }\r\n            else {\r\n                return new Vector(0, overlapY);\r\n            }\r\n            // Case of total containment of one bounding box by another\r\n        }\r\n        else if (totalBoundingBox.dimensions.equals(other.dimensions) || totalBoundingBox.dimensions.equals(this.dimensions)) {\r\n            let overlapX = 0;\r\n            // this is wider than the other\r\n            if (this.width - other.width >= 0) {\r\n                // This right edge is closest to the others right edge\r\n                if (this.right - other.right <= other.left - this.left) {\r\n                    overlapX = other.left - this.right;\r\n                    // This left edge is closest to the others left edge\r\n                }\r\n                else {\r\n                    overlapX = other.right - this.left;\r\n                }\r\n                // other is wider than this\r\n            }\r\n            else {\r\n                // This right edge is closest to the others right edge\r\n                if (other.right - this.right <= this.left - other.left) {\r\n                    overlapX = this.left - other.right;\r\n                    // This left edge is closest to the others left edge\r\n                }\r\n                else {\r\n                    overlapX = this.right - other.left;\r\n                }\r\n            }\r\n            let overlapY = 0;\r\n            // this is taller than other\r\n            if (this.height - other.height >= 0) {\r\n                // The bottom edge is closest to the others bottom edge\r\n                if (this.bottom - other.bottom <= other.top - this.top) {\r\n                    overlapY = other.top - this.bottom;\r\n                }\r\n                else {\r\n                    overlapY = other.bottom - this.top;\r\n                }\r\n                // other is taller than this\r\n            }\r\n            else {\r\n                // The bottom edge is closest to the others bottom edge\r\n                if (other.bottom - this.bottom <= this.top - other.top) {\r\n                    overlapY = this.top - other.bottom;\r\n                }\r\n                else {\r\n                    overlapY = this.bottom - other.top;\r\n                }\r\n            }\r\n            if (Math.abs(overlapX) < Math.abs(overlapY)) {\r\n                return new Vector(overlapX, 0);\r\n            }\r\n            else {\r\n                return new Vector(0, overlapY);\r\n            }\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    /**\r\n     * Test whether the bounding box has intersected with another bounding box, returns the side of the current bb that intersected.\r\n     * @param bb The other actor to test\r\n     */\r\n    intersectWithSide(bb) {\r\n        const intersect = this.intersect(bb);\r\n        return BoundingBox.getSideFromIntersection(intersect);\r\n    }\r\n    /**\r\n     *\r\n     * @deprecated signature will change in v0.26.0\r\n     * @param ctx\r\n     * @param color\r\n     */\r\n    /* istanbul ignore next */\r\n    debugDraw(ctx, color = Color.Yellow) {\r\n        ctx.strokeStyle = color.toString();\r\n        ctx.strokeRect(this.left, this.top, this.width, this.height);\r\n    }\r\n    /**\r\n     * Draw a debug bounding box\r\n     * @param ex\r\n     * @param color\r\n     */\r\n    draw(ex, color = Color.Yellow) {\r\n        ex.debug.drawRect(this.left, this.top, this.width, this.height, { color });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Math/Random.ts\n/**\r\n * @module\r\n * Pseudo-Random Utility\r\n *\r\n * A pseudo-random utility to add seeded random support for help in\r\n * generating things like terrain or reproducible randomness. Uses the\r\n * [Mersenne Twister](https://en.wikipedia.org/wiki/Mersenne_Twister) algorithm.\r\n */\r\n/**\r\n * 32-bit mask\r\n */\r\nconst BITMASK32 = 0xffffffff;\r\n/**\r\n * Pseudo-random number generator following the Mersenne_Twister algorithm. Given a seed this generator will produce the same sequence\r\n * of numbers each time it is called.\r\n * See https://en.wikipedia.org/wiki/Mersenne_Twister for more details.\r\n * Uses the MT19937-32 (2002) implementation documented here http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/MT2002/emt19937ar.html\r\n *\r\n * Api inspired by http://chancejs.com/# https://github.com/chancejs/chancejs\r\n */\r\nclass Random {\r\n    /**\r\n     * If no seed is specified, the Date.now() is used\r\n     */\r\n    constructor(seed) {\r\n        this.seed = seed;\r\n        // Separation point of one one word, the number of bits in the lower bitmask 0 <= r <= w-1\r\n        this._lowerMask = 0x7fffffff; // 31 bits same as _r\r\n        this._upperMask = 0x80000000; // 34 high bits\r\n        // Word size, 64 bits\r\n        this._w = 32;\r\n        // Degree of recurrence\r\n        this._n = 624;\r\n        // Middle word, an offset used in the recurrence defining the series x, 1<=m<n\r\n        this._m = 397;\r\n        // coefficients of teh rational normal form twist matrix\r\n        this._a = 0x9908b0df;\r\n        // tempering bit shifts and masks\r\n        this._u = 11;\r\n        this._s = 7;\r\n        this._b = 0x9d2c5680;\r\n        this._t = 15;\r\n        this._c = 0xefc60000;\r\n        this._l = 18;\r\n        this._f = 1812433253;\r\n        this._mt = new Array(this._n);\r\n        // need to mask to support higher bit machines\r\n        this._mt[0] = (seed || Date.now()) >>> 0;\r\n        for (let i = 1; i < this._n; i++) {\r\n            const s = this._mt[i - 1] ^ (this._mt[i - 1] >>> (this._w - 2));\r\n            // numbers are bigger than the JS max safe int, add in 16-bit chunks to prevent IEEE rounding errors on high bits\r\n            this._mt[i] = (((this._f * ((s & 0xffff0000) >>> 16)) << 16) + this._f * (s & 0xffff) + i) >>> 0;\r\n        }\r\n        this._index = this._n;\r\n    }\r\n    /**\r\n     * Apply the twist\r\n     */\r\n    _twist() {\r\n        const mag01 = [0x0, this._a];\r\n        let y = 0, i = 0;\r\n        for (; i < this._n - this._m; i++) {\r\n            y = (this._mt[i] & this._upperMask) | (this._mt[i + 1] & this._lowerMask);\r\n            this._mt[i] = this._mt[i + this._m] ^ (y >>> 1) ^ (mag01[y & 0x1] & BITMASK32);\r\n        }\r\n        for (; i < this._n - 1; i++) {\r\n            y = (this._mt[i] & this._upperMask) | (this._mt[i + 1] & this._lowerMask);\r\n            this._mt[i] = this._mt[i + (this._m - this._n)] ^ (y >>> 1) ^ (mag01[y & 0x1] & BITMASK32);\r\n        }\r\n        y = (this._mt[this._n - 1] & this._upperMask) | (this._mt[0] & this._lowerMask);\r\n        this._mt[this._n - 1] = this._mt[this._m - 1] ^ (y >>> 1) ^ (mag01[y & 0x1] & BITMASK32);\r\n        this._index = 0;\r\n    }\r\n    /**\r\n     * Return next 32 bit integer number in sequence\r\n     */\r\n    nextInt() {\r\n        if (this._index >= this._n) {\r\n            this._twist();\r\n        }\r\n        let y = this._mt[this._index++];\r\n        y ^= y >>> this._u;\r\n        y ^= (y << this._s) & this._b;\r\n        y ^= (y << this._t) & this._c;\r\n        y ^= y >>> this._l;\r\n        return y >>> 0;\r\n    }\r\n    /**\r\n     * Return a random floating point number between [0, 1)\r\n     */\r\n    next() {\r\n        return this.nextInt() * (1.0 / 4294967296.0); // divided by 2^32\r\n    }\r\n    /**\r\n     * Return a random floating point in range [min, max) min is included, max is not included\r\n     */\r\n    floating(min, max) {\r\n        return (max - min) * this.next() + min;\r\n    }\r\n    /**\r\n     * Return a random integer in range [min, max] min is included, max is included.\r\n     * Implemented with rejection sampling, see https://medium.com/@betable/tifu-by-using-math-random-f1c308c4fd9d#.i13tdiu5a\r\n     */\r\n    integer(min, max) {\r\n        return Math.floor((max - min + 1) * this.next() + min);\r\n    }\r\n    /**\r\n     * Returns true or false randomly with 50/50 odds by default.\r\n     * By default the likelihood of returning a true is .5 (50%).\r\n     * @param likelihood takes values between [0, 1]\r\n     */\r\n    bool(likelihood = 0.5) {\r\n        return this.next() <= likelihood;\r\n    }\r\n    /**\r\n     * Returns one element from an array at random\r\n     */\r\n    pickOne(array) {\r\n        return array[this.integer(0, array.length - 1)];\r\n    }\r\n    /**\r\n     * Returns a new array random picking elements from the original\r\n     * @param array Original array to pick from\r\n     * @param numPicks can be any positive number\r\n     * @param allowDuplicates indicates whether the returned set is allowed duplicates (it does not mean there will always be duplicates\r\n     * just that it is possible)\r\n     */\r\n    pickSet(array, numPicks, allowDuplicates = false) {\r\n        if (allowDuplicates) {\r\n            return this._pickSetWithDuplicates(array, numPicks);\r\n        }\r\n        else {\r\n            return this._pickSetWithoutDuplicates(array, numPicks);\r\n        }\r\n    }\r\n    /**\r\n     * Returns a new array randomly picking elements in the original (not reused)\r\n     * @param array Array to pick elements out of\r\n     * @param numPicks must be less than or equal to the number of elements in the array.\r\n     */\r\n    _pickSetWithoutDuplicates(array, numPicks) {\r\n        if (numPicks > array.length || numPicks < 0) {\r\n            throw new Error('Invalid number of elements to pick, must pick a value 0 < n <= length');\r\n        }\r\n        if (numPicks === array.length) {\r\n            return array;\r\n        }\r\n        const result = new Array(numPicks);\r\n        let currentPick = 0;\r\n        const tempArray = array.slice(0);\r\n        while (currentPick < numPicks) {\r\n            const index = this.integer(0, tempArray.length - 1);\r\n            result[currentPick++] = tempArray[index];\r\n            tempArray.splice(index, 1);\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * Returns a new array random picking elements from the original allowing duplicates\r\n     * @param array Array to pick elements out of\r\n     * @param numPicks can be any positive number\r\n     */\r\n    _pickSetWithDuplicates(array, numPicks) {\r\n        // Typescript numbers are all floating point, so do we add check for int? (or floor the input?)\r\n        if (numPicks < 0) {\r\n            throw new Error('Invalid number of elements to pick, must pick a value 0 <= n < MAX_INT');\r\n        }\r\n        const result = new Array(numPicks);\r\n        for (let i = 0; i < numPicks; i++) {\r\n            result[i] = this.pickOne(array);\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * Returns a new array that has its elements shuffled. Using the Fisher/Yates method\r\n     * https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle\r\n     */\r\n    shuffle(array) {\r\n        const tempArray = array.slice(0);\r\n        let swap = null;\r\n        for (let i = 0; i < tempArray.length - 2; i++) {\r\n            const randomIndex = this.integer(i, tempArray.length - 1);\r\n            swap = tempArray[i];\r\n            tempArray[i] = tempArray[randomIndex];\r\n            tempArray[randomIndex] = swap;\r\n        }\r\n        return tempArray;\r\n    }\r\n    /**\r\n     * Generate a list of random integer numbers\r\n     * @param length the length of the final array\r\n     * @param min the minimum integer number to generate inclusive\r\n     * @param max the maximum integer number to generate inclusive\r\n     */\r\n    range(length, min, max) {\r\n        const result = new Array(length);\r\n        for (let i = 0; i < length; i++) {\r\n            result[i] = this.integer(min, max);\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * Returns the result of a d4 dice roll\r\n     */\r\n    d4() {\r\n        return this.integer(1, 4);\r\n    }\r\n    /**\r\n     * Returns the result of a d6 dice roll\r\n     */\r\n    d6() {\r\n        return this.integer(1, 6);\r\n    }\r\n    /**\r\n     * Returns the result of a d8 dice roll\r\n     */\r\n    d8() {\r\n        return this.integer(1, 8);\r\n    }\r\n    /**\r\n     * Returns the result of a d10 dice roll\r\n     */\r\n    d10() {\r\n        return this.integer(1, 10);\r\n    }\r\n    /**\r\n     * Returns the result of a d12 dice roll\r\n     */\r\n    d12() {\r\n        return this.integer(1, 12);\r\n    }\r\n    /**\r\n     * Returns the result of a d20 dice roll\r\n     */\r\n    d20() {\r\n        return this.integer(1, 20);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Math/util.ts\n\r\n/**\r\n * Two PI constant\r\n */\r\nconst TwoPI = Math.PI * 2;\r\n/**\r\n * Returns the fractional part of a number\r\n * @param x\r\n */\r\nfunction frac(x) {\r\n    if (x >= 0) {\r\n        return x - Math.floor(x);\r\n    }\r\n    else {\r\n        return x - Math.ceil(x);\r\n    }\r\n}\r\n/**\r\n * Returns the sign of a number, if 0 returns 0\r\n */\r\nfunction sign(val) {\r\n    if (val === 0) {\r\n        return 0;\r\n    }\r\n    return val < 0 ? -1 : 1;\r\n}\r\n;\r\n/**\r\n * Clamps a value between a min and max inclusive\r\n */\r\nfunction clamp(val, min, max) {\r\n    return Math.min(Math.max(min, val), max);\r\n}\r\n/**\r\n * Convert an angle to be the equivalent in the range [0, 2PI]\r\n */\r\nfunction canonicalizeAngle(angle) {\r\n    let tmpAngle = angle;\r\n    if (angle > TwoPI) {\r\n        while (tmpAngle > TwoPI) {\r\n            tmpAngle -= TwoPI;\r\n        }\r\n    }\r\n    if (angle < 0) {\r\n        while (tmpAngle < 0) {\r\n            tmpAngle += TwoPI;\r\n        }\r\n    }\r\n    return tmpAngle;\r\n}\r\n/**\r\n * Convert radians to degrees\r\n */\r\nfunction toDegrees(radians) {\r\n    return (180 / Math.PI) * radians;\r\n}\r\n/**\r\n * Convert degrees to radians\r\n */\r\nfunction toRadians(degrees) {\r\n    return (degrees / 180) * Math.PI;\r\n}\r\n/**\r\n * Generate a range of numbers\r\n * For example: range(0, 5) -> [0, 1, 2, 3, 4, 5]\r\n * @param from inclusive\r\n * @param to inclusive\r\n */\r\nconst range = (from, to) => Array.from(new Array(to - from + 1), (_x, i) => i + from);\r\n/**\r\n * Find a random floating point number in range\r\n */\r\nfunction randomInRange(min, max, random = new Random()) {\r\n    return random ? random.floating(min, max) : min + Math.random() * (max - min);\r\n}\r\n/**\r\n * Find a random integer in a range\r\n */\r\nfunction randomIntInRange(min, max, random = new Random()) {\r\n    return random ? random.integer(min, max) : Math.round(randomInRange(min, max));\r\n}\r\n\n;// CONCATENATED MODULE: ./Util/Util.ts\n\r\n\r\n// TODO remove in v0.26.0\r\n// Re-export hack to deprecate import site gently\r\n\r\n/**\r\n * @deprecated ex.Util.TwoPI import site will be removed in v0.26.0, use ex.TwoPI\r\n */\r\nconst Util_TwoPI = TwoPI;\r\n/**\r\n * @deprecated ex.Util.clamp import site will be removed in v0.26.0, use ex.clamp\r\n */\r\nconst Util_clamp = clamp;\r\n/**\r\n * @deprecated ex.Util.randomInRange import site will be removed in v0.26.0, use ex.randomInRange\r\n */\r\nconst Util_randomInRange = randomInRange;\r\n/**\r\n * @deprecated ex.Util.randomIntInRange import site will be removed in v0.26.0, use ex.randomIntInRange\r\n */\r\nconst Util_randomIntInRange = randomIntInRange;\r\n/**\r\n * @deprecated ex.Util.canonicalizeAngle import site will be removed in v0.26.0, use ex.canonicalizeAngle\r\n */\r\nconst Util_canonicalizeAngle = canonicalizeAngle;\r\n/**\r\n * @deprecated ex.Util.toDegrees import site will be removed in v0.26.0, use ex.toDegrees\r\n */\r\nconst Util_toDegrees = toDegrees;\r\n/**\r\n * @deprecated ex.Util.toRadians import site will be removed in v0.26.0, use ex.toRadians\r\n */\r\nconst Util_toRadians = toRadians;\r\n/**\r\n * @deprecated ex.Util.range import site will be removed in v0.26.0, use ex.range\r\n */\r\nconst Util_range = range;\r\n// TODO END REMOVE in v0.26.0\r\n/**\r\n * Find the screen position of an HTML element\r\n */\r\nfunction getPosition(el) {\r\n    let oLeft = 0, oTop = 0;\r\n    const calcOffsetLeft = (parent) => {\r\n        oLeft += parent.offsetLeft;\r\n        if (parent.offsetParent) {\r\n            calcOffsetLeft(parent.offsetParent);\r\n        }\r\n    };\r\n    const calcOffsetTop = (parent) => {\r\n        oTop += parent.offsetTop;\r\n        if (parent.offsetParent) {\r\n            calcOffsetTop(parent.offsetParent);\r\n        }\r\n    };\r\n    calcOffsetLeft(el);\r\n    calcOffsetTop(el);\r\n    return new Vector(oLeft, oTop);\r\n}\r\n/**\r\n * Add an item to an array list if it doesn't already exist. Returns true if added, false if not and already exists in the array.\r\n * @deprecated Will be removed in v0.26.0\r\n */\r\nfunction addItemToArray(item, array) {\r\n    if (array.indexOf(item) === -1) {\r\n        array.push(item);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Remove an item from an list\r\n * @deprecated Will be removed in v0.26.0\r\n */\r\nfunction removeItemFromArray(item, array) {\r\n    let index = -1;\r\n    if ((index = array.indexOf(item)) > -1) {\r\n        array.splice(index, 1);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * See if an array contains something\r\n */\r\nfunction contains(array, obj) {\r\n    for (let i = 0; i < array.length; i++) {\r\n        if (array[i] === obj) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Get the opposite side\r\n * TODO: Move to Side type\r\n * @deprecated Will be removed in v0.26.0\r\n */\r\nfunction getOppositeSide(side) {\r\n    if (side === Side.Top) {\r\n        return Side.Bottom;\r\n    }\r\n    if (side === Side.Bottom) {\r\n        return Side.Top;\r\n    }\r\n    if (side === Side.Left) {\r\n        return Side.Right;\r\n    }\r\n    if (side === Side.Right) {\r\n        return Side.Left;\r\n    }\r\n    return Side.None;\r\n}\r\n/**\r\n * Returns the side in the direction of the vector supplied\r\n * @param direction Vector to check\r\n * @deprecated\r\n * TODO: Move to Side type\r\n */\r\nfunction getSideFromDirection(direction) {\r\n    const directions = [Vector.Left, Vector.Right, Vector.Up, Vector.Down];\r\n    const directionEnum = [Side.Left, Side.Right, Side.Top, Side.Bottom];\r\n    let max = -Number.MAX_VALUE;\r\n    let maxIndex = -1;\r\n    for (let i = 0; i < directions.length; i++) {\r\n        if (directions[i].dot(direction) > max) {\r\n            max = directions[i].dot(direction);\r\n            maxIndex = i;\r\n        }\r\n    }\r\n    return directionEnum[maxIndex];\r\n}\r\n/**\r\n * Excalibur's dynamically resizing collection\r\n * @deprecated Will be removed v0.26.0\r\n */\r\nclass Collection {\r\n    /**\r\n     * @param initialSize  Initial size of the internal backing array\r\n     */\r\n    constructor(initialSize = Collection.DefaultSize) {\r\n        this._internalArray = null;\r\n        this._endPointer = 0;\r\n        this._internalArray = new Array(initialSize);\r\n    }\r\n    _resize() {\r\n        const newSize = this._internalArray.length * 2;\r\n        const newArray = new Array(newSize);\r\n        const count = this.count();\r\n        for (let i = 0; i < count; i++) {\r\n            newArray[i] = this._internalArray[i];\r\n        }\r\n        delete this._internalArray;\r\n        this._internalArray = newArray;\r\n    }\r\n    /**\r\n     * Push elements to the end of the collection\r\n     */\r\n    push(element) {\r\n        if (this._endPointer === this._internalArray.length) {\r\n            this._resize();\r\n        }\r\n        return (this._internalArray[this._endPointer++] = element);\r\n    }\r\n    /**\r\n     * Removes elements from the end of the collection\r\n     */\r\n    pop() {\r\n        this._endPointer = this._endPointer - 1 < 0 ? 0 : this._endPointer - 1;\r\n        return this._internalArray[this._endPointer];\r\n    }\r\n    /**\r\n     * Returns the count of the collection\r\n     */\r\n    count() {\r\n        return this._endPointer;\r\n    }\r\n    /**\r\n     * Empties the collection\r\n     */\r\n    clear() {\r\n        this._endPointer = 0;\r\n    }\r\n    /**\r\n     * Returns the size of the internal backing array\r\n     */\r\n    internalSize() {\r\n        return this._internalArray.length;\r\n    }\r\n    /**\r\n     * Returns an element at a specific index\r\n     * @param index  Index of element to retrieve\r\n     */\r\n    elementAt(index) {\r\n        if (index >= this.count()) {\r\n            //Logger.getInstance().error('Invalid parameter: ' + index);\r\n            throw new Error('Invalid index ' + index);\r\n        }\r\n        return this._internalArray[index];\r\n    }\r\n    /**\r\n     * Inserts an element at a specific index\r\n     * @param index  Index to insert the element\r\n     * @param value  Element to insert\r\n     */\r\n    insert(index, value) {\r\n        if (index >= this.count()) {\r\n            this._resize();\r\n        }\r\n        return (this._internalArray[index] = value);\r\n    }\r\n    /**\r\n     * Removes an element at a specific index\r\n     * @param index  Index of element to remove\r\n     */\r\n    remove(index) {\r\n        const count = this.count();\r\n        if (count === 0) {\r\n            //Logger.getInstance().error('Invalid parameter: ' + index);\r\n            throw new Error('Invalid parameter ' + index);\r\n        }\r\n        // O(n) Shift\r\n        const removed = this._internalArray[index];\r\n        for (let i = index; i < count; i++) {\r\n            this._internalArray[i] = this._internalArray[i + 1];\r\n        }\r\n        this._endPointer--;\r\n        return removed;\r\n    }\r\n    /**\r\n     * Removes an element by reference\r\n     * @param element  Element to retrieve\r\n     */\r\n    removeElement(element) {\r\n        const index = this._internalArray.indexOf(element);\r\n        this.remove(index);\r\n    }\r\n    /**\r\n     * Returns a array representing the collection\r\n     */\r\n    toArray() {\r\n        return this._internalArray.slice(0, this._endPointer);\r\n    }\r\n    /**\r\n     * Iterate over every element in the collection\r\n     * @param func  Callback to call for each element passing a reference to the element and its index, returned values are ignored\r\n     */\r\n    forEach(func) {\r\n        let i = 0;\r\n        const count = this.count();\r\n        for (i; i < count; i++) {\r\n            func.call(this, this._internalArray[i], i);\r\n        }\r\n    }\r\n    /**\r\n     * Mutate every element in the collection\r\n     * @param func  Callback to call for each element passing a reference to the element and its index, any values returned mutate\r\n     * the collection\r\n     */\r\n    map(func) {\r\n        const count = this.count();\r\n        for (let i = 0; i < count; i++) {\r\n            this._internalArray[i] = func.call(this, this._internalArray[i], i);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Default collection size\r\n */\r\nCollection.DefaultSize = 200;\r\n/**\r\n * Used for exhaustive checks at compile time\r\n */\r\nfunction fail(message) {\r\n    throw new Error(message);\r\n}\r\n/**\r\n * Create a promise that resolves after a certain number of milliseconds\r\n *\r\n * It is strongly recommended you pass the excalibur clock so delays are bound to the\r\n * excalibur clock which would be unaffected by stop/pause.\r\n * @param milliseconds\r\n * @param clock\r\n */\r\nfunction delay(milliseconds, clock) {\r\n    var _a;\r\n    const schedule = (_a = clock === null || clock === void 0 ? void 0 : clock.schedule.bind(clock)) !== null && _a !== void 0 ? _a : setTimeout;\r\n    return new Promise(resolve => {\r\n        schedule(() => {\r\n            resolve();\r\n        }, milliseconds);\r\n    });\r\n}\r\n\n;// CONCATENATED MODULE: ./Math/matrix.ts\n\r\n\r\n\r\nvar MatrixLocations;\r\n(function (MatrixLocations) {\r\n    MatrixLocations[MatrixLocations[\"X\"] = 12] = \"X\";\r\n    MatrixLocations[MatrixLocations[\"Y\"] = 13] = \"Y\";\r\n})(MatrixLocations || (MatrixLocations = {}));\r\n/**\r\n * Excalibur Matrix helper for 4x4 matrices\r\n *\r\n * Useful for webgl 4x4 matrices\r\n */\r\nclass Matrix {\r\n    constructor() {\r\n        /**\r\n         *  4x4 matrix in column major order\r\n         *\r\n         * |         |         |          |          |\r\n         * | ------- | ------- | -------- |          |\r\n         * | data[0] | data[4] | data[8]  | data[12] |\r\n         * | data[1] | data[5] | data[9]  | data[13] |\r\n         * | data[2] | data[6] | data[10] | data[14] |\r\n         * | data[3] | data[7] | data[11] | data[15] |\r\n         *\r\n         */\r\n        this.data = new Float32Array(16);\r\n        this._scaleSignX = 1;\r\n        this._scaleSignY = 1;\r\n    }\r\n    /**\r\n     * Creates an orthographic (flat non-perspective) projection\r\n     * https://en.wikipedia.org/wiki/Orthographic_projection\r\n     * @param left\r\n     * @param right\r\n     * @param bottom\r\n     * @param top\r\n     * @param near\r\n     * @param far\r\n     */\r\n    static ortho(left, right, bottom, top, near, far) {\r\n        const mat = new Matrix();\r\n        mat.data[0] = 2 / (right - left);\r\n        mat.data[1] = 0;\r\n        mat.data[2] = 0;\r\n        mat.data[3] = 0;\r\n        mat.data[4] = 0;\r\n        mat.data[5] = 2 / (top - bottom);\r\n        mat.data[6] = 0;\r\n        mat.data[7] = 0;\r\n        mat.data[8] = 0;\r\n        mat.data[9] = 0;\r\n        mat.data[10] = -2 / (far - near);\r\n        mat.data[11] = 0;\r\n        mat.data[12] = -(right + left) / (right - left);\r\n        mat.data[13] = -(top + bottom) / (top - bottom);\r\n        mat.data[14] = -(far + near) / (far - near);\r\n        mat.data[15] = 1;\r\n        return mat;\r\n    }\r\n    /**\r\n     * Creates a new Matrix with the same data as the current 4x4\r\n     */\r\n    clone() {\r\n        const mat = new Matrix();\r\n        mat.data[0] = this.data[0];\r\n        mat.data[1] = this.data[1];\r\n        mat.data[2] = this.data[2];\r\n        mat.data[3] = this.data[3];\r\n        mat.data[4] = this.data[4];\r\n        mat.data[5] = this.data[5];\r\n        mat.data[6] = this.data[6];\r\n        mat.data[7] = this.data[7];\r\n        mat.data[8] = this.data[8];\r\n        mat.data[9] = this.data[9];\r\n        mat.data[10] = this.data[10];\r\n        mat.data[11] = this.data[11];\r\n        mat.data[12] = this.data[12];\r\n        mat.data[13] = this.data[13];\r\n        mat.data[14] = this.data[14];\r\n        mat.data[15] = this.data[15];\r\n        return mat;\r\n    }\r\n    /**\r\n     * Converts the current matrix into a DOMMatrix\r\n     *\r\n     * This is useful when working with the browser Canvas context\r\n     * @returns {DOMMatrix} DOMMatrix\r\n     */\r\n    toDOMMatrix() {\r\n        return new DOMMatrix([...this.data]);\r\n    }\r\n    /**\r\n     * Creates a new identity matrix (a matrix that when applied does nothing)\r\n     */\r\n    static identity() {\r\n        const mat = new Matrix();\r\n        mat.data[0] = 1;\r\n        mat.data[1] = 0;\r\n        mat.data[2] = 0;\r\n        mat.data[3] = 0;\r\n        mat.data[4] = 0;\r\n        mat.data[5] = 1;\r\n        mat.data[6] = 0;\r\n        mat.data[7] = 0;\r\n        mat.data[8] = 0;\r\n        mat.data[9] = 0;\r\n        mat.data[10] = 1;\r\n        mat.data[11] = 0;\r\n        mat.data[12] = 0;\r\n        mat.data[13] = 0;\r\n        mat.data[14] = 0;\r\n        mat.data[15] = 1;\r\n        return mat;\r\n    }\r\n    /**\r\n     * Resets the current matrix to the identity matrix, mutating it\r\n     * @returns {Matrix} Current matrix as identity\r\n     */\r\n    reset() {\r\n        const mat = this;\r\n        mat.data[0] = 1;\r\n        mat.data[1] = 0;\r\n        mat.data[2] = 0;\r\n        mat.data[3] = 0;\r\n        mat.data[4] = 0;\r\n        mat.data[5] = 1;\r\n        mat.data[6] = 0;\r\n        mat.data[7] = 0;\r\n        mat.data[8] = 0;\r\n        mat.data[9] = 0;\r\n        mat.data[10] = 1;\r\n        mat.data[11] = 0;\r\n        mat.data[12] = 0;\r\n        mat.data[13] = 0;\r\n        mat.data[14] = 0;\r\n        mat.data[15] = 1;\r\n        return mat;\r\n    }\r\n    /**\r\n     * Creates a brand new translation matrix at the specified 3d point\r\n     * @param x\r\n     * @param y\r\n     */\r\n    static translation(x, y) {\r\n        const mat = Matrix.identity();\r\n        mat.data[12] = x;\r\n        mat.data[13] = y;\r\n        return mat;\r\n    }\r\n    /**\r\n     * Creates a brand new scaling matrix with the specified scaling factor\r\n     * @param sx\r\n     * @param sy\r\n     */\r\n    static scale(sx, sy) {\r\n        const mat = Matrix.identity();\r\n        mat.data[0] = sx;\r\n        mat.data[5] = sy;\r\n        mat.data[10] = 1;\r\n        mat.data[15] = 1;\r\n        return mat;\r\n    }\r\n    /**\r\n     * Creates a brand new rotation matrix with the specified angle\r\n     * @param angleRadians\r\n     */\r\n    static rotation(angleRadians) {\r\n        const mat = Matrix.identity();\r\n        mat.data[0] = Math.cos(angleRadians);\r\n        mat.data[4] = -Math.sin(angleRadians);\r\n        mat.data[1] = Math.sin(angleRadians);\r\n        mat.data[5] = Math.cos(angleRadians);\r\n        return mat;\r\n    }\r\n    multv(other) {\r\n        const z = 0;\r\n        if (other instanceof Vector) {\r\n            return new Vector(other.x * this.data[0] + other.y * this.data[4] + z * this.data[6] + 1 * this.data[12], other.x * this.data[1] + other.y * this.data[5] + z * this.data[9] + 1 * this.data[13]);\r\n        }\r\n        else {\r\n            const dest = [\r\n                other[0] * this.data[0] + other[1] * this.data[4] + z * this.data[6] + 1 * this.data[12],\r\n                other[0] * this.data[1] + other[1] * this.data[5] + z * this.data[9] + 1 * this.data[13]\r\n            ];\r\n            return dest;\r\n        }\r\n    }\r\n    /**\r\n     * Multiplies the current matrix by another and returns the resulting matrix\r\n     * @param other\r\n     */\r\n    multm(other) {\r\n        const dest = new Matrix();\r\n        const a11 = this.data[0];\r\n        const a21 = this.data[1];\r\n        const a31 = this.data[2];\r\n        const a41 = this.data[3];\r\n        const a12 = this.data[4];\r\n        const a22 = this.data[5];\r\n        const a32 = this.data[6];\r\n        const a42 = this.data[7];\r\n        const a13 = this.data[8];\r\n        const a23 = this.data[9];\r\n        const a33 = this.data[10];\r\n        const a43 = this.data[11];\r\n        const a14 = this.data[12];\r\n        const a24 = this.data[13];\r\n        const a34 = this.data[14];\r\n        const a44 = this.data[15];\r\n        const b11 = other.data[0];\r\n        const b21 = other.data[1];\r\n        const b31 = other.data[2];\r\n        const b41 = other.data[3];\r\n        const b12 = other.data[4];\r\n        const b22 = other.data[5];\r\n        const b32 = other.data[6];\r\n        const b42 = other.data[7];\r\n        const b13 = other.data[8];\r\n        const b23 = other.data[9];\r\n        const b33 = other.data[10];\r\n        const b43 = other.data[11];\r\n        const b14 = other.data[12];\r\n        const b24 = other.data[13];\r\n        const b34 = other.data[14];\r\n        const b44 = other.data[15];\r\n        dest.data[0] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\r\n        dest.data[1] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\r\n        dest.data[2] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\r\n        dest.data[3] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\r\n        dest.data[4] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\r\n        dest.data[5] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\r\n        dest.data[6] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\r\n        dest.data[7] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\r\n        dest.data[8] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\r\n        dest.data[9] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\r\n        dest.data[10] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\r\n        dest.data[11] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\r\n        dest.data[12] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\r\n        dest.data[13] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\r\n        dest.data[14] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\r\n        dest.data[15] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\r\n        const s = this.getScale();\r\n        dest._scaleSignX = sign(s.x) * sign(dest._scaleSignX);\r\n        dest._scaleSignY = sign(s.y) * sign(dest._scaleSignY);\r\n        return dest;\r\n    }\r\n    /**\r\n     * Applies translation to the current matrix mutating it\r\n     * @param x\r\n     * @param y\r\n     */\r\n    translate(x, y) {\r\n        const a11 = this.data[0];\r\n        const a21 = this.data[1];\r\n        const a31 = this.data[2];\r\n        const a41 = this.data[3];\r\n        const a12 = this.data[4];\r\n        const a22 = this.data[5];\r\n        const a32 = this.data[6];\r\n        const a42 = this.data[7];\r\n        const a13 = this.data[8];\r\n        const a23 = this.data[9];\r\n        const a33 = this.data[10];\r\n        const a43 = this.data[11];\r\n        const a14 = this.data[12];\r\n        const a24 = this.data[13];\r\n        const a34 = this.data[14];\r\n        const a44 = this.data[15];\r\n        // Doesn't change z\r\n        const z = 0;\r\n        const w = 1;\r\n        this.data[12] = a11 * x + a12 * y + a13 * z + a14 * w;\r\n        this.data[13] = a21 * x + a22 * y + a23 * z + a24 * w;\r\n        this.data[14] = a31 * x + a32 * y + a33 * z + a34 * w;\r\n        this.data[15] = a41 * x + a42 * y + a43 * z + a44 * w;\r\n        return this;\r\n    }\r\n    setPosition(x, y) {\r\n        this.data[12] = x;\r\n        this.data[13] = y;\r\n    }\r\n    getPosition() {\r\n        return vec(this.data[12], this.data[13]);\r\n    }\r\n    /**\r\n     * Applies rotation to the current matrix mutating it\r\n     * @param angle in Radians\r\n     */\r\n    rotate(angle) {\r\n        const a11 = this.data[0];\r\n        const a21 = this.data[1];\r\n        const a31 = this.data[2];\r\n        const a41 = this.data[3];\r\n        const a12 = this.data[4];\r\n        const a22 = this.data[5];\r\n        const a32 = this.data[6];\r\n        const a42 = this.data[7];\r\n        const sine = Math.sin(angle);\r\n        const cosine = Math.cos(angle);\r\n        this.data[0] = cosine * a11 + sine * a12;\r\n        this.data[1] = cosine * a21 + sine * a22;\r\n        this.data[2] = cosine * a31 + sine * a32;\r\n        this.data[3] = cosine * a41 + sine * a42;\r\n        this.data[4] = cosine * a12 - sine * a11;\r\n        this.data[5] = cosine * a22 - sine * a21;\r\n        this.data[6] = cosine * a32 - sine * a31;\r\n        this.data[7] = cosine * a42 - sine * a41;\r\n        return this;\r\n    }\r\n    /**\r\n     * Applies scaling to the current matrix mutating it\r\n     * @param x\r\n     * @param y\r\n     */\r\n    scale(x, y) {\r\n        const a11 = this.data[0];\r\n        const a21 = this.data[1];\r\n        const a31 = this.data[2];\r\n        const a41 = this.data[3];\r\n        const a12 = this.data[4];\r\n        const a22 = this.data[5];\r\n        const a32 = this.data[6];\r\n        const a42 = this.data[7];\r\n        this.data[0] = a11 * x;\r\n        this.data[1] = a21 * x;\r\n        this.data[2] = a31 * x;\r\n        this.data[3] = a41 * x;\r\n        this.data[4] = a12 * y;\r\n        this.data[5] = a22 * y;\r\n        this.data[6] = a32 * y;\r\n        this.data[7] = a42 * y;\r\n        return this;\r\n    }\r\n    setRotation(angle) {\r\n        const currentScale = this.getScale();\r\n        const sine = Math.sin(angle);\r\n        const cosine = Math.cos(angle);\r\n        this.data[0] = cosine * currentScale.x;\r\n        this.data[1] = sine * currentScale.y;\r\n        this.data[4] = -sine * currentScale.x;\r\n        this.data[5] = cosine * currentScale.y;\r\n    }\r\n    getRotation() {\r\n        const angle = Math.atan2(this.data[1] / this.getScaleY(), this.data[0] / this.getScaleX());\r\n        return canonicalizeAngle(angle);\r\n    }\r\n    getScaleX() {\r\n        // absolute scale of the matrix (we lose sign so need to add it back)\r\n        const xscale = vec(this.data[0], this.data[4]).size;\r\n        return this._scaleSignX * xscale;\r\n    }\r\n    getScaleY() {\r\n        // absolute scale of the matrix (we lose sign so need to add it back)\r\n        const yscale = vec(this.data[1], this.data[5]).size;\r\n        return this._scaleSignY * yscale;\r\n    }\r\n    /**\r\n     * Get the scale of the matrix\r\n     */\r\n    getScale() {\r\n        return vec(this.getScaleX(), this.getScaleY());\r\n    }\r\n    setScaleX(val) {\r\n        this._scaleSignX = sign(val);\r\n        // negative scale acts like a 180 rotation, so flip\r\n        const xscale = vec(this.data[0] * this._scaleSignX, this.data[4] * this._scaleSignX).normalize();\r\n        this.data[0] = xscale.x * val;\r\n        this.data[4] = xscale.y * val;\r\n    }\r\n    setScaleY(val) {\r\n        this._scaleSignY = sign(val);\r\n        // negative scale acts like a 180 rotation, so flip\r\n        const yscale = vec(this.data[1] * this._scaleSignY, this.data[5] * this._scaleSignY).normalize();\r\n        this.data[1] = yscale.x * val;\r\n        this.data[5] = yscale.y * val;\r\n    }\r\n    setScale(scale) {\r\n        this.setScaleX(scale.x);\r\n        this.setScaleY(scale.y);\r\n    }\r\n    /**\r\n     * Determinant of the upper left 2x2 matrix\r\n     */\r\n    getBasisDeterminant() {\r\n        return this.data[0] * this.data[5] - this.data[1] * this.data[4];\r\n    }\r\n    /**\r\n     * Return the affine inverse, optionally store it in a target matrix.\r\n     *\r\n     * It's recommended you call .reset() the target unless you know what you're doing\r\n     * @param target\r\n     */\r\n    getAffineInverse(target) {\r\n        // See http://negativeprobability.blogspot.com/2011/11/affine-transformations-and-their.html\r\n        // See https://www.mathsisfun.com/algebra/matrix-inverse.html\r\n        // Since we are actually only doing 2D transformations we can use this hack\r\n        // We don't actually use the 3rd or 4th dimension\r\n        const det = this.getBasisDeterminant();\r\n        const inverseDet = 1 / det; // todo zero check\r\n        const a = this.data[0];\r\n        const b = this.data[4];\r\n        const c = this.data[1];\r\n        const d = this.data[5];\r\n        const m = target || Matrix.identity();\r\n        // inverts rotation and scale\r\n        m.data[0] = d * inverseDet;\r\n        m.data[1] = -c * inverseDet;\r\n        m.data[4] = -b * inverseDet;\r\n        m.data[5] = a * inverseDet;\r\n        const tx = this.data[12];\r\n        const ty = this.data[13];\r\n        // invert translation\r\n        // transform translation into the matrix basis created by rot/scale\r\n        m.data[12] = -(tx * m.data[0] + ty * m.data[4]);\r\n        m.data[13] = -(tx * m.data[1] + ty * m.data[5]);\r\n        return m;\r\n    }\r\n    isIdentity() {\r\n        return (this.data[0] === 1 &&\r\n            this.data[1] === 0 &&\r\n            this.data[2] === 0 &&\r\n            this.data[3] === 0 &&\r\n            this.data[4] === 0 &&\r\n            this.data[5] === 1 &&\r\n            this.data[6] === 0 &&\r\n            this.data[7] === 0 &&\r\n            this.data[8] === 0 &&\r\n            this.data[9] === 0 &&\r\n            this.data[10] === 1 &&\r\n            this.data[11] === 0 &&\r\n            this.data[12] === 0 &&\r\n            this.data[13] === 0 &&\r\n            this.data[14] === 0 &&\r\n            this.data[15] === 1);\r\n    }\r\n    toString() {\r\n        return `\r\n[${this.data[0]} ${this.data[4]} ${this.data[8]} ${this.data[12]}]\r\n[${this.data[1]} ${this.data[5]} ${this.data[9]} ${this.data[13]}]\r\n[${this.data[2]} ${this.data[6]} ${this.data[10]} ${this.data[14]}]\r\n[${this.data[3]} ${this.data[7]} ${this.data[11]} ${this.data[15]}]\r\n`;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/transform-stack.ts\n\r\nclass TransformStack {\r\n    constructor() {\r\n        this._transforms = [];\r\n        this._currentTransform = Matrix.identity();\r\n    }\r\n    save() {\r\n        this._transforms.push(this._currentTransform);\r\n        this._currentTransform = this._currentTransform.clone();\r\n    }\r\n    restore() {\r\n        this._currentTransform = this._transforms.pop();\r\n    }\r\n    translate(x, y) {\r\n        return this._currentTransform.translate(x, y);\r\n    }\r\n    rotate(angle) {\r\n        return this._currentTransform.rotate(angle);\r\n    }\r\n    scale(x, y) {\r\n        return this._currentTransform.scale(x, y);\r\n    }\r\n    set current(matrix) {\r\n        this._currentTransform = matrix;\r\n    }\r\n    get current() {\r\n        return this._currentTransform;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/state-stack.ts\nclass StateStack {\r\n    constructor() {\r\n        this._states = [];\r\n        this._currentState = this._getDefaultState();\r\n    }\r\n    _getDefaultState() {\r\n        return {\r\n            opacity: 1\r\n        };\r\n    }\r\n    _cloneState() {\r\n        return {\r\n            opacity: this._currentState.opacity\r\n        };\r\n    }\r\n    save() {\r\n        this._states.push(this._currentState);\r\n        this._currentState = this._cloneState();\r\n    }\r\n    restore() {\r\n        this._currentState = this._states.pop();\r\n    }\r\n    get current() {\r\n        return this._currentState;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Util/Watch.ts\n/**\r\n * Watch an object with a proxy, only fires if property value is different\r\n */\r\nfunction watch(type, change) {\r\n    if (!type) {\r\n        return type;\r\n    }\r\n    if (type.__isProxy === undefined) {\r\n        // expando hack to mark a proxy\r\n        return new Proxy(type, {\r\n            set: (obj, prop, value) => {\r\n                // The default behavior to store the value\r\n                if (obj[prop] !== value) {\r\n                    obj[prop] = value;\r\n                    // Avoid watching private junk\r\n                    if (typeof prop === 'string') {\r\n                        if (prop[0] !== '_') {\r\n                            change(obj);\r\n                        }\r\n                    }\r\n                }\r\n                // Indicate success\r\n                return true;\r\n            },\r\n            get: (obj, prop) => {\r\n                if (prop !== '__isProxy') {\r\n                    return obj[prop];\r\n                }\r\n                return true;\r\n            }\r\n        });\r\n    }\r\n    return type;\r\n}\r\n/**\r\n * Watch an object with a proxy, fires change on any property value change\r\n */\r\nfunction watchAny(type, change) {\r\n    if (!type) {\r\n        return type;\r\n    }\r\n    if (type.__isProxy === undefined) {\r\n        // expando hack to mark a proxy\r\n        return new Proxy(type, {\r\n            set: (obj, prop, value) => {\r\n                // The default behavior to store the value\r\n                obj[prop] = value;\r\n                // Avoid watching private junk\r\n                if (typeof prop === 'string') {\r\n                    if (prop[0] !== '_') {\r\n                        change(obj);\r\n                    }\r\n                }\r\n                // Indicate success\r\n                return true;\r\n            },\r\n            get: (obj, prop) => {\r\n                if (prop !== '__isProxy') {\r\n                    return obj[prop];\r\n                }\r\n                return true;\r\n            }\r\n        });\r\n    }\r\n    return type;\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Graphic.ts\n\r\n\r\n\r\n\r\n/**\r\n * A Graphic is the base Excalibur primitive for something that can be drawn to the [[ExcaliburGraphicsContext]].\r\n * [[Sprite]], [[Animation]], [[GraphicsGroup]], [[Canvas]], [[Rectangle]], [[Circle]], and [[Polygon]] all derive from the\r\n * [[Graphic]] abstract class.\r\n *\r\n * Implementors of a Graphic must override the abstract [[Graphic._drawImage]] method to render an image to the graphics context. Graphic\r\n * handles all the position, rotation, and scale transformations in [[Graphic._preDraw]] and [[Graphic._postDraw]]\r\n */\r\nclass Graphic {\r\n    constructor(options) {\r\n        var _a, _b, _c, _d, _e, _f;\r\n        this.id = Graphic._ID++;\r\n        this.transform = Matrix.identity();\r\n        this._transformStale = true;\r\n        /**\r\n         * Gets or sets wether to show debug information about the graphic\r\n         */\r\n        this.showDebug = false;\r\n        this._flipHorizontal = false;\r\n        this._flipVertical = false;\r\n        this._rotation = 0;\r\n        /**\r\n         * Gets or sets the opacity of the graphic, 0 is transparent, 1 is solid (opaque).\r\n         */\r\n        this.opacity = 1;\r\n        this._scale = Vector.One;\r\n        this._origin = null;\r\n        this._width = 0;\r\n        this._height = 0;\r\n        if (options) {\r\n            this.origin = (_a = options.origin) !== null && _a !== void 0 ? _a : this.origin;\r\n            this.flipHorizontal = (_b = options.flipHorizontal) !== null && _b !== void 0 ? _b : this.flipHorizontal;\r\n            this.flipVertical = (_c = options.flipVertical) !== null && _c !== void 0 ? _c : this.flipVertical;\r\n            this.rotation = (_d = options.rotation) !== null && _d !== void 0 ? _d : this.rotation;\r\n            this.opacity = (_e = options.opacity) !== null && _e !== void 0 ? _e : this.opacity;\r\n            this.scale = (_f = options.scale) !== null && _f !== void 0 ? _f : this.scale;\r\n        }\r\n    }\r\n    isStale() {\r\n        return this._transformStale;\r\n    }\r\n    /**\r\n     * Gets or sets the flipHorizontal, which will flip the graphic horizontally (across the y axis)\r\n     */\r\n    get flipHorizontal() {\r\n        return this._flipHorizontal;\r\n    }\r\n    set flipHorizontal(value) {\r\n        this._flipHorizontal = value;\r\n        this._transformStale = true;\r\n    }\r\n    /**\r\n     * Gets or sets the flipVertical, which will flip the graphic vertically (across the x axis)\r\n     */\r\n    get flipVertical() {\r\n        return this._flipVertical;\r\n    }\r\n    set flipVertical(value) {\r\n        this._flipVertical = value;\r\n        this._transformStale = true;\r\n    }\r\n    /**\r\n     * Gets or sets the rotation of the graphic\r\n     */\r\n    get rotation() {\r\n        return this._rotation;\r\n    }\r\n    set rotation(value) {\r\n        this._rotation = value;\r\n        this._transformStale = true;\r\n    }\r\n    /**\r\n     * Gets or sets the scale of the graphic, this affects the width and\r\n     */\r\n    get scale() {\r\n        return this._scale;\r\n    }\r\n    set scale(value) {\r\n        this._scale = watch(value, () => {\r\n            this._transformStale = true;\r\n        });\r\n        this._transformStale = true;\r\n    }\r\n    /**\r\n     * Gets or sets the origin of the graphic, if not set the center of the graphic is the origin\r\n     */\r\n    get origin() {\r\n        return this._origin;\r\n    }\r\n    set origin(value) {\r\n        this._origin = watch(value, () => {\r\n            this._transformStale = true;\r\n        });\r\n        this._transformStale = true;\r\n    }\r\n    cloneGraphicOptions() {\r\n        return {\r\n            origin: this.origin ? this.origin.clone() : null,\r\n            flipHorizontal: this.flipHorizontal,\r\n            flipVertical: this.flipVertical,\r\n            rotation: this.rotation,\r\n            opacity: this.opacity,\r\n            scale: this.scale ? this.scale.clone() : null\r\n        };\r\n    }\r\n    /**\r\n     * Gets or sets the width of the graphic (always positive)\r\n     */\r\n    get width() {\r\n        return Math.abs(this._width * this.scale.x);\r\n    }\r\n    /**\r\n     * Gets or sets the height of the graphic (always positive)\r\n     */\r\n    get height() {\r\n        return Math.abs(this._height * this.scale.y);\r\n    }\r\n    set width(value) {\r\n        this._width = value;\r\n        this._transformStale = true;\r\n    }\r\n    set height(value) {\r\n        this._height = value;\r\n        this._transformStale = true;\r\n    }\r\n    /**\r\n     * Gets a copy of the bounds in pixels occupied by the graphic on the the screen. This includes scale.\r\n     */\r\n    get localBounds() {\r\n        return BoundingBox.fromDimension(this.width, this.height, Vector.Zero);\r\n    }\r\n    /**\r\n     * Draw the whole graphic to the context including transform\r\n     * @param ex The excalibur graphics context\r\n     * @param x\r\n     * @param y\r\n     */\r\n    draw(ex, x, y) {\r\n        this._preDraw(ex, x, y);\r\n        this._drawImage(ex, 0, 0);\r\n        this._postDraw(ex);\r\n    }\r\n    /**\r\n     * Apply affine transformations to the graphics context to manipulate the graphic before [[Graphic._drawImage]]\r\n     * @param ex\r\n     * @param x\r\n     * @param y\r\n     */\r\n    _preDraw(ex, x, y) {\r\n        ex.save();\r\n        ex.translate(x, y);\r\n        if (this._transformStale) {\r\n            this.transform.reset();\r\n            this.transform.scale(Math.abs(this.scale.x), Math.abs(this.scale.y));\r\n            this._rotate(this.transform);\r\n            this._flip(this.transform);\r\n            this._transformStale = false;\r\n        }\r\n        ex.multiply(this.transform);\r\n        // it is important to multiply alphas so graphics respect the current context\r\n        ex.opacity = ex.opacity * this.opacity;\r\n    }\r\n    _rotate(ex) {\r\n        var _a;\r\n        const scaleDirX = this.scale.x > 0 ? 1 : -1;\r\n        const scaleDirY = this.scale.y > 0 ? 1 : -1;\r\n        const origin = (_a = this.origin) !== null && _a !== void 0 ? _a : vec(this.width / 2, this.height / 2);\r\n        ex.translate(origin.x, origin.y);\r\n        ex.rotate(this.rotation);\r\n        // This is for handling direction changes 1 or -1, that way we don't have mismatched translates()\r\n        ex.scale(scaleDirX, scaleDirY);\r\n        ex.translate(-origin.x, -origin.y);\r\n    }\r\n    _flip(ex) {\r\n        if (this.flipHorizontal) {\r\n            ex.translate(this.width / this.scale.x, 0);\r\n            ex.scale(-1, 1);\r\n        }\r\n        if (this.flipVertical) {\r\n            ex.translate(0, this.height / this.scale.y);\r\n            ex.scale(1, -1);\r\n        }\r\n    }\r\n    /**\r\n     * Apply any additional work after [[Graphic._drawImage]] and restore the context state.\r\n     * @param ex\r\n     */\r\n    _postDraw(ex) {\r\n        if (this.showDebug) {\r\n            ex.debug.drawRect(0, 0, this.width, this.height);\r\n        }\r\n        ex.restore();\r\n    }\r\n}\r\nGraphic._ID = 0;\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/webgl-util.ts\n/**\r\n * Checks if the current number is a power of two\r\n */\r\nfunction isPowerOfTwo(x) {\r\n    return (x & (x - 1)) === 0;\r\n}\r\n/**\r\n * Returns the next highest power of two\r\n */\r\nfunction nextHighestPowerOfTwo(x) {\r\n    --x;\r\n    for (let i = 1; i < 32; i <<= 1) {\r\n        x = x | (x >> i);\r\n    }\r\n    return x + 1;\r\n}\r\n/**\r\n * Returns the input number if a power of two, otherwise the next highest power of two\r\n */\r\nfunction ensurePowerOfTwo(x) {\r\n    if (!isPowerOfTwo(x)) {\r\n        return nextHighestPowerOfTwo(x);\r\n    }\r\n    return x;\r\n}\r\n/**\r\n * Return the size of the GlType in bytes\r\n * @param gl\r\n * @param type\r\n */\r\nfunction getGlTypeSizeBytes(gl, type) {\r\n    switch (type) {\r\n        case gl.FLOAT:\r\n            return 4;\r\n        case gl.SHORT:\r\n            return 2;\r\n        case gl.UNSIGNED_SHORT:\r\n            return 2;\r\n        case gl.BYTE:\r\n            return 1;\r\n        case gl.UNSIGNED_BYTE:\r\n            return 1;\r\n        default:\r\n            return 1;\r\n    }\r\n}\r\n/**\r\n * Based on the type return the number of attribute components\r\n *\r\n * https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/vertexAttribPointer\r\n * @param gl\r\n * @param type\r\n */\r\nfunction getAttributeComponentSize(gl, type) {\r\n    switch (type) {\r\n        case gl.LOW_FLOAT:\r\n        case gl.HIGH_FLOAT:\r\n        case gl.FLOAT:\r\n            return 1;\r\n        case gl.FLOAT_VEC2:\r\n            return 2;\r\n        case gl.FLOAT_VEC3:\r\n            return 3;\r\n        case gl.FLOAT_VEC4:\r\n            return 4;\r\n        case gl.BYTE:\r\n            return 1;\r\n        case gl.UNSIGNED_BYTE:\r\n            return 1;\r\n        case gl.UNSIGNED_SHORT:\r\n        case gl.SHORT:\r\n            return 1;\r\n        default:\r\n            return 1;\r\n    }\r\n}\r\n/**\r\n * Based on the attribute return the corresponding supported attrib pointer type\r\n * https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/vertexAttribPointer\r\n *\r\n * @param gl\r\n * @param type\r\n */\r\nfunction getAttributePointerType(gl, type) {\r\n    switch (type) {\r\n        case gl.LOW_FLOAT:\r\n        case gl.HIGH_FLOAT:\r\n        case gl.FLOAT:\r\n        case gl.FLOAT_VEC2:\r\n        case gl.FLOAT_VEC3:\r\n        case gl.FLOAT_VEC4:\r\n            return gl.FLOAT;\r\n        case gl.BYTE:\r\n            return gl.BYTE;\r\n        case gl.UNSIGNED_BYTE:\r\n            return gl.UNSIGNED_BYTE;\r\n        case gl.SHORT:\r\n            return gl.SHORT;\r\n        case gl.UNSIGNED_SHORT:\r\n            return gl.UNSIGNED_SHORT;\r\n        default:\r\n            return gl.FLOAT;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Filtering.ts\n/**\r\n * Describes the different image filtering modes\r\n */\r\nvar ImageFiltering;\r\n(function (ImageFiltering) {\r\n    /**\r\n     * Pixel is useful when you do not want smoothing aka antialiasing applied to your graphics.\r\n     *\r\n     * Useful for Pixel art aesthetics.\r\n     */\r\n    ImageFiltering[\"Pixel\"] = \"Pixel\";\r\n    /**\r\n     * Blended is useful when you have high resolution artwork and would like it blended and smoothed\r\n     */\r\n    ImageFiltering[\"Blended\"] = \"Blended\";\r\n})(ImageFiltering || (ImageFiltering = {}));\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/texture-loader.ts\n\r\n\r\n\r\n/**\r\n * Manages loading image sources into webgl textures, a unique id is associated with all sources\r\n */\r\nclass TextureLoader {\r\n    static register(context) {\r\n        TextureLoader._GL = context;\r\n        TextureLoader._MAX_TEXTURE_SIZE = context.getParameter(context.MAX_TEXTURE_SIZE);\r\n    }\r\n    /**\r\n     * Get the WebGL Texture from a source image\r\n     * @param image\r\n     */\r\n    static get(image) {\r\n        return TextureLoader._TEXTURE_MAP.get(image);\r\n    }\r\n    /**\r\n     * Returns whether a source image has been loaded as a texture\r\n     * @param image\r\n     */\r\n    static has(image) {\r\n        return TextureLoader._TEXTURE_MAP.has(image);\r\n    }\r\n    /**\r\n     * Loads a graphic into webgl and returns it's texture info, a webgl context must be previously registered\r\n     * @param image Source graphic\r\n     * @param filtering {ImageFiltering} The ImageFiltering mode to apply to the loaded texture\r\n     * @param forceUpdate Optionally force a texture to be reloaded, useful if the source graphic has changed\r\n     */\r\n    static load(image, filtering, forceUpdate = false) {\r\n        // Ignore loading if webgl is not registered\r\n        const gl = TextureLoader._GL;\r\n        if (!gl) {\r\n            return null;\r\n        }\r\n        let tex = null;\r\n        // If reuse the texture if it's from the same source\r\n        if (TextureLoader.has(image)) {\r\n            tex = TextureLoader.get(image);\r\n        }\r\n        // Update existing webgl texture and return early\r\n        if (tex) {\r\n            if (forceUpdate) {\r\n                gl.bindTexture(gl.TEXTURE_2D, tex);\r\n                const source = TextureLoader.toPowerOfTwoImage(image);\r\n                gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, source);\r\n            }\r\n            return tex;\r\n        }\r\n        // No texture exists create a new one\r\n        tex = gl.createTexture();\r\n        const source = TextureLoader.toPowerOfTwoImage(image);\r\n        TextureLoader.checkImageSizeSupportedAndLog(image);\r\n        gl.bindTexture(gl.TEXTURE_2D, tex);\r\n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n        // NEAREST for pixel art, LINEAR for hi-res\r\n        const filterMode = filtering !== null && filtering !== void 0 ? filtering : TextureLoader.filtering;\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, filterMode === ImageFiltering.Pixel ? gl.NEAREST : gl.LINEAR);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, filterMode === ImageFiltering.Pixel ? gl.NEAREST : gl.LINEAR);\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, source);\r\n        TextureLoader._TEXTURE_MAP.set(image, tex);\r\n        return tex;\r\n    }\r\n    /**\r\n     * Converts source images into power of two images, WebGL only supports POT images\r\n     * https://www.khronos.org/webgl/wiki/WebGL_and_OpenGL_Differences#Non-Power_of_Two_Texture_Support\r\n     * @param image\r\n     */\r\n    static toPowerOfTwoImage(image) {\r\n        const potCanvas = TextureLoader._POT_CANVAS;\r\n        const potCtx = TextureLoader._POT_CTX;\r\n        if (!isPowerOfTwo(image.width) || !isPowerOfTwo(image.height)) {\r\n            // Scale up the texture to the next highest power of two dimensions.\r\n            potCanvas.width = ensurePowerOfTwo(image.width);\r\n            potCanvas.height = ensurePowerOfTwo(image.height);\r\n            potCtx.imageSmoothingEnabled = false;\r\n            potCtx.clearRect(0, 0, potCanvas.width, potCanvas.height);\r\n            potCtx.drawImage(image, 0, 0, image.width, image.height);\r\n            image = potCanvas;\r\n        }\r\n        return image;\r\n    }\r\n    /**\r\n     * Takes an image and returns if it meets size criteria for hardware\r\n     * @param image\r\n     * @returns if the image will be supported at runtime\r\n     */\r\n    static checkImageSizeSupportedAndLog(image) {\r\n        var _a;\r\n        const originalSrc = (_a = image.dataset.originalSrc) !== null && _a !== void 0 ? _a : 'internal canvas bitmap';\r\n        if (image.width > TextureLoader._MAX_TEXTURE_SIZE || image.height > TextureLoader._MAX_TEXTURE_SIZE) {\r\n            TextureLoader._LOGGER.error(`The image [${originalSrc}] provided to Excalibur is too large for the device's maximum texture size of ` +\r\n                `(${TextureLoader._MAX_TEXTURE_SIZE}x${TextureLoader._MAX_TEXTURE_SIZE}) please resize to an image `\r\n                + `for excalibur to render properly.\\n\\nImages will likely render as black rectangles.\\n\\n` +\r\n                `Read more here: https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices#understand_system_limits`);\r\n            return false;\r\n        }\r\n        else if (image.width > 4096 || image.height > 4096) {\r\n            // https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices#understand_system_limits\r\n            TextureLoader._LOGGER.warn(`The image [${originalSrc}] provided to excalibur is too large may not work on all mobile devices, ` +\r\n                `it is recommended you resize images to a maximum (4096x4096).\\n\\n` +\r\n                `Images will likely render as black rectangles on some mobile platforms.\\n\\n` +\r\n                `Read more here: https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices#understand_system_limits`);\r\n        }\r\n        return true;\r\n    }\r\n}\r\nTextureLoader._LOGGER = Logger.getInstance();\r\n/**\r\n * Sets the default filtering for the Excalibur texture loader, default [[ImageFiltering.Blended]]\r\n */\r\nTextureLoader.filtering = ImageFiltering.Blended;\r\nTextureLoader._POT_CANVAS = document.createElement('canvas');\r\nTextureLoader._POT_CTX = TextureLoader._POT_CANVAS.getContext('2d');\r\nTextureLoader._TEXTURE_MAP = new Map();\r\nTextureLoader._MAX_TEXTURE_SIZE = 0;\r\n\n;// CONCATENATED MODULE: ./Graphics/Raster.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * A Raster is a Graphic that needs to be first painted to a HTMLCanvasElement before it can be drawn to the\r\n * [[ExcaliburGraphicsContext]]. This is useful for generating custom images using the 2D canvas api.\r\n *\r\n * Implementors must implement the [[Raster.execute]] method to rasterize their drawing.\r\n */\r\nclass Raster extends Graphic {\r\n    constructor(options) {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h;\r\n        super(options);\r\n        this.filtering = null;\r\n        this._dirty = true;\r\n        this._smoothing = false;\r\n        this._color = watch(Color.Black, () => this.flagDirty());\r\n        this._lineWidth = 1;\r\n        this._lineDash = [];\r\n        this._padding = 0;\r\n        if (options) {\r\n            this.color = (_a = options.color) !== null && _a !== void 0 ? _a : Color.Black;\r\n            this.strokeColor = options === null || options === void 0 ? void 0 : options.strokeColor;\r\n            this.smoothing = (_b = options.smoothing) !== null && _b !== void 0 ? _b : this.smoothing;\r\n            this.lineWidth = (_c = options.lineWidth) !== null && _c !== void 0 ? _c : this.lineWidth;\r\n            this.lineDash = (_d = options.lineDash) !== null && _d !== void 0 ? _d : this.lineDash;\r\n            this.padding = (_e = options.padding) !== null && _e !== void 0 ? _e : this.padding;\r\n            this.filtering = (_f = options.filtering) !== null && _f !== void 0 ? _f : this.filtering;\r\n        }\r\n        this._bitmap = document.createElement('canvas');\r\n        // get the default canvas width/height as a fallback\r\n        const bitmapWidth = (_g = options === null || options === void 0 ? void 0 : options.width) !== null && _g !== void 0 ? _g : this._bitmap.width;\r\n        const bitmapHeight = (_h = options === null || options === void 0 ? void 0 : options.height) !== null && _h !== void 0 ? _h : this._bitmap.height;\r\n        // Rasters use power of two images as an optimization for webgl\r\n        this.width = ensurePowerOfTwo(bitmapWidth);\r\n        this.height = ensurePowerOfTwo(bitmapHeight);\r\n        const maybeCtx = this._bitmap.getContext('2d');\r\n        if (!maybeCtx) {\r\n            /* istanbul ignore next */\r\n            throw new Error('Browser does not support 2d canvas drawing, cannot create Raster graphic');\r\n        }\r\n        else {\r\n            this._ctx = maybeCtx;\r\n        }\r\n    }\r\n    cloneRasterOptions() {\r\n        return {\r\n            color: this.color ? this.color.clone() : null,\r\n            strokeColor: this.strokeColor ? this.strokeColor.clone() : null,\r\n            smoothing: this.smoothing,\r\n            lineWidth: this.lineWidth,\r\n            lineDash: this.lineDash,\r\n            padding: this.padding\r\n        };\r\n    }\r\n    /**\r\n     * Gets whether the graphic is dirty, this means there are changes that haven't been re-rasterized\r\n     */\r\n    get dirty() {\r\n        return this._dirty;\r\n    }\r\n    /**\r\n     * Flags the graphic as dirty, meaning it must be re-rasterized before draw.\r\n     * This should be called any time the graphics state changes such that it affects the outputted drawing\r\n     */\r\n    flagDirty() {\r\n        this._dirty = true;\r\n    }\r\n    /**\r\n     * Gets or sets the current width of the Raster graphic. Setting the width will cause the raster\r\n     * to be flagged dirty causing a re-raster on the next draw.\r\n     *\r\n     * Any `padding`s set will be factored into the width\r\n     */\r\n    get width() {\r\n        return Math.abs(this._getTotalWidth() * this.scale.x);\r\n    }\r\n    set width(value) {\r\n        value /= Math.abs(this.scale.x);\r\n        this._bitmap.width = value;\r\n        this._originalWidth = value;\r\n        this.flagDirty();\r\n    }\r\n    /**\r\n     * Gets or sets the current height of the Raster graphic. Setting the height will cause the raster\r\n     * to be flagged dirty causing a re-raster on the next draw.\r\n     *\r\n     * Any `padding` set will be factored into the height\r\n     */\r\n    get height() {\r\n        return Math.abs(this._getTotalHeight() * this.scale.y);\r\n    }\r\n    set height(value) {\r\n        value /= Math.abs(this.scale.y);\r\n        this._bitmap.height = value;\r\n        this._originalHeight = value;\r\n        this.flagDirty();\r\n    }\r\n    _getTotalWidth() {\r\n        var _a;\r\n        return ((_a = this._originalWidth) !== null && _a !== void 0 ? _a : this._bitmap.width) + this.padding * 2;\r\n    }\r\n    _getTotalHeight() {\r\n        var _a;\r\n        return ((_a = this._originalHeight) !== null && _a !== void 0 ? _a : this._bitmap.height) + this.padding * 2;\r\n    }\r\n    /**\r\n     * Returns the local bounds of the Raster including the padding\r\n     */\r\n    get localBounds() {\r\n        return BoundingBox.fromDimension(this._getTotalWidth() * this.scale.x, this._getTotalHeight() * this.scale.y, Vector.Zero);\r\n    }\r\n    /**\r\n     * Gets or sets the smoothing (anti-aliasing of the graphic). Setting the height will cause the raster\r\n     * to be flagged dirty causing a re-raster on the next draw.\r\n     */\r\n    get smoothing() {\r\n        return this._smoothing;\r\n    }\r\n    set smoothing(value) {\r\n        this._smoothing = value;\r\n        this.flagDirty();\r\n    }\r\n    /**\r\n     * Gets or sets the fillStyle of the Raster graphic. Setting the fillStyle will cause the raster to be\r\n     * flagged dirty causing a re-raster on the next draw.\r\n     */\r\n    get color() {\r\n        return this._color;\r\n    }\r\n    set color(value) {\r\n        this.flagDirty();\r\n        this._color = watch(value, () => this.flagDirty());\r\n    }\r\n    /**\r\n     * Gets or sets the strokeStyle of the Raster graphic. Setting the strokeStyle will cause the raster to be\r\n     * flagged dirty causing a re-raster on the next draw.\r\n     */\r\n    get strokeColor() {\r\n        return this._strokeColor;\r\n    }\r\n    set strokeColor(value) {\r\n        this.flagDirty();\r\n        this._strokeColor = watch(value, () => this.flagDirty());\r\n    }\r\n    /**\r\n     * Gets or sets the line width of the Raster graphic. Setting the lineWidth will cause the raster to be\r\n     * flagged dirty causing a re-raster on the next draw.\r\n     */\r\n    get lineWidth() {\r\n        return this._lineWidth;\r\n    }\r\n    set lineWidth(value) {\r\n        this._lineWidth = value;\r\n        this.flagDirty();\r\n    }\r\n    get lineDash() {\r\n        return this._lineDash;\r\n    }\r\n    set lineDash(value) {\r\n        this._lineDash = value;\r\n        this.flagDirty();\r\n    }\r\n    get padding() {\r\n        return this._padding;\r\n    }\r\n    set padding(value) {\r\n        this._padding = value;\r\n        this.flagDirty();\r\n    }\r\n    /**\r\n     * Rasterize the graphic to a bitmap making it usable as in excalibur. Rasterize is called automatically if\r\n     * the graphic is [[Raster.dirty]] on the next [[Graphic.draw]] call\r\n     */\r\n    rasterize() {\r\n        this._dirty = false;\r\n        this._ctx.clearRect(0, 0, this._getTotalWidth(), this._getTotalHeight());\r\n        this._ctx.save();\r\n        this._applyRasterProperties(this._ctx);\r\n        this.execute(this._ctx);\r\n        this._ctx.restore();\r\n        // The webgl texture needs to be updated if it exists after a raster cycle\r\n        TextureLoader.load(this._bitmap, this.filtering, true);\r\n    }\r\n    _applyRasterProperties(ctx) {\r\n        var _a, _b, _c;\r\n        this._bitmap.width = this._getTotalWidth();\r\n        this._bitmap.height = this._getTotalHeight();\r\n        ctx.translate(this.padding, this.padding);\r\n        ctx.imageSmoothingEnabled = this.smoothing;\r\n        ctx.lineWidth = this.lineWidth;\r\n        ctx.setLineDash((_a = this.lineDash) !== null && _a !== void 0 ? _a : ctx.getLineDash());\r\n        ctx.strokeStyle = (_b = this.strokeColor) === null || _b === void 0 ? void 0 : _b.toString();\r\n        ctx.fillStyle = (_c = this.color) === null || _c === void 0 ? void 0 : _c.toString();\r\n    }\r\n    _drawImage(ex, x, y) {\r\n        if (this._dirty) {\r\n            this.rasterize();\r\n        }\r\n        ex.drawImage(this._bitmap, x, y);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Canvas.ts\n\r\n/**\r\n * A canvas [[Graphic]] to provide an adapter between the 2D Canvas API and the [[ExcaliburGraphicsContext]].\r\n *\r\n * The [[Canvas]] works by re-rastering a draw handler to a HTMLCanvasElement for every draw which is then passed\r\n * to the [[ExcaliburGraphicsContext]] implementation as a rendered image.\r\n *\r\n * **Low performance API**\r\n */\r\nclass Canvas extends Raster {\r\n    constructor(_options) {\r\n        super(_options);\r\n        this._options = _options;\r\n    }\r\n    /**\r\n     * Return the 2D graphics context of this canvas\r\n     */\r\n    get ctx() {\r\n        return this._ctx;\r\n    }\r\n    clone() {\r\n        return new Canvas({\r\n            ...this._options,\r\n            ...this.cloneGraphicOptions(),\r\n            ...this.cloneRasterOptions()\r\n        });\r\n    }\r\n    execute(ctx) {\r\n        var _a, _b;\r\n        if ((_a = this._options) === null || _a === void 0 ? void 0 : _a.draw) {\r\n            (_b = this._options) === null || _b === void 0 ? void 0 : _b.draw(ctx);\r\n        }\r\n        if (!this._options.cache) {\r\n            this.flagDirty();\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Events.ts\nvar EventTypes;\r\n(function (EventTypes) {\r\n    EventTypes[\"Kill\"] = \"kill\";\r\n    EventTypes[\"PreKill\"] = \"prekill\";\r\n    EventTypes[\"PostKill\"] = \"postkill\";\r\n    EventTypes[\"PreDraw\"] = \"predraw\";\r\n    EventTypes[\"PostDraw\"] = \"postdraw\";\r\n    EventTypes[\"PreDebugDraw\"] = \"predebugdraw\";\r\n    EventTypes[\"PostDebugDraw\"] = \"postdebugdraw\";\r\n    EventTypes[\"PreUpdate\"] = \"preupdate\";\r\n    EventTypes[\"PostUpdate\"] = \"postupdate\";\r\n    EventTypes[\"PreFrame\"] = \"preframe\";\r\n    EventTypes[\"PostFrame\"] = \"postframe\";\r\n    EventTypes[\"PreCollision\"] = \"precollision\";\r\n    EventTypes[\"CollisionStart\"] = \"collisionstart\";\r\n    EventTypes[\"CollisionEnd\"] = \"collisionend\";\r\n    EventTypes[\"PostCollision\"] = \"postcollision\";\r\n    EventTypes[\"Initialize\"] = \"initialize\";\r\n    EventTypes[\"Activate\"] = \"activate\";\r\n    EventTypes[\"Deactivate\"] = \"deactivate\";\r\n    EventTypes[\"ExitViewport\"] = \"exitviewport\";\r\n    EventTypes[\"EnterViewport\"] = \"enterviewport\";\r\n    EventTypes[\"ExitTrigger\"] = \"exit\";\r\n    EventTypes[\"EnterTrigger\"] = \"enter\";\r\n    EventTypes[\"Connect\"] = \"connect\";\r\n    EventTypes[\"Disconnect\"] = \"disconnect\";\r\n    EventTypes[\"Button\"] = \"button\";\r\n    EventTypes[\"Axis\"] = \"axis\";\r\n    EventTypes[\"Subscribe\"] = \"subscribe\";\r\n    EventTypes[\"Unsubscribe\"] = \"unsubscribe\";\r\n    EventTypes[\"Visible\"] = \"visible\";\r\n    EventTypes[\"Hidden\"] = \"hidden\";\r\n    EventTypes[\"Start\"] = \"start\";\r\n    EventTypes[\"Stop\"] = \"stop\";\r\n    EventTypes[\"PointerUp\"] = \"pointerup\";\r\n    EventTypes[\"PointerDown\"] = \"pointerdown\";\r\n    EventTypes[\"PointerMove\"] = \"pointermove\";\r\n    EventTypes[\"PointerEnter\"] = \"pointerenter\";\r\n    EventTypes[\"PointerLeave\"] = \"pointerleave\";\r\n    EventTypes[\"PointerCancel\"] = \"pointercancel\";\r\n    EventTypes[\"PointerWheel\"] = \"pointerwheel\";\r\n    EventTypes[\"Up\"] = \"up\";\r\n    EventTypes[\"Down\"] = \"down\";\r\n    EventTypes[\"Move\"] = \"move\";\r\n    EventTypes[\"Enter\"] = \"enter\";\r\n    EventTypes[\"Leave\"] = \"leave\";\r\n    EventTypes[\"Cancel\"] = \"cancel\";\r\n    EventTypes[\"Wheel\"] = \"wheel\";\r\n    EventTypes[\"Press\"] = \"press\";\r\n    EventTypes[\"Release\"] = \"release\";\r\n    EventTypes[\"Hold\"] = \"hold\";\r\n    EventTypes[\"PointerDragStart\"] = \"pointerdragstart\";\r\n    EventTypes[\"PointerDragEnd\"] = \"pointerdragend\";\r\n    EventTypes[\"PointerDragEnter\"] = \"pointerdragenter\";\r\n    EventTypes[\"PointerDragLeave\"] = \"pointerdragleave\";\r\n    EventTypes[\"PointerDragMove\"] = \"pointerdragmove\";\r\n})(EventTypes || (EventTypes = {}));\r\n/**\r\n * Base event type in Excalibur that all other event types derive from. Not all event types are thrown on all Excalibur game objects,\r\n * some events are unique to a type, others are not.\r\n *\r\n */\r\nclass GameEvent {\r\n    constructor() {\r\n        this._bubbles = true;\r\n    }\r\n    /**\r\n     * If set to false, prevents event from propagating to other actors. If true it will be propagated\r\n     * to all actors that apply.\r\n     */\r\n    get bubbles() {\r\n        return this._bubbles;\r\n    }\r\n    set bubbles(value) {\r\n        this._bubbles = value;\r\n    }\r\n    /**\r\n     * Prevents event from bubbling\r\n     */\r\n    stopPropagation() {\r\n        this.bubbles = false;\r\n    }\r\n}\r\n/**\r\n * The 'kill' event is emitted on actors when it is killed. The target is the actor that was killed.\r\n */\r\nclass KillEvent extends GameEvent {\r\n    constructor(target) {\r\n        super();\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * The 'prekill' event is emitted directly before an actor is killed.\r\n */\r\nclass PreKillEvent extends GameEvent {\r\n    constructor(target) {\r\n        super();\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * The 'postkill' event is emitted directly after the actor is killed.\r\n */\r\nclass PostKillEvent extends GameEvent {\r\n    constructor(target) {\r\n        super();\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * The 'start' event is emitted on engine when has started and is ready for interaction.\r\n */\r\nclass GameStartEvent extends GameEvent {\r\n    constructor(target) {\r\n        super();\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * The 'stop' event is emitted on engine when has been stopped and will no longer take input, update or draw.\r\n */\r\nclass GameStopEvent extends GameEvent {\r\n    constructor(target) {\r\n        super();\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * The 'predraw' event is emitted on actors, scenes, and engine before drawing starts. Actors' predraw happens inside their graphics\r\n * transform so that all drawing takes place with the actor as the origin.\r\n *\r\n */\r\nclass PreDrawEvent extends GameEvent {\r\n    constructor(ctx, delta, target) {\r\n        super();\r\n        this.ctx = ctx;\r\n        this.delta = delta;\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * The 'postdraw' event is emitted on actors, scenes, and engine after drawing finishes. Actors' postdraw happens inside their graphics\r\n * transform so that all drawing takes place with the actor as the origin.\r\n *\r\n */\r\nclass PostDrawEvent extends GameEvent {\r\n    constructor(ctx, delta, target) {\r\n        super();\r\n        this.ctx = ctx;\r\n        this.delta = delta;\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * The 'predebugdraw' event is emitted on actors, scenes, and engine before debug drawing starts.\r\n */\r\nclass PreDebugDrawEvent extends GameEvent {\r\n    constructor(ctx, target) {\r\n        super();\r\n        this.ctx = ctx;\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * The 'postdebugdraw' event is emitted on actors, scenes, and engine after debug drawing starts.\r\n */\r\nclass PostDebugDrawEvent extends GameEvent {\r\n    constructor(ctx, target) {\r\n        super();\r\n        this.ctx = ctx;\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * The 'preupdate' event is emitted on actors, scenes, camera, and engine before the update starts.\r\n */\r\nclass PreUpdateEvent extends GameEvent {\r\n    constructor(engine, delta, target) {\r\n        super();\r\n        this.engine = engine;\r\n        this.delta = delta;\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * The 'postupdate' event is emitted on actors, scenes, camera, and engine after the update ends.\r\n */\r\nclass PostUpdateEvent extends GameEvent {\r\n    constructor(engine, delta, target) {\r\n        super();\r\n        this.engine = engine;\r\n        this.delta = delta;\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * The 'preframe' event is emitted on the engine, before the frame begins.\r\n */\r\nclass PreFrameEvent extends GameEvent {\r\n    constructor(engine, prevStats) {\r\n        super();\r\n        this.engine = engine;\r\n        this.prevStats = prevStats;\r\n        this.target = engine;\r\n    }\r\n}\r\n/**\r\n * The 'postframe' event is emitted on the engine, after a frame ends.\r\n */\r\nclass PostFrameEvent extends GameEvent {\r\n    constructor(engine, stats) {\r\n        super();\r\n        this.engine = engine;\r\n        this.stats = stats;\r\n        this.target = engine;\r\n    }\r\n}\r\n/**\r\n * Event received when a gamepad is connected to Excalibur. [[Gamepads]] receives this event.\r\n */\r\nclass GamepadConnectEvent extends GameEvent {\r\n    constructor(index, gamepad) {\r\n        super();\r\n        this.index = index;\r\n        this.gamepad = gamepad;\r\n        this.target = gamepad;\r\n    }\r\n}\r\n/**\r\n * Event received when a gamepad is disconnected from Excalibur. [[Gamepads]] receives this event.\r\n */\r\nclass GamepadDisconnectEvent extends GameEvent {\r\n    constructor(index, gamepad) {\r\n        super();\r\n        this.index = index;\r\n        this.gamepad = gamepad;\r\n        this.target = gamepad;\r\n    }\r\n}\r\n/**\r\n * Gamepad button event. See [[Gamepads]] for information on responding to controller input. [[Gamepad]] instances receive this event;\r\n */\r\nclass GamepadButtonEvent extends GameEvent {\r\n    /**\r\n     * @param button  The Gamepad button\r\n     * @param value   A numeric value between 0 and 1\r\n     */\r\n    constructor(button, value, target) {\r\n        super();\r\n        this.button = button;\r\n        this.value = value;\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * Gamepad axis event. See [[Gamepads]] for information on responding to controller input. [[Gamepad]] instances receive this event;\r\n */\r\nclass GamepadAxisEvent extends GameEvent {\r\n    /**\r\n     * @param axis  The Gamepad axis\r\n     * @param value A numeric value between -1 and 1\r\n     */\r\n    constructor(axis, value, target) {\r\n        super();\r\n        this.axis = axis;\r\n        this.value = value;\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * Subscribe event thrown when handlers for events other than subscribe are added. Meta event that is received by\r\n * [[EventDispatcher|event dispatchers]].\r\n */\r\nclass SubscribeEvent extends GameEvent {\r\n    constructor(topic, handler) {\r\n        super();\r\n        this.topic = topic;\r\n        this.handler = handler;\r\n    }\r\n}\r\n/**\r\n * Unsubscribe event thrown when handlers for events other than unsubscribe are removed. Meta event that is received by\r\n * [[EventDispatcher|event dispatchers]].\r\n */\r\nclass UnsubscribeEvent extends GameEvent {\r\n    constructor(topic, handler) {\r\n        super();\r\n        this.topic = topic;\r\n        this.handler = handler;\r\n    }\r\n}\r\n/**\r\n * Event received by the [[Engine]] when the browser window is visible on a screen.\r\n */\r\nclass VisibleEvent extends GameEvent {\r\n    constructor(target) {\r\n        super();\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * Event received by the [[Engine]] when the browser window is hidden from all screens.\r\n */\r\nclass HiddenEvent extends GameEvent {\r\n    constructor(target) {\r\n        super();\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * Event thrown on an [[Actor|actor]] when a collision will occur this frame if it resolves\r\n */\r\nclass PreCollisionEvent extends GameEvent {\r\n    /**\r\n     * @param actor         The actor the event was thrown on\r\n     * @param other         The actor that will collided with the current actor\r\n     * @param side          The side that will be collided with the current actor\r\n     * @param intersection  Intersection vector\r\n     */\r\n    constructor(actor, other, side, intersection) {\r\n        super();\r\n        this.other = other;\r\n        this.side = side;\r\n        this.intersection = intersection;\r\n        this.target = actor;\r\n    }\r\n}\r\n/**\r\n * Event thrown on an [[Actor|actor]] when a collision has been resolved (body reacted) this frame\r\n */\r\nclass PostCollisionEvent extends GameEvent {\r\n    /**\r\n     * @param actor         The actor the event was thrown on\r\n     * @param other         The actor that did collide with the current actor\r\n     * @param side          The side that did collide with the current actor\r\n     * @param intersection  Intersection vector\r\n     */\r\n    constructor(actor, other, side, intersection) {\r\n        super();\r\n        this.other = other;\r\n        this.side = side;\r\n        this.intersection = intersection;\r\n        this.target = actor;\r\n    }\r\n    get actor() {\r\n        return this.target;\r\n    }\r\n    set actor(actor) {\r\n        this.target = actor;\r\n    }\r\n}\r\nclass ContactStartEvent {\r\n    constructor(target, other, contact) {\r\n        this.target = target;\r\n        this.other = other;\r\n        this.contact = contact;\r\n    }\r\n}\r\nclass ContactEndEvent {\r\n    constructor(target, other) {\r\n        this.target = target;\r\n        this.other = other;\r\n    }\r\n}\r\nclass CollisionPreSolveEvent {\r\n    constructor(target, other, side, intersection, contact) {\r\n        this.target = target;\r\n        this.other = other;\r\n        this.side = side;\r\n        this.intersection = intersection;\r\n        this.contact = contact;\r\n    }\r\n}\r\nclass CollisionPostSolveEvent {\r\n    constructor(target, other, side, intersection, contact) {\r\n        this.target = target;\r\n        this.other = other;\r\n        this.side = side;\r\n        this.intersection = intersection;\r\n        this.contact = contact;\r\n    }\r\n}\r\n/**\r\n * Event thrown the first time an [[Actor|actor]] collides with another, after an actor is in contact normal collision events are fired.\r\n */\r\nclass CollisionStartEvent extends GameEvent {\r\n    /**\r\n     *\r\n     * @param actor\r\n     * @param other\r\n     * @param contact\r\n     */\r\n    constructor(actor, other, contact) {\r\n        super();\r\n        this.other = other;\r\n        this.contact = contact;\r\n        this.target = actor;\r\n    }\r\n    get actor() {\r\n        return this.target;\r\n    }\r\n    set actor(actor) {\r\n        this.target = actor;\r\n    }\r\n}\r\n/**\r\n * Event thrown when the [[Actor|actor]] is no longer colliding with another\r\n */\r\nclass CollisionEndEvent extends GameEvent {\r\n    /**\r\n     *\r\n     */\r\n    constructor(actor, other) {\r\n        super();\r\n        this.other = other;\r\n        this.target = actor;\r\n    }\r\n    get actor() {\r\n        return this.target;\r\n    }\r\n    set actor(actor) {\r\n        this.target = actor;\r\n    }\r\n}\r\n/**\r\n * Event thrown on an [[Actor]] and a [[Scene]] only once before the first update call\r\n */\r\nclass InitializeEvent extends GameEvent {\r\n    /**\r\n     * @param engine  The reference to the current engine\r\n     */\r\n    constructor(engine, target) {\r\n        super();\r\n        this.engine = engine;\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * Event thrown on a [[Scene]] on activation\r\n */\r\nclass ActivateEvent extends GameEvent {\r\n    /**\r\n     * @param oldScene  The reference to the old scene\r\n     */\r\n    constructor(oldScene, target) {\r\n        super();\r\n        this.oldScene = oldScene;\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * Event thrown on a [[Scene]] on deactivation\r\n */\r\nclass DeactivateEvent extends GameEvent {\r\n    /**\r\n     * @param newScene  The reference to the new scene\r\n     */\r\n    constructor(newScene, target) {\r\n        super();\r\n        this.newScene = newScene;\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * Event thrown on an [[Actor]] when it completely leaves the screen.\r\n */\r\nclass ExitViewPortEvent extends GameEvent {\r\n    constructor(target) {\r\n        super();\r\n        this.target = target;\r\n    }\r\n}\r\n/**\r\n * Event thrown on an [[Actor]] when it completely leaves the screen.\r\n */\r\nclass EnterViewPortEvent extends GameEvent {\r\n    constructor(target) {\r\n        super();\r\n        this.target = target;\r\n    }\r\n}\r\nclass EnterTriggerEvent extends GameEvent {\r\n    constructor(target, actor) {\r\n        super();\r\n        this.target = target;\r\n        this.actor = actor;\r\n    }\r\n}\r\nclass ExitTriggerEvent extends GameEvent {\r\n    constructor(target, actor) {\r\n        super();\r\n        this.target = target;\r\n        this.actor = actor;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./EventDispatcher.ts\n\r\nclass EventDispatcher {\r\n    constructor() {\r\n        this._handlers = {};\r\n        this._wiredEventDispatchers = [];\r\n    }\r\n    /**\r\n     * Clears any existing handlers or wired event dispatchers on this event dispatcher\r\n     */\r\n    clear() {\r\n        this._handlers = {};\r\n        this._wiredEventDispatchers = [];\r\n    }\r\n    /**\r\n     * Emits an event for target\r\n     * @param eventName  The name of the event to publish\r\n     * @param event      Optionally pass an event data object to the handler\r\n     */\r\n    emit(eventName, event) {\r\n        if (!eventName) {\r\n            // key not mapped\r\n            return;\r\n        }\r\n        eventName = eventName.toLowerCase();\r\n        if (!event) {\r\n            event = new GameEvent();\r\n        }\r\n        let i, len;\r\n        if (this._handlers[eventName]) {\r\n            i = 0;\r\n            len = this._handlers[eventName].length;\r\n            for (i; i < len; i++) {\r\n                this._handlers[eventName][i](event);\r\n            }\r\n        }\r\n        i = 0;\r\n        len = this._wiredEventDispatchers.length;\r\n        for (i; i < len; i++) {\r\n            this._wiredEventDispatchers[i].emit(eventName, event);\r\n        }\r\n    }\r\n    /**\r\n     * Subscribe an event handler to a particular event name, multiple handlers per event name are allowed.\r\n     * @param eventName  The name of the event to subscribe to\r\n     * @param handler    The handler callback to fire on this event\r\n     */\r\n    on(eventName, handler) {\r\n        eventName = eventName.toLowerCase();\r\n        if (!this._handlers[eventName]) {\r\n            this._handlers[eventName] = [];\r\n        }\r\n        this._handlers[eventName].push(handler);\r\n        // meta event handlers\r\n        if (eventName !== 'unsubscribe' && eventName !== 'subscribe') {\r\n            this.emit('subscribe', new SubscribeEvent(eventName, handler));\r\n        }\r\n    }\r\n    /**\r\n     * Unsubscribe an event handler(s) from an event. If a specific handler\r\n     * is specified for an event, only that handler will be unsubscribed.\r\n     * Otherwise all handlers will be unsubscribed for that event.\r\n     *\r\n     * @param eventName  The name of the event to unsubscribe\r\n     * @param handler    Optionally the specific handler to unsubscribe\r\n     */\r\n    off(eventName, handler) {\r\n        eventName = eventName.toLowerCase();\r\n        const eventHandlers = this._handlers[eventName];\r\n        if (eventHandlers) {\r\n            // if no explicit handler is give with the event name clear all handlers\r\n            if (!handler) {\r\n                this._handlers[eventName].length = 0;\r\n            }\r\n            else {\r\n                const index = eventHandlers.indexOf(handler);\r\n                this._handlers[eventName].splice(index, 1);\r\n            }\r\n        }\r\n        // meta event handlers\r\n        if (eventName !== 'unsubscribe' && eventName !== 'subscribe') {\r\n            this.emit('unsubscribe', new UnsubscribeEvent(eventName, handler));\r\n        }\r\n    }\r\n    /**\r\n     * Once listens to an event one time, then unsubscribes from that event\r\n     *\r\n     * @param eventName The name of the event to subscribe to once\r\n     * @param handler   The handler of the event that will be auto unsubscribed\r\n     */\r\n    once(eventName, handler) {\r\n        const metaHandler = (event) => {\r\n            const ev = event || new GameEvent();\r\n            this.off(eventName, handler);\r\n            handler(ev);\r\n        };\r\n        this.on(eventName, metaHandler);\r\n    }\r\n    /**\r\n     * Wires this event dispatcher to also receive events from another\r\n     */\r\n    wire(eventDispatcher) {\r\n        eventDispatcher._wiredEventDispatchers.push(this);\r\n    }\r\n    /**\r\n     * Unwires this event dispatcher from another\r\n     */\r\n    unwire(eventDispatcher) {\r\n        const index = eventDispatcher._wiredEventDispatchers.indexOf(this);\r\n        if (index > -1) {\r\n            eventDispatcher._wiredEventDispatchers.splice(index, 1);\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Resources/Resource.ts\n\r\n\r\n/**\r\n * The [[Resource]] type allows games built in Excalibur to load generic resources.\r\n * For any type of remote resource it is recommended to use [[Resource]] for preloading.\r\n */\r\nclass Resource {\r\n    /**\r\n     * @param path          Path to the remote resource\r\n     * @param responseType  The type to expect as a response: \"\" | \"arraybuffer\" | \"blob\" | \"document\" | \"json\" | \"text\";\r\n     * @param bustCache     Whether or not to cache-bust requests\r\n     */\r\n    constructor(path, responseType, bustCache = true) {\r\n        this.path = path;\r\n        this.responseType = responseType;\r\n        this.bustCache = bustCache;\r\n        this.data = null;\r\n        this.logger = Logger.getInstance();\r\n        this.events = new EventDispatcher();\r\n    }\r\n    /**\r\n     * Returns true if the Resource is completely loaded and is ready\r\n     * to be drawn.\r\n     */\r\n    isLoaded() {\r\n        return this.data !== null;\r\n    }\r\n    _cacheBust(uri) {\r\n        const query = /\\?\\w*=\\w*/;\r\n        if (query.test(uri)) {\r\n            uri += '&__=' + Date.now();\r\n        }\r\n        else {\r\n            uri += '?__=' + Date.now();\r\n        }\r\n        return uri;\r\n    }\r\n    /**\r\n     * Begin loading the resource and returns a promise to be resolved on completion\r\n     */\r\n    load() {\r\n        return new Promise((resolve, reject) => {\r\n            // Exit early if we already have data\r\n            if (this.data !== null) {\r\n                this.logger.debug('Already have data for resource', this.path);\r\n                this.events.emit('complete', this.data);\r\n                resolve(this.data);\r\n                return;\r\n            }\r\n            const request = new XMLHttpRequest();\r\n            request.open('GET', this.bustCache ? this._cacheBust(this.path) : this.path, true);\r\n            request.responseType = this.responseType;\r\n            request.addEventListener('loadstart', (e) => this.events.emit('loadstart', e));\r\n            request.addEventListener('progress', (e) => this.events.emit('progress', e));\r\n            request.addEventListener('error', (e) => this.events.emit('error', e));\r\n            request.addEventListener('load', (e) => this.events.emit('load', e));\r\n            request.addEventListener('load', () => {\r\n                // XHR on file:// success status is 0, such as with PhantomJS\r\n                if (request.status !== 0 && request.status !== 200) {\r\n                    this.logger.error('Failed to load resource ', this.path, ' server responded with error code', request.status);\r\n                    this.events.emit('error', request.response);\r\n                    reject(new Error(request.statusText));\r\n                    return;\r\n                }\r\n                this.data = request.response;\r\n                this.events.emit('complete', this.data);\r\n                this.logger.debug('Completed loading resource', this.path);\r\n                resolve(this.data);\r\n            });\r\n            request.send();\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Drawing/SpriteEffects.ts\n/**\r\n * @module\r\n * @deprecated\r\n * These effects can be applied to any bitmap image but are mainly used\r\n * for [[Sprite]] effects or [[Animation]] effects.\r\n */\r\nvar SpriteEffects_decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\n/**\r\n * @typedoc\r\n */\r\n\r\n\r\n/**\r\n * Applies the \"Grayscale\" effect to a sprite, removing color information.\r\n * @deprecated [[Grayscale]] will be removed in v0.26.0\r\n */\r\nlet Grayscale = class Grayscale {\r\n    updatePixel(x, y, imageData) {\r\n        const firstPixel = (x + y * imageData.width) * 4;\r\n        const pixel = imageData.data;\r\n        const avg = (pixel[firstPixel + 0] + pixel[firstPixel + 1] + pixel[firstPixel + 2]) / 3;\r\n        pixel[firstPixel + 0] = avg;\r\n        pixel[firstPixel + 1] = avg;\r\n        pixel[firstPixel + 2] = avg;\r\n    }\r\n};\r\nGrayscale = SpriteEffects_decorate([\r\n    obsolete({\r\n        message: 'Grayscale will be removed in v0.26.0'\r\n    })\r\n], Grayscale);\r\n\r\n/**\r\n * Applies the \"Invert\" effect to a sprite, inverting the pixel colors.\r\n * @deprecated [[Invert]] will be removed in v0.26.0\r\n */\r\nlet Invert = class Invert {\r\n    updatePixel(x, y, imageData) {\r\n        const firstPixel = (x + y * imageData.width) * 4;\r\n        const pixel = imageData.data;\r\n        pixel[firstPixel + 0] = 255 - pixel[firstPixel + 0];\r\n        pixel[firstPixel + 1] = 255 - pixel[firstPixel + 1];\r\n        pixel[firstPixel + 2] = 255 - pixel[firstPixel + 2];\r\n    }\r\n};\r\nInvert = SpriteEffects_decorate([\r\n    obsolete({\r\n        message: 'Invert will be removed in v0.26.0'\r\n    })\r\n], Invert);\r\n\r\n/**\r\n * Applies the \"Opacity\" effect to a sprite, setting the alpha of all pixels to a given value.\r\n * @deprecated [[Opacity]] will be removed in v0.26.0\r\n */\r\nlet Opacity = class Opacity {\r\n    /**\r\n     * @param opacity  The new opacity of the sprite from 0-1.0\r\n     */\r\n    constructor(opacity) {\r\n        this.opacity = opacity;\r\n    }\r\n    updatePixel(x, y, imageData) {\r\n        const firstPixel = (x + y * imageData.width) * 4;\r\n        const pixel = imageData.data;\r\n        if (pixel[firstPixel + 3] !== 0) {\r\n            pixel[firstPixel + 3] = Math.round(this.opacity * pixel[firstPixel + 3]);\r\n        }\r\n    }\r\n};\r\nOpacity = SpriteEffects_decorate([\r\n    obsolete({\r\n        message: 'Opacity will be removed in v0.26.0'\r\n    })\r\n], Opacity);\r\n\r\n/**\r\n * Applies the \"Colorize\" effect to a sprite, changing the color channels of all the pixels to an\r\n * average of the original color and the provided color\r\n * @deprecated [[Colorize]] will be removed in v0.26.0\r\n */\r\nlet Colorize = class Colorize {\r\n    /**\r\n     * @param color  The color to apply to the sprite\r\n     */\r\n    constructor(color) {\r\n        this.color = color;\r\n    }\r\n    updatePixel(x, y, imageData) {\r\n        const firstPixel = (x + y * imageData.width) * 4;\r\n        const pixel = imageData.data;\r\n        if (pixel[firstPixel + 3] !== 0) {\r\n            pixel[firstPixel + 0] = (pixel[firstPixel + 0] + this.color.r) / 2;\r\n            pixel[firstPixel + 1] = (pixel[firstPixel + 1] + this.color.g) / 2;\r\n            pixel[firstPixel + 2] = (pixel[firstPixel + 2] + this.color.b) / 2;\r\n        }\r\n    }\r\n};\r\nColorize = SpriteEffects_decorate([\r\n    obsolete({\r\n        message: 'Colorize will be removed in v0.26.0'\r\n    })\r\n], Colorize);\r\n\r\n/**\r\n * Applies the \"Lighten\" effect to a sprite, changes the lightness of the color according to HSL\r\n * @deprecated [[Lighten]] will be removed in v0.26.0\r\n */\r\nlet Lighten = class Lighten {\r\n    /**\r\n     * @param factor  The factor of the effect between 0-1\r\n     */\r\n    constructor(factor = 0.1) {\r\n        this.factor = factor;\r\n    }\r\n    updatePixel(x, y, imageData) {\r\n        const firstPixel = (x + y * imageData.width) * 4;\r\n        const pixel = imageData.data;\r\n        const color = Color.fromRGB(pixel[firstPixel + 0], pixel[firstPixel + 1], pixel[firstPixel + 2], pixel[firstPixel + 3]).lighten(this.factor);\r\n        pixel[firstPixel + 0] = color.r;\r\n        pixel[firstPixel + 1] = color.g;\r\n        pixel[firstPixel + 2] = color.b;\r\n        pixel[firstPixel + 3] = color.a;\r\n    }\r\n};\r\nLighten = SpriteEffects_decorate([\r\n    obsolete({\r\n        message: 'Lighten will be removed in v0.26.0'\r\n    })\r\n], Lighten);\r\n\r\n/**\r\n * Applies the \"Darken\" effect to a sprite, changes the darkness of the color according to HSL\r\n * @deprecated [[Darken]] will be removed in v0.26.0\r\n */\r\nlet Darken = class Darken {\r\n    /**\r\n     * @param factor  The factor of the effect between 0-1\r\n     */\r\n    constructor(factor = 0.1) {\r\n        this.factor = factor;\r\n    }\r\n    updatePixel(x, y, imageData) {\r\n        const firstPixel = (x + y * imageData.width) * 4;\r\n        const pixel = imageData.data;\r\n        const color = Color.fromRGB(pixel[firstPixel + 0], pixel[firstPixel + 1], pixel[firstPixel + 2], pixel[firstPixel + 3]).darken(this.factor);\r\n        pixel[firstPixel + 0] = color.r;\r\n        pixel[firstPixel + 1] = color.g;\r\n        pixel[firstPixel + 2] = color.b;\r\n        pixel[firstPixel + 3] = color.a;\r\n    }\r\n};\r\nDarken = SpriteEffects_decorate([\r\n    obsolete({\r\n        message: 'Darken will be removed v0.26.0'\r\n    })\r\n], Darken);\r\n\r\n/**\r\n * Applies the \"Saturate\" effect to a sprite, saturates the color according to HSL\r\n * @deprecated [[Saturate]] will be removed in v0.26.0\r\n */\r\nlet Saturate = class Saturate {\r\n    /**\r\n     * @param factor  The factor of the effect between 0-1\r\n     */\r\n    constructor(factor = 0.1) {\r\n        this.factor = factor;\r\n    }\r\n    updatePixel(x, y, imageData) {\r\n        const firstPixel = (x + y * imageData.width) * 4;\r\n        const pixel = imageData.data;\r\n        const color = Color.fromRGB(pixel[firstPixel + 0], pixel[firstPixel + 1], pixel[firstPixel + 2], pixel[firstPixel + 3]).saturate(this.factor);\r\n        pixel[firstPixel + 0] = color.r;\r\n        pixel[firstPixel + 1] = color.g;\r\n        pixel[firstPixel + 2] = color.b;\r\n        pixel[firstPixel + 3] = color.a;\r\n    }\r\n};\r\nSaturate = SpriteEffects_decorate([\r\n    obsolete({\r\n        message: 'Saturate will be removed in v0.26.0'\r\n    })\r\n], Saturate);\r\n\r\n/**\r\n * Applies the \"Desaturate\" effect to a sprite, desaturates the color according to HSL\r\n * @deprecated [[Desaturate]] will be removed in v0.26.0\r\n */\r\nlet Desaturate = class Desaturate {\r\n    /**\r\n     * @param factor  The factor of the effect between 0-1\r\n     */\r\n    constructor(factor = 0.1) {\r\n        this.factor = factor;\r\n    }\r\n    updatePixel(x, y, imageData) {\r\n        const firstPixel = (x + y * imageData.width) * 4;\r\n        const pixel = imageData.data;\r\n        const color = Color.fromRGB(pixel[firstPixel + 0], pixel[firstPixel + 1], pixel[firstPixel + 2], pixel[firstPixel + 3]).desaturate(this.factor);\r\n        pixel[firstPixel + 0] = color.r;\r\n        pixel[firstPixel + 1] = color.g;\r\n        pixel[firstPixel + 2] = color.b;\r\n        pixel[firstPixel + 3] = color.a;\r\n    }\r\n};\r\nDesaturate = SpriteEffects_decorate([\r\n    obsolete({\r\n        message: 'Desaturate will be removed in v0.26.0'\r\n    })\r\n], Desaturate);\r\n\r\n/**\r\n * Applies the \"Fill\" effect to a sprite, changing the color channels of all non-transparent pixels to match\r\n * a given color\r\n * @deprecated [[Fill]] will be removed in v0.26.0\r\n */\r\nlet Fill = class Fill {\r\n    /**\r\n     * @param color  The color to apply to the sprite\r\n     */\r\n    constructor(color) {\r\n        this.color = color;\r\n    }\r\n    updatePixel(x, y, imageData) {\r\n        const firstPixel = (x + y * imageData.width) * 4;\r\n        const pixel = imageData.data;\r\n        if (pixel[firstPixel + 3] !== 0) {\r\n            pixel[firstPixel + 0] = this.color.r;\r\n            pixel[firstPixel + 1] = this.color.g;\r\n            pixel[firstPixel + 2] = this.color.b;\r\n        }\r\n    }\r\n};\r\nFill = SpriteEffects_decorate([\r\n    obsolete({\r\n        message: 'Fill will be removed in v0.26.0'\r\n    })\r\n], Fill);\r\n\r\n\n;// CONCATENATED MODULE: ./Drawing/Texture.ts\n\r\n\r\n/**\r\n * The [[Texture]] object allows games built in Excalibur to load image resources.\r\n * [[Texture]] is an [[Loadable]] which means it can be passed to a [[Loader]]\r\n * to pre-load before starting a level or game.\r\n * @deprecated\r\n */\r\nclass Texture {\r\n    /**\r\n     * @param path       Path to the image resource or a base64 string representing an image \"data:image/png;base64,iVB...\"\r\n     * @param bustCache  Optionally load texture with cache busting\r\n     */\r\n    constructor(path, bustCache = true) {\r\n        this.path = path;\r\n        this.bustCache = bustCache;\r\n        this._sprite = null;\r\n        this.loaded = new Promise(resolve => {\r\n            this._loadedResolve = resolve;\r\n        });\r\n        this._resource = new Resource(path, 'blob', bustCache);\r\n        this._sprite = new Sprite_Sprite(this, 0, 0, 0, 0);\r\n    }\r\n    get image() {\r\n        return this.data;\r\n    }\r\n    /**\r\n     * Returns true if the Texture is completely loaded and is ready\r\n     * to be drawn.\r\n     */\r\n    isLoaded() {\r\n        return !!this.data;\r\n    }\r\n    /**\r\n     * Begins loading the texture and returns a promise to be resolved on completion\r\n     */\r\n    async load() {\r\n        try {\r\n            // Load base64 or blob if needed\r\n            let url;\r\n            if (!this.path.includes('data:image/')) {\r\n                const blob = await this._resource.load();\r\n                url = URL.createObjectURL(blob);\r\n            }\r\n            else {\r\n                url = this.path;\r\n            }\r\n            // Decode the image\r\n            const image = new Image();\r\n            image.src = url;\r\n            await image.decode();\r\n            // Set results\r\n            this.data = image;\r\n            this.width = this._sprite.width = image.naturalWidth;\r\n            this.height = this._sprite.height = image.naturalHeight;\r\n            this._sprite = new Sprite_Sprite(this, 0, 0, this.width, this.height);\r\n        }\r\n        catch (_a) {\r\n            await Promise.reject('Error loading texture');\r\n        }\r\n        // todo emit complete\r\n        this._loadedResolve(this.data);\r\n        return this.data;\r\n    }\r\n    asSprite() {\r\n        return this._sprite;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Configurable.ts\n/**\r\n * Configurable helper extends base type and makes all properties available as option bag arguments\r\n * @internal\r\n * @param base\r\n */\r\nfunction Configurable(base) {\r\n    return class extends base {\r\n        assign(props) {\r\n            //set the value of every property that was passed in,\r\n            //if the constructor previously set this value, it will be overridden here\r\n            for (const k in props) {\r\n                // eslint-disable-next-line\r\n                if (typeof this[k] !== 'function') {\r\n                    // eslint-disable-next-line\r\n                    this[k] = props[k];\r\n                }\r\n            }\r\n        }\r\n        constructor(...args) {\r\n            super(...args);\r\n            //get the number of arguments that aren't undefined. TS passes a value to all parameters\r\n            //of whatever ctor is the implementation, so args.length doesn't work here.\r\n            const size = args.filter(function (value) {\r\n                return value !== undefined;\r\n            }).length;\r\n            if (size === 1 && args[0] && typeof args[0] === 'object' && !(args[0] instanceof Array)) {\r\n                this.assign(args[0]);\r\n            }\r\n        }\r\n    };\r\n}\r\n\n;// CONCATENATED MODULE: ./Drawing/Sprite.ts\nvar Sprite_decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @hidden\r\n * @deprecated Use [[Sprite]]\r\n */\r\nclass SpriteImpl {\r\n    /**\r\n     * @param imageOrConfig  The backing image texture to build the Sprite, or Sprite option bag\r\n     * @param x      The x position of the sprite\r\n     * @param y      The y position of the sprite\r\n     * @param width  The width of the sprite in pixels\r\n     * @param height The height of the sprite in pixels\r\n     */\r\n    constructor(imageOrConfig, x, y, width, height) {\r\n        this.x = 0;\r\n        this.y = 0;\r\n        this.rotation = 0.0;\r\n        this.anchor = Vector.Half;\r\n        this.offset = Vector.Zero;\r\n        this.scale = Vector.One;\r\n        /**\r\n         * Default: false, should the sprite be drawn around the anchor or from the top left.\r\n         * Sprite rotations/scaling still happen around the anchor regardless of this setting.\r\n         */\r\n        this.drawAroundAnchor = false;\r\n        this.logger = Logger.getInstance();\r\n        /**\r\n         * Draws the sprite flipped vertically\r\n         */\r\n        this.flipVertical = false;\r\n        /**\r\n         * Draws the sprite flipped horizontally\r\n         */\r\n        this.flipHorizontal = false;\r\n        this.effects = [];\r\n        this.width = 0;\r\n        this.height = 0;\r\n        this._spriteCanvas = null;\r\n        this._spriteCtx = null;\r\n        this._pixelData = null;\r\n        this._pixelsLoaded = false;\r\n        this._dirtyEffect = true;\r\n        this._opacity = 1;\r\n        let image = imageOrConfig;\r\n        if (imageOrConfig && !(imageOrConfig instanceof Texture)) {\r\n            x = imageOrConfig.x | 0;\r\n            y = imageOrConfig.y | 0;\r\n            width = imageOrConfig.width | 0;\r\n            height = imageOrConfig.height | 0;\r\n            image = imageOrConfig.image;\r\n            if (!image) {\r\n                const message = 'An image texture is required to construct a sprite';\r\n                throw new Error(message);\r\n            }\r\n        }\r\n        this.x = x || 0;\r\n        this.y = y || 0;\r\n        this.texture = image;\r\n        this._spriteCanvas = document.createElement('canvas');\r\n        this._spriteCanvas.width = width;\r\n        this._spriteCanvas.height = height;\r\n        this._spriteCtx = this._spriteCanvas.getContext('2d');\r\n        this._initPixelsFromTexture();\r\n        this.width = width;\r\n        this.height = height;\r\n    }\r\n    get drawWidth() {\r\n        return Math.abs(this.width * this.scale.x);\r\n    }\r\n    get drawHeight() {\r\n        return Math.abs(this.height * this.scale.y);\r\n    }\r\n    async _initPixelsFromTexture() {\r\n        try {\r\n            const image = await this.texture.loaded;\r\n            this.width = this.width || image.naturalWidth;\r\n            this.height = this.height || image.naturalHeight;\r\n            this._spriteCanvas.width = this._spriteCanvas.width || image.naturalWidth;\r\n            this._spriteCanvas.height = this._spriteCanvas.height || image.naturalHeight;\r\n            this._loadPixels();\r\n            this._dirtyEffect = true;\r\n        }\r\n        catch (e) {\r\n            this.logger.error('Error loading texture ', this.texture.path, e);\r\n        }\r\n    }\r\n    _loadPixels() {\r\n        if (this.texture.isLoaded() && !this._pixelsLoaded) {\r\n            const naturalWidth = this.texture.image.naturalWidth || 0;\r\n            const naturalHeight = this.texture.image.naturalHeight || 0;\r\n            if (this.width > naturalWidth) {\r\n                this.logger.warn(`The sprite width ${this.width} exceeds the width \r\n                              ${naturalWidth} of the backing texture ${this.texture.path}`);\r\n            }\r\n            if (this.width <= 0 || naturalWidth <= 0) {\r\n                throw new Error(`The width of a sprite cannot be 0 or negative, sprite width: ${this.width}, original width: ${naturalWidth}`);\r\n            }\r\n            if (this.height > naturalHeight) {\r\n                this.logger.warn(`The sprite height ${this.height} exceeds the height \r\n                              ${naturalHeight} of the backing texture ${this.texture.path}`);\r\n            }\r\n            if (this.height <= 0 || naturalHeight <= 0) {\r\n                throw new Error(`The height of a sprite cannot be 0 or negative, sprite height: ${this.height}, original height: ${naturalHeight}`);\r\n            }\r\n            this._flushTexture();\r\n            this._pixelsLoaded = true;\r\n        }\r\n    }\r\n    _flushTexture() {\r\n        const naturalWidth = this.texture.image.naturalWidth || 0;\r\n        const naturalHeight = this.texture.image.naturalHeight || 0;\r\n        this._spriteCtx.clearRect(0, 0, this.width, this.height);\r\n        this._spriteCtx.drawImage(this.texture.image, clamp(this.x, 0, naturalWidth), clamp(this.y, 0, naturalHeight), clamp(this.width, 0, naturalWidth), clamp(this.height, 0, naturalHeight), 0, 0, this.width, this.height);\r\n    }\r\n    /**\r\n     * Applies the [[Opacity]] effect to a sprite, setting the alpha of all pixels to a given value\r\n     */\r\n    opacity(value) {\r\n        this._opacity = value;\r\n    }\r\n    /**\r\n     * Applies the [[Grayscale]] effect to a sprite, removing color information.\r\n     */\r\n    grayscale() {\r\n        this.addEffect(new Grayscale());\r\n    }\r\n    /**\r\n     * Applies the [[Invert]] effect to a sprite, inverting the pixel colors.\r\n     */\r\n    invert() {\r\n        this.addEffect(new Invert());\r\n    }\r\n    /**\r\n     * Applies the [[Fill]] effect to a sprite, changing the color channels of all non-transparent pixels to match a given color\r\n     */\r\n    fill(color) {\r\n        this.addEffect(new Fill(color));\r\n    }\r\n    /**\r\n     * Applies the [[Colorize]] effect to a sprite, changing the color channels of all pixels to be the average of the original color\r\n     * and the provided color.\r\n     */\r\n    colorize(color) {\r\n        this.addEffect(new Colorize(color));\r\n    }\r\n    /**\r\n     * Applies the [[Lighten]] effect to a sprite, changes the lightness of the color according to HSL\r\n     */\r\n    lighten(factor = 0.1) {\r\n        this.addEffect(new Lighten(factor));\r\n    }\r\n    /**\r\n     * Applies the [[Darken]] effect to a sprite, changes the darkness of the color according to HSL\r\n     */\r\n    darken(factor = 0.1) {\r\n        this.addEffect(new Darken(factor));\r\n    }\r\n    /**\r\n     * Applies the [[Saturate]] effect to a sprite, saturates the color according to HSL\r\n     */\r\n    saturate(factor = 0.1) {\r\n        this.addEffect(new Saturate(factor));\r\n    }\r\n    /**\r\n     * Applies the [[Desaturate]] effect to a sprite, desaturates the color according to HSL\r\n     */\r\n    desaturate(factor = 0.1) {\r\n        this.addEffect(new Desaturate(factor));\r\n    }\r\n    /**\r\n     * Adds a new [[SpriteEffect]] to this drawing.\r\n     * @param effect  Effect to add to the this drawing\r\n     */\r\n    addEffect(effect) {\r\n        this.effects.push(effect);\r\n        // We must check if the texture and the backing sprite pixels are loaded as well before\r\n        // an effect can be applied\r\n        if (!this.texture.isLoaded() || !this._pixelsLoaded) {\r\n            this._dirtyEffect = true;\r\n        }\r\n        else {\r\n            this._applyEffects();\r\n        }\r\n    }\r\n    removeEffect(param) {\r\n        let indexToRemove = -1;\r\n        if (typeof param === 'number') {\r\n            indexToRemove = param;\r\n        }\r\n        else {\r\n            indexToRemove = this.effects.indexOf(param);\r\n        }\r\n        // bounds check\r\n        if (indexToRemove < 0 || indexToRemove >= this.effects.length) {\r\n            return;\r\n        }\r\n        this.effects.splice(indexToRemove, 1);\r\n        // We must check if the texture and the backing sprite pixels are loaded as well before\r\n        // an effect can be applied\r\n        if (!this.texture.isLoaded() || !this._pixelsLoaded) {\r\n            this._dirtyEffect = true;\r\n        }\r\n        else {\r\n            this._applyEffects();\r\n        }\r\n    }\r\n    _applyEffects() {\r\n        this._flushTexture();\r\n        if (this.effects.length > 0) {\r\n            this._pixelData = this._spriteCtx.getImageData(0, 0, this.width, this.height);\r\n            const len = this.effects.length;\r\n            for (let i = 0; i < len; i++) {\r\n                for (let y = 0; y < this.height; y++) {\r\n                    for (let x = 0; x < this.width; x++) {\r\n                        this.effects[i].updatePixel(x, y, this._pixelData);\r\n                    }\r\n                }\r\n            }\r\n            this._spriteCtx.clearRect(0, 0, this.width, this.height);\r\n            this._spriteCtx.putImageData(this._pixelData, 0, 0);\r\n        }\r\n        this._dirtyEffect = false;\r\n    }\r\n    /**\r\n     * Clears all effects from the drawing and return it to its original state.\r\n     */\r\n    clearEffects() {\r\n        this.effects.length = 0;\r\n        this._applyEffects();\r\n    }\r\n    /**\r\n     * Resets the internal state of the drawing (if any)\r\n     */\r\n    reset() {\r\n        // do nothing\r\n    }\r\n    debugDraw(ctx, x, y) {\r\n        ctx.save();\r\n        ctx.translate(x, y);\r\n        ctx.rotate(this.rotation);\r\n        const xpoint = this.drawWidth * this.anchor.x;\r\n        const ypoint = this.drawHeight * this.anchor.y;\r\n        ctx.strokeStyle = Color.Black.toString();\r\n        ctx.strokeRect(-xpoint, -ypoint, this.drawWidth, this.drawHeight);\r\n        ctx.restore();\r\n    }\r\n    draw(ctxOrOptions, x, y) {\r\n        if (ctxOrOptions instanceof CanvasRenderingContext2D) {\r\n            this._drawWithOptions({ ctx: ctxOrOptions, x, y });\r\n        }\r\n        else {\r\n            this._drawWithOptions(ctxOrOptions);\r\n        }\r\n    }\r\n    _drawWithOptions(options) {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\r\n        const { ctx, x, y, rotation, drawWidth, drawHeight, anchor, offset, opacity, flipHorizontal, flipVertical } = {\r\n            ...options,\r\n            rotation: (_a = options.rotation) !== null && _a !== void 0 ? _a : this.rotation,\r\n            drawWidth: (_b = options.drawWidth) !== null && _b !== void 0 ? _b : this.width,\r\n            drawHeight: (_c = options.drawHeight) !== null && _c !== void 0 ? _c : this.height,\r\n            flipHorizontal: (_d = options.flipHorizontal) !== null && _d !== void 0 ? _d : this.flipHorizontal,\r\n            flipVertical: (_e = options.flipVertical) !== null && _e !== void 0 ? _e : this.flipVertical,\r\n            anchor: (_f = options.anchor) !== null && _f !== void 0 ? _f : this.anchor,\r\n            offset: (_g = options.offset) !== null && _g !== void 0 ? _g : this.offset,\r\n            opacity: ((_h = options.opacity) !== null && _h !== void 0 ? _h : 1) * ((_j = this._opacity) !== null && _j !== void 0 ? _j : 1)\r\n        };\r\n        if (this._dirtyEffect) {\r\n            this._applyEffects();\r\n        }\r\n        // calculating current dimensions\r\n        const anchorX = drawWidth * anchor.x + offset.x;\r\n        const anchorY = drawHeight * anchor.y + offset.y;\r\n        const scaleDirX = this.scale.x > 0 ? 1 : -1;\r\n        const scaleDirY = this.scale.y > 0 ? 1 : -1;\r\n        ctx.save();\r\n        // Move the draw point of origin\r\n        ctx.translate(x, y);\r\n        // Rotate and scale around anchor point\r\n        // This requires a bit of explaination, scale coordinates first positive flipping or rotating\r\n        ctx.scale(Math.abs(this.scale.x), Math.abs(this.scale.y));\r\n        if (this.drawAroundAnchor) {\r\n            // In the case where you want the anchor to match with the point of draw\r\n            // Otherwise sprites are always drawn from top-left\r\n            ctx.translate(-anchorX, -anchorY);\r\n        }\r\n        ctx.translate(anchorX, anchorY);\r\n        ctx.rotate(rotation);\r\n        // This is for handling direction changes 1 or -1, that way we don't have mismatched translates()\r\n        ctx.scale(scaleDirX, scaleDirY);\r\n        ctx.translate(-anchorX, -anchorY);\r\n        if (flipHorizontal) {\r\n            ctx.translate(drawWidth, 0);\r\n            ctx.scale(-1, 1);\r\n        }\r\n        if (flipVertical) {\r\n            ctx.translate(0, drawHeight);\r\n            ctx.scale(1, -1);\r\n        }\r\n        const oldAlpha = ctx.globalAlpha;\r\n        ctx.globalAlpha = opacity;\r\n        // Context is already rotated and scaled\r\n        ctx.drawImage(this._spriteCanvas, 0, 0, this.width, this.height, // source\r\n        0, 0, this.width, this.height); // dest\r\n        ctx.globalAlpha = oldAlpha;\r\n        ctx.restore();\r\n    }\r\n    /**\r\n     * Produces a copy of the current sprite\r\n     */\r\n    clone() {\r\n        const result = new Sprite_Sprite(this.texture, this.x, this.y, this.width, this.height);\r\n        result.anchor = this.anchor.clone();\r\n        result.scale = this.scale.clone();\r\n        result.rotation = this.rotation;\r\n        result.flipHorizontal = this.flipHorizontal;\r\n        result.flipVertical = this.flipVertical;\r\n        const len = this.effects.length;\r\n        for (let i = 0; i < len; i++) {\r\n            result.addEffect(this.effects[i]);\r\n        }\r\n        return result;\r\n    }\r\n}\r\n/**\r\n * A [[LegacyDrawing.Sprite]] is one of the main drawing primitives. It is responsible for drawing\r\n * images or parts of images from a [[LegacyDrawing.Texture]] resource to the screen.\r\n * @deprecated Use [[Sprite]]\r\n */\r\nlet Sprite_Sprite = class Sprite extends Configurable(SpriteImpl) {\r\n    constructor(imageOrConfig, x, y, width, height) {\r\n        super(imageOrConfig, x, y, width, height);\r\n    }\r\n};\r\nSprite_Sprite = Sprite_decorate([\r\n    obsolete({\r\n        message: 'Label.clearTextShadow will be removed in v0.26.0',\r\n        alternateMethod: 'Use Label.font.shadow'\r\n    })\r\n], Sprite_Sprite);\r\n\r\n\n;// CONCATENATED MODULE: ./Graphics/Sprite.ts\n\r\n\r\n\r\n\r\nclass Sprite extends Graphic {\r\n    constructor(options) {\r\n        var _a, _b;\r\n        super(options);\r\n        this._dirty = true;\r\n        this.image = options.image;\r\n        const { width, height } = options;\r\n        this.sourceView = (_a = options.sourceView) !== null && _a !== void 0 ? _a : { x: 0, y: 0, width: width !== null && width !== void 0 ? width : 0, height: height !== null && height !== void 0 ? height : 0 };\r\n        this.destSize = (_b = options.destSize) !== null && _b !== void 0 ? _b : { width: width !== null && width !== void 0 ? width : 0, height: height !== null && height !== void 0 ? height : 0 };\r\n        this._updateSpriteDimensions();\r\n        this.image.ready.then(() => {\r\n            this._updateSpriteDimensions();\r\n        });\r\n    }\r\n    static from(image) {\r\n        return new Sprite({\r\n            image: image\r\n        });\r\n    }\r\n    get width() {\r\n        return Math.abs(this.destSize.width * this.scale.x);\r\n    }\r\n    get height() {\r\n        return Math.abs(this.destSize.height * this.scale.y);\r\n    }\r\n    set width(newWidth) {\r\n        newWidth /= Math.abs(this.scale.x);\r\n        this.destSize.width = newWidth;\r\n        super.width = Math.ceil(this.destSize.width);\r\n    }\r\n    set height(newHeight) {\r\n        newHeight /= Math.abs(this.scale.y);\r\n        this.destSize.height = newHeight;\r\n        super.height = Math.ceil(this.destSize.height);\r\n    }\r\n    _updateSpriteDimensions() {\r\n        var _a, _b, _c, _d, _e, _f;\r\n        const { width: nativeWidth, height: nativeHeight } = this.image;\r\n        // This code uses || to avoid 0's\r\n        // If the source is not specified, use the native dimension\r\n        this.sourceView.width = ((_a = this.sourceView) === null || _a === void 0 ? void 0 : _a.width) || nativeWidth;\r\n        this.sourceView.height = ((_b = this.sourceView) === null || _b === void 0 ? void 0 : _b.height) || nativeHeight;\r\n        // If the destination is not specified, use the source if specified, then native\r\n        this.destSize.width = ((_c = this.destSize) === null || _c === void 0 ? void 0 : _c.width) || ((_d = this.sourceView) === null || _d === void 0 ? void 0 : _d.width) || nativeWidth;\r\n        this.destSize.height = ((_e = this.destSize) === null || _e === void 0 ? void 0 : _e.height) || ((_f = this.sourceView) === null || _f === void 0 ? void 0 : _f.height) || nativeHeight;\r\n        this.width = Math.ceil(this.destSize.width) * this.scale.x;\r\n        this.height = Math.ceil(this.destSize.height) * this.scale.y;\r\n    }\r\n    _preDraw(ex, x, y) {\r\n        if (this.image.isLoaded() && this._dirty) {\r\n            this._dirty = false;\r\n            this._updateSpriteDimensions();\r\n        }\r\n        super._preDraw(ex, x, y);\r\n    }\r\n    _drawImage(ex, x, y) {\r\n        if (this.image.isLoaded()) {\r\n            ex.drawImage(this.image.image, this.sourceView.x, this.sourceView.y, this.sourceView.width, this.sourceView.height, x, y, this.destSize.width, this.destSize.height);\r\n        }\r\n    }\r\n    /**\r\n     * Create a ImageSource from legacy texture\r\n     * @param sprite\r\n     */\r\n    static fromLegacySprite(sprite) {\r\n        const tex = sprite.texture;\r\n        const image = ImageSource.fromLegacyTexture(tex);\r\n        return new Sprite({\r\n            image,\r\n            sourceView: {\r\n                x: sprite.x,\r\n                y: sprite.y,\r\n                width: sprite.width,\r\n                height: sprite.height\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Converts a sprite to a Legacy sprite\r\n     * @deprecated\r\n     * @param sprite\r\n     * @returns LegacyDrawing.Sprite\r\n     */\r\n    static toLegacySprite(sprite) {\r\n        const image = sprite.image;\r\n        const tex = new Texture(image.path);\r\n        tex.data = image.image;\r\n        return new Sprite_Sprite(tex, sprite.sourceView.x, sprite.sourceView.y, sprite.sourceView.width, sprite.sourceView.height);\r\n    }\r\n    clone() {\r\n        return new Sprite({\r\n            image: this.image,\r\n            sourceView: { ...this.sourceView },\r\n            destSize: { ...this.destSize },\r\n            ...this.cloneGraphicOptions()\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/ImageSource.ts\n\r\n\r\n\r\n\r\nclass ImageSource {\r\n    /**\r\n     * The path to the image, can also be a data url like 'data:image/'\r\n     * @param path {string} Path to the image resource relative from the HTML document hosting the game, or absolute\r\n     * @param bustCache {boolean} Should excalibur add a cache busting querystring?\r\n     * @param filtering {ImageFiltering} Optionally override the image filtering set by [[EngineOptions.antialiasing]]\r\n     */\r\n    constructor(path, bustCache = false, filtering) {\r\n        this.path = path;\r\n        this._logger = Logger.getInstance();\r\n        /**\r\n         * Access to the underlying html image element\r\n         */\r\n        this.data = new Image();\r\n        this._resource = new Resource(path, 'blob', bustCache);\r\n        this._filtering = filtering;\r\n        if (path.endsWith('.svg') || path.endsWith('.gif')) {\r\n            this._logger.warn(`Image type is not fully supported, you may have mixed results ${path}. Fully supported: jpg, bmp, and png`);\r\n        }\r\n        this.ready = new Promise((resolve) => {\r\n            this._loadedResolve = resolve;\r\n        });\r\n    }\r\n    /**\r\n     * The original size of the source image in pixels\r\n     */\r\n    get width() {\r\n        return this.image.naturalWidth;\r\n    }\r\n    /**\r\n     * The original height of the source image in pixels\r\n     */\r\n    get height() {\r\n        return this.image.naturalHeight;\r\n    }\r\n    /**\r\n     * Returns true if the Texture is completely loaded and is ready\r\n     * to be drawn.\r\n     */\r\n    isLoaded() {\r\n        if (!this._src) {\r\n            // this boosts speed of access\r\n            this._src = this.data.src;\r\n        }\r\n        return !!this._src;\r\n    }\r\n    get image() {\r\n        return this.data;\r\n    }\r\n    /**\r\n     * Begins loading the image and returns a promise that resolves when the image is loaded\r\n     */\r\n    async load() {\r\n        if (this.isLoaded()) {\r\n            return this.data;\r\n        }\r\n        try {\r\n            // Load base64 or blob if needed\r\n            let url;\r\n            if (!this.path.includes('data:image/')) {\r\n                const blob = await this._resource.load();\r\n                url = URL.createObjectURL(blob);\r\n            }\r\n            else {\r\n                url = this.path;\r\n            }\r\n            // Decode the image\r\n            const image = new Image();\r\n            image.src = url;\r\n            image.setAttribute('data-original-src', this.path);\r\n            await image.decode();\r\n            // Set results\r\n            this.data = image;\r\n        }\r\n        catch (error) {\r\n            throw `Error loading ImageSource from path '${this.path}' with error [${error.message}]`;\r\n        }\r\n        TextureLoader.load(this.data, this._filtering);\r\n        // todo emit complete\r\n        this._loadedResolve(this.data);\r\n        return this.data;\r\n    }\r\n    /**\r\n     * Build a sprite from this ImageSource\r\n     */\r\n    toSprite() {\r\n        return Sprite.from(this);\r\n    }\r\n    /**\r\n     * Create a ImageSource from legacy texture\r\n     * @param tex\r\n     */\r\n    static fromLegacyTexture(tex) {\r\n        const image = new ImageSource(tex.path);\r\n        if (tex.isLoaded()) {\r\n            image.data = tex.data;\r\n        }\r\n        else {\r\n            tex.loaded.then(() => {\r\n                image.data = tex.data;\r\n            });\r\n        }\r\n        return image;\r\n    }\r\n    /**\r\n     * Unload images from memory\r\n     */\r\n    unload() {\r\n        this.data = new Image();\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Drawing/Animation.ts\nvar Animation_decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @hidden\r\n * @deprecated Use [[Animation]]\r\n */\r\nclass AnimationImpl {\r\n    /**\r\n     * Typically you will use a [[SpriteSheet]] to generate an [[Animation]].\r\n     *\r\n     * @param engineOrConfig  Reference to the current game engine\r\n     * @param sprites  An array of sprites to create the frames for the animation\r\n     * @param speed   The number in milliseconds to display each frame in the animation\r\n     * @param loop    Indicates whether the animation should loop after it is completed\r\n     */\r\n    constructor(engineOrConfig, sprites, speed, loop) {\r\n        /**\r\n         * The sprite frames to play, in order. See [[SpriteSheet.getAnimationForAll]] to quickly\r\n         * generate an [[Animation]].\r\n         */\r\n        this.sprites = [];\r\n        /**\r\n         * Current frame index being shown\r\n         */\r\n        this.currentFrame = 0;\r\n        this._timeLeftInFrame = 0;\r\n        this._idempotencyToken = -1;\r\n        this.anchor = Vector.Zero;\r\n        this.rotation = 0.0;\r\n        this.scale = Vector.One;\r\n        /**\r\n         * Indicates whether the animation should loop after it is completed\r\n         */\r\n        this.loop = true;\r\n        /**\r\n         * Indicates the frame index the animation should freeze on for a non-looping\r\n         * animation. By default it is the last frame.\r\n         */\r\n        this.freezeFrame = -1;\r\n        /**\r\n         * Flip each frame vertically. Sets [[Sprite.flipVertical]].\r\n         */\r\n        this.flipVertical = false;\r\n        /**\r\n         * Flip each frame horizontally. Sets [[Sprite.flipHorizontal]].\r\n         */\r\n        this.flipHorizontal = false;\r\n        this.drawWidth = 0;\r\n        this.drawHeight = 0;\r\n        this.width = 0;\r\n        this.height = 0;\r\n        this._opacity = 1;\r\n        let engine = engineOrConfig;\r\n        if (engineOrConfig && !(engineOrConfig instanceof Engine)) {\r\n            const config = engineOrConfig;\r\n            engine = config.engine;\r\n            sprites = config.sprites;\r\n            speed = config.speed;\r\n            loop = config.loop;\r\n        }\r\n        this.sprites = sprites;\r\n        this.speed = speed;\r\n        this._engine = engine;\r\n        this._timeLeftInFrame = this.speed;\r\n        if (loop != null) {\r\n            this.loop = loop;\r\n        }\r\n        if (sprites && sprites[0]) {\r\n            this.drawHeight = sprites[0] ? sprites[0].drawHeight : 0;\r\n            this.drawWidth = sprites[0] ? sprites[0].drawWidth : 0;\r\n            this.width = sprites[0] ? sprites[0].width : 0;\r\n            this.height = sprites[0] ? sprites[0].height : 0;\r\n            this.freezeFrame = sprites.length - 1;\r\n        }\r\n    }\r\n    /**\r\n     * Applies the opacity effect to a sprite, setting the alpha of all pixels to a given value\r\n     */\r\n    opacity(value) {\r\n        this._opacity = value;\r\n    }\r\n    /**\r\n     * Applies the grayscale effect to a sprite, removing color information.\r\n     */\r\n    grayscale() {\r\n        this.addEffect(new Grayscale());\r\n    }\r\n    /**\r\n     * Applies the invert effect to a sprite, inverting the pixel colors.\r\n     */\r\n    invert() {\r\n        this.addEffect(new Invert());\r\n    }\r\n    /**\r\n     * Applies the fill effect to a sprite, changing the color channels of all non-transparent pixels to match a given color\r\n     */\r\n    fill(color) {\r\n        this.addEffect(new Fill(color));\r\n    }\r\n    /**\r\n     * Applies the colorize effect to a sprite, changing the color channels of all pixels to be the average of the original color and the\r\n     * provided color.\r\n     */\r\n    colorize(color) {\r\n        this.addEffect(new Colorize(color));\r\n    }\r\n    /**\r\n     * Applies the lighten effect to a sprite, changes the lightness of the color according to hsl\r\n     */\r\n    lighten(factor = 0.1) {\r\n        this.addEffect(new Lighten(factor));\r\n    }\r\n    /**\r\n     * Applies the darken effect to a sprite, changes the darkness of the color according to hsl\r\n     */\r\n    darken(factor = 0.1) {\r\n        this.addEffect(new Darken(factor));\r\n    }\r\n    /**\r\n     * Applies the saturate effect to a sprite, saturates the color according to hsl\r\n     */\r\n    saturate(factor = 0.1) {\r\n        this.addEffect(new Saturate(factor));\r\n    }\r\n    /**\r\n     * Applies the desaturate effect to a sprite, desaturates the color according to hsl\r\n     */\r\n    desaturate(factor = 0.1) {\r\n        this.addEffect(new Desaturate(factor));\r\n    }\r\n    /**\r\n     * Add a [[SpriteEffect]] manually\r\n     */\r\n    addEffect(effect) {\r\n        for (const i in this.sprites) {\r\n            this.sprites[i].addEffect(effect);\r\n        }\r\n    }\r\n    removeEffect(param) {\r\n        for (const i in this.sprites) {\r\n            this.sprites[i].removeEffect(param);\r\n        }\r\n    }\r\n    /**\r\n     * Clear all sprite effects\r\n     */\r\n    clearEffects() {\r\n        for (const i in this.sprites) {\r\n            this.sprites[i].clearEffects();\r\n        }\r\n    }\r\n    _setAnchor(point) {\r\n        //if (!this.anchor.equals(point)) {\r\n        for (const i in this.sprites) {\r\n            this.sprites[i].anchor.setTo(point.x, point.y);\r\n        }\r\n        //}\r\n    }\r\n    _setRotation(radians) {\r\n        //if (this.rotation !== radians) {\r\n        for (const i in this.sprites) {\r\n            this.sprites[i].rotation = radians;\r\n        }\r\n        //}\r\n    }\r\n    _setScale(scale) {\r\n        //if (!this.scale.equals(scale)) {\r\n        for (const i in this.sprites) {\r\n            this.sprites[i].scale = scale;\r\n        }\r\n        //}\r\n    }\r\n    /**\r\n     * Resets the animation to first frame.\r\n     */\r\n    reset() {\r\n        this.currentFrame = 0;\r\n    }\r\n    /**\r\n     * Indicates whether the animation is complete, animations that loop are never complete.\r\n     */\r\n    isDone() {\r\n        return !this.loop && this.currentFrame >= this.sprites.length;\r\n    }\r\n    /**\r\n     * Not meant to be called by game developers. Ticks the animation forward internally and\r\n     * calculates whether to change to the frame.\r\n     * @internal\r\n     */\r\n    tick(elapsed, idempotencyToken) {\r\n        if (this._idempotencyToken === idempotencyToken) {\r\n            return;\r\n        }\r\n        this._idempotencyToken = idempotencyToken;\r\n        this._timeLeftInFrame -= elapsed;\r\n        if (this._timeLeftInFrame <= 0) {\r\n            this.currentFrame = this.loop ? (this.currentFrame + 1) % this.sprites.length : this.currentFrame + 1;\r\n            this._timeLeftInFrame = this.speed;\r\n        }\r\n        this._updateValues();\r\n        const current = this.sprites[this.currentFrame];\r\n        if (current) {\r\n            this.width = current.width;\r\n            this.height = current.height;\r\n            this.drawWidth = current.drawWidth;\r\n            this.drawHeight = current.drawHeight;\r\n        }\r\n    }\r\n    _updateValues() {\r\n        this._setAnchor(this.anchor);\r\n        this._setRotation(this.rotation);\r\n        this._setScale(this.scale);\r\n    }\r\n    /**\r\n     * Skips ahead a specified number of frames in the animation\r\n     * @param frames  Frames to skip ahead\r\n     */\r\n    skip(frames) {\r\n        this.currentFrame = (this.currentFrame + frames) % this.sprites.length;\r\n    }\r\n    draw(ctxOrOptions, x, y) {\r\n        if (ctxOrOptions instanceof CanvasRenderingContext2D) {\r\n            this._drawWithOptions({ ctx: ctxOrOptions, x, y });\r\n        }\r\n        else {\r\n            this._drawWithOptions(ctxOrOptions);\r\n        }\r\n    }\r\n    _drawWithOptions(options) {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h;\r\n        const animOptions = {\r\n            ...options,\r\n            rotation: (_a = options.rotation) !== null && _a !== void 0 ? _a : this.rotation,\r\n            drawWidth: (_b = options.drawWidth) !== null && _b !== void 0 ? _b : this.drawWidth,\r\n            drawHeight: (_c = options.drawHeight) !== null && _c !== void 0 ? _c : this.drawHeight,\r\n            flipHorizontal: (_d = options.flipHorizontal) !== null && _d !== void 0 ? _d : this.flipHorizontal,\r\n            flipVertical: (_e = options.flipVertical) !== null && _e !== void 0 ? _e : this.flipVertical,\r\n            anchor: (_f = options.anchor) !== null && _f !== void 0 ? _f : this.anchor,\r\n            opacity: ((_g = options.opacity) !== null && _g !== void 0 ? _g : 1) * ((_h = this._opacity) !== null && _h !== void 0 ? _h : 1)\r\n        };\r\n        this._updateValues();\r\n        let currSprite;\r\n        if (this.currentFrame < this.sprites.length) {\r\n            currSprite = this.sprites[this.currentFrame];\r\n            currSprite.draw(animOptions);\r\n        }\r\n        if (this.freezeFrame !== -1 && this.currentFrame >= this.sprites.length) {\r\n            currSprite = this.sprites[clamp(this.freezeFrame, 0, this.sprites.length - 1)];\r\n            currSprite.draw(animOptions);\r\n        }\r\n        // add the calculated width\r\n        if (currSprite) {\r\n            this.drawWidth = currSprite.drawWidth;\r\n            this.drawHeight = currSprite.drawHeight;\r\n        }\r\n    }\r\n    /**\r\n     * Plays an animation at an arbitrary location in the game.\r\n     * @param x  The x position in the game to play\r\n     * @param y  The y position in the game to play\r\n     */\r\n    play(x, y) {\r\n        this.reset();\r\n        this._engine.playAnimation(this, x, y);\r\n    }\r\n}\r\n/**\r\n * Animations allow you to display a series of images one after another,\r\n * creating the illusion of change. Generally these images will come from a [[SpriteSheet]] source.\r\n * @deprecated Use [[Animation]]\r\n */\r\nlet Animation_Animation = class Animation extends Configurable(AnimationImpl) {\r\n    constructor(engineOrConfig, images, speed, loop) {\r\n        super(engineOrConfig, images, speed, loop);\r\n    }\r\n};\r\nAnimation_Animation = Animation_decorate([\r\n    obsolete({\r\n        message: 'Animation will be removed in v0.26.0',\r\n        alternateMethod: 'Use Graphics.Animation'\r\n    })\r\n], Animation_Animation);\r\n\r\n\n;// CONCATENATED MODULE: ./Graphics/FontCommon.ts\n/**\r\n * Enum representing the different font size units\r\n * https://developer.mozilla.org/en-US/docs/Web/CSS/font-size\r\n */\r\nvar FontUnit;\r\n(function (FontUnit) {\r\n    /**\r\n     * Em is a scalable unit, 1 em is equal to the current font size of the current element, parent elements can effect em values\r\n     */\r\n    FontUnit[\"Em\"] = \"em\";\r\n    /**\r\n     * Rem is similar to the Em, it is a scalable unit. 1 rem is equal to the font size of the root element\r\n     */\r\n    FontUnit[\"Rem\"] = \"rem\";\r\n    /**\r\n     * Pixel is a unit of length in screen pixels\r\n     */\r\n    FontUnit[\"Px\"] = \"px\";\r\n    /**\r\n     * Point is a physical unit length (1/72 of an inch)\r\n     */\r\n    FontUnit[\"Pt\"] = \"pt\";\r\n    /**\r\n     * Percent is a scalable unit similar to Em, the only difference is the Em units scale faster when Text-Size stuff\r\n     */\r\n    FontUnit[\"Percent\"] = \"%\";\r\n})(FontUnit || (FontUnit = {}));\r\n/**\r\n * Enum representing the different horizontal text alignments\r\n */\r\nvar TextAlign;\r\n(function (TextAlign) {\r\n    /**\r\n     * The text is left-aligned.\r\n     */\r\n    TextAlign[\"Left\"] = \"left\";\r\n    /**\r\n     * The text is right-aligned.\r\n     */\r\n    TextAlign[\"Right\"] = \"right\";\r\n    /**\r\n     * The text is centered.\r\n     */\r\n    TextAlign[\"Center\"] = \"center\";\r\n    /**\r\n     * The text is aligned at the normal start of the line (left-aligned for left-to-right locales,\r\n     * right-aligned for right-to-left locales).\r\n     */\r\n    TextAlign[\"Start\"] = \"start\";\r\n    /**\r\n     * The text is aligned at the normal end of the line (right-aligned for left-to-right locales,\r\n     * left-aligned for right-to-left locales).\r\n     */\r\n    TextAlign[\"End\"] = \"end\";\r\n})(TextAlign || (TextAlign = {}));\r\n/**\r\n * Enum representing the different baseline text alignments\r\n */\r\nvar BaseAlign;\r\n(function (BaseAlign) {\r\n    /**\r\n     * The text baseline is the top of the em square.\r\n     */\r\n    BaseAlign[\"Top\"] = \"top\";\r\n    /**\r\n     * The text baseline is the hanging baseline.  Currently unsupported; this will act like\r\n     * alphabetic.\r\n     */\r\n    BaseAlign[\"Hanging\"] = \"hanging\";\r\n    /**\r\n     * The text baseline is the middle of the em square.\r\n     */\r\n    BaseAlign[\"Middle\"] = \"middle\";\r\n    /**\r\n     * The text baseline is the normal alphabetic baseline.\r\n     */\r\n    BaseAlign[\"Alphabetic\"] = \"alphabetic\";\r\n    /**\r\n     * The text baseline is the ideographic baseline; this is the bottom of\r\n     * the body of the characters, if the main body of characters protrudes\r\n     * beneath the alphabetic baseline.  Currently unsupported; this will\r\n     * act like alphabetic.\r\n     */\r\n    BaseAlign[\"Ideographic\"] = \"ideographic\";\r\n    /**\r\n     * The text baseline is the bottom of the bounding box.  This differs\r\n     * from the ideographic baseline in that the ideographic baseline\r\n     * doesn't consider descenders.\r\n     */\r\n    BaseAlign[\"Bottom\"] = \"bottom\";\r\n})(BaseAlign || (BaseAlign = {}));\r\n/**\r\n * Enum representing the different possible font styles\r\n */\r\nvar FontStyle;\r\n(function (FontStyle) {\r\n    FontStyle[\"Normal\"] = \"normal\";\r\n    FontStyle[\"Italic\"] = \"italic\";\r\n    FontStyle[\"Oblique\"] = \"oblique\";\r\n})(FontStyle || (FontStyle = {}));\r\n/**\r\n * Enum representing the text direction, useful for other languages, or writing text in reverse\r\n */\r\nvar Direction;\r\n(function (Direction) {\r\n    Direction[\"LeftToRight\"] = \"ltr\";\r\n    Direction[\"RightToLeft\"] = \"rtl\";\r\n})(Direction || (Direction = {}));\r\n\n;// CONCATENATED MODULE: ./Drawing/SpriteSheet.ts\nvar SpriteSheet_decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Sprite sheets are a useful mechanism for slicing up image resources into\r\n * separate sprites or for generating in game animations. [[Sprite|Sprites]] are organized\r\n * in row major order in the [[SpriteSheet]].\r\n * @deprecated Will be removed in v0.26.0\r\n */\r\nclass SpriteSheet_SpriteSheet {\r\n    /**\r\n     * @param imageOrConfigOrSprites The backing image texture to build the SpriteSheet, option bag, or sprite list\r\n     * @param columns   The number of columns in the image texture\r\n     * @param rows      The number of rows in the image texture\r\n     * @param spWidth   The width of each individual sprite in pixels\r\n     * @param spHeight  The height of each individual sprite in pixels\r\n     * @param spacing   The spacing between every sprite in a spritesheet\r\n     */\r\n    constructor(imageOrConfigOrSprites, columns, rows, spWidth, spHeight, spacing) {\r\n        this._sprites = [];\r\n        this._image = null;\r\n        this._columns = 0;\r\n        this._rows = 0;\r\n        this._spWidth = 0;\r\n        this._spHeight = 0;\r\n        this._spacing = 0;\r\n        let loadFromImage = false;\r\n        if (imageOrConfigOrSprites instanceof Array) {\r\n            this._sprites = imageOrConfigOrSprites;\r\n        }\r\n        else {\r\n            if (imageOrConfigOrSprites && !(imageOrConfigOrSprites instanceof Texture)) {\r\n                this._columns = imageOrConfigOrSprites.columns;\r\n                this._rows = imageOrConfigOrSprites.rows;\r\n                this._spWidth = imageOrConfigOrSprites.spWidth;\r\n                this._spHeight = imageOrConfigOrSprites.spHeight;\r\n                this._image = imageOrConfigOrSprites.image;\r\n                this._spacing = imageOrConfigOrSprites.spacing || 0;\r\n            }\r\n            else {\r\n                this._image = imageOrConfigOrSprites;\r\n                this._columns = columns;\r\n                this._rows = rows;\r\n                this._spWidth = spWidth;\r\n                this._spHeight = spHeight;\r\n                this._spacing = spacing || 0;\r\n            }\r\n            this._sprites = new Array(this._columns * this._rows);\r\n            loadFromImage = true;\r\n        }\r\n        // Inspect actual image dimensions with preloading\r\n        if (this.image instanceof Texture) {\r\n            let isWidthError = false;\r\n            let isHeightError = false;\r\n            if (this.image.isLoaded()) {\r\n                isWidthError = this.spWidth * this.columns > this.image.image.naturalWidth;\r\n                isHeightError = this.spHeight * this.rows > this.image.image.naturalHeight;\r\n                if (isWidthError) {\r\n                    throw new RangeError(`SpriteSheet specified is wider, ` +\r\n                        `${this.columns} cols x ${this.spWidth} pixels > ${this.image.image.naturalWidth} ` +\r\n                        `pixels than image width`);\r\n                }\r\n                if (isHeightError) {\r\n                    throw new RangeError(`SpriteSheet specified is taller, ` +\r\n                        `${this.rows} rows x ${this.spHeight} pixels > ${this.image.image.naturalHeight} ` +\r\n                        `pixels than image height`);\r\n                }\r\n            }\r\n        }\r\n        if (loadFromImage) {\r\n            const spacing = this.getSpacingDimensions();\r\n            for (let row = 0; row < this.rows; row++) {\r\n                for (let col = 0; col < this.columns; col++) {\r\n                    this._sprites[col + row * this.columns] = new Sprite_Sprite(this.image, col * this.spWidth + spacing.margin * col + spacing.left, row * this.spHeight + spacing.margin * row + spacing.top, this.spWidth, this.spHeight);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Gets the raw spacing dimensions for the sprites in the sheet, which can be a fixed number or custom dimensions.\r\n     */\r\n    get spacing() {\r\n        return this._spacing;\r\n    }\r\n    /**\r\n     * Get a copy of the backing sprite array\r\n     */\r\n    get sprites() {\r\n        return [...this._sprites];\r\n    }\r\n    /**\r\n     * The backing texture used for the sprite sheet\r\n     */\r\n    get image() {\r\n        return this._image;\r\n    }\r\n    /**\r\n     * The number of columns in the sheet\r\n     */\r\n    get columns() {\r\n        return this._columns;\r\n    }\r\n    /**\r\n     * The number of rows in the sheet\r\n     */\r\n    get rows() {\r\n        return this._rows;\r\n    }\r\n    /**\r\n     * The width of the individual sprites\r\n     */\r\n    get spWidth() {\r\n        return this._spWidth;\r\n    }\r\n    /**\r\n     * The height of the individual sprites\r\n     */\r\n    get spHeight() {\r\n        return this._spHeight;\r\n    }\r\n    /**\r\n     * Gets the calculated spacing dimensions based on whether spacing\r\n     * is a fixed number or has different values for each dimension\r\n     */\r\n    getSpacingDimensions() {\r\n        var _a, _b, _c;\r\n        if (typeof this.spacing === 'number') {\r\n            return {\r\n                left: this.spacing,\r\n                top: this.spacing,\r\n                margin: this.spacing\r\n            };\r\n        }\r\n        else {\r\n            return {\r\n                left: (_a = this.spacing.left) !== null && _a !== void 0 ? _a : 0,\r\n                top: (_b = this.spacing.top) !== null && _b !== void 0 ? _b : 0,\r\n                margin: (_c = this.spacing.margin) !== null && _c !== void 0 ? _c : 0\r\n            };\r\n        }\r\n    }\r\n    /**\r\n     * Create an animation from the this SpriteSheet by listing out the\r\n     * sprite indices. Sprites are organized in row major order in the SpriteSheet.\r\n     * @param engine   Reference to the current game [[Engine]]\r\n     * @param indices  An array of sprite indices to use in the animation\r\n     * @param speed    The number in milliseconds to display each frame in the animation\r\n     */\r\n    getAnimationByIndices(engine, indices, speed) {\r\n        let images = indices.map((index) => {\r\n            return this.sprites[index];\r\n        });\r\n        images = images.map(function (i) {\r\n            return i.clone();\r\n        });\r\n        return new Animation_Animation(engine, images, speed);\r\n    }\r\n    /**\r\n     * Create an animation from the this SpriteSheet by specifying the range of\r\n     * images with the beginning (inclusive) and ending (exclusive) index\r\n     * For example `getAnimationBetween(engine, 0, 5, 200)` returns an animation with 5 frames.\r\n     * @param engine      Reference to the current game Engine\r\n     * @param beginIndex  The index to start taking frames (inclusive)\r\n     * @param endIndex    The index to stop taking frames (exclusive)\r\n     * @param speed       The number in milliseconds to display each frame in the animation\r\n     */\r\n    getAnimationBetween(engine, beginIndex, endIndex, speed) {\r\n        let images = this.sprites.slice(beginIndex, endIndex);\r\n        images = images.map(function (i) {\r\n            return i.clone();\r\n        });\r\n        return new Animation_Animation(engine, images, speed);\r\n    }\r\n    /**\r\n     * Treat the entire SpriteSheet as one animation, organizing the frames in\r\n     * row major order.\r\n     * @param engine  Reference to the current game [[Engine]]\r\n     * @param speed   The number in milliseconds to display each frame the animation\r\n     */\r\n    getAnimationForAll(engine, speed) {\r\n        const sprites = this.sprites.map(function (i) {\r\n            return i.clone();\r\n        });\r\n        return new Animation_Animation(engine, sprites, speed);\r\n    }\r\n    /**\r\n     * Retrieve a specific sprite from the SpriteSheet by its index. Sprites are organized\r\n     * in row major order in the SpriteSheet.\r\n     * @param index  The index of the sprite\r\n     */\r\n    getSprite(index) {\r\n        if (index >= 0 && index < this.sprites.length) {\r\n            return this.sprites[index];\r\n        }\r\n        else {\r\n            throw new Error('Invalid index: ' + index);\r\n        }\r\n    }\r\n    /**\r\n     * Get an animation with bespoke sprite coordinates. This is useful if the SpriteSheet is\r\n     * packed and not a uniform width or height. The resulting [[Animation]] will have the height and width of the\r\n     * largest dimension (width, height) from among the sprite coordinates\r\n     * @param engine\r\n     * @param spriteCoordinates\r\n     * @param speed\r\n     */\r\n    getAnimationByCoords(engine, spriteCoordinates, speed) {\r\n        let maxWidth = 0;\r\n        let maxHeight = 0;\r\n        const sprites = new Array(spriteCoordinates.length);\r\n        for (let i = 0; i < spriteCoordinates.length; i++) {\r\n            const coord = spriteCoordinates[i];\r\n            // no need to pass image again if using a spritesheet\r\n            coord.image = coord.image || this.image;\r\n            maxWidth = Math.max(maxWidth, coord.drawWidth);\r\n            maxHeight = Math.max(maxHeight, coord.drawHeight);\r\n            sprites[i] = new Sprite_Sprite(coord);\r\n        }\r\n        const anim = new Animation_Animation(engine, sprites, speed);\r\n        anim.drawWidth = maxWidth;\r\n        anim.drawHeight = maxHeight;\r\n        return anim;\r\n    }\r\n}\r\n/**\r\n * Sprite fonts are a used in conjunction with a [[Label]] to specify\r\n * a particular bitmap as a font. Note that some font features are not\r\n * supported by Sprite fonts.\r\n * @deprecated Will be removed into v0.26.0\r\n */\r\nlet SpriteFont = class SpriteFont extends SpriteSheet_SpriteSheet {\r\n    /**\r\n     * @param imageOrConfig   The backing image texture to build the SpriteFont or the sprite font option bag\r\n     * @param alphabet        A string representing all the characters in the image, in row major order.\r\n     * @param caseInsensitive  Indicate whether this font takes case into account\r\n     * @param columns         The number of columns of characters in the image\r\n     * @param rows            The number of rows of characters in the image\r\n     * @param spWidth         The width of each character in pixels\r\n     * @param spHeight        The height of each character in pixels\r\n     */\r\n    constructor(imageOrConfig, alphabet, caseInsensitive, columns, rows, spWidth, spHeight, spacing) {\r\n        super(imageOrConfig instanceof Texture\r\n            ? {\r\n                image: imageOrConfig,\r\n                spWidth: spWidth,\r\n                spHeight: spHeight,\r\n                rows: rows,\r\n                columns: columns,\r\n                spacing: spacing || 0\r\n            }\r\n            : imageOrConfig);\r\n        this._currentColor = Color.Black;\r\n        this._currentOpacity = 1.0;\r\n        this._spriteRecord = {};\r\n        // text shadow\r\n        this._textShadowOn = false;\r\n        this._textShadowDirty = true;\r\n        this._textShadowColor = Color.Black;\r\n        this._textShadowSprites = {};\r\n        this._shadowOffsetX = 5;\r\n        this._shadowOffsetY = 5;\r\n        if (imageOrConfig && !(imageOrConfig instanceof Texture)) {\r\n            alphabet = imageOrConfig.alphabet;\r\n            caseInsensitive = imageOrConfig.caseInsensitive;\r\n        }\r\n        this.alphabet = alphabet;\r\n        this.caseInsensitive = caseInsensitive;\r\n        this._spriteRecord = this.getTextSprites();\r\n    }\r\n    /**\r\n     * Returns a dictionary that maps each character in the alphabet to the appropriate [[Sprite]].\r\n     */\r\n    getTextSprites() {\r\n        const lookup = {};\r\n        for (let i = 0; i < this.alphabet.length; i++) {\r\n            let char = this.alphabet[i];\r\n            if (this.caseInsensitive) {\r\n                char = char.toLowerCase();\r\n            }\r\n            lookup[char] = this.sprites[i].clone();\r\n        }\r\n        return lookup;\r\n    }\r\n    /**\r\n     * Sets the text shadow for sprite fonts\r\n     * @param offsetX      The x offset in pixels to place the shadow\r\n     * @param offsetY      The y offset in pixels to place the shadow\r\n     * @param shadowColor  The color of the text shadow\r\n     */\r\n    setTextShadow(offsetX, offsetY, shadowColor) {\r\n        this._textShadowOn = true;\r\n        this._shadowOffsetX = offsetX;\r\n        this._shadowOffsetY = offsetY;\r\n        this._textShadowColor = shadowColor.clone();\r\n        this._textShadowDirty = true;\r\n        for (const character in this._spriteRecord) {\r\n            this._textShadowSprites[character] = this._spriteRecord[character].clone();\r\n        }\r\n    }\r\n    /**\r\n     * Toggles text shadows on or off\r\n     */\r\n    useTextShadow(on) {\r\n        this._textShadowOn = on;\r\n        if (on) {\r\n            this.setTextShadow(5, 5, this._textShadowColor);\r\n        }\r\n    }\r\n    /**\r\n     * Draws the current sprite font\r\n     */\r\n    draw(ctx, text, x, y, options) {\r\n        options = this._parseOptions(options);\r\n        if (this._currentColor.toString() !== options.color.toString() || this._currentOpacity !== options.opacity) {\r\n            this._currentOpacity = options.opacity;\r\n            this._currentColor = options.color;\r\n            for (const char in this._spriteRecord) {\r\n                this._spriteRecord[char].clearEffects();\r\n                this._spriteRecord[char].fill(options.color);\r\n                this._spriteRecord[char].opacity(options.opacity);\r\n            }\r\n        }\r\n        if (this._textShadowOn && this._textShadowDirty && this._textShadowColor) {\r\n            for (const characterShadow in this._textShadowSprites) {\r\n                this._textShadowSprites[characterShadow].clearEffects();\r\n                this._textShadowSprites[characterShadow].addEffect(new Fill(this._textShadowColor.clone()));\r\n            }\r\n            this._textShadowDirty = false;\r\n        }\r\n        // find the current length of text in pixels\r\n        const sprite = this.sprites[0];\r\n        // find the current height fo the text in pixels\r\n        const height = sprite.height;\r\n        // calculate appropriate scale for font size\r\n        const scale = options.fontSize / height;\r\n        const length = text.length * sprite.width * scale + text.length * options.letterSpacing;\r\n        let currX = x;\r\n        if (options.textAlign === TextAlign.Left || options.textAlign === TextAlign.Start) {\r\n            currX = x;\r\n        }\r\n        else if (options.textAlign === TextAlign.Right || options.textAlign === TextAlign.End) {\r\n            currX = x - length;\r\n        }\r\n        else if (options.textAlign === TextAlign.Center) {\r\n            currX = x - length / 2;\r\n        }\r\n        let currY = y - height * scale;\r\n        if (options.baseAlign === BaseAlign.Top || options.baseAlign === BaseAlign.Hanging) {\r\n            currY = y;\r\n        }\r\n        else if (options.baseAlign === BaseAlign.Ideographic ||\r\n            options.baseAlign === BaseAlign.Bottom ||\r\n            options.baseAlign === BaseAlign.Alphabetic) {\r\n            currY = y - height * scale;\r\n        }\r\n        else if (options.baseAlign === BaseAlign.Middle) {\r\n            currY = y - (height * scale) / 2;\r\n        }\r\n        for (let i = 0; i < text.length; i++) {\r\n            let character = text[i];\r\n            if (this.caseInsensitive) {\r\n                character = character.toLowerCase();\r\n            }\r\n            try {\r\n                // if text shadow\r\n                if (this._textShadowOn) {\r\n                    this._textShadowSprites[character].drawAroundAnchor = false;\r\n                    this._textShadowSprites[character].scale = vec(scale, scale);\r\n                    this._textShadowSprites[character].draw(ctx, currX + this._shadowOffsetX, currY + this._shadowOffsetY);\r\n                }\r\n                const charSprite = this._spriteRecord[character];\r\n                charSprite.drawAroundAnchor = false;\r\n                charSprite.scale = vec(scale, scale);\r\n                charSprite.draw(ctx, currX, currY);\r\n                currX += charSprite.drawWidth + options.letterSpacing;\r\n            }\r\n            catch (e) {\r\n                Logger.getInstance().error(`SpriteFont Error drawing char ${character}`);\r\n            }\r\n        }\r\n    }\r\n    _parseOptions(options) {\r\n        return {\r\n            fontSize: options.fontSize || 10,\r\n            letterSpacing: options.letterSpacing || 0,\r\n            color: options.color || Color.Black,\r\n            textAlign: typeof options.textAlign === undefined ? TextAlign.Left : options.textAlign,\r\n            baseAlign: typeof options.baseAlign === undefined ? BaseAlign.Bottom : options.baseAlign,\r\n            maxWidth: options.maxWidth || -1,\r\n            opacity: options.opacity || 0\r\n        };\r\n    }\r\n};\r\nSpriteFont = SpriteSheet_decorate([\r\n    obsolete({\r\n        message: 'SpriteSheet will be removed in v0.26.0',\r\n        alternateMethod: 'Use Graphics.SpriteSheet'\r\n    })\r\n], SpriteFont);\r\n\r\n\n;// CONCATENATED MODULE: ./Graphics/SpriteSheet.ts\n\r\n\r\n\r\n/**\r\n * Represents a collection of sprites from a source image with some organization in a grid\r\n */\r\nclass SpriteSheet {\r\n    /**\r\n     * Build a new sprite sheet from a list of sprites\r\n     *\r\n     * Use [[SpriteSheet.fromImageSource]] to create a SpriteSheet from an [[ImageSource]] organized in a grid\r\n     * @param options\r\n     */\r\n    constructor(options) {\r\n        this._logger = Logger.getInstance();\r\n        this.sprites = [];\r\n        const { sprites, rows, columns } = options;\r\n        this.sprites = sprites;\r\n        this.rows = rows !== null && rows !== void 0 ? rows : 1;\r\n        this.columns = columns !== null && columns !== void 0 ? columns : this.sprites.length;\r\n    }\r\n    /**\r\n     * Find a sprite by their x/y position in the SpriteSheet, for example `getSprite(0, 0)` is the [[Sprite]] in the top-left\r\n     * @param x\r\n     * @param y\r\n     */\r\n    getSprite(x, y) {\r\n        if (x >= this.columns || x < 0) {\r\n            this._logger.warn(`No sprite exists in the SpriteSheet at (${x}, ${y}), x: ${x} should be between 0 and ${this.columns - 1}`);\r\n            return null;\r\n        }\r\n        if (y >= this.rows || y < 0) {\r\n            this._logger.warn(`No sprite exists in the SpriteSheet at (${x}, ${y}), y: ${y} should be between 0 and ${this.rows - 1}`);\r\n            return null;\r\n        }\r\n        const spriteIndex = x + y * this.columns;\r\n        return this.sprites[spriteIndex];\r\n    }\r\n    /**\r\n     * To a graphics sprite sheet from a legacy sprite sheet\r\n     */\r\n    static fromLegacySpriteSheet(legacySpriteSheet) {\r\n        const sprites = legacySpriteSheet.sprites.map(oldSprite => Sprite.fromLegacySprite(oldSprite));\r\n        return new SpriteSheet({\r\n            sprites\r\n        });\r\n    }\r\n    /**\r\n     * @deprecated\r\n     * @param spriteSheet\r\n     */\r\n    static toLegacySpriteSheet(spriteSheet) {\r\n        const sprites = spriteSheet.sprites.map(sprite => Sprite.toLegacySprite(sprite));\r\n        return new SpriteSheet_SpriteSheet(sprites);\r\n    }\r\n    /**\r\n     * Create a SpriteSheet from an [[ImageSource]] organized in a grid\r\n     *\r\n     * Example:\r\n     * ```\r\n     * const spriteSheet = SpriteSheet.fromImageSource({\r\n     *   image: imageSource,\r\n     *   grid: {\r\n     *     rows: 5,\r\n     *     columns: 2,\r\n     *     spriteWidth: 32, // pixels\r\n     *     spriteHeight: 32 // pixels\r\n     *   },\r\n     *   // Optionally specify spacing\r\n     *   spacing: {\r\n     *     // pixels from the top left to start the sprite parsing\r\n     *     originOffset: {\r\n     *       x: 5,\r\n     *       y: 5\r\n     *     },\r\n     *     // pixels between each sprite while parsing\r\n     *     margin: {\r\n     *       x: 1,\r\n     *       y: 1\r\n     *     }\r\n     *   }\r\n     * })\r\n     * ```\r\n     *\r\n     * @param options\r\n     */\r\n    static fromImageSource(options) {\r\n        var _a;\r\n        const sprites = [];\r\n        options.spacing = (_a = options.spacing) !== null && _a !== void 0 ? _a : {};\r\n        const { image, grid: { rows, columns: cols, spriteWidth, spriteHeight }, spacing: { originOffset, margin } } = options;\r\n        const offsetDefaults = { x: 0, y: 0, ...originOffset };\r\n        const marginDefaults = { x: 0, y: 0, ...margin };\r\n        for (let x = 0; x < cols; x++) {\r\n            for (let y = 0; y < rows; y++) {\r\n                sprites[x + y * cols] = new Sprite({\r\n                    image: image,\r\n                    sourceView: {\r\n                        x: x * spriteWidth + marginDefaults.x * x + offsetDefaults.x,\r\n                        y: y * spriteHeight + marginDefaults.y * y + offsetDefaults.y,\r\n                        width: spriteWidth,\r\n                        height: spriteHeight\r\n                    },\r\n                    destSize: { height: spriteHeight, width: spriteWidth }\r\n                });\r\n            }\r\n        }\r\n        return new SpriteSheet({\r\n            sprites: sprites,\r\n            rows: rows,\r\n            columns: cols\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/SpriteFont.ts\n\r\n\r\n\r\n\r\n\r\n\r\nclass SpriteFont_SpriteFont extends Graphic {\r\n    constructor(options) {\r\n        super(options);\r\n        this._text = '';\r\n        this.alphabet = '';\r\n        this.shadow = null;\r\n        this.caseInsensitive = false;\r\n        this.spacing = 0;\r\n        this._logger = Logger.getInstance();\r\n        this._alreadyWarnedAlphabet = false;\r\n        this._alreadyWarnedSpriteSheet = false;\r\n        const { alphabet, spriteSheet, caseInsensitive, spacing, shadow } = options;\r\n        this.alphabet = alphabet;\r\n        this.spriteSheet = spriteSheet;\r\n        this.caseInsensitive = caseInsensitive !== null && caseInsensitive !== void 0 ? caseInsensitive : this.caseInsensitive;\r\n        this.spacing = spacing !== null && spacing !== void 0 ? spacing : this.spacing;\r\n        this.shadow = shadow !== null && shadow !== void 0 ? shadow : this.shadow;\r\n    }\r\n    static fromLegacySpriteFont(spriteFont) {\r\n        const sprites = spriteFont.sprites.map(Sprite.fromLegacySprite);\r\n        return new SpriteFont_SpriteFont({\r\n            alphabet: spriteFont.alphabet,\r\n            spacing: 0,\r\n            caseInsensitive: spriteFont.caseInsensitive,\r\n            spriteSheet: new SpriteSheet({\r\n                sprites\r\n            })\r\n        });\r\n    }\r\n    _getCharacterSprites(text) {\r\n        const results = [];\r\n        // handle case insensitive\r\n        const textToRender = this.caseInsensitive ? text.toLocaleLowerCase() : text;\r\n        const alphabet = this.caseInsensitive ? this.alphabet.toLocaleLowerCase() : this.alphabet;\r\n        // for each letter in text\r\n        for (let letterIndex = 0; letterIndex < textToRender.length; letterIndex++) {\r\n            // find the sprite index in alphabet , if there is an error pick the first\r\n            const letter = textToRender[letterIndex];\r\n            let spriteIndex = alphabet.indexOf(letter);\r\n            if (spriteIndex === -1) {\r\n                spriteIndex = 0;\r\n                if (!this._alreadyWarnedAlphabet) {\r\n                    this._logger.warn(`SpriteFont - Cannot find letter '${letter}' in configured alphabet '${alphabet}'.`);\r\n                    this._logger.warn('There maybe be more issues in the SpriteFont configuration. No additional warnings will be logged.');\r\n                    this._alreadyWarnedAlphabet = true;\r\n                }\r\n            }\r\n            const letterSprite = this.spriteSheet.sprites[spriteIndex];\r\n            if (letterSprite) {\r\n                results.push(letterSprite);\r\n            }\r\n            else {\r\n                if (!this._alreadyWarnedSpriteSheet) {\r\n                    this._logger.warn(`SpriteFont - Cannot find sprite for '${letter}' at index '${spriteIndex}' in configured SpriteSheet`);\r\n                    this._logger.warn('There maybe be more issues in the SpriteFont configuration. No additional warnings will be logged.');\r\n                    this._alreadyWarnedSpriteSheet = true;\r\n                }\r\n            }\r\n        }\r\n        return results;\r\n    }\r\n    measureText(text) {\r\n        const lines = text.split('\\n');\r\n        const maxWidthLine = lines.reduce((a, b) => {\r\n            return a.length > b.length ? a : b;\r\n        });\r\n        const sprites = this._getCharacterSprites(maxWidthLine);\r\n        let width = 0;\r\n        let height = 0;\r\n        for (const sprite of sprites) {\r\n            width += sprite.width + this.spacing;\r\n            height = Math.max(height, sprite.height);\r\n        }\r\n        return BoundingBox.fromDimension(width, height * lines.length, Vector.Zero);\r\n    }\r\n    _drawImage(ex, x, y) {\r\n        let xCursor = 0;\r\n        let yCursor = 0;\r\n        let height = 0;\r\n        const lines = this._text.split('\\n');\r\n        for (const line of lines) {\r\n            for (const sprite of this._getCharacterSprites(line)) {\r\n                // draw it in the right spot and increase the cursor by sprite width\r\n                sprite.draw(ex, x + xCursor, y + yCursor);\r\n                xCursor += sprite.width + this.spacing;\r\n                height = Math.max(height, sprite.height);\r\n            }\r\n            xCursor = 0;\r\n            yCursor += height;\r\n        }\r\n    }\r\n    render(ex, text, _color, x, y) {\r\n        // SpriteFont doesn't support _color, yet...\r\n        this._text = text;\r\n        const bounds = this.measureText(text);\r\n        this.width = bounds.width;\r\n        this.height = bounds.height;\r\n        if (this.shadow) {\r\n            ex.save();\r\n            ex.translate(this.shadow.offset.x, this.shadow.offset.y);\r\n            this.draw(ex, x, y);\r\n            ex.restore();\r\n        }\r\n        this.draw(ex, x, y);\r\n    }\r\n    clone() {\r\n        return new SpriteFont_SpriteFont({\r\n            alphabet: this.alphabet,\r\n            spriteSheet: this.spriteSheet,\r\n            spacing: this.spacing\r\n        });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/debug-font.png\n/* harmony default export */ const debug_font = (\"data:image/png;base64,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\");\n;// CONCATENATED MODULE: ./Graphics/Context/debug-text.ts\n\r\n\r\n/**\r\n * Internal debugtext helper\r\n */\r\nclass DebugText {\r\n    constructor() {\r\n        /**\r\n         * base64 font\r\n         */\r\n        this.fontSheet = debug_font;\r\n        this.size = 16;\r\n        this.load();\r\n    }\r\n    load() {\r\n        this._imageSource = new ImageSource(this.fontSheet);\r\n        return this._imageSource.load().then(() => {\r\n            this._spriteSheet = SpriteSheet.fromImageSource({\r\n                image: this._imageSource,\r\n                grid: {\r\n                    rows: 3,\r\n                    columns: 16,\r\n                    spriteWidth: 16,\r\n                    spriteHeight: 16\r\n                }\r\n            });\r\n            this._spriteFont = new SpriteFont_SpriteFont({\r\n                alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ,!\\'&.\"?-()+ ',\r\n                caseInsensitive: true,\r\n                spriteSheet: this._spriteSheet,\r\n                spacing: -6\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * Writes debug text using the built in sprint font\r\n     * @param ctx\r\n     * @param text\r\n     * @param pos\r\n     */\r\n    write(ctx, text, pos) {\r\n        if (this._imageSource.isLoaded()) {\r\n            this._spriteFont.render(ctx, text, null, pos.x, pos.y);\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/render-source.ts\nclass RenderSource {\r\n    constructor(_gl, _texture) {\r\n        this._gl = _gl;\r\n        this._texture = _texture;\r\n    }\r\n    use() {\r\n        const gl = this._gl;\r\n        gl.activeTexture(gl.TEXTURE0);\r\n        gl.bindTexture(gl.TEXTURE_2D, this._texture);\r\n    }\r\n    disable() {\r\n        const gl = this._gl;\r\n        gl.bindTexture(gl.TEXTURE_2D, null);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/render-target.ts\n\r\nclass RenderTarget {\r\n    constructor(options) {\r\n        this.width = options.width;\r\n        this.height = options.height;\r\n        this._gl = options.gl;\r\n        this._setupFramebuffer();\r\n    }\r\n    setResolution(width, height) {\r\n        const gl = this._gl;\r\n        this.width = width;\r\n        this.height = height;\r\n        gl.bindTexture(gl.TEXTURE_2D, this._frameTexture);\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.width, this.height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\r\n    }\r\n    get frameBuffer() {\r\n        return this._frameBuffer;\r\n    }\r\n    get frameTexture() {\r\n        return this._frameTexture;\r\n    }\r\n    _setupFramebuffer() {\r\n        // Allocates frame buffer\r\n        const gl = this._gl;\r\n        this._frameTexture = gl.createTexture();\r\n        gl.bindTexture(gl.TEXTURE_2D, this._frameTexture);\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.width, this.height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\r\n        // set the filtering so we don't need mips\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n        // attach the texture as the first color attachment\r\n        const attachmentPoint = gl.COLOR_ATTACHMENT0;\r\n        // After this bind all draw calls will draw to this framebuffer texture\r\n        this._frameBuffer = gl.createFramebuffer();\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this._frameBuffer);\r\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, attachmentPoint, gl.TEXTURE_2D, this._frameTexture, 0);\r\n        // Reset after initialized\r\n        this.disable();\r\n    }\r\n    toRenderSource() {\r\n        const source = new RenderSource(this._gl, this._frameTexture);\r\n        return source;\r\n    }\r\n    /**\r\n     * When called, all drawing gets redirected to this render target\r\n     */\r\n    use() {\r\n        const gl = this._gl;\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this._frameBuffer);\r\n        // very important to set the viewport to the size of the framebuffer texture\r\n        gl.viewport(0, 0, this.width, this.height);\r\n    }\r\n    /**\r\n     * When called, all drawing is sent back to the canvas\r\n     */\r\n    disable() {\r\n        const gl = this._gl;\r\n        // passing null switches rendering back to the canvas\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n        gl.bindTexture(gl.TEXTURE_2D, null);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/webgl-adapter.ts\n/**\r\n * Must be accessed after Engine construction time to ensure the context has been created\r\n */\r\nclass ExcaliburWebGLContextAccessor {\r\n    static clear() {\r\n        ExcaliburWebGLContextAccessor._GL = null;\r\n    }\r\n    static register(gl) {\r\n        ExcaliburWebGLContextAccessor._GL = gl;\r\n    }\r\n    // current webgl context\r\n    static get gl() {\r\n        if (!ExcaliburWebGLContextAccessor._GL) {\r\n            throw Error('Attempted gl access before init');\r\n        }\r\n        return ExcaliburWebGLContextAccessor._GL;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/line-renderer/line-vertex.glsl\n/* harmony default export */ const line_vertex = (\"attribute vec2 a_position;\\r\\nattribute vec4 a_color;\\r\\n\\r\\nvarying lowp vec4 v_color;\\r\\n\\r\\nuniform mat4 u_matrix;\\r\\n\\r\\n\\r\\nvoid main() {\\r\\n   // Set the vertex position using the ortho transform matrix\\r\\n   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\\r\\n\\r\\n   // Passthrough the color\\r\\n   v_color = a_color;\\r\\n}\");\n;// CONCATENATED MODULE: ./Graphics/Context/line-renderer/line-fragment.glsl\n/* harmony default export */ const line_fragment = (\"precision mediump float;\\r\\n\\r\\n// Color\\r\\nvarying lowp vec4 v_color;\\r\\n\\r\\n\\r\\nvoid main() {\\r\\n  gl_FragColor = v_color;\\r\\n}\");\n;// CONCATENATED MODULE: ./Graphics/Context/shader.ts\n\r\n\r\nclass Shader {\r\n    /**\r\n     * Create a shader program in excalibur\r\n     * @param options specify shader vertex and fragment source\r\n     */\r\n    constructor(options) {\r\n        this._gl = ExcaliburWebGLContextAccessor.gl;\r\n        this.uniforms = {};\r\n        this.attributes = {};\r\n        this._compiled = false;\r\n        const { vertexSource, fragmentSource } = options;\r\n        this.vertexSource = vertexSource;\r\n        this.fragmentSource = fragmentSource;\r\n    }\r\n    get compiled() {\r\n        return this._compiled;\r\n    }\r\n    /**\r\n     * Binds the shader program\r\n     */\r\n    use() {\r\n        const gl = this._gl;\r\n        gl.useProgram(this.program);\r\n        Shader._ACTIVE_SHADER_INSTANCE = this;\r\n    }\r\n    isCurrentlyBound() {\r\n        return Shader._ACTIVE_SHADER_INSTANCE === this;\r\n    }\r\n    /**\r\n     * Compile the current shader against a webgl context\r\n     */\r\n    compile() {\r\n        const gl = this._gl;\r\n        const vertexShader = this._compileShader(gl, this.vertexSource, gl.VERTEX_SHADER);\r\n        const fragmentShader = this._compileShader(gl, this.fragmentSource, gl.FRAGMENT_SHADER);\r\n        this.program = this._createProgram(gl, vertexShader, fragmentShader);\r\n        const attributes = this.getAttributes();\r\n        for (const attribute of attributes) {\r\n            this.attributes[attribute.name] = attribute;\r\n        }\r\n        const uniforms = this.getUniforms();\r\n        for (const uniform of uniforms) {\r\n            this.uniforms[uniform.name] = uniform;\r\n        }\r\n        this._compiled = true;\r\n        return this.program;\r\n    }\r\n    getUniforms() {\r\n        const gl = this._gl;\r\n        const uniformCount = gl.getProgramParameter(this.program, gl.ACTIVE_UNIFORMS);\r\n        const uniforms = [];\r\n        for (let i = 0; i < uniformCount; i++) {\r\n            const uniform = gl.getActiveUniform(this.program, i);\r\n            const uniformLocation = gl.getUniformLocation(this.program, uniform.name);\r\n            uniforms.push({\r\n                name: uniform.name,\r\n                glType: uniform.type,\r\n                location: uniformLocation\r\n            });\r\n        }\r\n        return uniforms;\r\n    }\r\n    getAttributes() {\r\n        const gl = this._gl;\r\n        const attributeCount = gl.getProgramParameter(this.program, gl.ACTIVE_ATTRIBUTES);\r\n        const attributes = [];\r\n        for (let i = 0; i < attributeCount; i++) {\r\n            const attribute = gl.getActiveAttrib(this.program, i);\r\n            const attributeLocation = gl.getAttribLocation(this.program, attribute.name);\r\n            attributes.push({\r\n                name: attribute.name,\r\n                glType: getAttributePointerType(gl, attribute.type),\r\n                size: getAttributeComponentSize(gl, attribute.type),\r\n                location: attributeLocation,\r\n                normalized: false\r\n            });\r\n        }\r\n        return attributes;\r\n    }\r\n    /**\r\n     * Set a texture in a gpu texture slot\r\n     * @param slotNumber\r\n     * @param texture\r\n     */\r\n    setTexture(slotNumber, texture) {\r\n        const gl = this._gl;\r\n        gl.activeTexture(gl.TEXTURE0 + slotNumber);\r\n        gl.bindTexture(gl.TEXTURE_2D, texture);\r\n    }\r\n    /**\r\n     * Set an integer uniform for the current shader\r\n     *\r\n     * **Important** Must call ex.Shader.use() before setting a uniform!\r\n     *\r\n     * @param name\r\n     * @param value\r\n     */\r\n    setUniformInt(name, value) {\r\n        this.setUniform('uniform1i', name, ~~value);\r\n    }\r\n    /**\r\n     * Set an integer array uniform for the current shader\r\n     *\r\n     * **Important** Must call ex.Shader.use() before setting a uniform!\r\n     *\r\n     * @param name\r\n     * @param value\r\n     */\r\n    setUniformIntArray(name, value) {\r\n        this.setUniform('uniform1iv', name, value);\r\n    }\r\n    /**\r\n     * Set a boolean uniform for the current shader\r\n     *\r\n     * **Important** Must call ex.Shader.use() before setting a uniform!\r\n     *\r\n     * @param name\r\n     * @param value\r\n     */\r\n    setUniformBoolean(name, value) {\r\n        this.setUniform('uniform1i', name, value ? 1 : 0);\r\n    }\r\n    /**\r\n     * Set a float uniform for the current shader\r\n     *\r\n     * **Important** Must call ex.Shader.use() before setting a uniform!\r\n     *\r\n     * @param name\r\n     * @param value\r\n     */\r\n    setUniformFloat(name, value) {\r\n        this.setUniform('uniform1f', name, value);\r\n    }\r\n    /**\r\n     * Set a float array uniform for the current shader\r\n     *\r\n     * **Important** Must call ex.Shader.use() before setting a uniform!\r\n     *\r\n     * @param name\r\n     * @param value\r\n     */\r\n    setUniformFloatArray(name, value) {\r\n        this.setUniform('uniform1fv', name, value);\r\n    }\r\n    /**\r\n     * Set a [[Vector]] uniform for the current shader\r\n     *\r\n     * **Important** Must call ex.Shader.use() before setting a uniform!\r\n     *\r\n     * @param name\r\n     * @param value\r\n     */\r\n    setUniformFloatVector(name, value) {\r\n        this.setUniform('uniform2f', name, value.x, value.y);\r\n    }\r\n    /**\r\n     * Set an [[Matrix]] uniform for the current shader\r\n     *\r\n     * **Important** Must call ex.Shader.use() before setting a uniform!\r\n     *\r\n     * @param name\r\n     * @param value\r\n     */\r\n    setUniformMatrix(name, value) {\r\n        this.setUniform('uniformMatrix4fv', name, false, value.data);\r\n    }\r\n    /**\r\n     * Set any available uniform type in webgl\r\n     *\r\n     * For example setUniform('uniformMatrix2fv', 'u_my2x2_mat`, ...);\r\n     */\r\n    setUniform(uniformType, name, ...value) {\r\n        if (!this._compiled) {\r\n            throw Error(`Must compile shader before setting a uniform ${uniformType}:${name}`);\r\n        }\r\n        if (!this.isCurrentlyBound()) {\r\n            throw Error('Currently accessed shader instance is not the current active shader in WebGL,' +\r\n                ' must call `shader.use()` before setting uniforms');\r\n        }\r\n        const gl = this._gl;\r\n        const location = gl.getUniformLocation(this.program, name);\r\n        if (location) {\r\n            const args = [location, ...value];\r\n            this._gl[uniformType].apply(this._gl, args);\r\n        }\r\n        else {\r\n            throw Error(`Uniform ${uniformType}:${name} doesn\\'t exist or is not used in the shader source code,` +\r\n                ' unused uniforms are optimized away by most browsers');\r\n        }\r\n    }\r\n    _createProgram(gl, vertexShader, fragmentShader) {\r\n        const program = gl.createProgram();\r\n        if (program === null) {\r\n            throw Error('Could not create graphics shader program');\r\n        }\r\n        // attach the shaders.\r\n        gl.attachShader(program, vertexShader);\r\n        gl.attachShader(program, fragmentShader);\r\n        // link the program.\r\n        gl.linkProgram(program);\r\n        const success = gl.getProgramParameter(program, gl.LINK_STATUS);\r\n        if (!success) {\r\n            throw Error(`Could not link the program: [${gl.getProgramInfoLog(program)}]`);\r\n        }\r\n        return program;\r\n    }\r\n    _compileShader(gl, source, type) {\r\n        const typeName = gl.VERTEX_SHADER === type ? 'vertex' : 'fragment';\r\n        const shader = gl.createShader(type);\r\n        if (shader === null) {\r\n            throw Error(`Could not build shader: [${source}]`);\r\n        }\r\n        gl.shaderSource(shader, source);\r\n        gl.compileShader(shader);\r\n        const success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\r\n        if (!success) {\r\n            const errorInfo = gl.getShaderInfoLog(shader);\r\n            throw Error(`Could not compile ${typeName} shader:\\n\\n${errorInfo}${this._processSourceForError(source, errorInfo)}`);\r\n        }\r\n        return shader;\r\n    }\r\n    _processSourceForError(source, errorInfo) {\r\n        const lines = source.split('\\n');\r\n        const errorLineStart = errorInfo.search(/\\d:\\d/);\r\n        const errorLineEnd = errorInfo.indexOf(' ', errorLineStart);\r\n        const [_, error2] = errorInfo.slice(errorLineStart, errorLineEnd).split(':').map(v => Number(v));\r\n        for (let i = 0; i < lines.length; i++) {\r\n            lines[i] = `${i + 1}: ${lines[i]}${error2 === (i + 1) ? ' <----- ERROR!' : ''}`;\r\n        }\r\n        return '\\n\\nSource:\\n' + lines.join('\\n');\r\n    }\r\n}\r\nShader._ACTIVE_SHADER_INSTANCE = null;\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/vertex-buffer.ts\n\r\n/**\r\n * Helper around vertex buffer to simplify creating and uploading geometry\r\n *\r\n * Under the hood uses Float32Array\r\n */\r\nclass VertexBuffer {\r\n    constructor(options) {\r\n        this._gl = ExcaliburWebGLContextAccessor.gl;\r\n        /**\r\n         * If the vertices never change switching 'static' can be more efficient on the gpu\r\n         *\r\n         * Default is 'dynamic'\r\n         */\r\n        this.type = 'dynamic';\r\n        const { size, type, data } = options;\r\n        this.buffer = this._gl.createBuffer();\r\n        if (!data && !size) {\r\n            throw Error('Must either provide data or a size to the VertexBuffer');\r\n        }\r\n        if (!data) {\r\n            this.bufferData = new Float32Array(size);\r\n        }\r\n        else {\r\n            this.bufferData = data;\r\n        }\r\n        this.type = type !== null && type !== void 0 ? type : this.type;\r\n    }\r\n    /**\r\n     * Bind this vertex buffer\r\n     */\r\n    bind() {\r\n        const gl = this._gl;\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\r\n    }\r\n    /**\r\n     * Upload vertex buffer geometry to the GPU\r\n     */\r\n    upload() {\r\n        const gl = this._gl;\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\r\n        gl.bufferData(gl.ARRAY_BUFFER, this.bufferData, this.type === 'static' ? gl.STATIC_DRAW : gl.DYNAMIC_DRAW);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/vertex-layout.ts\n\r\n\r\n\r\n/**\r\n * Helper around creating vertex attributes in a given [[VertexBuffer]], this is useful for describing\r\n * the memory layout for your vertices inside a particular buffer\r\n *\r\n * Note: This helper assumes interleaved attributes in one [[VertexBuffer]], not many.\r\n *\r\n * Working with `gl.vertexAttribPointer` can be tricky, and this attempts to double check you\r\n */\r\nclass VertexLayout {\r\n    constructor(options) {\r\n        this._gl = ExcaliburWebGLContextAccessor.gl;\r\n        this._logger = Logger.getInstance();\r\n        this._layout = [];\r\n        this._attributes = [];\r\n        this._vertexTotalSizeBytes = 0;\r\n        const { shader, vertexBuffer, attributes } = options;\r\n        this._vertexBuffer = vertexBuffer;\r\n        this._attributes = attributes;\r\n        this._shader = shader;\r\n        this.initialize();\r\n    }\r\n    get vertexBuffer() {\r\n        return this._vertexBuffer;\r\n    }\r\n    get attributes() {\r\n        return this._attributes;\r\n    }\r\n    /**\r\n     * Total number of bytes that the vertex will take up\r\n     */\r\n    get totalVertexSizeBytes() {\r\n        return this._vertexTotalSizeBytes;\r\n    }\r\n    /**\r\n     * Layouts need shader locations and must be bound to a shader\r\n     */\r\n    initialize() {\r\n        if (!this._shader.compiled) {\r\n            throw Error('Shader not compiled, shader must be compiled before defining a vertex layout');\r\n        }\r\n        this._layout.length = 0;\r\n        const shaderAttributes = this._shader.attributes;\r\n        for (const attribute of this._attributes) {\r\n            const attrib = shaderAttributes[attribute[0]];\r\n            if (!attrib) {\r\n                throw Error(`The attribute named: ${attribute[0]} size ${attribute[1]}` +\r\n                    ` not found in the shader source code:\\n ${this._shader.vertexSource}`);\r\n            }\r\n            if (attrib.size !== attribute[1]) {\r\n                throw Error(`VertexLayout size definition for attribute: [${attribute[0]}, ${attribute[1]}],`\r\n                    + ` doesnt match shader source size ${attrib.size}:\\n ${this._shader.vertexSource}`);\r\n            }\r\n            this._layout.push(attrib);\r\n        }\r\n        // calc size\r\n        let componentsPerVertex = 0;\r\n        for (const vertAttribute of this._layout) {\r\n            const typeSize = getGlTypeSizeBytes(this._gl, vertAttribute.glType);\r\n            this._vertexTotalSizeBytes += typeSize * vertAttribute.size;\r\n            componentsPerVertex += vertAttribute.size;\r\n        }\r\n        if (this._vertexBuffer.bufferData.length % componentsPerVertex !== 0) {\r\n            this._logger.warn(`The vertex component size (${componentsPerVertex})  does divide evenly into the specified vertex buffer`\r\n                + ` (${this._vertexBuffer.bufferData.length})`);\r\n        }\r\n    }\r\n    /**\r\n     * Bind this layout with it's associated vertex buffer\r\n     *\r\n     * @param uploadBuffer Optionally indicate you wish to upload the buffer to the GPU associated with this layout\r\n     */\r\n    use(uploadBuffer = false) {\r\n        const gl = this._gl;\r\n        if (!this._shader.isCurrentlyBound()) {\r\n            throw Error('Shader associated with this vertex layout is not active! Call shader.use() before layout.use()');\r\n        }\r\n        this._vertexBuffer.bind();\r\n        if (uploadBuffer) {\r\n            this._vertexBuffer.upload();\r\n        }\r\n        let offset = 0;\r\n        // TODO switch to VAOs if the extension is\r\n        for (const vert of this._layout) {\r\n            gl.vertexAttribPointer(vert.location, vert.size, vert.glType, vert.normalized, this.totalVertexSizeBytes, offset);\r\n            gl.enableVertexAttribArray(vert.location);\r\n            offset += getGlTypeSizeBytes(gl, vert.glType) * vert.size;\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/GraphicsDiagnostics.ts\nclass GraphicsDiagnostics {\r\n    static clear() {\r\n        GraphicsDiagnostics.DrawCallCount = 0;\r\n        GraphicsDiagnostics.DrawnImagesCount = 0;\r\n    }\r\n}\r\nGraphicsDiagnostics.DrawCallCount = 0;\r\nGraphicsDiagnostics.DrawnImagesCount = 0;\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/line-renderer/line-renderer.ts\n\r\n\r\n\r\n\r\nclass LineRenderer {\r\n    constructor() {\r\n        this.type = 'ex.line';\r\n        this.priority = 0;\r\n        this._maxLines = 10922;\r\n        this._vertexIndex = 0;\r\n        this._lineCount = 0;\r\n    }\r\n    initialize(gl, context) {\r\n        this._gl = gl;\r\n        this._context = context;\r\n        this._shader = new Shader({\r\n            vertexSource: line_vertex,\r\n            fragmentSource: line_fragment\r\n        });\r\n        this._shader.compile();\r\n        this._shader.use();\r\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\r\n        this._vertexBuffer = new VertexBuffer({\r\n            size: 6 * 2 * this._maxLines,\r\n            type: 'dynamic'\r\n        });\r\n        this._layout = new VertexLayout({\r\n            vertexBuffer: this._vertexBuffer,\r\n            shader: this._shader,\r\n            attributes: [\r\n                ['a_position', 2],\r\n                ['a_color', 4]\r\n            ]\r\n        });\r\n    }\r\n    draw(start, end, color) {\r\n        // Force a render if the batch is full\r\n        if (this._isFull()) {\r\n            this.flush();\r\n        }\r\n        this._lineCount++;\r\n        const transform = this._context.getTransform();\r\n        const finalStart = transform.multv(start);\r\n        const finalEnd = transform.multv(end);\r\n        const vertexBuffer = this._vertexBuffer.bufferData;\r\n        // Start\r\n        vertexBuffer[this._vertexIndex++] = finalStart.x;\r\n        vertexBuffer[this._vertexIndex++] = finalStart.y;\r\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.a;\r\n        // End\r\n        vertexBuffer[this._vertexIndex++] = finalEnd.x;\r\n        vertexBuffer[this._vertexIndex++] = finalEnd.y;\r\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.a;\r\n    }\r\n    _isFull() {\r\n        if (this._lineCount >= this._maxLines) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    hasPendingDraws() {\r\n        return this._lineCount !== 0;\r\n    }\r\n    flush() {\r\n        // nothing to draw early exit\r\n        if (this._lineCount === 0) {\r\n            return;\r\n        }\r\n        const gl = this._gl;\r\n        this._shader.use();\r\n        this._layout.use(true);\r\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\r\n        gl.drawArrays(gl.LINES, 0, this._lineCount * 2); // 2 verts per line\r\n        GraphicsDiagnostics.DrawnImagesCount += this._lineCount;\r\n        GraphicsDiagnostics.DrawCallCount++;\r\n        // reset\r\n        this._vertexIndex = 0;\r\n        this._lineCount = 0;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/point-renderer/point-vertex.glsl\n/* harmony default export */ const point_vertex = (\"attribute vec2 a_position;\\r\\nattribute vec4 a_color;\\r\\nattribute float a_size;\\r\\nvarying lowp vec4 v_color;\\r\\nuniform mat4 u_matrix;\\r\\n\\r\\nvoid main() {\\r\\n  gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\\r\\n  gl_PointSize = a_size * 2.0;\\r\\n  v_color = a_color;\\r\\n}\");\n;// CONCATENATED MODULE: ./Graphics/Context/point-renderer/point-fragment.glsl\n/* harmony default export */ const point_fragment = (\"#ifdef GL_OES_standard_derivatives\\r\\n#extension GL_OES_standard_derivatives : enable\\r\\n#endif\\r\\n\\r\\nprecision mediump float;\\r\\nvarying lowp vec4 v_color;\\r\\n\\r\\nvoid main() {\\r\\n  float r = 0.0, delta = 0.0, alpha = 1.0;\\r\\n  vec2 cxy = 2.0 * gl_PointCoord - 1.0;\\r\\n  r = dot(cxy, cxy);\\r\\n\\r\\n#ifdef GL_OES_standard_derivatives\\r\\n  delta = fwidth(r);\\r\\n  alpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);\\r\\n#else\\r\\n  if (r > 1.0) {\\r\\n    discard;\\r\\n  }\\r\\n#endif\\r\\n  // \\\"premultiply\\\" the color by alpha\\r\\n  vec4 color = v_color;\\r\\n  color.a = color.a * alpha;\\r\\n  color.rgb = color.rgb * color.a;\\r\\n  gl_FragColor = color;\\r\\n}\");\n;// CONCATENATED MODULE: ./Graphics/Context/point-renderer/point-renderer.ts\n\r\n\r\n\r\n\r\n\r\n\r\nclass PointRenderer {\r\n    constructor() {\r\n        this.type = 'ex.point';\r\n        this.priority = 0;\r\n        this._maxPoints = 10922;\r\n        this._pointCount = 0;\r\n        this._vertexIndex = 0;\r\n    }\r\n    initialize(gl, context) {\r\n        this._gl = gl;\r\n        this._context = context;\r\n        this._shader = new Shader({\r\n            vertexSource: point_vertex,\r\n            fragmentSource: point_fragment\r\n        });\r\n        this._shader.compile();\r\n        this._shader.use();\r\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\r\n        this._buffer = new VertexBuffer({\r\n            size: 7 * this._maxPoints,\r\n            type: 'dynamic'\r\n        });\r\n        this._layout = new VertexLayout({\r\n            shader: this._shader,\r\n            vertexBuffer: this._buffer,\r\n            attributes: [\r\n                ['a_position', 2],\r\n                ['a_color', 4],\r\n                ['a_size', 1]\r\n            ]\r\n        });\r\n    }\r\n    draw(point, color, size) {\r\n        // Force a render if the batch is full\r\n        if (this._isFull()) {\r\n            this.flush();\r\n        }\r\n        this._pointCount++;\r\n        const transform = this._context.getTransform();\r\n        const opacity = this._context.opacity;\r\n        const finalPoint = transform.multv(point);\r\n        const vertexBuffer = this._buffer.bufferData;\r\n        vertexBuffer[this._vertexIndex++] = finalPoint.x;\r\n        vertexBuffer[this._vertexIndex++] = finalPoint.y;\r\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.a * opacity;\r\n        vertexBuffer[this._vertexIndex++] = size * Math.max(transform.getScaleX(), transform.getScaleY());\r\n    }\r\n    _isFull() {\r\n        if (this._pointCount >= this._maxPoints) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    hasPendingDraws() {\r\n        return this._pointCount !== 0;\r\n    }\r\n    flush() {\r\n        // nothing to draw early exit\r\n        if (this._pointCount === 0) {\r\n            return;\r\n        }\r\n        const gl = this._gl;\r\n        this._shader.use();\r\n        this._layout.use(true);\r\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\r\n        gl.drawArrays(gl.POINTS, 0, this._pointCount);\r\n        GraphicsDiagnostics.DrawnImagesCount += this._pointCount;\r\n        GraphicsDiagnostics.DrawCallCount++;\r\n        this._pointCount = 0;\r\n        this._vertexIndex = 0;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/screen-pass-painter/screen-vertex.glsl\n/* harmony default export */ const screen_vertex = (\"attribute vec2 a_position;\\r\\n\\r\\nattribute vec2 a_texcoord;\\r\\nvarying vec2 v_texcoord;\\r\\n\\r\\nvoid main() {\\r\\n  gl_Position = vec4(a_position, 0.0, 1.0);\\r\\n\\r\\n  // Pass the texcoord to the fragment shader.\\r\\n  v_texcoord = a_texcoord;\\r\\n}\");\n;// CONCATENATED MODULE: ./Graphics/Context/screen-pass-painter/screen-fragment.glsl\n/* harmony default export */ const screen_fragment = (\"precision mediump float;\\r\\n\\r\\n// Passed in from the vertex shader.\\r\\nvarying vec2 v_texcoord;\\r\\n\\r\\n// The texture.\\r\\nuniform sampler2D u_texture;\\r\\n\\r\\nvoid main() {\\r\\n   gl_FragColor = texture2D(u_texture, v_texcoord);\\r\\n}\");\n;// CONCATENATED MODULE: ./Graphics/Context/screen-pass-painter/screen-pass-painter.ts\n\r\n\r\n\r\n\r\n\r\n/**\r\n * This is responsible for painting the entire screen during the render passes\r\n */\r\nclass ScreenPassPainter {\r\n    constructor(gl) {\r\n        this._gl = gl;\r\n        this._shader = new Shader({\r\n            vertexSource: screen_vertex,\r\n            fragmentSource: screen_fragment\r\n        });\r\n        this._shader.compile();\r\n        // Setup memory layout\r\n        this._buffer = new VertexBuffer({\r\n            type: 'static',\r\n            // clip space quad + uv since we don't need a camera\r\n            data: new Float32Array([\r\n                -1, -1, 0, 0,\r\n                -1, 1, 0, 1,\r\n                1, -1, 1, 0,\r\n                1, -1, 1, 0,\r\n                -1, 1, 0, 1,\r\n                1, 1, 1, 1\r\n            ])\r\n        });\r\n        this._layout = new VertexLayout({\r\n            shader: this._shader,\r\n            vertexBuffer: this._buffer,\r\n            attributes: [\r\n                ['a_position', 2],\r\n                ['a_texcoord', 2]\r\n            ]\r\n        });\r\n        this._buffer.upload();\r\n    }\r\n    renderWithPostProcessor(postprocessor) {\r\n        const gl = this._gl;\r\n        postprocessor.getShader().use();\r\n        postprocessor.getLayout().use();\r\n        gl.drawArrays(gl.TRIANGLES, 0, 6);\r\n    }\r\n    renderToScreen() {\r\n        const gl = this._gl;\r\n        this._shader.use();\r\n        this._layout.use();\r\n        gl.drawArrays(gl.TRIANGLES, 0, 6);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/quad-index-buffer.ts\n\r\n\r\n/**\r\n * Helper that defines and index buffer for quad geometry\r\n *\r\n * Index buffers allow you to save space in vertex buffers when you share vertices in geometry\r\n * it is almost always worth it in terms of performance to use an index buffer.\r\n */\r\nclass QuadIndexBuffer {\r\n    /**\r\n     * @param numberOfQuads Specify the max number of quads you want to draw\r\n     * @param useUint16 Optionally force a uint16 buffer\r\n     */\r\n    constructor(numberOfQuads, useUint16) {\r\n        this._gl = ExcaliburWebGLContextAccessor.gl;\r\n        this._logger = Logger.getInstance();\r\n        const gl = this._gl;\r\n        this.buffer = gl.createBuffer();\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.buffer);\r\n        const totalVertices = numberOfQuads * 6;\r\n        const ext = gl.getExtension('OES_element_index_uint');\r\n        if (ext && !useUint16) {\r\n            this.bufferData = new Uint32Array(totalVertices);\r\n        }\r\n        else {\r\n            // fall back to using gl.UNSIGNED_SHORT or tell the user they are out of luck\r\n            const maxUint16 = 65535;\r\n            const maxUint16Index = Math.floor((maxUint16 - 1) / 4); // max quads\r\n            this.bufferGlType = gl.UNSIGNED_SHORT;\r\n            this.bufferData = new Uint16Array(totalVertices);\r\n            // TODO Should we error if this happens?? maybe not might crash mid game\r\n            if (numberOfQuads > maxUint16Index) {\r\n                this._logger.warn(`Total quads exceeds hardware index buffer limit (uint16), max(${maxUint16Index}) requested quads(${numberOfQuads})`);\r\n            }\r\n        }\r\n        let currentQuad = 0;\r\n        for (let i = 0; i < totalVertices; i += 6) {\r\n            // first triangle\r\n            this.bufferData[i + 0] = currentQuad + 0;\r\n            this.bufferData[i + 1] = currentQuad + 1;\r\n            this.bufferData[i + 2] = currentQuad + 2;\r\n            // second triangle\r\n            this.bufferData[i + 3] = currentQuad + 2;\r\n            this.bufferData[i + 4] = currentQuad + 1;\r\n            this.bufferData[i + 5] = currentQuad + 3;\r\n            currentQuad += 4;\r\n        }\r\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.bufferData, gl.STATIC_DRAW);\r\n    }\r\n    get size() {\r\n        return this.bufferData.length;\r\n    }\r\n    /**\r\n     * Upload data to the GPU\r\n     */\r\n    upload() {\r\n        const gl = this._gl;\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.buffer);\r\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.bufferData, gl.STATIC_DRAW);\r\n    }\r\n    /**\r\n     * Bind this index buffer\r\n     */\r\n    bind() {\r\n        const gl = this._gl;\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.buffer);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/image-renderer/image-renderer.frag.glsl\n/* harmony default export */ const image_renderer_frag = (\"precision mediump float;\\r\\n\\r\\n// UV coord\\r\\nvarying vec2 v_texcoord;\\r\\n\\r\\n// Texture index\\r\\nvarying lowp float v_textureIndex;\\r\\n\\r\\n// Textures in the current draw\\r\\nuniform sampler2D u_textures[%%count%%];\\r\\n\\r\\n// Opacity\\r\\nvarying float v_opacity;\\r\\n\\r\\nvoid main() {\\r\\n   // In order to support the most efficient sprite batching, we have multiple\\r\\n   // textures loaded into the gpu (usually 8) this picker logic skips over textures\\r\\n   // that do not apply to a particular sprite.\\r\\n\\r\\n   vec4 color = vec4(1.0, 0, 0, 1.0);\\r\\n\\r\\n   // GLSL is templated out to pick the right texture and set the vec4 color\\r\\n   %%texture_picker%%\\r\\n\\r\\n   color.rgb = color.rgb * v_opacity;\\r\\n   color.a = color.a * v_opacity;\\r\\n   gl_FragColor = color;\\r\\n}\");\n;// CONCATENATED MODULE: ./Graphics/Context/image-renderer/image-renderer.vert.glsl\n/* harmony default export */ const image_renderer_vert = (\"attribute vec2 a_position;\\r\\n\\r\\n// Opacity \\r\\nattribute float a_opacity;\\r\\nvarying float v_opacity;\\r\\n\\r\\n// UV coordinate\\r\\nattribute vec2 a_texcoord;\\r\\nvarying vec2 v_texcoord;\\r\\n\\r\\n// Texture number\\r\\nattribute lowp float a_textureIndex;\\r\\nvarying lowp float v_textureIndex;\\r\\n\\r\\nuniform mat4 u_matrix;\\r\\n\\r\\n\\r\\nvoid main() {\\r\\n   // Set the vertex position using the ortho transform matrix\\r\\n   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\\r\\n\\r\\n   // Pass through the Opacity to the fragment shader\\r\\n   v_opacity = a_opacity;\\r\\n   // Pass through the UV coord to the fragment shader\\r\\n   v_texcoord = a_texcoord;\\r\\n   // Pass through the texture number to the fragment shader\\r\\n   v_textureIndex = a_textureIndex;\\r\\n}\");\n;// CONCATENATED MODULE: ./Graphics/Context/image-renderer/image-renderer.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass ImageRenderer {\r\n    constructor() {\r\n        this.type = 'ex.image';\r\n        this.priority = 0;\r\n        this._maxImages = 10922; // max(uint16) / 6 verts\r\n        this._maxTextures = 0;\r\n        // Per flush vars\r\n        this._imageCount = 0;\r\n        this._textures = [];\r\n        this._vertexIndex = 0;\r\n    }\r\n    initialize(gl, context) {\r\n        this._gl = gl;\r\n        this._context = context;\r\n        // Transform shader source\r\n        // FIXME: PIXEL 6 complains `ERROR: Expression too complex.` if we use it's reported max texture units, 125 seems to work for now...\r\n        this._maxTextures = Math.min(gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS), 125);\r\n        const transformedFrag = this._transformFragmentSource(image_renderer_frag, this._maxTextures);\r\n        // Compile shader\r\n        this._shader = new Shader({\r\n            fragmentSource: transformedFrag,\r\n            vertexSource: image_renderer_vert\r\n        });\r\n        this._shader.compile();\r\n        // setup uniforms\r\n        this._shader.use();\r\n        this._shader.setUniformMatrix('u_matrix', context.ortho);\r\n        // Initialize texture slots to [0, 1, 2, 3, 4, .... maxGPUTextures]\r\n        this._shader.setUniformIntArray('u_textures', [...Array(this._maxTextures)].map((_, i) => i));\r\n        // Setup memory layout\r\n        this._buffer = new VertexBuffer({\r\n            size: 6 * 4 * this._maxImages,\r\n            type: 'dynamic'\r\n        });\r\n        this._layout = new VertexLayout({\r\n            shader: this._shader,\r\n            vertexBuffer: this._buffer,\r\n            attributes: [\r\n                ['a_position', 2],\r\n                ['a_opacity', 1],\r\n                ['a_texcoord', 2],\r\n                ['a_textureIndex', 1]\r\n            ]\r\n        });\r\n        // Setup index buffer\r\n        this._quads = new QuadIndexBuffer(this._maxImages, true);\r\n    }\r\n    _transformFragmentSource(source, maxTextures) {\r\n        let newSource = source.replace('%%count%%', maxTextures.toString());\r\n        let texturePickerBuilder = '';\r\n        for (let i = 0; i < maxTextures; i++) {\r\n            if (i === 0) {\r\n                texturePickerBuilder += `if (v_textureIndex <= ${i}.5) {\\n`;\r\n            }\r\n            else {\r\n                texturePickerBuilder += `   else if (v_textureIndex <= ${i}.5) {\\n`;\r\n            }\r\n            texturePickerBuilder += `      color = texture2D(u_textures[${i}], v_texcoord);\\n`;\r\n            texturePickerBuilder += `   }\\n`;\r\n        }\r\n        newSource = newSource.replace('%%texture_picker%%', texturePickerBuilder);\r\n        return newSource;\r\n    }\r\n    _addImageAsTexture(image) {\r\n        const texture = TextureLoader.load(image);\r\n        if (this._textures.indexOf(texture) === -1) {\r\n            this._textures.push(texture);\r\n        }\r\n    }\r\n    _bindTextures(gl) {\r\n        // Bind textures in the correct order\r\n        for (let i = 0; i < this._maxTextures; i++) {\r\n            gl.activeTexture(gl.TEXTURE0 + i);\r\n            gl.bindTexture(gl.TEXTURE_2D, this._textures[i] || this._textures[0]);\r\n        }\r\n    }\r\n    _getTextureIdForImage(image) {\r\n        if (image) {\r\n            return this._textures.indexOf(TextureLoader.get(image));\r\n        }\r\n        return -1;\r\n    }\r\n    _isFull() {\r\n        if (this._imageCount >= this._maxImages) {\r\n            return true;\r\n        }\r\n        if (this._textures.length >= this._maxTextures) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    draw(image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight) {\r\n        var _a, _b, _c, _d;\r\n        // Force a render if the batch is full\r\n        if (this._isFull()) {\r\n            this.flush();\r\n        }\r\n        this._imageCount++;\r\n        this._addImageAsTexture(image);\r\n        let width = (image === null || image === void 0 ? void 0 : image.width) || swidth || 0;\r\n        let height = (image === null || image === void 0 ? void 0 : image.height) || sheight || 0;\r\n        let view = [0, 0, (_a = swidth !== null && swidth !== void 0 ? swidth : image === null || image === void 0 ? void 0 : image.width) !== null && _a !== void 0 ? _a : 0, (_b = sheight !== null && sheight !== void 0 ? sheight : image === null || image === void 0 ? void 0 : image.height) !== null && _b !== void 0 ? _b : 0];\r\n        let dest = [sx !== null && sx !== void 0 ? sx : 1, sy !== null && sy !== void 0 ? sy : 1];\r\n        // If destination is specified, update view and dest\r\n        if (dx !== undefined && dy !== undefined && dwidth !== undefined && dheight !== undefined) {\r\n            view = [sx !== null && sx !== void 0 ? sx : 1, sy !== null && sy !== void 0 ? sy : 1, (_c = swidth !== null && swidth !== void 0 ? swidth : image === null || image === void 0 ? void 0 : image.width) !== null && _c !== void 0 ? _c : 0, (_d = sheight !== null && sheight !== void 0 ? sheight : image === null || image === void 0 ? void 0 : image.height) !== null && _d !== void 0 ? _d : 0];\r\n            dest = [dx, dy];\r\n            width = dwidth;\r\n            height = dheight;\r\n        }\r\n        sx = view[0];\r\n        sy = view[1];\r\n        const sw = view[2];\r\n        const sh = view[3];\r\n        // transform based on current context\r\n        const transform = this._context.getTransform();\r\n        const opacity = this._context.opacity;\r\n        const snapToPixel = this._context.snapToPixel;\r\n        const topleft = transform.multv([dest[0], dest[1]]);\r\n        const topRight = transform.multv([dest[0] + width, dest[1]]);\r\n        const bottomLeft = transform.multv([dest[0], dest[1] + height]);\r\n        const bottomRight = transform.multv([dest[0] + width, dest[1] + height]);\r\n        if (snapToPixel) {\r\n            topleft[0] = ~~topleft[0];\r\n            topleft[1] = ~~topleft[1];\r\n            topRight[0] = ~~topRight[0];\r\n            topRight[1] = ~~topRight[1];\r\n            bottomLeft[0] = ~~bottomLeft[0];\r\n            bottomLeft[1] = ~~bottomLeft[1];\r\n            bottomRight[0] = ~~bottomRight[0];\r\n            bottomRight[1] = ~~bottomRight[1];\r\n        }\r\n        const textureId = this._getTextureIdForImage(image);\r\n        const potWidth = ensurePowerOfTwo(image.width || width);\r\n        const potHeight = ensurePowerOfTwo(image.height || height);\r\n        const uvx0 = (sx) / potWidth;\r\n        const uvy0 = (sy) / potHeight;\r\n        const uvx1 = (sx + sw - 0.01) / potWidth;\r\n        const uvy1 = (sy + sh - 0.01) / potHeight;\r\n        // update data\r\n        const vertexBuffer = this._layout.vertexBuffer.bufferData;\r\n        // (0, 0) - 0\r\n        vertexBuffer[this._vertexIndex++] = topleft[0];\r\n        vertexBuffer[this._vertexIndex++] = topleft[1];\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = uvx0;\r\n        vertexBuffer[this._vertexIndex++] = uvy0;\r\n        vertexBuffer[this._vertexIndex++] = textureId;\r\n        // (0, 1) - 1\r\n        vertexBuffer[this._vertexIndex++] = bottomLeft[0];\r\n        vertexBuffer[this._vertexIndex++] = bottomLeft[1];\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = uvx0;\r\n        vertexBuffer[this._vertexIndex++] = uvy1;\r\n        vertexBuffer[this._vertexIndex++] = textureId;\r\n        // (1, 0) - 2\r\n        vertexBuffer[this._vertexIndex++] = topRight[0];\r\n        vertexBuffer[this._vertexIndex++] = topRight[1];\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = uvx1;\r\n        vertexBuffer[this._vertexIndex++] = uvy0;\r\n        vertexBuffer[this._vertexIndex++] = textureId;\r\n        // (1, 1) - 3\r\n        vertexBuffer[this._vertexIndex++] = bottomRight[0];\r\n        vertexBuffer[this._vertexIndex++] = bottomRight[1];\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = uvx1;\r\n        vertexBuffer[this._vertexIndex++] = uvy1;\r\n        vertexBuffer[this._vertexIndex++] = textureId;\r\n    }\r\n    hasPendingDraws() {\r\n        return this._imageCount !== 0;\r\n    }\r\n    flush() {\r\n        // nothing to draw early exit\r\n        if (this._imageCount === 0) {\r\n            return;\r\n        }\r\n        const gl = this._gl;\r\n        // Bind the shader\r\n        this._shader.use();\r\n        // Bind the memory layout and upload data\r\n        this._layout.use(true);\r\n        // Update ortho matrix uniform\r\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\r\n        // Bind textures to\r\n        this._bindTextures(gl);\r\n        // Bind index buffer\r\n        this._quads.bind();\r\n        // Draw all the quads\r\n        gl.drawElements(gl.TRIANGLES, this._imageCount * 6, this._quads.bufferGlType, 0);\r\n        GraphicsDiagnostics.DrawnImagesCount += this._imageCount;\r\n        GraphicsDiagnostics.DrawCallCount++;\r\n        // Reset\r\n        this._imageCount = 0;\r\n        this._vertexIndex = 0;\r\n        this._textures.length = 0;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/rectangle-renderer/rectangle-renderer.frag.glsl\n/* harmony default export */ const rectangle_renderer_frag = (\"#ifdef GL_OES_standard_derivatives\\r\\n#extension GL_OES_standard_derivatives : enable\\r\\n#endif\\r\\nprecision mediump float;\\r\\n\\r\\n// UV coord\\r\\nvarying vec2 v_uv;\\r\\n\\r\\nvarying vec2 v_size; // in pixels\\r\\n\\r\\n// Color coord to blend with image\\r\\nvarying lowp vec4 v_color;\\r\\n\\r\\n// Stroke color if used\\r\\nvarying lowp vec4 v_strokeColor;\\r\\n\\r\\n// Stroke thickness if used\\r\\nvarying lowp float v_strokeThickness; // in pixels\\r\\n\\r\\n// Opacity\\r\\nvarying float v_opacity;\\r\\n\\r\\nvoid main() {\\r\\n    // modified from https://stackoverflow.com/questions/59197671/glsl-rounded-rectangle-with-variable-border\\r\\n    vec2 uv = v_uv;\\r\\n    vec2 fragCoord = uv * v_size;\\r\\n    float maxX = v_size.x - v_strokeThickness;\\r\\n    float minX = v_strokeThickness;\\r\\n    float maxY = v_size.y - v_strokeThickness;\\r\\n    float minY = v_strokeThickness;\\r\\n\\r\\n    if (fragCoord.x < maxX && fragCoord.x > minX &&\\r\\n        fragCoord.y < maxY && fragCoord.y > minY) {\\r\\n      gl_FragColor = v_color;\\r\\n    } else {\\r\\n      gl_FragColor = v_strokeColor;\\r\\n    }\\r\\n    gl_FragColor.a *= v_opacity;\\r\\n    gl_FragColor.rgb *= gl_FragColor.a;\\r\\n\\r\\n    // vec2 v2CenteredPos     = abs(fragCoord - v_size.xy / 2.0);\\r\\n    // vec2 v2HalfShapeSizePx = v_size.xy/2.0 - v_strokeThickness/2.0;\\r\\n\\r\\n    // float fHalfBorderDist      = 0.0;\\r\\n    // float fHalfBorderThickness = 0.0;\\r\\n\\r\\n    // if (fragCoord.x > max(v_radius, v_strokeThickness) && \\r\\n    //     fragCoord.x < v_size.x - max(v_radius, v_strokeThickness))\\r\\n    // {\\r\\n    //     fHalfBorderDist      = v2CenteredPos.y - v2HalfShapeSizePx.y;\\r\\n    //     fHalfBorderThickness = v_strokeThickness / 2.0;\\r\\n    // }\\r\\n    // else if (fragCoord.y > max(v_radius, v_strokeThickness) && \\r\\n    //          fragCoord.y < v_size.y - max(v_radius, v_strokeThickness))\\r\\n    // {\\r\\n    //     fHalfBorderDist      = v2CenteredPos.x - v2HalfShapeSizePx.x;\\r\\n    //     fHalfBorderThickness = v_strokeThickness / 2.0;\\r\\n    // }\\r\\n    // else\\r\\n    // {\\r\\n    //     vec2 edgeVec = max(vec2(0.0), v_radius - vec2(\\r\\n    //         uv.x > 0.5 ? v_size.x - fragCoord.x : fragCoord.x,\\r\\n    //         uv.y > 0.5 ? v_size.y - fragCoord.y : fragCoord.y));\\r\\n        \\r\\n    //     float ellipse_ab    = v_radius-v_strokeThickness;\\r\\n    //     vec2 ellipse_isect = (v_strokeThickness > v_radius || v_strokeThickness > v_radius) ? vec2(0.0) :\\r\\n    //                             edgeVec.xy * ellipse_ab*ellipse_ab / length(ellipse_ab*edgeVec.yx); \\r\\n            \\r\\n    //     fHalfBorderThickness = (v_radius - length(ellipse_isect)) / 2.0;\\r\\n    //     fHalfBorderDist      = length(edgeVec) - (v_radius - fHalfBorderThickness);\\r\\n    // }\\r\\n\\r\\n    // vec4 v4FromColor = v_strokeColor;\\r\\n    // v4FromColor.rgb *= v4FromColor.a;\\r\\n    // vec4 v4ToColor   = vec4(0.0); // background color is transparent\\r\\n    // if (fHalfBorderDist < 0.0) {\\r\\n    //     v4ToColor = v_color;\\r\\n    //     v4ToColor.rgb *= v4ToColor.a;\\r\\n    // }\\r\\n\\r\\n    // float mixPct = abs(fHalfBorderDist) - fHalfBorderThickness;\\r\\n\\r\\n    // vec4 finalColor = mix(v4FromColor, v4ToColor, mixPct);\\r\\n    // gl_FragColor = finalColor;\\r\\n}\");\n;// CONCATENATED MODULE: ./Graphics/Context/rectangle-renderer/rectangle-renderer.vert.glsl\n/* harmony default export */ const rectangle_renderer_vert = (\"attribute vec2 a_position;\\r\\n\\r\\n// UV coordinate\\r\\nattribute vec2 a_uv;\\r\\nvarying vec2 v_uv;\\r\\n\\r\\nattribute vec2 a_size;\\r\\nvarying vec2 v_size;\\r\\n\\r\\n// Opacity \\r\\nattribute float a_opacity;\\r\\nvarying float v_opacity;\\r\\n\\r\\nattribute vec4 a_color;\\r\\nvarying vec4 v_color;\\r\\n\\r\\nattribute vec4 a_strokeColor;\\r\\nvarying vec4 v_strokeColor;\\r\\n\\r\\nattribute float a_strokeThickness;\\r\\nvarying float v_strokeThickness;\\r\\n\\r\\nuniform mat4 u_matrix;\\r\\n\\r\\n\\r\\nvoid main() {\\r\\n   // Set the vertex position using the ortho transform matrix\\r\\n   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\\r\\n\\r\\n   // Pass through UV coords\\r\\n   v_uv = a_uv;\\r\\n   // Pass through size\\r\\n   v_size = a_size;\\r\\n   // Pass through the Opacity to the fragment shader\\r\\n   v_opacity = a_opacity;\\r\\n   // Pass through the color to the fragment shader\\r\\n   v_color = a_color;\\r\\n   // Pass through the stroke color to the fragment shader\\r\\n   v_strokeColor = a_strokeColor;\\r\\n   // Pass through the stroke thickenss to the fragment shader\\r\\n   v_strokeThickness = a_strokeThickness;\\r\\n}\");\n;// CONCATENATED MODULE: ./Graphics/Context/rectangle-renderer/rectangle-renderer.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass RectangleRenderer {\r\n    constructor() {\r\n        this.type = 'ex.rectangle';\r\n        this.priority = 0;\r\n        this._maxRectangles = 10922; // max(uint16) / 6 verts\r\n        this._rectangleCount = 0;\r\n        this._vertexIndex = 0;\r\n    }\r\n    initialize(gl, context) {\r\n        this._gl = gl;\r\n        this._context = context;\r\n        gl.getExtension('OES_standard_derivatives');\r\n        // https://stackoverflow.com/questions/59197671/glsl-rounded-rectangle-with-variable-border\r\n        this._shader = new Shader({\r\n            fragmentSource: rectangle_renderer_frag,\r\n            vertexSource: rectangle_renderer_vert\r\n        });\r\n        this._shader.compile();\r\n        // setup uniforms\r\n        this._shader.use();\r\n        this._shader.setUniformMatrix('u_matrix', context.ortho);\r\n        this._buffer = new VertexBuffer({\r\n            size: 16 * 4 * this._maxRectangles,\r\n            type: 'dynamic'\r\n        });\r\n        this._layout = new VertexLayout({\r\n            shader: this._shader,\r\n            vertexBuffer: this._buffer,\r\n            attributes: [\r\n                ['a_position', 2],\r\n                ['a_uv', 2],\r\n                ['a_size', 2],\r\n                ['a_opacity', 1],\r\n                ['a_color', 4],\r\n                ['a_strokeColor', 4],\r\n                ['a_strokeThickness', 1]\r\n            ]\r\n        });\r\n        this._quads = new QuadIndexBuffer(this._maxRectangles, true);\r\n    }\r\n    _isFull() {\r\n        if (this._rectangleCount >= this._maxRectangles) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    drawLine(start, end, color, thickness = 1) {\r\n        if (this._isFull()) {\r\n            this.flush();\r\n        }\r\n        this._rectangleCount++;\r\n        // transform based on current context\r\n        const transform = this._context.getTransform();\r\n        const opacity = this._context.opacity;\r\n        const dir = end.sub(start);\r\n        const length = dir.size;\r\n        const normal = dir.normalize().perpendicular();\r\n        const halfThick = thickness / 2;\r\n        /**\r\n         *    +---------------------^----------------------+\r\n         *    |                     | (normal)             |\r\n         *   (startx, starty)------------------>(endx, endy)\r\n         *    |                                            |\r\n         *    + -------------------------------------------+\r\n         */\r\n        const startTop = transform.multv(normal.scale(halfThick).add(start));\r\n        const startBottom = transform.multv(normal.scale(-halfThick).add(start));\r\n        const endTop = transform.multv(normal.scale(halfThick).add(end));\r\n        const endBottom = transform.multv(normal.scale(-halfThick).add(end));\r\n        // TODO uv could be static vertex buffer\r\n        const uvx0 = 0;\r\n        const uvy0 = 0;\r\n        const uvx1 = 1;\r\n        const uvy1 = 1;\r\n        const stroke = Color.Transparent;\r\n        const strokeThickness = 0;\r\n        const width = 1;\r\n        // update data\r\n        const vertexBuffer = this._layout.vertexBuffer.bufferData;\r\n        // (0, 0) - 0\r\n        vertexBuffer[this._vertexIndex++] = startTop.x;\r\n        vertexBuffer[this._vertexIndex++] = startTop.y;\r\n        vertexBuffer[this._vertexIndex++] = uvx0;\r\n        vertexBuffer[this._vertexIndex++] = uvy0;\r\n        vertexBuffer[this._vertexIndex++] = length;\r\n        vertexBuffer[this._vertexIndex++] = thickness;\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.a;\r\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.a;\r\n        vertexBuffer[this._vertexIndex++] = strokeThickness / width;\r\n        // (0, 1) - 1\r\n        vertexBuffer[this._vertexIndex++] = startBottom.x;\r\n        vertexBuffer[this._vertexIndex++] = startBottom.y;\r\n        vertexBuffer[this._vertexIndex++] = uvx0;\r\n        vertexBuffer[this._vertexIndex++] = uvy1;\r\n        vertexBuffer[this._vertexIndex++] = length;\r\n        vertexBuffer[this._vertexIndex++] = thickness;\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.a;\r\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.a;\r\n        vertexBuffer[this._vertexIndex++] = strokeThickness / width;\r\n        // (1, 0) - 2\r\n        vertexBuffer[this._vertexIndex++] = endTop.x;\r\n        vertexBuffer[this._vertexIndex++] = endTop.y;\r\n        vertexBuffer[this._vertexIndex++] = uvx1;\r\n        vertexBuffer[this._vertexIndex++] = uvy0;\r\n        vertexBuffer[this._vertexIndex++] = length;\r\n        vertexBuffer[this._vertexIndex++] = thickness;\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.a;\r\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.a;\r\n        vertexBuffer[this._vertexIndex++] = strokeThickness / width;\r\n        // (1, 1) - 3\r\n        vertexBuffer[this._vertexIndex++] = endBottom.x;\r\n        vertexBuffer[this._vertexIndex++] = endBottom.y;\r\n        vertexBuffer[this._vertexIndex++] = uvx1;\r\n        vertexBuffer[this._vertexIndex++] = uvy1;\r\n        vertexBuffer[this._vertexIndex++] = length;\r\n        vertexBuffer[this._vertexIndex++] = thickness;\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.a;\r\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.a;\r\n        vertexBuffer[this._vertexIndex++] = strokeThickness / width;\r\n    }\r\n    draw(pos, width, height, color, stroke = Color.Transparent, strokeThickness = 0) {\r\n        if (this._isFull()) {\r\n            this.flush();\r\n        }\r\n        this._rectangleCount++;\r\n        // transform based on current context\r\n        const transform = this._context.getTransform();\r\n        const opacity = this._context.opacity;\r\n        const topLeft = transform.multv(pos.add(vec(0, 0)));\r\n        const topRight = transform.multv(pos.add(vec(width, 0)));\r\n        const bottomRight = transform.multv(pos.add(vec(width, height)));\r\n        const bottomLeft = transform.multv(pos.add(vec(0, height)));\r\n        // TODO uv could be static vertex buffer\r\n        const uvx0 = 0;\r\n        const uvy0 = 0;\r\n        const uvx1 = 1;\r\n        const uvy1 = 1;\r\n        // update data\r\n        const vertexBuffer = this._layout.vertexBuffer.bufferData;\r\n        // (0, 0) - 0\r\n        vertexBuffer[this._vertexIndex++] = topLeft.x;\r\n        vertexBuffer[this._vertexIndex++] = topLeft.y;\r\n        vertexBuffer[this._vertexIndex++] = uvx0;\r\n        vertexBuffer[this._vertexIndex++] = uvy0;\r\n        vertexBuffer[this._vertexIndex++] = width;\r\n        vertexBuffer[this._vertexIndex++] = height;\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.a;\r\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.a;\r\n        vertexBuffer[this._vertexIndex++] = strokeThickness;\r\n        // (0, 1) - 1\r\n        vertexBuffer[this._vertexIndex++] = bottomLeft.x;\r\n        vertexBuffer[this._vertexIndex++] = bottomLeft.y;\r\n        vertexBuffer[this._vertexIndex++] = uvx0;\r\n        vertexBuffer[this._vertexIndex++] = uvy1;\r\n        vertexBuffer[this._vertexIndex++] = width;\r\n        vertexBuffer[this._vertexIndex++] = height;\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.a;\r\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.a;\r\n        vertexBuffer[this._vertexIndex++] = strokeThickness;\r\n        // (1, 0) - 2\r\n        vertexBuffer[this._vertexIndex++] = topRight.x;\r\n        vertexBuffer[this._vertexIndex++] = topRight.y;\r\n        vertexBuffer[this._vertexIndex++] = uvx1;\r\n        vertexBuffer[this._vertexIndex++] = uvy0;\r\n        vertexBuffer[this._vertexIndex++] = width;\r\n        vertexBuffer[this._vertexIndex++] = height;\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.a;\r\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.a;\r\n        vertexBuffer[this._vertexIndex++] = strokeThickness;\r\n        // (1, 1) - 3\r\n        vertexBuffer[this._vertexIndex++] = bottomRight.x;\r\n        vertexBuffer[this._vertexIndex++] = bottomRight.y;\r\n        vertexBuffer[this._vertexIndex++] = uvx1;\r\n        vertexBuffer[this._vertexIndex++] = uvy1;\r\n        vertexBuffer[this._vertexIndex++] = width;\r\n        vertexBuffer[this._vertexIndex++] = height;\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.a;\r\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.a;\r\n        vertexBuffer[this._vertexIndex++] = strokeThickness;\r\n    }\r\n    hasPendingDraws() {\r\n        return this._rectangleCount !== 0;\r\n    }\r\n    flush() {\r\n        // nothing to draw early exit\r\n        if (this._rectangleCount === 0) {\r\n            return;\r\n        }\r\n        const gl = this._gl;\r\n        // Bind the shader\r\n        this._shader.use();\r\n        // Bind the memory layout and upload data\r\n        this._layout.use(true);\r\n        // Update ortho matrix uniform\r\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\r\n        // Bind index buffer\r\n        this._quads.bind();\r\n        // Draw all the quads\r\n        gl.drawElements(gl.TRIANGLES, this._rectangleCount * 6, this._quads.bufferGlType, 0);\r\n        GraphicsDiagnostics.DrawnImagesCount += this._rectangleCount;\r\n        GraphicsDiagnostics.DrawCallCount++;\r\n        // Reset\r\n        this._rectangleCount = 0;\r\n        this._vertexIndex = 0;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/circle-renderer/circle-renderer.frag.glsl\n/* harmony default export */ const circle_renderer_frag = (\"#ifdef GL_OES_standard_derivatives\\r\\n#extension GL_OES_standard_derivatives : enable\\r\\n#endif\\r\\nprecision highp float;\\r\\n\\r\\n// UV coord\\r\\nvarying vec2 v_uv;\\r\\n\\r\\n// Color coord to blend with image\\r\\nvarying lowp vec4 v_color;\\r\\n\\r\\n// Stroke color if used\\r\\nvarying lowp vec4 v_strokeColor;\\r\\n\\r\\n// Stroke thickness if used\\r\\nvarying lowp float v_strokeThickness;\\r\\n\\r\\n// Opacity\\r\\nvarying float v_opacity;\\r\\n\\r\\nvoid main() {\\r\\n  // make (0, 0) the center the uv \\r\\n  vec2 uv = v_uv * 2.0 - 1.0;\\r\\n\\r\\n  vec4 color = v_color;\\r\\n  vec4 strokeColor = v_strokeColor;\\r\\n\\r\\n  // circle border is at radius 1.0 \\r\\n  // dist is > 0 when inside the circle \\r\\n  float d = length(uv);\\r\\n  float dist = 1.0 - length(uv);\\r\\n\\r\\n  // Fade based on fwidth\\r\\n  float fade = fwidth(dot(uv, uv));\\r\\n\\r\\n  // if dist is greater than 0 step to 1;\\r\\n  // when we cross this 0 threshold add a smooth fade\\r\\n  float fill = smoothstep(-fade/2.0, fade/2.0, dist);\\r\\n\\r\\n  // if dist is greater than the stroke thickness step to 1\\r\\n  float stroke = 1.0 - smoothstep(v_strokeThickness, v_strokeThickness + fade, dist);\\r\\n\\r\\n  strokeColor.a *= fill * stroke;\\r\\n  strokeColor.rgb *= strokeColor.a;\\r\\n\\r\\n  color.a *= fill * (1.0 - stroke);\\r\\n  color.rgb *= color.a;\\r\\n\\r\\n  vec4 finalColor = mix(vec4(0.0), (color + strokeColor), fill);\\r\\n  finalColor.rgb = finalColor.rgb * v_opacity;\\r\\n  finalColor.a = finalColor.a * v_opacity;\\r\\n  gl_FragColor = finalColor;\\r\\n}\");\n;// CONCATENATED MODULE: ./Graphics/Context/circle-renderer/circle-renderer.vert.glsl\n/* harmony default export */ const circle_renderer_vert = (\"attribute vec2 a_position;\\r\\n\\r\\n// UV coordinate\\r\\nattribute vec2 a_uv;\\r\\nvarying vec2 v_uv;\\r\\n\\r\\n// Opacity \\r\\nattribute float a_opacity;\\r\\nvarying float v_opacity;\\r\\n\\r\\nattribute vec4 a_color;\\r\\nvarying vec4 v_color;\\r\\n\\r\\nattribute vec4 a_strokeColor;\\r\\nvarying vec4 v_strokeColor;\\r\\n\\r\\nattribute float a_strokeThickness;\\r\\nvarying float v_strokeThickness;\\r\\n\\r\\nuniform mat4 u_matrix;\\r\\n\\r\\n\\r\\nvoid main() {\\r\\n   // Set the vertex position using the ortho transform matrix\\r\\n   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\\r\\n\\r\\n   // Pass through UV coords\\r\\n   v_uv = a_uv;\\r\\n   // Pass through the Opacity to the fragment shader\\r\\n   v_opacity = a_opacity;\\r\\n   // Pass through the color to the fragment shader\\r\\n   v_color = a_color;\\r\\n   // Pass through the stroke color to the fragment shader\\r\\n   v_strokeColor = a_strokeColor;\\r\\n   // Pass through the stroke thickenss to the fragment shader\\r\\n   v_strokeThickness = a_strokeThickness;\\r\\n}\");\n;// CONCATENATED MODULE: ./Graphics/Context/circle-renderer/circle-renderer.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass CircleRenderer {\r\n    constructor() {\r\n        this.type = 'ex.circle';\r\n        this.priority = 0;\r\n        this._maxCircles = 10922; // max(uint16) / 6 verts\r\n        this._circleCount = 0;\r\n        this._vertexIndex = 0;\r\n    }\r\n    initialize(gl, context) {\r\n        this._gl = gl;\r\n        this._context = context;\r\n        gl.getExtension('OES_standard_derivatives');\r\n        this._shader = new Shader({\r\n            fragmentSource: circle_renderer_frag,\r\n            vertexSource: circle_renderer_vert\r\n        });\r\n        this._shader.compile();\r\n        // setup uniforms\r\n        this._shader.use();\r\n        this._shader.setUniformMatrix('u_matrix', context.ortho);\r\n        this._buffer = new VertexBuffer({\r\n            size: 14 * 4 * this._maxCircles,\r\n            type: 'dynamic'\r\n        });\r\n        this._layout = new VertexLayout({\r\n            shader: this._shader,\r\n            vertexBuffer: this._buffer,\r\n            attributes: [\r\n                ['a_position', 2],\r\n                ['a_uv', 2],\r\n                ['a_opacity', 1],\r\n                ['a_color', 4],\r\n                ['a_strokeColor', 4],\r\n                ['a_strokeThickness', 1]\r\n            ]\r\n        });\r\n        this._quads = new QuadIndexBuffer(this._maxCircles, true);\r\n    }\r\n    _isFull() {\r\n        if (this._circleCount >= this._maxCircles) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    draw(pos, radius, color, stroke = Color.Transparent, strokeThickness = 0) {\r\n        if (this._isFull()) {\r\n            this.flush();\r\n        }\r\n        this._circleCount++;\r\n        // transform based on current context\r\n        const transform = this._context.getTransform();\r\n        const opacity = this._context.opacity;\r\n        const topLeft = transform.multv(pos.add(vec(-radius, -radius)));\r\n        const topRight = transform.multv(pos.add(vec(radius, -radius)));\r\n        const bottomRight = transform.multv(pos.add(vec(radius, radius)));\r\n        const bottomLeft = transform.multv(pos.add(vec(-radius, radius)));\r\n        // TODO UV could be static vertex buffer\r\n        const uvx0 = 0;\r\n        const uvy0 = 0;\r\n        const uvx1 = 1;\r\n        const uvy1 = 1;\r\n        // update data\r\n        const vertexBuffer = this._layout.vertexBuffer.bufferData;\r\n        // (0, 0) - 0\r\n        vertexBuffer[this._vertexIndex++] = topLeft.x;\r\n        vertexBuffer[this._vertexIndex++] = topLeft.y;\r\n        vertexBuffer[this._vertexIndex++] = uvx0;\r\n        vertexBuffer[this._vertexIndex++] = uvy0;\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.a;\r\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.a;\r\n        vertexBuffer[this._vertexIndex++] = strokeThickness / radius;\r\n        // (0, 1) - 1\r\n        vertexBuffer[this._vertexIndex++] = bottomLeft.x;\r\n        vertexBuffer[this._vertexIndex++] = bottomLeft.y;\r\n        vertexBuffer[this._vertexIndex++] = uvx0;\r\n        vertexBuffer[this._vertexIndex++] = uvy1;\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.a;\r\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.a;\r\n        vertexBuffer[this._vertexIndex++] = strokeThickness / radius;\r\n        // (1, 0) - 2\r\n        vertexBuffer[this._vertexIndex++] = topRight.x;\r\n        vertexBuffer[this._vertexIndex++] = topRight.y;\r\n        vertexBuffer[this._vertexIndex++] = uvx1;\r\n        vertexBuffer[this._vertexIndex++] = uvy0;\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.a;\r\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.a;\r\n        vertexBuffer[this._vertexIndex++] = strokeThickness / radius;\r\n        // (1, 1) - 3\r\n        vertexBuffer[this._vertexIndex++] = bottomRight.x;\r\n        vertexBuffer[this._vertexIndex++] = bottomRight.y;\r\n        vertexBuffer[this._vertexIndex++] = uvx1;\r\n        vertexBuffer[this._vertexIndex++] = uvy1;\r\n        vertexBuffer[this._vertexIndex++] = opacity;\r\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = color.a;\r\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\r\n        vertexBuffer[this._vertexIndex++] = stroke.a;\r\n        vertexBuffer[this._vertexIndex++] = strokeThickness / radius;\r\n    }\r\n    hasPendingDraws() {\r\n        return this._circleCount !== 0;\r\n    }\r\n    flush() {\r\n        // nothing to draw early exit\r\n        if (this._circleCount === 0) {\r\n            return;\r\n        }\r\n        const gl = this._gl;\r\n        // Bind the shader\r\n        this._shader.use();\r\n        // Bind the memory layout and upload data\r\n        this._layout.use(true);\r\n        // Update ortho matrix uniform\r\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\r\n        // Bind index buffer\r\n        this._quads.bind();\r\n        // Draw all the quads\r\n        gl.drawElements(gl.TRIANGLES, this._circleCount * 6, this._quads.bufferGlType, 0);\r\n        GraphicsDiagnostics.DrawnImagesCount += this._circleCount;\r\n        GraphicsDiagnostics.DrawCallCount++;\r\n        // Reset\r\n        this._circleCount = 0;\r\n        this._vertexIndex = 0;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/ExcaliburGraphicsContextWebGL.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// renderers\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass ExcaliburGraphicsContextWebGLDebug {\r\n    constructor(_webglCtx) {\r\n        this._webglCtx = _webglCtx;\r\n        this._debugText = new DebugText();\r\n    }\r\n    /**\r\n     * Draw a debugging rectangle to the context\r\n     * @param x\r\n     * @param y\r\n     * @param width\r\n     * @param height\r\n     */\r\n    drawRect(x, y, width, height, rectOptions = { color: Color.Black }) {\r\n        this.drawLine(vec(x, y), vec(x + width, y), { ...rectOptions });\r\n        this.drawLine(vec(x + width, y), vec(x + width, y + height), { ...rectOptions });\r\n        this.drawLine(vec(x + width, y + height), vec(x, y + height), { ...rectOptions });\r\n        this.drawLine(vec(x, y + height), vec(x, y), { ...rectOptions });\r\n    }\r\n    /**\r\n     * Draw a debugging line to the context\r\n     * @param start\r\n     * @param end\r\n     * @param lineOptions\r\n     */\r\n    drawLine(start, end, lineOptions = { color: Color.Black }) {\r\n        this._webglCtx.draw('ex.line', start, end, lineOptions.color);\r\n    }\r\n    /**\r\n     * Draw a debugging point to the context\r\n     * @param point\r\n     * @param pointOptions\r\n     */\r\n    drawPoint(point, pointOptions = { color: Color.Black, size: 5 }) {\r\n        this._webglCtx.draw('ex.point', point, pointOptions.color, pointOptions.size);\r\n    }\r\n    drawText(text, pos) {\r\n        this._debugText.write(this._webglCtx, text, pos);\r\n    }\r\n}\r\nclass ExcaliburGraphicsContextWebGL {\r\n    constructor(options) {\r\n        this._logger = Logger.getInstance();\r\n        this._renderers = new Map();\r\n        this._isDrawLifecycle = false;\r\n        // Postprocessing is a tuple with 2 render targets, these are flip-flopped during the postprocessing process\r\n        this._postProcessTargets = [];\r\n        this._postprocessors = [];\r\n        this._transform = new TransformStack();\r\n        this._state = new StateStack();\r\n        /**\r\n         * Meant for internal use only. Access the internal context at your own risk and no guarantees this will exist in the future.\r\n         * @internal\r\n         */\r\n        // public __imageRenderer: ImageRenderer;\r\n        this.snapToPixel = true;\r\n        this.smoothing = false;\r\n        this.backgroundColor = Color.ExcaliburBlue;\r\n        this._alreadyWarnedDrawLifecycle = false;\r\n        this.debug = new ExcaliburGraphicsContextWebGLDebug(this);\r\n        const { canvasElement, enableTransparency, smoothing, snapToPixel, backgroundColor } = options;\r\n        this.__gl = canvasElement.getContext('webgl', {\r\n            antialias: smoothing !== null && smoothing !== void 0 ? smoothing : this.smoothing,\r\n            premultipliedAlpha: false,\r\n            alpha: enableTransparency !== null && enableTransparency !== void 0 ? enableTransparency : true,\r\n            depth: true,\r\n            powerPreference: 'high-performance'\r\n        });\r\n        ExcaliburWebGLContextAccessor.register(this.__gl);\r\n        TextureLoader.register(this.__gl);\r\n        this.snapToPixel = snapToPixel !== null && snapToPixel !== void 0 ? snapToPixel : this.snapToPixel;\r\n        this.smoothing = smoothing !== null && smoothing !== void 0 ? smoothing : this.smoothing;\r\n        this.backgroundColor = backgroundColor !== null && backgroundColor !== void 0 ? backgroundColor : this.backgroundColor;\r\n        this._init();\r\n    }\r\n    get opacity() {\r\n        return this._state.current.opacity;\r\n    }\r\n    set opacity(value) {\r\n        this._state.current.opacity = value;\r\n    }\r\n    get width() {\r\n        return this.__gl.canvas.width;\r\n    }\r\n    get height() {\r\n        return this.__gl.canvas.height;\r\n    }\r\n    get ortho() {\r\n        return this._ortho;\r\n    }\r\n    /**\r\n     * Checks the underlying webgl implementation if the requested internal resolution is supported\r\n     * @param dim\r\n     */\r\n    checkIfResolutionSupported(dim) {\r\n        // Slight hack based on this thread https://groups.google.com/g/webgl-dev-list/c/AHONvz3oQTo\r\n        let supported = true;\r\n        if (dim.width > 4096 || dim.height > 4096) {\r\n            supported = false;\r\n        }\r\n        return supported;\r\n    }\r\n    _init() {\r\n        const gl = this.__gl;\r\n        // Setup viewport and view matrix\r\n        this._ortho = Matrix.ortho(0, gl.canvas.width, gl.canvas.height, 0, 400, -400);\r\n        gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\r\n        // Clear background\r\n        gl.clearColor(this.backgroundColor.r / 255, this.backgroundColor.g / 255, this.backgroundColor.b / 255, this.backgroundColor.a);\r\n        gl.clear(gl.COLOR_BUFFER_BIT);\r\n        // Enable alpha blending\r\n        // https://www.realtimerendering.com/blog/gpus-prefer-premultiplication/\r\n        gl.enable(gl.BLEND);\r\n        gl.blendEquation(gl.FUNC_ADD);\r\n        gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\r\n        gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\r\n        gl.blendFuncSeparate(gl.ONE, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\r\n        // Setup builtin renderers\r\n        this.register(new ImageRenderer());\r\n        this.register(new RectangleRenderer());\r\n        this.register(new CircleRenderer());\r\n        this.register(new PointRenderer());\r\n        this.register(new LineRenderer());\r\n        this._screenRenderer = new ScreenPassPainter(gl);\r\n        this._renderTarget = new RenderTarget({\r\n            gl,\r\n            width: gl.canvas.width,\r\n            height: gl.canvas.height\r\n        });\r\n        this._postProcessTargets = [\r\n            new RenderTarget({\r\n                gl,\r\n                width: gl.canvas.width,\r\n                height: gl.canvas.height\r\n            }),\r\n            new RenderTarget({\r\n                gl,\r\n                width: gl.canvas.width,\r\n                height: gl.canvas.height\r\n            })\r\n        ];\r\n        // 2D ctx shim\r\n        this._canvas = new Canvas({\r\n            width: gl.canvas.width,\r\n            height: gl.canvas.height\r\n        });\r\n        this.__ctx = this._canvas.ctx;\r\n    }\r\n    register(renderer) {\r\n        this._renderers.set(renderer.type, renderer);\r\n        renderer.initialize(this.__gl, this);\r\n    }\r\n    get(rendererName) {\r\n        return this._renderers.get(rendererName);\r\n    }\r\n    _isCurrentRenderer(renderer) {\r\n        if (!this._currentRenderer || this._currentRenderer === renderer) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    beginDrawLifecycle() {\r\n        this._isDrawLifecycle = true;\r\n    }\r\n    endDrawLifecycle() {\r\n        this._isDrawLifecycle = false;\r\n    }\r\n    draw(rendererName, ...args) {\r\n        if (!this._isDrawLifecycle && !this._alreadyWarnedDrawLifecycle) {\r\n            this._logger.warn(`Attempting to draw outside the the drawing lifecycle (preDraw/postDraw) is not supported and is a source of bugs/errors.\\n` +\r\n                `If you want to do custom drawing, use Actor.graphics, or any onPreDraw or onPostDraw handler.`);\r\n            this._alreadyWarnedDrawLifecycle = true;\r\n        }\r\n        // TODO does not handle priority yet...\r\n        //  in order to do this draw commands need to be captured and fed in priority order\r\n        const renderer = this._renderers.get(rendererName);\r\n        if (renderer) {\r\n            // Set the current renderer if not defined\r\n            if (!this._currentRenderer) {\r\n                this._currentRenderer = renderer;\r\n            }\r\n            if (!this._isCurrentRenderer(renderer)) {\r\n                // switching graphics means we must flush the previous\r\n                this._currentRenderer.flush();\r\n            }\r\n            // If we are still using the same renderer we can add to the current batch\r\n            renderer.draw(...args);\r\n            this._currentRenderer = renderer;\r\n        }\r\n        else {\r\n            throw Error(`No renderer with name ${rendererName} has been registered`);\r\n        }\r\n    }\r\n    resetTransform() {\r\n        this._transform.current = Matrix.identity();\r\n    }\r\n    updateViewport(resolution) {\r\n        const gl = this.__gl;\r\n        this._ortho = this._ortho = Matrix.ortho(0, resolution.width, resolution.height, 0, 400, -400);\r\n        this._renderTarget.setResolution(gl.canvas.width, gl.canvas.height);\r\n        this._postProcessTargets[0].setResolution(gl.canvas.width, gl.canvas.height);\r\n        this._postProcessTargets[1].setResolution(gl.canvas.width, gl.canvas.height);\r\n        // 2D ctx shim\r\n        this._canvas.width = gl.canvas.width;\r\n        this._canvas.height = gl.canvas.height;\r\n    }\r\n    drawImage(image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight) {\r\n        if (swidth === 0 || sheight === 0) {\r\n            return; // zero dimension dest exit early\r\n        }\r\n        else if (dwidth === 0 || dheight === 0) {\r\n            return; // zero dimension dest exit early\r\n        }\r\n        else if (image.width === 0 || image.height === 0) {\r\n            return; // zero dimension source exit early\r\n        }\r\n        if (!image) {\r\n            Logger.getInstance().warn('Cannot draw a null or undefined image');\r\n            // tslint:disable-next-line: no-console\r\n            if (console.trace) {\r\n                // tslint:disable-next-line: no-console\r\n                console.trace();\r\n            }\r\n            return;\r\n        }\r\n        this.draw('ex.image', image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight);\r\n    }\r\n    drawLine(start, end, color, thickness = 1) {\r\n        const rectangleRenderer = this._renderers.get('ex.rectangle');\r\n        rectangleRenderer.drawLine(start, end, color, thickness);\r\n    }\r\n    drawRectangle(pos, width, height, color, stroke, strokeThickness) {\r\n        this.draw('ex.rectangle', pos, width, height, color, stroke, strokeThickness);\r\n    }\r\n    drawCircle(pos, radius, color, stroke, thickness) {\r\n        this.draw('ex.circle', pos, radius, color, stroke, thickness);\r\n    }\r\n    save() {\r\n        this._transform.save();\r\n        this._state.save();\r\n    }\r\n    restore() {\r\n        this._transform.restore();\r\n        this._state.restore();\r\n    }\r\n    translate(x, y) {\r\n        this._transform.translate(this.snapToPixel ? ~~x : x, this.snapToPixel ? ~~y : y);\r\n    }\r\n    rotate(angle) {\r\n        this._transform.rotate(angle);\r\n    }\r\n    scale(x, y) {\r\n        this._transform.scale(x, y);\r\n    }\r\n    transform(matrix) {\r\n        this._transform.current = matrix;\r\n    }\r\n    getTransform() {\r\n        return this._transform.current;\r\n    }\r\n    multiply(m) {\r\n        this._transform.current = this._transform.current.multm(m);\r\n    }\r\n    addPostProcessor(postprocessor) {\r\n        this._postprocessors.push(postprocessor);\r\n        postprocessor.initialize(this.__gl);\r\n    }\r\n    removePostProcessor(postprocessor) {\r\n        const index = this._postprocessors.indexOf(postprocessor);\r\n        if (index !== -1) {\r\n            this._postprocessors.splice(index, 1);\r\n        }\r\n    }\r\n    clearPostProcessors() {\r\n        this._postprocessors.length = 0;\r\n    }\r\n    clear() {\r\n        const gl = this.__gl;\r\n        this._renderTarget.use();\r\n        gl.clearColor(this.backgroundColor.r / 255, this.backgroundColor.g / 255, this.backgroundColor.b / 255, this.backgroundColor.a);\r\n        // Clear the context with the newly set color. This is\r\n        // the function call that actually does the drawing.\r\n        gl.clear(gl.COLOR_BUFFER_BIT);\r\n    }\r\n    /**\r\n     * Flushes all batched rendering to the screen\r\n     */\r\n    flush() {\r\n        const gl = this.__gl;\r\n        // render target captures all draws and redirects to the render target\r\n        this._renderTarget.use();\r\n        // This is the final flush at the moment to draw any leftover pending draw\r\n        // TODO sort by priority and flush in order\r\n        for (const renderer of this._renderers.values()) {\r\n            if (renderer.hasPendingDraws()) {\r\n                renderer.flush();\r\n            }\r\n        }\r\n        this._renderTarget.disable();\r\n        // post process step\r\n        const source = this._renderTarget.toRenderSource();\r\n        source.use();\r\n        // flip flop render targets\r\n        for (let i = 0; i < this._postprocessors.length; i++) {\r\n            this._postProcessTargets[i % 2].use();\r\n            this._screenRenderer.renderWithPostProcessor(this._postprocessors[i]);\r\n            this._postProcessTargets[i % 2].toRenderSource().use();\r\n        }\r\n        // passing null switches rendering back to the canvas\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n        this._screenRenderer.renderToScreen();\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Screen.ts\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Enum representing the different display modes available to Excalibur.\r\n */\r\nvar DisplayMode;\r\n(function (DisplayMode) {\r\n    /**\r\n     * Default, use a specified resolution for the game. Like 800x600 pixels for example.\r\n     */\r\n    DisplayMode[\"Fixed\"] = \"Fixed\";\r\n    /**\r\n     * Fit to screen using as much space as possible while maintaining aspect ratio and resolution.\r\n     * This is not the same as [[Screen.goFullScreen]] but behaves in a similar way maintaining aspect ratio.\r\n     *\r\n     * You may want to center your game here is an example\r\n     * ```html\r\n     * <!-- html -->\r\n     * <body>\r\n     * <main>\r\n     *   <canvas id=\"game\"></canvas>\r\n     * </main>\r\n     * </body>\r\n     * ```\r\n     *\r\n     * ```css\r\n     * // css\r\n     * main {\r\n     *   display: flex;\r\n     *   align-items: center;\r\n     *   justify-content: center;\r\n     *   height: 100%;\r\n     *   width: 100%;\r\n     * }\r\n     * ```\r\n     *\r\n     */\r\n    DisplayMode[\"FitScreen\"] = \"FitScreen\";\r\n    /**\r\n     * Fill the entire screen's css width/height for the game resolution dynamically. This means the resolution of the game will\r\n     * change dynamically as the window is resized. This is not the same as [[Screen.goFullScreen]]\r\n     */\r\n    DisplayMode[\"FillScreen\"] = \"FillScreen\";\r\n    /**\r\n     * Fit to parent element width/height using as much space as possible while maintaining aspect ratio and resolution.\r\n     */\r\n    DisplayMode[\"FitContainer\"] = \"FitContainer\";\r\n    /**\r\n     * Use the parent DOM container's css width/height for the game resolution dynamically\r\n     */\r\n    DisplayMode[\"FillContainer\"] = \"FillContainer\";\r\n    /**\r\n     * Allow the game to be positioned with the [[EngineOptions.position]] option\r\n     * @deprecated Use CSS to position the game canvas, will be removed in v0.26.0\r\n     */\r\n    DisplayMode[\"Position\"] = \"Position\";\r\n})(DisplayMode || (DisplayMode = {}));\r\n/**\r\n * Convenience class for quick resolutions\r\n * Mostly sourced from https://emulation.gametechwiki.com/index.php/Resolution\r\n */\r\nclass Resolution {\r\n    /* istanbul ignore next */\r\n    static get SVGA() {\r\n        return { width: 800, height: 600 };\r\n    }\r\n    /* istanbul ignore next */\r\n    static get Standard() {\r\n        return { width: 1920, height: 1080 };\r\n    }\r\n    /* istanbul ignore next */\r\n    static get Atari2600() {\r\n        return { width: 160, height: 192 };\r\n    }\r\n    /* istanbul ignore next */\r\n    static get GameBoy() {\r\n        return { width: 160, height: 144 };\r\n    }\r\n    /* istanbul ignore next */\r\n    static get GameBoyAdvance() {\r\n        return { width: 240, height: 160 };\r\n    }\r\n    /* istanbul ignore next */\r\n    static get NintendoDS() {\r\n        return { width: 256, height: 192 };\r\n    }\r\n    /* istanbul ignore next */\r\n    static get NES() {\r\n        return { width: 256, height: 224 };\r\n    }\r\n    /* istanbul ignore next */\r\n    static get SNES() {\r\n        return { width: 256, height: 244 };\r\n    }\r\n}\r\n/**\r\n * The Screen handles all aspects of interacting with the screen for Excalibur.\r\n */\r\nclass Screen {\r\n    constructor(options) {\r\n        var _a, _b, _c;\r\n        this._antialiasing = true;\r\n        this._resolutionStack = [];\r\n        this._viewportStack = [];\r\n        this._pixelRatioOverride = null;\r\n        this._isFullScreen = false;\r\n        this._isDisposed = false;\r\n        this._logger = Logger.getInstance();\r\n        this._fullscreenChangeHandler = () => {\r\n            this._isFullScreen = !this._isFullScreen;\r\n            this._logger.debug('Fullscreen Change', this._isFullScreen);\r\n        };\r\n        this._pixelRatioChangeHandler = () => {\r\n            this._logger.debug('Pixel Ratio Change', window.devicePixelRatio);\r\n            this._listenForPixelRatio();\r\n            this._devicePixelRatio = this._calculateDevicePixelRatio();\r\n            this.applyResolutionAndViewport();\r\n        };\r\n        this._resizeHandler = () => {\r\n            const parent = this.parent;\r\n            this._logger.debug('View port resized');\r\n            this._setResolutionAndViewportByDisplayMode(parent);\r\n            this.applyResolutionAndViewport();\r\n        };\r\n        // Asking the window.devicePixelRatio is expensive we do it once\r\n        this._devicePixelRatio = this._calculateDevicePixelRatio();\r\n        this._alreadyWarned = false;\r\n        this.viewport = options.viewport;\r\n        this.resolution = (_a = options.resolution) !== null && _a !== void 0 ? _a : { ...this.viewport };\r\n        this._displayMode = (_b = options.displayMode) !== null && _b !== void 0 ? _b : DisplayMode.Fixed;\r\n        this._canvas = options.canvas;\r\n        this.graphicsContext = options.context;\r\n        this._antialiasing = (_c = options.antialiasing) !== null && _c !== void 0 ? _c : this._antialiasing;\r\n        this._browser = options.browser;\r\n        this._position = options.position;\r\n        this._pixelRatioOverride = options.pixelRatio;\r\n        this._applyDisplayMode();\r\n        this._listenForPixelRatio();\r\n        this._canvas.addEventListener('fullscreenchange', this._fullscreenChangeHandler);\r\n        this.applyResolutionAndViewport();\r\n    }\r\n    _listenForPixelRatio() {\r\n        if (this._mediaQueryList && !this._mediaQueryList.addEventListener) {\r\n            // Safari <=13.1 workaround, remove any existing handlers\r\n            this._mediaQueryList.removeListener(this._pixelRatioChangeHandler);\r\n        }\r\n        this._mediaQueryList = this._browser.window.nativeComponent.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);\r\n        // Safari <=13.1 workaround\r\n        if (this._mediaQueryList.addEventListener) {\r\n            this._mediaQueryList.addEventListener('change', this._pixelRatioChangeHandler, { once: true });\r\n        }\r\n        else {\r\n            this._mediaQueryList.addListener(this._pixelRatioChangeHandler);\r\n        }\r\n    }\r\n    dispose() {\r\n        if (!this._isDisposed) {\r\n            // Clean up handlers\r\n            this._isDisposed = true;\r\n            this._browser.window.off('resize', this._resizeHandler);\r\n            if (this._resizeObserver) {\r\n                this._resizeObserver.disconnect();\r\n            }\r\n            this.parent.removeEventListener('resize', this._resizeHandler);\r\n            // Safari <=13.1 workaround\r\n            if (this._mediaQueryList.removeEventListener) {\r\n                this._mediaQueryList.removeEventListener('change', this._pixelRatioChangeHandler);\r\n            }\r\n            else {\r\n                this._mediaQueryList.removeListener(this._pixelRatioChangeHandler);\r\n            }\r\n            this._canvas.removeEventListener('fullscreenchange', this._fullscreenChangeHandler);\r\n        }\r\n    }\r\n    _calculateDevicePixelRatio() {\r\n        if (window.devicePixelRatio < 1) {\r\n            return 1;\r\n        }\r\n        const devicePixelRatio = window.devicePixelRatio || 1;\r\n        return devicePixelRatio;\r\n    }\r\n    get pixelRatio() {\r\n        if (this._pixelRatioOverride) {\r\n            return this._pixelRatioOverride;\r\n        }\r\n        return this._devicePixelRatio;\r\n    }\r\n    get isHiDpi() {\r\n        return this.pixelRatio !== 1;\r\n    }\r\n    get displayMode() {\r\n        return this._displayMode;\r\n    }\r\n    get canvas() {\r\n        return this._canvas;\r\n    }\r\n    get parent() {\r\n        return ((this.displayMode === DisplayMode.FillContainer || this.displayMode === DisplayMode.FitContainer\r\n            ? this.canvas.parentElement || document.body\r\n            : window));\r\n    }\r\n    get resolution() {\r\n        return this._resolution;\r\n    }\r\n    set resolution(resolution) {\r\n        this._resolution = resolution;\r\n    }\r\n    get viewport() {\r\n        if (this._viewport) {\r\n            return this._viewport;\r\n        }\r\n        return this._resolution;\r\n    }\r\n    set viewport(viewport) {\r\n        this._viewport = viewport;\r\n    }\r\n    get aspectRatio() {\r\n        return this._resolution.width / this._resolution.height;\r\n    }\r\n    get scaledWidth() {\r\n        return this._resolution.width * this.pixelRatio;\r\n    }\r\n    get scaledHeight() {\r\n        return this._resolution.height * this.pixelRatio;\r\n    }\r\n    setCurrentCamera(camera) {\r\n        this._camera = camera;\r\n    }\r\n    pushResolutionAndViewport() {\r\n        this._resolutionStack.push(this.resolution);\r\n        this._viewportStack.push(this.viewport);\r\n        this.resolution = { ...this.resolution };\r\n        this.viewport = { ...this.viewport };\r\n    }\r\n    peekViewport() {\r\n        return this._viewportStack[this._viewportStack.length - 1];\r\n    }\r\n    peekResolution() {\r\n        return this._resolutionStack[this._resolutionStack.length - 1];\r\n    }\r\n    popResolutionAndViewport() {\r\n        this.resolution = this._resolutionStack.pop();\r\n        this.viewport = this._viewportStack.pop();\r\n    }\r\n    applyResolutionAndViewport() {\r\n        this._canvas.width = this.scaledWidth;\r\n        this._canvas.height = this.scaledHeight;\r\n        if (this.graphicsContext instanceof ExcaliburGraphicsContextWebGL) {\r\n            const supported = this.graphicsContext.checkIfResolutionSupported({\r\n                width: this.scaledWidth,\r\n                height: this.scaledHeight\r\n            });\r\n            if (!supported && !this._alreadyWarned) {\r\n                this._alreadyWarned = true; // warn once\r\n                this._logger.warn(`The currently configured resolution (${this.resolution.width}x${this.resolution.height})` +\r\n                    ' is too large for the platform WebGL implementation, this may work but cause WebGL rendering to behave oddly.' +\r\n                    ' Try reducing the resolution or disabling Hi DPI scaling to avoid this' +\r\n                    ' (read more here https://excaliburjs.com/docs/screens#understanding-viewport--resolution).');\r\n            }\r\n        }\r\n        if (this._antialiasing) {\r\n            this._canvas.style.imageRendering = 'auto';\r\n        }\r\n        else {\r\n            this._canvas.style.imageRendering = 'pixelated';\r\n            // Fall back to 'crisp-edges' if 'pixelated' is not supported\r\n            // Currently for firefox https://developer.mozilla.org/en-US/docs/Web/CSS/image-rendering\r\n            if (this._canvas.style.imageRendering === '') {\r\n                this._canvas.style.imageRendering = 'crisp-edges';\r\n            }\r\n        }\r\n        this._canvas.style.width = this.viewport.width + 'px';\r\n        this._canvas.style.height = this.viewport.height + 'px';\r\n        // After messing with the canvas width/height the graphics context is invalidated and needs to have some properties reset\r\n        this.graphicsContext.updateViewport(this.resolution);\r\n        this.graphicsContext.resetTransform();\r\n        this.graphicsContext.smoothing = this._antialiasing;\r\n    }\r\n    get antialiasing() {\r\n        return this._antialiasing;\r\n    }\r\n    set antialiasing(isSmooth) {\r\n        this._antialiasing = isSmooth;\r\n        this.graphicsContext.smoothing = this._antialiasing;\r\n    }\r\n    /**\r\n     * Returns true if excalibur is fullscreen using the browser fullscreen api\r\n     */\r\n    get isFullScreen() {\r\n        return this._isFullScreen;\r\n    }\r\n    /**\r\n     * Requests to go fullscreen using the browser fullscreen api, requires user interaction to be successful.\r\n     * For example, wire this to a user click handler.\r\n     */\r\n    goFullScreen() {\r\n        return this._canvas.requestFullscreen();\r\n    }\r\n    /**\r\n     * Requests to exit fullscreen using the browser fullscreen api\r\n     */\r\n    exitFullScreen() {\r\n        return document.exitFullscreen();\r\n    }\r\n    /**\r\n     * Takes a coordinate in normal html page space, for example from a pointer move event, and translates it to\r\n     * Excalibur screen space.\r\n     *\r\n     * Excalibur screen space starts at the top left (0, 0) corner of the viewport, and extends to the\r\n     * bottom right corner (resolutionX, resolutionY)\r\n     * @param point\r\n     */\r\n    pageToScreenCoordinates(point) {\r\n        let newX = point.x;\r\n        let newY = point.y;\r\n        if (!this._isFullScreen) {\r\n            newX -= getPosition(this._canvas).x;\r\n            newY -= getPosition(this._canvas).y;\r\n        }\r\n        // if fullscreen api on it centers with black bars\r\n        // we need to adjust the screen to world coordinates in this case\r\n        if (this._isFullScreen) {\r\n            if (window.innerWidth / this.aspectRatio < window.innerHeight) {\r\n                const screenHeight = window.innerWidth / this.aspectRatio;\r\n                const screenMarginY = (window.innerHeight - screenHeight) / 2;\r\n                newY = ((newY - screenMarginY) / screenHeight) * this.viewport.height;\r\n                newX = (newX / window.innerWidth) * this.viewport.width;\r\n            }\r\n            else {\r\n                const screenWidth = window.innerHeight * this.aspectRatio;\r\n                const screenMarginX = (window.innerWidth - screenWidth) / 2;\r\n                newX = ((newX - screenMarginX) / screenWidth) * this.viewport.width;\r\n                newY = (newY / window.innerHeight) * this.viewport.height;\r\n            }\r\n        }\r\n        newX = (newX / this.viewport.width) * this.resolution.width;\r\n        newY = (newY / this.viewport.height) * this.resolution.height;\r\n        return new Vector(newX, newY);\r\n    }\r\n    /**\r\n     * Takes a coordinate in Excalibur screen space, and translates it to normal html page space. For example,\r\n     * this is where html elements might live if you want to position them relative to Excalibur.\r\n     *\r\n     * Excalibur screen space starts at the top left (0, 0) corner of the viewport, and extends to the\r\n     * bottom right corner (resolutionX, resolutionY)\r\n     * @param point\r\n     */\r\n    screenToPageCoordinates(point) {\r\n        let newX = point.x;\r\n        let newY = point.y;\r\n        newX = (newX / this.resolution.width) * this.viewport.width;\r\n        newY = (newY / this.resolution.height) * this.viewport.height;\r\n        if (this._isFullScreen) {\r\n            if (window.innerWidth / this.aspectRatio < window.innerHeight) {\r\n                const screenHeight = window.innerWidth / this.aspectRatio;\r\n                const screenMarginY = (window.innerHeight - screenHeight) / 2;\r\n                newY = (newY / this.viewport.height) * screenHeight + screenMarginY;\r\n                newX = (newX / this.viewport.width) * window.innerWidth;\r\n            }\r\n            else {\r\n                const screenWidth = window.innerHeight * this.aspectRatio;\r\n                const screenMarginX = (window.innerWidth - screenWidth) / 2;\r\n                newX = (newX / this.viewport.width) * screenWidth + screenMarginX;\r\n                newY = (newY / this.viewport.height) * window.innerHeight;\r\n            }\r\n        }\r\n        if (!this._isFullScreen) {\r\n            newX += getPosition(this._canvas).x;\r\n            newY += getPosition(this._canvas).y;\r\n        }\r\n        return new Vector(newX, newY);\r\n    }\r\n    /**\r\n     * Takes a coordinate in Excalibur screen space, and translates it to Excalibur world space.\r\n     *\r\n     * World space is where [[Entity|entities]] in Excalibur live by default [[CoordPlane.World]]\r\n     * and extends infinitely out relative from the [[Camera]].\r\n     * @param point  Screen coordinate to convert\r\n     */\r\n    screenToWorldCoordinates(point) {\r\n        // the only difference between screen & world is the camera transform\r\n        if (this._camera) {\r\n            return this._camera.inverse.multv(point);\r\n        }\r\n        return point.sub(vec(this.resolution.width / 2, this.resolution.height / 2));\r\n    }\r\n    /**\r\n     * Takes a coordinate in Excalibur world space, and translates it to Excalibur screen space.\r\n     *\r\n     * Screen space is where [[ScreenElement|screen elements]] and [[Entity|entities]] with [[CoordPlane.Screen]] live.\r\n     * @param point  World coordinate to convert\r\n     */\r\n    worldToScreenCoordinates(point) {\r\n        if (this._camera) {\r\n            return this._camera.transform.multv(point);\r\n        }\r\n        return point.add(vec(this.resolution.width / 2, this.resolution.height / 2));\r\n    }\r\n    pageToWorldCoordinates(point) {\r\n        const screen = this.pageToScreenCoordinates(point);\r\n        return this.screenToWorldCoordinates(screen);\r\n    }\r\n    worldToPageCoordinates(point) {\r\n        const screen = this.worldToScreenCoordinates(point);\r\n        return this.screenToPageCoordinates(screen);\r\n    }\r\n    /**\r\n     * Returns a BoundingBox of the top left corner of the screen\r\n     * and the bottom right corner of the screen.\r\n     *\r\n     * World bounds are in world coordinates, useful for culling objects offscreen\r\n     */\r\n    getWorldBounds() {\r\n        const topLeft = this.screenToWorldCoordinates(Vector.Zero);\r\n        const right = topLeft.x + this.drawWidth;\r\n        const bottom = topLeft.y + this.drawHeight;\r\n        return new BoundingBox(topLeft.x, topLeft.y, right, bottom);\r\n    }\r\n    /**\r\n     * The width of the game canvas in pixels (physical width component of the\r\n     * resolution of the canvas element)\r\n     */\r\n    get canvasWidth() {\r\n        return this.canvas.width;\r\n    }\r\n    /**\r\n     * Returns half width of the game canvas in pixels (half physical width component)\r\n     */\r\n    get halfCanvasWidth() {\r\n        return this.canvas.width / 2;\r\n    }\r\n    /**\r\n     * The height of the game canvas in pixels, (physical height component of\r\n     * the resolution of the canvas element)\r\n     */\r\n    get canvasHeight() {\r\n        return this.canvas.height;\r\n    }\r\n    /**\r\n     * Returns half height of the game canvas in pixels (half physical height component)\r\n     */\r\n    get halfCanvasHeight() {\r\n        return this.canvas.height / 2;\r\n    }\r\n    /**\r\n     * Returns the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\r\n     */\r\n    get drawWidth() {\r\n        if (this._camera) {\r\n            return this.resolution.width / this._camera.zoom;\r\n        }\r\n        return this.resolution.width;\r\n    }\r\n    /**\r\n     * Returns half the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\r\n     */\r\n    get halfDrawWidth() {\r\n        return this.drawWidth / 2;\r\n    }\r\n    /**\r\n     * Returns the height of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\r\n     */\r\n    get drawHeight() {\r\n        if (this._camera) {\r\n            return this.resolution.height / this._camera.zoom;\r\n        }\r\n        return this.resolution.height;\r\n    }\r\n    /**\r\n     * Returns half the height of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\r\n     */\r\n    get halfDrawHeight() {\r\n        return this.drawHeight / 2;\r\n    }\r\n    /**\r\n     * Returns screen center coordinates including zoom and device pixel ratio.\r\n     */\r\n    get center() {\r\n        return vec(this.halfDrawWidth, this.halfDrawHeight);\r\n    }\r\n    _computeFit() {\r\n        document.body.style.margin = '0px';\r\n        document.body.style.overflow = 'hidden';\r\n        const aspect = this.aspectRatio;\r\n        let adjustedWidth = 0;\r\n        let adjustedHeight = 0;\r\n        if (window.innerWidth / aspect < window.innerHeight) {\r\n            adjustedWidth = window.innerWidth;\r\n            adjustedHeight = window.innerWidth / aspect;\r\n        }\r\n        else {\r\n            adjustedWidth = window.innerHeight * aspect;\r\n            adjustedHeight = window.innerHeight;\r\n        }\r\n        this.viewport = {\r\n            width: adjustedWidth,\r\n            height: adjustedHeight\r\n        };\r\n    }\r\n    _computeFitContainer() {\r\n        const aspect = this.aspectRatio;\r\n        let adjustedWidth = 0;\r\n        let adjustedHeight = 0;\r\n        const parent = this.canvas.parentElement;\r\n        if (parent.clientWidth / aspect < parent.clientHeight) {\r\n            adjustedWidth = parent.clientWidth;\r\n            adjustedHeight = parent.clientWidth / aspect;\r\n        }\r\n        else {\r\n            adjustedWidth = parent.clientHeight * aspect;\r\n            adjustedHeight = parent.clientHeight;\r\n        }\r\n        this.viewport = {\r\n            width: adjustedWidth,\r\n            height: adjustedHeight\r\n        };\r\n    }\r\n    _applyDisplayMode() {\r\n        if (this.displayMode === DisplayMode.Position) {\r\n            this._initializeDisplayModePosition(this._position);\r\n        }\r\n        else {\r\n            this._setResolutionAndViewportByDisplayMode(this.parent);\r\n            // watch resizing\r\n            if (this.parent instanceof Window) {\r\n                this._browser.window.on('resize', this._resizeHandler);\r\n            }\r\n            else {\r\n                this._resizeObserver = new ResizeObserver(() => {\r\n                    this._resizeHandler();\r\n                });\r\n                this._resizeObserver.observe(this.parent);\r\n            }\r\n            this.parent.addEventListener('resize', this._resizeHandler);\r\n        }\r\n    }\r\n    /**\r\n     * Sets the resolution and viewport based on the selected display mode.\r\n     */\r\n    _setResolutionAndViewportByDisplayMode(parent) {\r\n        if (this.displayMode === DisplayMode.FillContainer) {\r\n            this.resolution = {\r\n                width: parent.clientWidth,\r\n                height: parent.clientHeight\r\n            };\r\n            this.viewport = this.resolution;\r\n        }\r\n        if (this.displayMode === DisplayMode.FillScreen) {\r\n            document.body.style.margin = '0px';\r\n            document.body.style.overflow = 'hidden';\r\n            this.resolution = {\r\n                width: parent.innerWidth,\r\n                height: parent.innerHeight\r\n            };\r\n            this.viewport = this.resolution;\r\n        }\r\n        if (this.displayMode === DisplayMode.FitScreen) {\r\n            this._computeFit();\r\n        }\r\n        if (this.displayMode === DisplayMode.FitContainer) {\r\n            this._computeFitContainer();\r\n        }\r\n    }\r\n    _initializeDisplayModePosition(position) {\r\n        if (!position) {\r\n            throw new Error('DisplayMode of Position was selected but no position option was given');\r\n        }\r\n        else {\r\n            this.canvas.style.display = 'block';\r\n            this.canvas.style.position = 'absolute';\r\n            if (typeof position === 'string') {\r\n                const specifiedPosition = position.split(' ');\r\n                switch (specifiedPosition[0]) {\r\n                    case 'top':\r\n                        this.canvas.style.top = '0px';\r\n                        break;\r\n                    case 'bottom':\r\n                        this.canvas.style.bottom = '0px';\r\n                        break;\r\n                    case 'middle':\r\n                        this.canvas.style.top = '50%';\r\n                        const offsetY = -this.halfDrawHeight;\r\n                        this.canvas.style.marginTop = offsetY.toString();\r\n                        break;\r\n                    default:\r\n                        throw new Error('Invalid Position Given');\r\n                }\r\n                if (specifiedPosition[1]) {\r\n                    switch (specifiedPosition[1]) {\r\n                        case 'left':\r\n                            this.canvas.style.left = '0px';\r\n                            break;\r\n                        case 'right':\r\n                            this.canvas.style.right = '0px';\r\n                            break;\r\n                        case 'center':\r\n                            this.canvas.style.left = '50%';\r\n                            const offsetX = -this.halfDrawWidth;\r\n                            this.canvas.style.marginLeft = offsetX.toString();\r\n                            break;\r\n                        default:\r\n                            throw new Error('Invalid Position Given');\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                if (position.top) {\r\n                    typeof position.top === 'number'\r\n                        ? (this.canvas.style.top = position.top.toString() + 'px')\r\n                        : (this.canvas.style.top = position.top);\r\n                }\r\n                if (position.right) {\r\n                    typeof position.right === 'number'\r\n                        ? (this.canvas.style.right = position.right.toString() + 'px')\r\n                        : (this.canvas.style.right = position.right);\r\n                }\r\n                if (position.bottom) {\r\n                    typeof position.bottom === 'number'\r\n                        ? (this.canvas.style.bottom = position.bottom.toString() + 'px')\r\n                        : (this.canvas.style.bottom = position.bottom);\r\n                }\r\n                if (position.left) {\r\n                    typeof position.left === 'number'\r\n                        ? (this.canvas.style.left = position.left.toString() + 'px')\r\n                        : (this.canvas.style.left = position.left);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Resources/Sound/AudioContext.ts\n/**\r\n * Internal class used to build instances of AudioContext\r\n */\r\n/* istanbul ignore next */\r\nclass AudioContextFactory {\r\n    static create() {\r\n        if (!this._INSTANCE) {\r\n            if (window.AudioContext || window.webkitAudioContext) {\r\n                this._INSTANCE = new AudioContext();\r\n            }\r\n        }\r\n        return this._INSTANCE;\r\n    }\r\n}\r\nAudioContextFactory._INSTANCE = null;\r\n\n;// CONCATENATED MODULE: ./Util/WebAudio.ts\n\r\n\r\n/**\r\n * Patch for detecting legacy web audio in browsers\r\n * @internal\r\n * @param source\r\n */\r\nfunction isLegacyWebAudioSource(source) {\r\n    return !!source.playbackState;\r\n}\r\nclass WebAudio {\r\n    /**\r\n     * Play an empty sound to unlock Safari WebAudio context. Call this function\r\n     * right after a user interaction event.\r\n     * @source https://paulbakaus.com/tutorials/html5/web-audio-on-ios/\r\n     */\r\n    static unlock() {\r\n        const promise = new Promise((resolve, reject) => {\r\n            if (WebAudio._UNLOCKED || !AudioContextFactory.create()) {\r\n                return resolve(true);\r\n            }\r\n            const unlockTimeoutTimer = setTimeout(() => {\r\n                Logger.getInstance().warn('Excalibur was unable to unlock the audio context, audio probably will not play in this browser.');\r\n                resolve(false);\r\n            }, 200);\r\n            const audioContext = AudioContextFactory.create();\r\n            audioContext.resume().then(() => {\r\n                // create empty buffer and play it\r\n                const buffer = audioContext.createBuffer(1, 1, 22050);\r\n                const source = audioContext.createBufferSource();\r\n                let ended = false;\r\n                source.buffer = buffer;\r\n                source.connect(audioContext.destination);\r\n                source.onended = () => (ended = true);\r\n                source.start(0);\r\n                // by checking the play state after some time, we know if we're really unlocked\r\n                setTimeout(() => {\r\n                    if (isLegacyWebAudioSource(source)) {\r\n                        if (source.playbackState === source.PLAYING_STATE || source.playbackState === source.FINISHED_STATE) {\r\n                            WebAudio._UNLOCKED = true;\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (audioContext.currentTime > 0 || ended) {\r\n                            WebAudio._UNLOCKED = true;\r\n                        }\r\n                    }\r\n                }, 0);\r\n                clearTimeout(unlockTimeoutTimer);\r\n                resolve(true);\r\n            }, () => {\r\n                reject();\r\n            });\r\n        });\r\n        return promise;\r\n    }\r\n    static isUnlocked() {\r\n        return this._UNLOCKED;\r\n    }\r\n}\r\nWebAudio._UNLOCKED = false;\r\n\n;// CONCATENATED MODULE: ./Class.ts\n\r\n/**\r\n * Excalibur base class that provides basic functionality such as [[EventDispatcher]]\r\n * and extending abilities for vanilla Javascript projects\r\n */\r\nclass Class {\r\n    constructor() {\r\n        this.eventDispatcher = new EventDispatcher();\r\n    }\r\n    /**\r\n     * Alias for `addEventListener`. You can listen for a variety of\r\n     * events off of the engine; see the events section below for a complete list.\r\n     * @param eventName  Name of the event to listen for\r\n     * @param handler    Event handler for the thrown event\r\n     */\r\n    on(eventName, handler) {\r\n        this.eventDispatcher.on(eventName, handler);\r\n    }\r\n    /**\r\n     * Alias for `removeEventListener`. If only the eventName is specified\r\n     * it will remove all handlers registered for that specific event. If the eventName\r\n     * and the handler instance are specified only that handler will be removed.\r\n     *\r\n     * @param eventName  Name of the event to listen for\r\n     * @param handler    Event handler for the thrown event\r\n     */\r\n    off(eventName, handler) {\r\n        this.eventDispatcher.off(eventName, handler);\r\n    }\r\n    /**\r\n     * Emits a new event\r\n     * @param eventName   Name of the event to emit\r\n     * @param eventObject Data associated with this event\r\n     */\r\n    emit(eventName, eventObject) {\r\n        this.eventDispatcher.emit(eventName, eventObject);\r\n    }\r\n    /**\r\n     * Once listens to an event one time, then unsubscribes from that event\r\n     *\r\n     * @param eventName The name of the event to subscribe to once\r\n     * @param handler   The handler of the event that will be auto unsubscribed\r\n     */\r\n    once(eventName, handler) {\r\n        this.eventDispatcher.once(eventName, handler);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Util/DrawUtil.ts\n\r\n/* istanbul ignore next */\r\n/**\r\n * Draw a line on canvas context\r\n *\r\n * @param ctx The canvas context\r\n * @param color The color of the line\r\n * @param x1 The start x coordinate\r\n * @param y1 The start y coordinate\r\n * @param x2 The ending x coordinate\r\n * @param y2 The ending y coordinate\r\n * @param thickness The line thickness\r\n * @param cap The [[LineCapStyle]] (butt, round, or square)\r\n */\r\nfunction line(ctx, color = Color.Red, x1, y1, x2, y2, thickness = 1, cap = 'butt') {\r\n    ctx.save();\r\n    ctx.beginPath();\r\n    ctx.lineWidth = thickness;\r\n    ctx.lineCap = cap;\r\n    ctx.strokeStyle = color.toString();\r\n    ctx.moveTo(x1, y1);\r\n    ctx.lineTo(x2, y2);\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n    ctx.restore();\r\n}\r\n/* istanbul ignore next */\r\n/**\r\n * Draw the vector as a point onto the canvas.\r\n */\r\nfunction point(ctx, color = Color.Red, point) {\r\n    ctx.beginPath();\r\n    ctx.strokeStyle = color.toString();\r\n    ctx.arc(point.x, point.y, 5, 0, Math.PI * 2);\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n}\r\n/**\r\n * Draw the vector as a line onto the canvas starting a origin point.\r\n */\r\n/* istanbul ignore next */\r\n/**\r\n *\r\n */\r\nfunction vector(ctx, color, origin, vector, scale = 1.0) {\r\n    const c = color ? color.toString() : 'blue';\r\n    const v = vector.scale(scale);\r\n    ctx.beginPath();\r\n    ctx.strokeStyle = c;\r\n    ctx.moveTo(origin.x, origin.y);\r\n    ctx.lineTo(origin.x + v.x, origin.y + v.y);\r\n    ctx.closePath();\r\n    ctx.stroke();\r\n}\r\n/**\r\n * Draw a round rectangle on a canvas context\r\n *\r\n * @param ctx The canvas context\r\n * @param x The top-left x coordinate\r\n * @param y The top-left y coordinate\r\n * @param width The width of the rectangle\r\n * @param height The height of the rectangle\r\n * @param radius The border radius of the rectangle\r\n * @param stroke The [[Color]] to stroke rectangle with\r\n * @param fill The [[Color]] to fill rectangle with\r\n */\r\nfunction roundRect(ctx, x, y, width, height, radius = 5, stroke = Color.White, fill = null) {\r\n    let br;\r\n    if (typeof radius === 'number') {\r\n        br = { tl: radius, tr: radius, br: radius, bl: radius };\r\n    }\r\n    else {\r\n        const defaultRadius = { tl: 0, tr: 0, br: 0, bl: 0 };\r\n        for (const prop in defaultRadius) {\r\n            if (defaultRadius.hasOwnProperty(prop)) {\r\n                const side = prop;\r\n                br[side] = radius[side] || defaultRadius[side];\r\n            }\r\n        }\r\n    }\r\n    ctx.beginPath();\r\n    ctx.moveTo(x + br.tl, y);\r\n    ctx.lineTo(x + width - br.tr, y);\r\n    ctx.quadraticCurveTo(x + width, y, x + width, y + br.tr);\r\n    ctx.lineTo(x + width, y + height - br.br);\r\n    ctx.quadraticCurveTo(x + width, y + height, x + width - br.br, y + height);\r\n    ctx.lineTo(x + br.bl, y + height);\r\n    ctx.quadraticCurveTo(x, y + height, x, y + height - br.bl);\r\n    ctx.lineTo(x, y + br.tl);\r\n    ctx.quadraticCurveTo(x, y, x + br.tl, y);\r\n    ctx.closePath();\r\n    if (fill) {\r\n        ctx.fillStyle = fill.toString();\r\n        ctx.fill();\r\n    }\r\n    if (stroke) {\r\n        ctx.strokeStyle = stroke.toString();\r\n        ctx.stroke();\r\n    }\r\n}\r\n/**\r\n *\r\n */\r\nfunction circle(ctx, x, y, radius, stroke = Color.White, fill = null) {\r\n    ctx.beginPath();\r\n    ctx.arc(x, y, radius, 0, Math.PI * 2);\r\n    ctx.closePath();\r\n    if (fill) {\r\n        ctx.fillStyle = fill.toString();\r\n        ctx.fill();\r\n    }\r\n    if (stroke) {\r\n        ctx.strokeStyle = stroke.toString();\r\n        ctx.stroke();\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Loader.logo.png\n/* harmony default export */ const Loader_logo = (\"data:image/png;base64,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\");\n// EXTERNAL MODULE: ./Loader.css\nvar Loader_0 = __webpack_require__(1388);\n;// CONCATENATED MODULE: ./Loader.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Pre-loading assets\r\n *\r\n * The loader provides a mechanism to preload multiple resources at\r\n * one time. The loader must be passed to the engine in order to\r\n * trigger the loading progress bar.\r\n *\r\n * The [[Loader]] itself implements [[Loadable]] so you can load loaders.\r\n *\r\n * ## Example: Pre-loading resources for a game\r\n *\r\n * ```js\r\n * // create a loader\r\n * var loader = new ex.Loader();\r\n *\r\n * // create a resource dictionary (best practice is to keep a separate file)\r\n * var resources = {\r\n *   TextureGround: new ex.Texture(\"/images/textures/ground.png\"),\r\n *   SoundDeath: new ex.Sound(\"/sound/death.wav\", \"/sound/death.mp3\")\r\n * };\r\n *\r\n * // loop through dictionary and add to loader\r\n * for (var loadable in resources) {\r\n *   if (resources.hasOwnProperty(loadable)) {\r\n *     loader.addResource(resources[loadable]);\r\n *   }\r\n * }\r\n *\r\n * // start game\r\n * game.start(loader).then(function () {\r\n *   console.log(\"Game started!\");\r\n * });\r\n * ```\r\n *\r\n * ## Customize the Loader\r\n *\r\n * The loader can be customized to show different, text, logo, background color, and button.\r\n *\r\n * ```typescript\r\n * const loader = new ex.Loader([playerTexture]);\r\n *\r\n * // The loaders button text can simply modified using this\r\n * loader.playButtonText = 'Start the best game ever';\r\n *\r\n * // The logo can be changed by inserting a base64 image string here\r\n *\r\n * loader.logo = 'data:image/png;base64,iVBORw...';\r\n * loader.logoWidth = 15;\r\n * loader.logoHeight = 14;\r\n *\r\n * // The background color can be changed like so by supplying a valid CSS color string\r\n *\r\n * loader.backgroundColor = 'red'\r\n * loader.backgroundColor = '#176BAA'\r\n *\r\n * // To build a completely new button\r\n * loader.startButtonFactory = () => {\r\n *     let myButton = document.createElement('button');\r\n *     myButton.textContent = 'The best button';\r\n *     return myButton;\r\n * };\r\n *\r\n * engine.start(loader).then(() => {});\r\n * ```\r\n */\r\nclass Loader extends Class {\r\n    /**\r\n     * @param loadables  Optionally provide the list of resources you want to load at constructor time\r\n     */\r\n    constructor(loadables) {\r\n        super();\r\n        this.canvas = new Canvas({\r\n            filtering: ImageFiltering.Blended,\r\n            smoothing: true,\r\n            draw: this.draw.bind(this)\r\n        });\r\n        this._resourceList = [];\r\n        this._index = 0;\r\n        this._playButtonShown = false;\r\n        this._resourceCount = 0;\r\n        this._numLoaded = 0;\r\n        this._progressCounts = {};\r\n        this._totalCounts = {};\r\n        // logo drawing stuff\r\n        // base64 string encoding of the excalibur logo (logo-white.png)\r\n        this.logo = Loader_logo;\r\n        this.logoWidth = 468;\r\n        this.logoHeight = 118;\r\n        /**\r\n         * Gets or sets the color of the loading bar, default is [[Color.White]]\r\n         */\r\n        this.loadingBarColor = Color.White;\r\n        /**\r\n         * Gets or sets the background color of the loader as a hex string\r\n         */\r\n        this.backgroundColor = '#176BAA';\r\n        this.suppressPlayButton = false;\r\n        /** Loads the css from Loader.css */\r\n        this._playButtonStyles = Loader_0/* default.toString */.Z.toString();\r\n        /**\r\n         * Get/set play button text\r\n         */\r\n        this.playButtonText = 'Play game';\r\n        /**\r\n         * Return a html button element for excalibur to use as a play button\r\n         */\r\n        this.startButtonFactory = () => {\r\n            let buttonElement = document.getElementById('excalibur-play');\r\n            if (!buttonElement) {\r\n                buttonElement = document.createElement('button');\r\n            }\r\n            buttonElement.id = 'excalibur-play';\r\n            buttonElement.textContent = this.playButtonText;\r\n            buttonElement.style.display = 'none';\r\n            return buttonElement;\r\n        };\r\n        this._isLoadedPromise = new Promise(resolve => {\r\n            this._isLoadedResolve = resolve;\r\n        });\r\n        if (loadables) {\r\n            this.addResources(loadables);\r\n        }\r\n    }\r\n    get _image() {\r\n        if (!this._imageElement) {\r\n            this._imageElement = new Image();\r\n            this._imageElement.src = this.logo;\r\n        }\r\n        return this._imageElement;\r\n    }\r\n    get playButtonRootElement() {\r\n        return this._playButtonRootElement;\r\n    }\r\n    get playButtonElement() {\r\n        return this._playButtonElement;\r\n    }\r\n    get _playButton() {\r\n        const existingRoot = document.getElementById('excalibur-play-root');\r\n        if (existingRoot) {\r\n            this._playButtonRootElement = existingRoot;\r\n        }\r\n        if (!this._playButtonRootElement) {\r\n            this._playButtonRootElement = document.createElement('div');\r\n            this._playButtonRootElement.id = 'excalibur-play-root';\r\n            this._playButtonRootElement.style.position = 'absolute';\r\n            document.body.appendChild(this._playButtonRootElement);\r\n        }\r\n        if (!this._styleBlock) {\r\n            this._styleBlock = document.createElement('style');\r\n            this._styleBlock.textContent = this._playButtonStyles;\r\n            document.head.appendChild(this._styleBlock);\r\n        }\r\n        if (!this._playButtonElement) {\r\n            this._playButtonElement = this.startButtonFactory();\r\n            this._playButtonRootElement.appendChild(this._playButtonElement);\r\n        }\r\n        return this._playButtonElement;\r\n    }\r\n    wireEngine(engine) {\r\n        this._engine = engine;\r\n        this.canvas.width = this._engine.canvas.width;\r\n        this.canvas.height = this._engine.canvas.height;\r\n    }\r\n    /**\r\n     * Add a resource to the loader to load\r\n     * @param loadable  Resource to add\r\n     */\r\n    addResource(loadable) {\r\n        const key = this._index++;\r\n        this._resourceList.push(loadable);\r\n        this._progressCounts[key] = 0;\r\n        this._totalCounts[key] = 1;\r\n        this._resourceCount++;\r\n    }\r\n    /**\r\n     * Add a list of resources to the loader to load\r\n     * @param loadables  The list of resources to load\r\n     */\r\n    addResources(loadables) {\r\n        let i = 0;\r\n        const len = loadables.length;\r\n        for (i; i < len; i++) {\r\n            this.addResource(loadables[i]);\r\n        }\r\n    }\r\n    /**\r\n     * Returns true if the loader has completely loaded all resources\r\n     */\r\n    isLoaded() {\r\n        return this._numLoaded === this._resourceCount;\r\n    }\r\n    /**\r\n     * Shows the play button and returns a promise that resolves when clicked\r\n     */\r\n    async showPlayButton() {\r\n        var _a, _b;\r\n        if (this.suppressPlayButton) {\r\n            this.hidePlayButton();\r\n            // Delay is to give the logo a chance to show, otherwise don't delay\r\n            await delay(500, (_a = this._engine) === null || _a === void 0 ? void 0 : _a.clock);\r\n        }\r\n        else {\r\n            const resizeHandler = () => {\r\n                this._positionPlayButton();\r\n            };\r\n            if ((_b = this._engine) === null || _b === void 0 ? void 0 : _b.browser) {\r\n                this._engine.browser.window.on('resize', resizeHandler);\r\n            }\r\n            this._playButtonShown = true;\r\n            this._playButton.style.display = 'block';\r\n            document.body.addEventListener('keyup', (evt) => {\r\n                if (evt.key === 'Enter') {\r\n                    this._playButton.click();\r\n                }\r\n            });\r\n            this._positionPlayButton();\r\n            const playButtonClicked = new Promise((resolve) => {\r\n                const startButtonHandler = (e) => {\r\n                    var _a;\r\n                    // We want to stop propagation to keep bubbling to the engine pointer handlers\r\n                    e.stopPropagation();\r\n                    // Hide Button after click\r\n                    this.hidePlayButton();\r\n                    if ((_a = this._engine) === null || _a === void 0 ? void 0 : _a.browser) {\r\n                        this._engine.browser.window.off('resize', resizeHandler);\r\n                    }\r\n                    resolve();\r\n                };\r\n                this._playButton.addEventListener('click', startButtonHandler);\r\n                this._playButton.addEventListener('touchend', startButtonHandler);\r\n                this._playButton.addEventListener('pointerup', startButtonHandler);\r\n            });\r\n            return await playButtonClicked;\r\n        }\r\n    }\r\n    hidePlayButton() {\r\n        this._playButtonShown = false;\r\n        this._playButton.style.display = 'none';\r\n    }\r\n    /**\r\n     * Clean up generated elements for the loader\r\n     */\r\n    dispose() {\r\n        if (this._playButtonRootElement.parentElement) {\r\n            this._playButtonRootElement.removeChild(this._playButtonElement);\r\n            document.body.removeChild(this._playButtonRootElement);\r\n            document.head.removeChild(this._styleBlock);\r\n            this._playButtonRootElement = null;\r\n            this._playButtonElement = null;\r\n            this._styleBlock = null;\r\n        }\r\n    }\r\n    update(_engine, _delta) {\r\n        // override me\r\n    }\r\n    areResourcesLoaded() {\r\n        return this._isLoadedPromise;\r\n    }\r\n    /**\r\n     * Begin loading all of the supplied resources, returning a promise\r\n     * that resolves when loading of all is complete AND the user has clicked the \"Play button\"\r\n     */\r\n    async load() {\r\n        var _a, _b;\r\n        await ((_a = this._image) === null || _a === void 0 ? void 0 : _a.decode()); // decode logo if it exists\r\n        await Promise.all(this._resourceList.map((r) => r.load().finally(() => {\r\n            // capture progress\r\n            this._numLoaded++;\r\n        })));\r\n        this._isLoadedResolve();\r\n        // short delay in showing the button for aesthetics\r\n        await delay(200, (_b = this._engine) === null || _b === void 0 ? void 0 : _b.clock);\r\n        await this.showPlayButton();\r\n        // Unlock browser AudioContext in after user gesture\r\n        // See: https://github.com/excaliburjs/Excalibur/issues/262\r\n        // See: https://github.com/excaliburjs/Excalibur/issues/1031\r\n        await WebAudio.unlock();\r\n        return (this.data = this._resourceList);\r\n    }\r\n    markResourceComplete() {\r\n        this._numLoaded++;\r\n    }\r\n    /**\r\n     * Returns the progress of the loader as a number between [0, 1] inclusive.\r\n     */\r\n    get progress() {\r\n        return this._resourceCount > 0 ? clamp(this._numLoaded, 0, this._resourceCount) / this._resourceCount : 1;\r\n    }\r\n    _positionPlayButton() {\r\n        if (this._engine) {\r\n            const screenHeight = this._engine.screen.viewport.height;\r\n            const screenWidth = this._engine.screen.viewport.width;\r\n            if (this._playButtonRootElement) {\r\n                const left = this._engine.canvas.offsetLeft;\r\n                const top = this._engine.canvas.offsetTop;\r\n                const buttonWidth = this._playButton.clientWidth;\r\n                const buttonHeight = this._playButton.clientHeight;\r\n                if (this.playButtonPosition) {\r\n                    this._playButtonRootElement.style.left = `${this.playButtonPosition.x}px`;\r\n                    this._playButtonRootElement.style.top = `${this.playButtonPosition.y}px`;\r\n                }\r\n                else {\r\n                    this._playButtonRootElement.style.left = `${left + screenWidth / 2 - buttonWidth / 2}px`;\r\n                    this._playButtonRootElement.style.top = `${top + screenHeight / 2 - buttonHeight / 2 + 100}px`;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Loader draw function. Draws the default Excalibur loading screen.\r\n     * Override `logo`, `logoWidth`, `logoHeight` and `backgroundColor` properties\r\n     * to customize the drawing, or just override entire method.\r\n     */\r\n    draw(ctx) {\r\n        const canvasHeight = this._engine.canvasHeight / this._engine.pixelRatio;\r\n        const canvasWidth = this._engine.canvasWidth / this._engine.pixelRatio;\r\n        this._positionPlayButton();\r\n        ctx.fillStyle = this.backgroundColor;\r\n        ctx.fillRect(0, 0, canvasWidth, canvasHeight);\r\n        let logoY = canvasHeight / 2;\r\n        const width = Math.min(this.logoWidth, canvasWidth * 0.75);\r\n        let logoX = canvasWidth / 2 - width / 2;\r\n        if (this.logoPosition) {\r\n            logoX = this.logoPosition.x;\r\n            logoY = this.logoPosition.y;\r\n        }\r\n        const imageHeight = Math.floor(width * (this.logoHeight / this.logoWidth)); // OG height/width factor\r\n        const oldAntialias = this._engine.getAntialiasing();\r\n        this._engine.setAntialiasing(true);\r\n        if (!this.logoPosition) {\r\n            ctx.drawImage(this._image, 0, 0, this.logoWidth, this.logoHeight, logoX, logoY - imageHeight - 20, width, imageHeight);\r\n        }\r\n        else {\r\n            ctx.drawImage(this._image, 0, 0, this.logoWidth, this.logoHeight, logoX, logoY, width, imageHeight);\r\n        }\r\n        // loading box\r\n        if (!this.suppressPlayButton && this._playButtonShown) {\r\n            this._engine.setAntialiasing(oldAntialias);\r\n            return;\r\n        }\r\n        let loadingX = logoX;\r\n        let loadingY = logoY;\r\n        if (this.loadingBarPosition) {\r\n            loadingX = this.loadingBarPosition.x;\r\n            loadingY = this.loadingBarPosition.y;\r\n        }\r\n        ctx.lineWidth = 2;\r\n        roundRect(ctx, loadingX, loadingY, width, 20, 10, this.loadingBarColor);\r\n        const progress = width * this.progress;\r\n        const margin = 5;\r\n        const progressWidth = progress - margin * 2;\r\n        const height = 20 - margin * 2;\r\n        roundRect(ctx, loadingX + margin, loadingY + margin, progressWidth > 10 ? progressWidth : 10, height, 5, null, this.loadingBarColor);\r\n        this._engine.setAntialiasing(oldAntialias);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Util/Detector.ts\n\r\n/**\r\n * This is the list of features that will be used to log the supported\r\n * features to the console when Detector.logBrowserFeatures() is called.\r\n */\r\nconst REPORTED_FEATURES = {\r\n    webgl: 'WebGL',\r\n    webaudio: 'WebAudio',\r\n    gamepadapi: 'Gamepad API'\r\n};\r\n/**\r\n * Excalibur internal feature detection helper class\r\n */\r\nclass Detector {\r\n    constructor() {\r\n        this._features = null;\r\n        this.failedTests = [];\r\n        // critical browser features required for ex to run\r\n        this._criticalTests = {\r\n            // Test canvas/2d context support\r\n            canvasSupport: function () {\r\n                const elem = document.createElement('canvas');\r\n                return !!(elem.getContext && elem.getContext('2d'));\r\n            },\r\n            // Test array buffer support ex uses for downloading binary data\r\n            arrayBufferSupport: function () {\r\n                const xhr = new XMLHttpRequest();\r\n                xhr.open('GET', '/');\r\n                try {\r\n                    xhr.responseType = 'arraybuffer';\r\n                }\r\n                catch (e) {\r\n                    return false;\r\n                }\r\n                return xhr.responseType === 'arraybuffer';\r\n            },\r\n            // Test data urls ex uses for sprites\r\n            dataUrlSupport: function () {\r\n                const canvas = document.createElement('canvas');\r\n                return canvas.toDataURL('image/png').indexOf('data:image/png') === 0;\r\n            },\r\n            // Test object url support for loading\r\n            objectUrlSupport: function () {\r\n                return 'URL' in window && 'revokeObjectURL' in URL && 'createObjectURL' in URL;\r\n            },\r\n            // RGBA support for colors\r\n            rgbaSupport: function () {\r\n                const style = document.createElement('a').style;\r\n                style.cssText = 'background-color:rgba(150,255,150,.5)';\r\n                return ('' + style.backgroundColor).indexOf('rgba') > -1;\r\n            }\r\n        };\r\n        // warnings excalibur performance will be degraded\r\n        this._warningTest = {\r\n            webAudioSupport: function () {\r\n                return !!(window.AudioContext ||\r\n                    window.webkitAudioContext ||\r\n                    window.mozAudioContext ||\r\n                    window.msAudioContext ||\r\n                    window.oAudioContext);\r\n            },\r\n            webglSupport: function () {\r\n                const elem = document.createElement('canvas');\r\n                return !!(elem.getContext && elem.getContext('webgl'));\r\n            }\r\n        };\r\n        this._features = this._loadBrowserFeatures();\r\n    }\r\n    /**\r\n     * Returns a map of currently supported browser features. This method\r\n     * treats the features as a singleton and will only calculate feature\r\n     * support if it has not previously been done.\r\n     */\r\n    getBrowserFeatures() {\r\n        if (this._features === null) {\r\n            this._features = this._loadBrowserFeatures();\r\n        }\r\n        return this._features;\r\n    }\r\n    /**\r\n     * Report on non-critical browser support for debugging purposes.\r\n     * Use native browser console colors for visibility.\r\n     */\r\n    logBrowserFeatures() {\r\n        let msg = '%cSUPPORTED BROWSER FEATURES\\n==========================%c\\n';\r\n        const args = ['font-weight: bold; color: navy', 'font-weight: normal; color: inherit'];\r\n        const supported = this.getBrowserFeatures();\r\n        for (const feature of Object.keys(REPORTED_FEATURES)) {\r\n            if (supported[feature]) {\r\n                msg += '(%c\\u2713%c)'; // (✓)\r\n                args.push('font-weight: bold; color: green');\r\n                args.push('font-weight: normal; color: inherit');\r\n            }\r\n            else {\r\n                msg += '(%c\\u2717%c)'; // (✗)\r\n                args.push('font-weight: bold; color: red');\r\n                args.push('font-weight: normal; color: inherit');\r\n            }\r\n            msg += ' ' + REPORTED_FEATURES[feature] + '\\n';\r\n        }\r\n        args.unshift(msg);\r\n        // eslint-disable-next-line no-console\r\n        console.log.apply(console, args);\r\n    }\r\n    /**\r\n     * Executes several IIFE's to get a constant reference to supported\r\n     * features within the current execution context.\r\n     */\r\n    _loadBrowserFeatures() {\r\n        return {\r\n            // IIFE to check canvas support\r\n            canvas: (() => {\r\n                return this._criticalTests.canvasSupport();\r\n            })(),\r\n            // IIFE to check arraybuffer support\r\n            arraybuffer: (() => {\r\n                return this._criticalTests.arrayBufferSupport();\r\n            })(),\r\n            // IIFE to check dataurl support\r\n            dataurl: (() => {\r\n                return this._criticalTests.dataUrlSupport();\r\n            })(),\r\n            // IIFE to check objecturl support\r\n            objecturl: (() => {\r\n                return this._criticalTests.objectUrlSupport();\r\n            })(),\r\n            // IIFE to check rgba support\r\n            rgba: (() => {\r\n                return this._criticalTests.rgbaSupport();\r\n            })(),\r\n            // IIFE to check webaudio support\r\n            webaudio: (() => {\r\n                return this._warningTest.webAudioSupport();\r\n            })(),\r\n            // IIFE to check webgl support\r\n            webgl: (() => {\r\n                return this._warningTest.webglSupport();\r\n            })(),\r\n            // IIFE to check gamepadapi support\r\n            gamepadapi: (() => {\r\n                return !!navigator.getGamepads;\r\n            })()\r\n        };\r\n    }\r\n    test() {\r\n        // Critical test will for ex not to run\r\n        let failedCritical = false;\r\n        for (const test in this._criticalTests) {\r\n            if (!this._criticalTests[test].call(this)) {\r\n                this.failedTests.push(test);\r\n                Logger.getInstance().error('Critical browser feature missing, Excalibur requires:', test);\r\n                failedCritical = true;\r\n            }\r\n        }\r\n        if (failedCritical) {\r\n            return false;\r\n        }\r\n        // Warning tests do not for ex to return false to compatibility\r\n        for (const warning in this._warningTest) {\r\n            if (!this._warningTest[warning]()) {\r\n                Logger.getInstance().warn('Warning browser feature missing, Excalibur will have reduced performance:', warning);\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/CollisionType.ts\n/**\r\n * An enum that describes the types of collisions bodies can participate in\r\n */\r\nvar CollisionType;\r\n(function (CollisionType) {\r\n    /**\r\n     * Bodies with the `PreventCollision` setting do not participate in any\r\n     * collisions and do not raise collision events.\r\n     */\r\n    CollisionType[\"PreventCollision\"] = \"PreventCollision\";\r\n    /**\r\n     * Bodies with the `Passive` setting only raise collision events, but are not\r\n     * influenced or moved by other bodies and do not influence or move other bodies.\r\n     * This is useful for use in trigger type behavior.\r\n     */\r\n    CollisionType[\"Passive\"] = \"Passive\";\r\n    /**\r\n     * Bodies with the `Active` setting raise collision events and participate\r\n     * in collisions with other bodies and will be push or moved by bodies sharing\r\n     * the `Active` or `Fixed` setting.\r\n     */\r\n    CollisionType[\"Active\"] = \"Active\";\r\n    /**\r\n     * Bodies with the `Fixed` setting raise collision events and participate in\r\n     * collisions with other bodies. Actors with the `Fixed` setting will not be\r\n     * pushed or moved by other bodies sharing the `Fixed`. Think of Fixed\r\n     * bodies as \"immovable/unstoppable\" objects. If two `Fixed` bodies meet they will\r\n     * not be pushed or moved by each other, they will not interact except to throw\r\n     * collision events.\r\n     */\r\n    CollisionType[\"Fixed\"] = \"Fixed\";\r\n})(CollisionType || (CollisionType = {}));\r\n\n;// CONCATENATED MODULE: ./Collision/Physics.ts\nvar Physics_decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\n\r\n\r\n/**\r\n * Possible collision resolution strategies\r\n *\r\n * The default is [[CollisionResolutionStrategy.Arcade]] which performs simple axis aligned arcade style physics. This is useful for things\r\n * like platformers or top down games.\r\n *\r\n * More advanced rigid body physics are enabled by setting [[CollisionResolutionStrategy.Realistic]] which allows for complicated\r\n * simulated physical interactions.\r\n */\r\nvar CollisionResolutionStrategy;\r\n(function (CollisionResolutionStrategy) {\r\n    CollisionResolutionStrategy[\"Arcade\"] = \"arcade\";\r\n    CollisionResolutionStrategy[\"Realistic\"] = \"realistic\";\r\n})(CollisionResolutionStrategy || (CollisionResolutionStrategy = {}));\r\n/**\r\n * Possible broadphase collision pair identification strategies\r\n *\r\n * The default strategy is [[BroadphaseStrategy.DynamicAABBTree]] which uses a binary tree of axis-aligned bounding boxes to identify\r\n * potential collision pairs which is O(nlog(n)) faster.\r\n */\r\nvar BroadphaseStrategy;\r\n(function (BroadphaseStrategy) {\r\n    BroadphaseStrategy[BroadphaseStrategy[\"DynamicAABBTree\"] = 0] = \"DynamicAABBTree\";\r\n})(BroadphaseStrategy || (BroadphaseStrategy = {}));\r\n/**\r\n * Possible numerical integrators for position and velocity\r\n */\r\nvar Integrator;\r\n(function (Integrator) {\r\n    Integrator[Integrator[\"Euler\"] = 0] = \"Euler\";\r\n})(Integrator || (Integrator = {}));\r\n/**\r\n * The [[Physics]] object is the global configuration object for all Excalibur physics.\r\n */\r\n/* istanbul ignore next */\r\nclass Physics {\r\n    static get gravity() {\r\n        return Physics.acc;\r\n    }\r\n    static set gravity(v) {\r\n        Physics.acc = v;\r\n    }\r\n    /**\r\n     * Configures Excalibur to use \"arcade\" physics. Arcade physics which performs simple axis aligned arcade style physics.\r\n     */\r\n    static useArcadePhysics() {\r\n        Physics.collisionResolutionStrategy = CollisionResolutionStrategy.Arcade;\r\n    }\r\n    /**\r\n     * Configures Excalibur to use rigid body physics. Rigid body physics allows for complicated\r\n     * simulated physical interactions.\r\n     */\r\n    static useRealisticPhysics() {\r\n        Physics.collisionResolutionStrategy = CollisionResolutionStrategy.Realistic;\r\n    }\r\n    static get dynamicTreeVelocityMultiplyer() {\r\n        return Physics.dynamicTreeVelocityMultiplier;\r\n    }\r\n    static set dynamicTreeVelocityMultiplyer(value) {\r\n        Physics.dynamicTreeVelocityMultiplier = value;\r\n    }\r\n}\r\n/**\r\n * Global acceleration that is applied to all vanilla actors that have a [[CollisionType.Active|active]] collision type.\r\n * Global acceleration won't effect [[Label|labels]], [[ScreenElement|ui actors]], or [[Trigger|triggers]] in Excalibur.\r\n *\r\n * This is a great way to globally simulate effects like gravity.\r\n */\r\nPhysics.acc = new Vector(0, 0);\r\n/**\r\n * Globally switches all Excalibur physics behavior on or off.\r\n */\r\nPhysics.enabled = true;\r\n/**\r\n * Gets or sets the broadphase pair identification strategy.\r\n *\r\n * The default strategy is [[BroadphaseStrategy.DynamicAABBTree]] which uses a binary tree of axis-aligned bounding boxes to identify\r\n * potential collision pairs which is O(nlog(n)) faster.\r\n */\r\nPhysics.broadphaseStrategy = BroadphaseStrategy.DynamicAABBTree;\r\n/**\r\n * Gets or sets the global collision resolution strategy (narrowphase).\r\n *\r\n * The default is [[CollisionResolutionStrategy.Arcade]] which performs simple axis aligned arcade style physics.\r\n *\r\n * More advanced rigid body physics are enabled by setting [[CollisionResolutionStrategy.Realistic]] which allows for complicated\r\n * simulated physical interactions.\r\n */\r\nPhysics.collisionResolutionStrategy = CollisionResolutionStrategy.Arcade;\r\n/**\r\n * The default mass to use if none is specified\r\n */\r\nPhysics.defaultMass = 10;\r\n/**\r\n * Gets or sets the position and velocity positional integrator, currently only Euler is supported.\r\n */\r\nPhysics.integrator = Integrator.Euler;\r\n/**\r\n * Factor to add to the RigidBody BoundingBox, bounding box (dimensions += vel * dynamicTreeVelocityMultiplier);\r\n */\r\nPhysics.dynamicTreeVelocityMultiplier = 2;\r\n/**\r\n * Pad RigidBody BoundingBox by a constant amount\r\n */\r\nPhysics.boundsPadding = 5;\r\n/**\r\n * Number of position iterations (overlap) to run in the solver\r\n */\r\nPhysics.positionIterations = 3;\r\n/**\r\n * Number of velocity iteration (response) to run in the solver\r\n */\r\nPhysics.velocityIterations = 8;\r\n/**\r\n * Amount of overlap to tolerate in pixels\r\n */\r\nPhysics.slop = 1;\r\n/**\r\n * Amount of positional overlap correction to apply each position iteration of the solver\r\n * O - meaning no correction, 1 - meaning correct all overlap\r\n */\r\nPhysics.steeringFactor = 0.2;\r\n/**\r\n * Warm start set to true re-uses impulses from previous frames back in the solver\r\n */\r\nPhysics.warmStart = true;\r\n/**\r\n * By default bodies do not sleep\r\n */\r\nPhysics.bodiesCanSleepByDefault = false;\r\n/**\r\n * Surface epsilon is used to help deal with surface penetration\r\n */\r\nPhysics.surfaceEpsilon = 0.1;\r\nPhysics.sleepEpsilon = 0.07;\r\nPhysics.wakeThreshold = Physics.sleepEpsilon * 3;\r\nPhysics.sleepBias = 0.9;\r\n/**\r\n * Enable fast moving body checking, this enables checking for collision pairs via raycast for fast moving objects to prevent\r\n * bodies from tunneling through one another.\r\n */\r\nPhysics.checkForFastBodies = true;\r\n/**\r\n * Disable minimum fast moving body raycast, by default if ex.Physics.checkForFastBodies = true Excalibur will only check if the\r\n * body is moving at least half of its minimum dimension in an update. If ex.Physics.disableMinimumSpeedForFastBody is set to true,\r\n * Excalibur will always perform the fast body raycast regardless of speed.\r\n */\r\nPhysics.disableMinimumSpeedForFastBody = false;\r\nPhysics_decorate([\r\n    obsolete({\r\n        message: 'Alias for incorrect spelling used in older versions, will be removed in v0.25.0',\r\n        alternateMethod: 'dynamicTreeVelocityMultiplier'\r\n    })\r\n], Physics, \"dynamicTreeVelocityMultiplyer\", null);\r\n\n;// CONCATENATED MODULE: ./Math/vector-view.ts\n\r\nclass VectorView extends Vector {\r\n    constructor(options) {\r\n        super(0, 0);\r\n        this._getX = options.getX;\r\n        this._getY = options.getY;\r\n        this._setX = options.setX;\r\n        this._setY = options.setY;\r\n    }\r\n    get x() {\r\n        return (this._x = this._getX());\r\n    }\r\n    set x(val) {\r\n        this._setX(val);\r\n        this._x = val;\r\n    }\r\n    get y() {\r\n        return (this._y = this._getY());\r\n    }\r\n    set y(val) {\r\n        this._setY(val);\r\n        this._y = val;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./EntityComponentSystem/Component.ts\n/**\r\n * Type guard to check if a component implements clone\r\n * @param x\r\n */\r\nfunction hasClone(x) {\r\n    return !!(x === null || x === void 0 ? void 0 : x.clone);\r\n}\r\n/**\r\n * Components are containers for state in Excalibur, the are meant to convey capabilities that an Entity possesses\r\n *\r\n * Implementations of Component must have a zero-arg constructor to support dependencies\r\n *\r\n * ```typescript\r\n * class MyComponent extends ex.Component<'my'> {\r\n *   public readonly type = 'my';\r\n *   // zero arg support required if you want to use component dependencies\r\n *   constructor(public optionalPos?: ex.Vector) {}\r\n * }\r\n * ```\r\n */\r\nclass Component {\r\n    constructor() {\r\n        /**\r\n         * Current owning [[Entity]], if any, of this component. Null if not added to any [[Entity]]\r\n         */\r\n        this.owner = null;\r\n    }\r\n    /**\r\n     * Clones any properties on this component, if that property value has a `clone()` method it will be called\r\n     */\r\n    clone() {\r\n        const newComponent = new this.constructor();\r\n        for (const prop in this) {\r\n            if (this.hasOwnProperty(prop)) {\r\n                const val = this[prop];\r\n                if (hasClone(val) && prop !== 'owner' && prop !== 'clone') {\r\n                    newComponent[prop] = val.clone();\r\n                }\r\n                else {\r\n                    newComponent[prop] = val;\r\n                }\r\n            }\r\n        }\r\n        return newComponent;\r\n    }\r\n}\r\n/**\r\n * Tag components are a way of tagging a component with label and a simple value\r\n *\r\n * For example:\r\n *\r\n * ```typescript\r\n * const isOffscreen = new TagComponent('offscreen');\r\n * entity.addComponent(isOffscreen);\r\n * entity.tags.includes\r\n * ```\r\n */\r\nclass TagComponent extends Component {\r\n    constructor(type, value) {\r\n        super();\r\n        this.type = type;\r\n        this.value = value;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./EntityComponentSystem/Components/TransformComponent.ts\n\r\n\r\n\r\n\r\nconst createPosView = (matrix) => {\r\n    const source = matrix;\r\n    return new VectorView({\r\n        setX: (x) => {\r\n            source.data[MatrixLocations.X] = x;\r\n        },\r\n        setY: (y) => {\r\n            source.data[MatrixLocations.Y] = y;\r\n        },\r\n        getX: () => {\r\n            return source.data[MatrixLocations.X];\r\n        },\r\n        getY: () => {\r\n            return source.data[MatrixLocations.Y];\r\n        }\r\n    });\r\n};\r\nconst createScaleView = (matrix) => {\r\n    const source = matrix;\r\n    return new VectorView({\r\n        setX: (x) => {\r\n            source.setScaleX(x);\r\n        },\r\n        setY: (y) => {\r\n            source.setScaleY(y);\r\n        },\r\n        getX: () => {\r\n            return source.getScaleX();\r\n        },\r\n        getY: () => {\r\n            return source.getScaleY();\r\n        }\r\n    });\r\n};\r\n/**\r\n * Enum representing the coordinate plane for the position 2D vector in the [[TransformComponent]]\r\n */\r\nvar CoordPlane;\r\n(function (CoordPlane) {\r\n    /**\r\n     * The world coordinate plane (default) represents world space, any entities drawn with world\r\n     * space move when the camera moves.\r\n     */\r\n    CoordPlane[\"World\"] = \"world\";\r\n    /**\r\n     * The screen coordinate plane represents screen space, entities drawn in screen space are pinned\r\n     * to screen coordinates ignoring the camera.\r\n     */\r\n    CoordPlane[\"Screen\"] = \"screen\";\r\n})(CoordPlane || (CoordPlane = {}));\r\nclass TransformComponent extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.type = 'ex.transform';\r\n        this._dirty = false;\r\n        this.matrix = Matrix.identity().translate(0, 0).rotate(0).scale(1, 1);\r\n        this._position = createPosView(this.matrix);\r\n        this._rotation = 0;\r\n        this._scale = createScaleView(this.matrix);\r\n        /**\r\n         * The [[CoordPlane|coordinate plane|]] for this transform for the entity.\r\n         */\r\n        this.coordPlane = CoordPlane.World;\r\n        /**\r\n         * The z-index ordering of the entity, a higher values are drawn on top of lower values.\r\n         * For example z=99 would be drawn on top of z=0.\r\n         */\r\n        this.z = 0;\r\n    }\r\n    _recalculate() {\r\n        this._rotation = this.matrix.getRotation();\r\n        this._dirty = false;\r\n    }\r\n    getGlobalMatrix() {\r\n        if (!this.parent) {\r\n            return this.matrix;\r\n        }\r\n        else {\r\n            return this.parent.getGlobalMatrix().multm(this.matrix);\r\n        }\r\n    }\r\n    getGlobalTransform() {\r\n        return {\r\n            pos: this.globalPos,\r\n            scale: this.globalScale,\r\n            rotation: this.globalRotation,\r\n            z: this.z,\r\n            coordPlane: this.coordPlane\r\n        };\r\n    }\r\n    get parent() {\r\n        var _a, _b;\r\n        return (_b = (_a = this === null || this === void 0 ? void 0 : this.owner) === null || _a === void 0 ? void 0 : _a.parent) === null || _b === void 0 ? void 0 : _b.get(TransformComponent);\r\n    }\r\n    /**\r\n     * The current position of the entity in world space or in screen space depending on the the [[CoordPlane|coordinate plane]].\r\n     *\r\n     * If a parent entity exists coordinates are local to the parent.\r\n     */\r\n    get pos() {\r\n        if (this._dirty) {\r\n            this._recalculate();\r\n        }\r\n        return this._position;\r\n    }\r\n    set pos(val) {\r\n        this.matrix.setPosition(val.x, val.y);\r\n        this._dirty = true;\r\n    }\r\n    // Dirty flag check up the chain\r\n    get dirty() {\r\n        var _a;\r\n        if ((_a = this === null || this === void 0 ? void 0 : this.owner) === null || _a === void 0 ? void 0 : _a.parent) {\r\n            const parent = this.parent;\r\n            return parent.dirty || this._dirty;\r\n        }\r\n        return this._dirty;\r\n    }\r\n    /**\r\n     * The current world position calculated\r\n     */\r\n    get globalPos() {\r\n        const source = this.getGlobalMatrix();\r\n        return new VectorView({\r\n            getX: () => source.data[MatrixLocations.X],\r\n            getY: () => source.data[MatrixLocations.Y],\r\n            setX: (x) => {\r\n                var _a;\r\n                if (this.parent) {\r\n                    const [newX] = (_a = this.parent) === null || _a === void 0 ? void 0 : _a.getGlobalMatrix().getAffineInverse().multv([x, source.data[MatrixLocations.Y]]);\r\n                    this.matrix.data[MatrixLocations.X] = newX;\r\n                }\r\n                else {\r\n                    this.matrix.data[MatrixLocations.X] = x;\r\n                }\r\n            },\r\n            setY: (y) => {\r\n                var _a;\r\n                if (this.parent) {\r\n                    const [, newY] = (_a = this.parent) === null || _a === void 0 ? void 0 : _a.getGlobalMatrix().getAffineInverse().multv([source.data[MatrixLocations.X], y]);\r\n                    this.matrix.data[MatrixLocations.Y] = newY;\r\n                }\r\n                else {\r\n                    this.matrix.data[MatrixLocations.Y] = y;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    set globalPos(val) {\r\n        const parentTransform = this.parent;\r\n        if (!parentTransform) {\r\n            this.pos = val;\r\n        }\r\n        else {\r\n            this.pos = parentTransform.getGlobalMatrix().getAffineInverse().multv(val);\r\n        }\r\n    }\r\n    /**\r\n     * The rotation of the entity in radians. For example `Math.PI` radians is the same as 180 degrees.\r\n     */\r\n    get rotation() {\r\n        if (this._dirty) {\r\n            this._recalculate();\r\n        }\r\n        return this._rotation;\r\n    }\r\n    set rotation(val) {\r\n        this.matrix.setRotation(val);\r\n        this._dirty = true;\r\n    }\r\n    get globalRotation() {\r\n        return this.getGlobalMatrix().getRotation();\r\n    }\r\n    set globalRotation(val) {\r\n        const parentTransform = this.parent;\r\n        if (!parentTransform) {\r\n            this.rotation = val;\r\n        }\r\n        else {\r\n            this.rotation = val - parentTransform.globalRotation;\r\n        }\r\n    }\r\n    /**\r\n     * The scale of the entity.\r\n     */\r\n    get scale() {\r\n        if (this._dirty) {\r\n            this._recalculate();\r\n        }\r\n        return this._scale;\r\n    }\r\n    set scale(val) {\r\n        this.matrix.setScale(val);\r\n        this._dirty = true;\r\n    }\r\n    get globalScale() {\r\n        const source = this.getGlobalMatrix();\r\n        return new VectorView({\r\n            getX: () => source.getScaleX(),\r\n            getY: () => source.getScaleY(),\r\n            setX: (x) => {\r\n                if (this.parent) {\r\n                    const globalScaleX = this.parent.globalScale.x;\r\n                    this.matrix.setScaleX(x / globalScaleX);\r\n                }\r\n                else {\r\n                    this.matrix.setScaleX(x);\r\n                }\r\n            },\r\n            setY: (y) => {\r\n                if (this.parent) {\r\n                    const globalScaleY = this.parent.globalScale.y;\r\n                    this.matrix.setScaleY(y / globalScaleY);\r\n                }\r\n                else {\r\n                    this.matrix.setScaleY(y);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    set globalScale(val) {\r\n        const parentTransform = this.parent;\r\n        if (!parentTransform) {\r\n            this.scale = val;\r\n        }\r\n        else {\r\n            this.scale = vec(val.x / parentTransform.globalScale.x, val.y / parentTransform.globalScale.y);\r\n        }\r\n    }\r\n    /**\r\n     * Apply the transform to a point\r\n     * @param point\r\n     */\r\n    apply(point) {\r\n        return this.matrix.multv(point);\r\n    }\r\n    /**\r\n     * Apply the inverse transform to a point\r\n     * @param point\r\n     */\r\n    applyInverse(point) {\r\n        return this.matrix.getAffineInverse().multv(point);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./EntityComponentSystem/Components/MotionComponent.ts\n\r\n\r\nclass MotionComponent extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.type = 'ex.motion';\r\n        /**\r\n         * The velocity of an entity in pixels per second\r\n         */\r\n        this.vel = Vector.Zero;\r\n        /**\r\n         * The acceleration of entity in pixels per second^2\r\n         */\r\n        this.acc = Vector.Zero;\r\n        /**\r\n         * The scale rate of change in scale units per second\r\n         */\r\n        this.scaleFactor = Vector.Zero;\r\n        /**\r\n         * The angular velocity which is how quickly the entity is rotating in radians per second\r\n         */\r\n        this.angularVelocity = 0;\r\n        /**\r\n         * The amount of torque applied to the entity, angular acceleration is torque * inertia\r\n         */\r\n        this.torque = 0;\r\n        /**\r\n         * Inertia can be thought of as the resistance to motion\r\n         */\r\n        this.inertia = 1;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Group/CollisionGroup.ts\n/**\r\n * CollisionGroups indicate like members that do not collide with each other. Use [[CollisionGroupManager]] to create [[CollisionGroup]]s\r\n *\r\n * For example:\r\n *\r\n * Players have collision group \"player\"\r\n *\r\n * ![Player Collision Group](/assets/images/docs/CollisionGroupsPlayer.png)\r\n *\r\n * Enemies have collision group \"enemy\"\r\n *\r\n * ![Enemy Collision Group](/assets/images/docs/CollisionGroupsEnemy.png)\r\n *\r\n * Blocks have collision group \"ground\"\r\n *\r\n * ![Ground collision group](/assets/images/docs/CollisionGroupsGround.png)\r\n *\r\n * Players don't collide with each other, but enemies and blocks. Likewise, enemies don't collide with each other but collide\r\n * with players and blocks.\r\n *\r\n * This is done with bitmasking, see the following pseudo-code\r\n *\r\n * PlayerGroup = `0b001`\r\n * PlayerGroupMask = `0b110`\r\n *\r\n * EnemyGroup = `0b010`\r\n * EnemyGroupMask = `0b101`\r\n *\r\n * BlockGroup = `0b100`\r\n * BlockGroupMask = `0b011`\r\n *\r\n * Should Players collide? No because the bitwise mask evaluates to 0\r\n * `(player1.group & player2.mask) === 0`\r\n * `(0b001 & 0b110) === 0`\r\n *\r\n * Should Players and Enemies collide? Yes because the bitwise mask is non-zero\r\n * `(player1.group & enemy1.mask) === 1`\r\n * `(0b001 & 0b101) === 1`\r\n *\r\n * Should Players and Blocks collide? Yes because the bitwise mask is non-zero\r\n * `(player1.group & blocks1.mask) === 1`\r\n * `(0b001 & 0b011) === 1`\r\n */\r\nclass CollisionGroup {\r\n    /**\r\n     * STOP!!** It is preferred that [[CollisionGroupManager.create]] is used to create collision groups\r\n     *  unless you know how to construct the proper bitmasks. See https://github.com/excaliburjs/Excalibur/issues/1091 for more info.\r\n     * @param name Name of the collision group\r\n     * @param category 32 bit category for the group, should be a unique power of 2. For example `0b001` or `0b010`\r\n     * @param mask 32 bit mask of category, or `~category` generally. For a category of `0b001`, the mask would be `0b110`\r\n     */\r\n    constructor(name, category, mask) {\r\n        this._name = name;\r\n        this._category = category;\r\n        this._mask = mask;\r\n    }\r\n    /**\r\n     * Get the name of the collision group\r\n     */\r\n    get name() {\r\n        return this._name;\r\n    }\r\n    /**\r\n     * Get the category of the collision group, a 32 bit number which should be a unique power of 2\r\n     */\r\n    get category() {\r\n        return this._category;\r\n    }\r\n    /**\r\n     * Get the mask for this collision group\r\n     */\r\n    get mask() {\r\n        return this._mask;\r\n    }\r\n    /**\r\n     * Evaluates whether 2 collision groups can collide\r\n     * @param other  CollisionGroup\r\n     */\r\n    canCollide(other) {\r\n        return (this.category & other.mask) !== 0 && (other.category & this.mask) !== 0;\r\n    }\r\n    /**\r\n     * Inverts the collision group. For example, if before the group specified \"players\",\r\n     * inverting would specify all groups except players\r\n     * @returns CollisionGroup\r\n     */\r\n    invert() {\r\n        return new CollisionGroup('~(' + this.name + ')', ~this.category, ~this.mask);\r\n    }\r\n    /**\r\n     * Combine collision groups with each other. The new group includes all of the previous groups.\r\n     *\r\n     * @param collisionGroups\r\n     */\r\n    static combine(collisionGroups) {\r\n        const combinedName = collisionGroups.map((c) => c.name).join('+');\r\n        const combinedCategory = collisionGroups.reduce((current, g) => g.category | current, 0b0);\r\n        const combinedMask = ~combinedCategory;\r\n        return new CollisionGroup(combinedName, combinedCategory, combinedMask);\r\n    }\r\n    /**\r\n     * Creates a collision group that collides with the listed groups\r\n     * @param collisionGroups\r\n     */\r\n    static collidesWith(collisionGroups) {\r\n        return CollisionGroup.combine(collisionGroups).invert();\r\n    }\r\n}\r\n/**\r\n * The `All` [[CollisionGroup]] is a special group that collides with all other groups including itself,\r\n * it is the default collision group on colliders.\r\n */\r\nCollisionGroup.All = new CollisionGroup('Collide with all groups', -1, -1);\r\n\n;// CONCATENATED MODULE: ./Util/Observable.ts\n/**\r\n * Simple Observable implementation\r\n * @template T is the typescript Type that defines the data being observed\r\n */\r\nclass Observable {\r\n    constructor() {\r\n        this.observers = [];\r\n        this.subscriptions = [];\r\n    }\r\n    /**\r\n     * Register an observer to listen to this observable\r\n     * @param observer\r\n     */\r\n    register(observer) {\r\n        this.observers.push(observer);\r\n    }\r\n    /**\r\n     * Register a callback to listen to this observable\r\n     * @param func\r\n     */\r\n    subscribe(func) {\r\n        this.subscriptions.push(func);\r\n    }\r\n    /**\r\n     * Remove an observer from the observable\r\n     * @param observer\r\n     */\r\n    unregister(observer) {\r\n        const i = this.observers.indexOf(observer);\r\n        if (i !== -1) {\r\n            this.observers.splice(i, 1);\r\n        }\r\n    }\r\n    /**\r\n     * Remove a callback that is listening to this observable\r\n     * @param func\r\n     */\r\n    unsubscribe(func) {\r\n        const i = this.subscriptions.indexOf(func);\r\n        if (i !== -1) {\r\n            this.subscriptions.splice(i, 1);\r\n        }\r\n    }\r\n    /**\r\n     * Broadcasts a message to all observers and callbacks\r\n     * @param message\r\n     */\r\n    notifyAll(message) {\r\n        this.observers.forEach((o) => o.notify(message));\r\n        this.subscriptions.forEach(cb => cb(message));\r\n    }\r\n    /**\r\n     * Removes all observers and callbacks\r\n     */\r\n    clear() {\r\n        this.observers.length = 0;\r\n        this.subscriptions.length = 0;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Detection/Pair.ts\n\r\n\r\n/**\r\n * Models a potential collision between 2 colliders\r\n */\r\nclass Pair {\r\n    constructor(colliderA, colliderB) {\r\n        this.colliderA = colliderA;\r\n        this.colliderB = colliderB;\r\n        this.id = null;\r\n        this.id = Pair.calculatePairHash(colliderA.id, colliderB.id);\r\n    }\r\n    /**\r\n     * Returns whether a it is allowed for 2 colliders in a Pair to collide\r\n     * @param colliderA\r\n     * @param colliderB\r\n     */\r\n    static canCollide(colliderA, colliderB) {\r\n        var _a, _b;\r\n        const bodyA = (_a = colliderA === null || colliderA === void 0 ? void 0 : colliderA.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\r\n        const bodyB = (_b = colliderB === null || colliderB === void 0 ? void 0 : colliderB.owner) === null || _b === void 0 ? void 0 : _b.get(BodyComponent);\r\n        // Prevent self collision\r\n        if (colliderA.id === colliderB.id) {\r\n            return false;\r\n        }\r\n        // Colliders with the same owner do not collide (composite colliders)\r\n        if (colliderA.owner &&\r\n            colliderB.owner &&\r\n            colliderA.owner.id === colliderB.owner.id) {\r\n            return false;\r\n        }\r\n        // if the pair has a member with zero dimension don't collide\r\n        if (colliderA.localBounds.hasZeroDimensions() || colliderB.localBounds.hasZeroDimensions()) {\r\n            return false;\r\n        }\r\n        // Body's needed for collision in the current state\r\n        // TODO can we collide without a body?\r\n        if (!bodyA || !bodyB) {\r\n            return false;\r\n        }\r\n        // If both are in the same collision group short circuit\r\n        if (!bodyA.group.canCollide(bodyB.group)) {\r\n            return false;\r\n        }\r\n        // if both are fixed short circuit\r\n        if (bodyA.collisionType === CollisionType.Fixed && bodyB.collisionType === CollisionType.Fixed) {\r\n            return false;\r\n        }\r\n        // if the either is prevent collision short circuit\r\n        if (bodyB.collisionType === CollisionType.PreventCollision || bodyA.collisionType === CollisionType.PreventCollision) {\r\n            return false;\r\n        }\r\n        // if either is dead short circuit\r\n        if (!bodyA.active || !bodyB.active) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * Returns whether or not it is possible for the pairs to collide\r\n     */\r\n    get canCollide() {\r\n        const colliderA = this.colliderA;\r\n        const colliderB = this.colliderB;\r\n        return Pair.canCollide(colliderA, colliderB);\r\n    }\r\n    /**\r\n     * Runs the collision intersection logic on the members of this pair\r\n     */\r\n    collide() {\r\n        return this.colliderA.collide(this.colliderB);\r\n    }\r\n    /**\r\n     * Check if the collider is part of the pair\r\n     * @param collider\r\n     */\r\n    hasCollider(collider) {\r\n        return collider === this.colliderA || collider === this.colliderB;\r\n    }\r\n    /**\r\n     * Calculates the unique pair hash id for this collision pair (owning id)\r\n     */\r\n    static calculatePairHash(idA, idB) {\r\n        if (idA.value < idB.value) {\r\n            return `#${idA.value}+${idB.value}`;\r\n        }\r\n        else {\r\n            return `#${idB.value}+${idA.value}`;\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Math/projection.ts\n/**\r\n * A 1 dimensional projection on an axis, used to test overlaps\r\n */\r\nclass Projection {\r\n    constructor(min, max) {\r\n        this.min = min;\r\n        this.max = max;\r\n    }\r\n    overlaps(projection) {\r\n        return this.max > projection.min && projection.max > this.min;\r\n    }\r\n    getOverlap(projection) {\r\n        if (this.overlaps(projection)) {\r\n            if (this.max > projection.max) {\r\n                return projection.max - this.min;\r\n            }\r\n            else {\r\n                return this.max - projection.min;\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Detection/DynamicTree.ts\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Dynamic Tree Node used for tracking bounds within the tree\r\n */\r\nclass TreeNode {\r\n    constructor(parent) {\r\n        this.parent = parent;\r\n        this.parent = parent || null;\r\n        this.data = null;\r\n        this.bounds = new BoundingBox();\r\n        this.left = null;\r\n        this.right = null;\r\n        this.height = 0;\r\n    }\r\n    isLeaf() {\r\n        return !this.left && !this.right;\r\n    }\r\n}\r\n/**\r\n * The DynamicTrees provides a spatial partitioning data structure for quickly querying for overlapping bounding boxes for\r\n * all tracked bodies. The worst case performance of this is O(n*log(n)) where n is the number of bodies in the tree.\r\n *\r\n * Internally the bounding boxes are organized as a balanced binary tree of bounding boxes, where the leaf nodes are tracked bodies.\r\n * Every non-leaf node is a bounding box that contains child bounding boxes.\r\n */\r\nclass DynamicTree {\r\n    constructor(worldBounds = new BoundingBox(-Number.MAX_VALUE, -Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE)) {\r\n        this.worldBounds = worldBounds;\r\n        this.root = null;\r\n        this.nodes = {};\r\n    }\r\n    /**\r\n     * Inserts a node into the dynamic tree\r\n     */\r\n    _insert(leaf) {\r\n        // If there are no nodes in the tree, make this the root leaf\r\n        if (this.root === null) {\r\n            this.root = leaf;\r\n            this.root.parent = null;\r\n            return;\r\n        }\r\n        // Search the tree for a node that is not a leaf and find the best place to insert\r\n        const leafAABB = leaf.bounds;\r\n        let currentRoot = this.root;\r\n        while (!currentRoot.isLeaf()) {\r\n            const left = currentRoot.left;\r\n            const right = currentRoot.right;\r\n            const area = currentRoot.bounds.getPerimeter();\r\n            const combinedAABB = currentRoot.bounds.combine(leafAABB);\r\n            const combinedArea = combinedAABB.getPerimeter();\r\n            // Calculate cost heuristic for creating a new parent and leaf\r\n            const cost = 2 * combinedArea;\r\n            // Minimum cost of pushing the leaf down the tree\r\n            const inheritanceCost = 2 * (combinedArea - area);\r\n            // Cost of descending\r\n            let leftCost = 0;\r\n            const leftCombined = leafAABB.combine(left.bounds);\r\n            let newArea;\r\n            let oldArea;\r\n            if (left.isLeaf()) {\r\n                leftCost = leftCombined.getPerimeter() + inheritanceCost;\r\n            }\r\n            else {\r\n                oldArea = left.bounds.getPerimeter();\r\n                newArea = leftCombined.getPerimeter();\r\n                leftCost = newArea - oldArea + inheritanceCost;\r\n            }\r\n            let rightCost = 0;\r\n            const rightCombined = leafAABB.combine(right.bounds);\r\n            if (right.isLeaf()) {\r\n                rightCost = rightCombined.getPerimeter() + inheritanceCost;\r\n            }\r\n            else {\r\n                oldArea = right.bounds.getPerimeter();\r\n                newArea = rightCombined.getPerimeter();\r\n                rightCost = newArea - oldArea + inheritanceCost;\r\n            }\r\n            // cost is acceptable\r\n            if (cost < leftCost && cost < rightCost) {\r\n                break;\r\n            }\r\n            // Descend to the depths\r\n            if (leftCost < rightCost) {\r\n                currentRoot = left;\r\n            }\r\n            else {\r\n                currentRoot = right;\r\n            }\r\n        }\r\n        // Create the new parent node and insert into the tree\r\n        const oldParent = currentRoot.parent;\r\n        const newParent = new TreeNode(oldParent);\r\n        newParent.bounds = leafAABB.combine(currentRoot.bounds);\r\n        newParent.height = currentRoot.height + 1;\r\n        if (oldParent !== null) {\r\n            // The sibling node was not the root\r\n            if (oldParent.left === currentRoot) {\r\n                oldParent.left = newParent;\r\n            }\r\n            else {\r\n                oldParent.right = newParent;\r\n            }\r\n            newParent.left = currentRoot;\r\n            newParent.right = leaf;\r\n            currentRoot.parent = newParent;\r\n            leaf.parent = newParent;\r\n        }\r\n        else {\r\n            // The sibling node was the root\r\n            newParent.left = currentRoot;\r\n            newParent.right = leaf;\r\n            currentRoot.parent = newParent;\r\n            leaf.parent = newParent;\r\n            this.root = newParent;\r\n        }\r\n        // Walk up the tree fixing heights and AABBs\r\n        let currentNode = leaf.parent;\r\n        while (currentNode) {\r\n            currentNode = this._balance(currentNode);\r\n            if (!currentNode.left) {\r\n                throw new Error('Parent of current leaf cannot have a null left child' + currentNode);\r\n            }\r\n            if (!currentNode.right) {\r\n                throw new Error('Parent of current leaf cannot have a null right child' + currentNode);\r\n            }\r\n            currentNode.height = 1 + Math.max(currentNode.left.height, currentNode.right.height);\r\n            currentNode.bounds = currentNode.left.bounds.combine(currentNode.right.bounds);\r\n            currentNode = currentNode.parent;\r\n        }\r\n    }\r\n    /**\r\n     * Removes a node from the dynamic tree\r\n     */\r\n    _remove(leaf) {\r\n        if (leaf === this.root) {\r\n            this.root = null;\r\n            return;\r\n        }\r\n        const parent = leaf.parent;\r\n        const grandParent = parent.parent;\r\n        let sibling;\r\n        if (parent.left === leaf) {\r\n            sibling = parent.right;\r\n        }\r\n        else {\r\n            sibling = parent.left;\r\n        }\r\n        if (grandParent) {\r\n            if (grandParent.left === parent) {\r\n                grandParent.left = sibling;\r\n            }\r\n            else {\r\n                grandParent.right = sibling;\r\n            }\r\n            sibling.parent = grandParent;\r\n            let currentNode = grandParent;\r\n            while (currentNode) {\r\n                currentNode = this._balance(currentNode);\r\n                currentNode.bounds = currentNode.left.bounds.combine(currentNode.right.bounds);\r\n                currentNode.height = 1 + Math.max(currentNode.left.height, currentNode.right.height);\r\n                currentNode = currentNode.parent;\r\n            }\r\n        }\r\n        else {\r\n            this.root = sibling;\r\n            sibling.parent = null;\r\n        }\r\n    }\r\n    /**\r\n     * Tracks a body in the dynamic tree\r\n     */\r\n    trackCollider(collider) {\r\n        const node = new TreeNode();\r\n        node.data = collider;\r\n        node.bounds = collider.bounds;\r\n        node.bounds.left -= 2;\r\n        node.bounds.top -= 2;\r\n        node.bounds.right += 2;\r\n        node.bounds.bottom += 2;\r\n        this.nodes[collider.id.value] = node;\r\n        this._insert(node);\r\n    }\r\n    /**\r\n     * Updates the dynamic tree given the current bounds of each body being tracked\r\n     */\r\n    updateCollider(collider) {\r\n        var _a;\r\n        const node = this.nodes[collider.id.value];\r\n        if (!node) {\r\n            return false;\r\n        }\r\n        const b = collider.bounds;\r\n        // if the body is outside the world no longer update it\r\n        if (!this.worldBounds.contains(b)) {\r\n            Logger.getInstance().warn('Collider with id ' + collider.id.value + ' is outside the world bounds and will no longer be tracked for physics');\r\n            this.untrackCollider(collider);\r\n            return false;\r\n        }\r\n        if (node.bounds.contains(b)) {\r\n            return false;\r\n        }\r\n        this._remove(node);\r\n        b.left -= Physics.boundsPadding;\r\n        b.top -= Physics.boundsPadding;\r\n        b.right += Physics.boundsPadding;\r\n        b.bottom += Physics.boundsPadding;\r\n        // THIS IS CAUSING UNECESSARY CHECKS\r\n        if (collider.owner) {\r\n            const body = (_a = collider.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\r\n            if (body) {\r\n                const multdx = ((body.vel.x * 32) / 1000) * Physics.dynamicTreeVelocityMultiplier;\r\n                const multdy = ((body.vel.y * 32) / 1000) * Physics.dynamicTreeVelocityMultiplier;\r\n                if (multdx < 0) {\r\n                    b.left += multdx;\r\n                }\r\n                else {\r\n                    b.right += multdx;\r\n                }\r\n                if (multdy < 0) {\r\n                    b.top += multdy;\r\n                }\r\n                else {\r\n                    b.bottom += multdy;\r\n                }\r\n            }\r\n        }\r\n        node.bounds = b;\r\n        this._insert(node);\r\n        return true;\r\n    }\r\n    /**\r\n     * Untracks a body from the dynamic tree\r\n     */\r\n    untrackCollider(collider) {\r\n        const node = this.nodes[collider.id.value];\r\n        if (!node) {\r\n            return;\r\n        }\r\n        this._remove(node);\r\n        this.nodes[collider.id.value] = null;\r\n        delete this.nodes[collider.id.value];\r\n    }\r\n    /**\r\n     * Balances the tree about a node\r\n     */\r\n    _balance(node) {\r\n        if (node === null) {\r\n            throw new Error('Cannot balance at null node');\r\n        }\r\n        if (node.isLeaf() || node.height < 2) {\r\n            return node;\r\n        }\r\n        const left = node.left;\r\n        const right = node.right;\r\n        const a = node;\r\n        const b = left;\r\n        const c = right;\r\n        const d = left.left;\r\n        const e = left.right;\r\n        const f = right.left;\r\n        const g = right.right;\r\n        const balance = c.height - b.height;\r\n        // Rotate c node up\r\n        if (balance > 1) {\r\n            // Swap the right node with it's parent\r\n            c.left = a;\r\n            c.parent = a.parent;\r\n            a.parent = c;\r\n            // The original node's old parent should point to the right node\r\n            // this is mega confusing\r\n            if (c.parent) {\r\n                if (c.parent.left === a) {\r\n                    c.parent.left = c;\r\n                }\r\n                else {\r\n                    c.parent.right = c;\r\n                }\r\n            }\r\n            else {\r\n                this.root = c;\r\n            }\r\n            // Rotate\r\n            if (f.height > g.height) {\r\n                c.right = f;\r\n                a.right = g;\r\n                g.parent = a;\r\n                a.bounds = b.bounds.combine(g.bounds);\r\n                c.bounds = a.bounds.combine(f.bounds);\r\n                a.height = 1 + Math.max(b.height, g.height);\r\n                c.height = 1 + Math.max(a.height, f.height);\r\n            }\r\n            else {\r\n                c.right = g;\r\n                a.right = f;\r\n                f.parent = a;\r\n                a.bounds = b.bounds.combine(f.bounds);\r\n                c.bounds = a.bounds.combine(g.bounds);\r\n                a.height = 1 + Math.max(b.height, f.height);\r\n                c.height = 1 + Math.max(a.height, g.height);\r\n            }\r\n            return c;\r\n        }\r\n        // Rotate left node up\r\n        if (balance < -1) {\r\n            // swap\r\n            b.left = a;\r\n            b.parent = a.parent;\r\n            a.parent = b;\r\n            // node's old parent should point to b\r\n            if (b.parent) {\r\n                if (b.parent.left === a) {\r\n                    b.parent.left = b;\r\n                }\r\n                else {\r\n                    if (b.parent.right !== a) {\r\n                        throw 'Error rotating Dynamic Tree';\r\n                    }\r\n                    b.parent.right = b;\r\n                }\r\n            }\r\n            else {\r\n                this.root = b;\r\n            }\r\n            // rotate\r\n            if (d.height > e.height) {\r\n                b.right = d;\r\n                a.left = e;\r\n                e.parent = a;\r\n                a.bounds = c.bounds.combine(e.bounds);\r\n                b.bounds = a.bounds.combine(d.bounds);\r\n                a.height = 1 + Math.max(c.height, e.height);\r\n                b.height = 1 + Math.max(a.height, d.height);\r\n            }\r\n            else {\r\n                b.right = e;\r\n                a.left = d;\r\n                d.parent = a;\r\n                a.bounds = c.bounds.combine(d.bounds);\r\n                b.bounds = a.bounds.combine(e.bounds);\r\n                a.height = 1 + Math.max(c.height, d.height);\r\n                b.height = 1 + Math.max(a.height, e.height);\r\n            }\r\n            return b;\r\n        }\r\n        return node;\r\n    }\r\n    /**\r\n     * Returns the internal height of the tree, shorter trees are better. Performance drops as the tree grows\r\n     */\r\n    getHeight() {\r\n        if (this.root === null) {\r\n            return 0;\r\n        }\r\n        return this.root.height;\r\n    }\r\n    /**\r\n     * Queries the Dynamic Axis Aligned Tree for bodies that could be colliding with the provided body.\r\n     *\r\n     * In the query callback, it will be passed a potential collider. Returning true from this callback indicates\r\n     * that you are complete with your query and you do not want to continue. Returning false will continue searching\r\n     * the tree until all possible colliders have been returned.\r\n     */\r\n    query(collider, callback) {\r\n        const bounds = collider.bounds;\r\n        const helper = (currentNode) => {\r\n            if (currentNode && currentNode.bounds.intersect(bounds)) {\r\n                if (currentNode.isLeaf() && currentNode.data !== collider) {\r\n                    if (callback.call(collider, currentNode.data)) {\r\n                        return true;\r\n                    }\r\n                }\r\n                else {\r\n                    return helper(currentNode.left) || helper(currentNode.right);\r\n                }\r\n            }\r\n            return false;\r\n        };\r\n        helper(this.root);\r\n    }\r\n    /**\r\n     * Queries the Dynamic Axis Aligned Tree for bodies that could be intersecting. By default the raycast query uses an infinitely\r\n     * long ray to test the tree specified by `max`.\r\n     *\r\n     * In the query callback, it will be passed a potential body that intersects with the raycast. Returning true from this\r\n     * callback indicates that your are complete with your query and do not want to continue. Return false will continue searching\r\n     * the tree until all possible bodies that would intersect with the ray have been returned.\r\n     */\r\n    rayCastQuery(ray, max = Infinity, callback) {\r\n        const helper = (currentNode) => {\r\n            if (currentNode && currentNode.bounds.rayCast(ray, max)) {\r\n                if (currentNode.isLeaf()) {\r\n                    if (callback.call(ray, currentNode.data)) {\r\n                        // ray hit a leaf! return the body\r\n                        return true;\r\n                    }\r\n                }\r\n                else {\r\n                    // ray hit but not at a leaf, recurse deeper\r\n                    return helper(currentNode.left) || helper(currentNode.right);\r\n                }\r\n            }\r\n            return false; // ray missed\r\n        };\r\n        helper(this.root);\r\n    }\r\n    getNodes() {\r\n        const helper = (currentNode) => {\r\n            if (currentNode) {\r\n                return [currentNode].concat(helper(currentNode.left), helper(currentNode.right));\r\n            }\r\n            else {\r\n                return [];\r\n            }\r\n        };\r\n        return helper(this.root);\r\n    }\r\n    debug(ex) {\r\n        // draw all the nodes in the Dynamic Tree\r\n        const helper = (currentNode) => {\r\n            if (currentNode) {\r\n                if (currentNode.isLeaf()) {\r\n                    currentNode.bounds.draw(ex, Color.Green);\r\n                }\r\n                else {\r\n                    currentNode.bounds.draw(ex, Color.White);\r\n                }\r\n                if (currentNode.left) {\r\n                    helper(currentNode.left);\r\n                }\r\n                if (currentNode.right) {\r\n                    helper(currentNode.right);\r\n                }\r\n            }\r\n        };\r\n        helper(this.root);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Math/ray.ts\n/**\r\n * A 2D ray that can be cast into the scene to do collision detection\r\n */\r\nclass Ray {\r\n    /**\r\n     * @param pos The starting position for the ray\r\n     * @param dir The vector indicating the direction of the ray\r\n     */\r\n    constructor(pos, dir) {\r\n        this.pos = pos;\r\n        this.dir = dir.normalize();\r\n    }\r\n    /**\r\n     * Tests a whether this ray intersects with a line segment. Returns a number greater than or equal to 0 on success.\r\n     * This number indicates the mathematical intersection time.\r\n     * @param line  The line to test\r\n     */\r\n    intersect(line) {\r\n        const numerator = line.begin.sub(this.pos);\r\n        // Test is line and ray are parallel and non intersecting\r\n        if (this.dir.cross(line.getSlope()) === 0 && numerator.cross(this.dir) !== 0) {\r\n            return -1;\r\n        }\r\n        // Lines are parallel\r\n        const divisor = this.dir.cross(line.getSlope());\r\n        if (divisor === 0) {\r\n            return -1;\r\n        }\r\n        const t = numerator.cross(line.getSlope()) / divisor;\r\n        if (t >= 0) {\r\n            const u = numerator.cross(this.dir) / divisor / line.getLength();\r\n            if (u >= 0 && u <= 1) {\r\n                return t;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n    intersectPoint(line) {\r\n        const time = this.intersect(line);\r\n        if (time < 0) {\r\n            return null;\r\n        }\r\n        return this.getPoint(time);\r\n    }\r\n    /**\r\n     * Returns the point of intersection given the intersection time\r\n     */\r\n    getPoint(time) {\r\n        return this.pos.add(this.dir.scale(time));\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Detection/DynamicTreeCollisionProcessor.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Responsible for performing the collision broadphase (locating potential collisions) and\r\n * the narrowphase (actual collision contacts)\r\n */\r\nclass DynamicTreeCollisionProcessor {\r\n    constructor() {\r\n        this._dynamicCollisionTree = new DynamicTree();\r\n        this._pairs = new Set();\r\n        this._collisionPairCache = [];\r\n        this._colliders = [];\r\n    }\r\n    getColliders() {\r\n        return this._colliders;\r\n    }\r\n    /**\r\n     * Tracks a physics body for collisions\r\n     */\r\n    track(target) {\r\n        if (!target) {\r\n            Logger.getInstance().warn('Cannot track null collider');\r\n            return;\r\n        }\r\n        if (target instanceof CompositeCollider) {\r\n            const colliders = target.getColliders();\r\n            for (const c of colliders) {\r\n                c.owner = target.owner;\r\n                this._colliders.push(c);\r\n                this._dynamicCollisionTree.trackCollider(c);\r\n            }\r\n        }\r\n        else {\r\n            this._colliders.push(target);\r\n            this._dynamicCollisionTree.trackCollider(target);\r\n        }\r\n    }\r\n    /**\r\n     * Untracks a physics body\r\n     */\r\n    untrack(target) {\r\n        if (!target) {\r\n            Logger.getInstance().warn('Cannot untrack a null collider');\r\n            return;\r\n        }\r\n        if (target instanceof CompositeCollider) {\r\n            const colliders = target.getColliders();\r\n            for (const c of colliders) {\r\n                const index = this._colliders.indexOf(c);\r\n                if (index !== -1) {\r\n                    this._colliders.splice(index, 1);\r\n                }\r\n                this._dynamicCollisionTree.untrackCollider(c);\r\n            }\r\n        }\r\n        else {\r\n            const index = this._colliders.indexOf(target);\r\n            if (index !== -1) {\r\n                this._colliders.splice(index, 1);\r\n            }\r\n            this._dynamicCollisionTree.untrackCollider(target);\r\n        }\r\n    }\r\n    _pairExists(colliderA, colliderB) {\r\n        // if the collision pair has been calculated already short circuit\r\n        const hash = Pair.calculatePairHash(colliderA.id, colliderB.id);\r\n        return this._pairs.has(hash);\r\n    }\r\n    /**\r\n     * Detects potential collision pairs in a broadphase approach with the dynamic AABB tree strategy\r\n     */\r\n    broadphase(targets, delta, stats) {\r\n        const seconds = delta / 1000;\r\n        // Retrieve the list of potential colliders, exclude killed, prevented, and self\r\n        const potentialColliders = targets.filter((other) => {\r\n            var _a, _b;\r\n            const body = (_a = other.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\r\n            return ((_b = other.owner) === null || _b === void 0 ? void 0 : _b.active) && body.collisionType !== CollisionType.PreventCollision;\r\n        });\r\n        // clear old list of collision pairs\r\n        this._collisionPairCache = [];\r\n        this._pairs.clear();\r\n        // check for normal collision pairs\r\n        let collider;\r\n        for (let j = 0, l = potentialColliders.length; j < l; j++) {\r\n            collider = potentialColliders[j];\r\n            // Query the collision tree for potential colliders\r\n            this._dynamicCollisionTree.query(collider, (other) => {\r\n                if (!this._pairExists(collider, other) && Pair.canCollide(collider, other)) {\r\n                    const pair = new Pair(collider, other);\r\n                    this._pairs.add(pair.id);\r\n                    this._collisionPairCache.push(pair);\r\n                }\r\n                // Always return false, to query whole tree. Returning true in the query method stops searching\r\n                return false;\r\n            });\r\n        }\r\n        if (stats) {\r\n            stats.physics.pairs = this._collisionPairCache.length;\r\n        }\r\n        // Check dynamic tree for fast moving objects\r\n        // Fast moving objects are those moving at least there smallest bound per frame\r\n        if (Physics.checkForFastBodies) {\r\n            for (const collider of potentialColliders) {\r\n                const body = collider.owner.get(BodyComponent);\r\n                // Skip non-active objects. Does not make sense on other collision types\r\n                if (body.collisionType !== CollisionType.Active) {\r\n                    continue;\r\n                }\r\n                // Maximum travel distance next frame\r\n                const updateDistance = body.vel.size * seconds + // velocity term\r\n                    body.acc.size * 0.5 * seconds * seconds; // acc term\r\n                // Find the minimum dimension\r\n                const minDimension = Math.min(collider.bounds.height, collider.bounds.width);\r\n                if (Physics.disableMinimumSpeedForFastBody || updateDistance > minDimension / 2) {\r\n                    if (stats) {\r\n                        stats.physics.fastBodies++;\r\n                    }\r\n                    // start with the oldPos because the integration for actors has already happened\r\n                    // objects resting on a surface may be slightly penetrating in the current position\r\n                    const updateVec = body.pos.sub(body.oldPos);\r\n                    const centerPoint = collider.center;\r\n                    const furthestPoint = collider.getFurthestPoint(body.vel);\r\n                    const origin = furthestPoint.sub(updateVec);\r\n                    const ray = new Ray(origin, body.vel);\r\n                    // back the ray up by -2x surfaceEpsilon to account for fast moving objects starting on the surface\r\n                    ray.pos = ray.pos.add(ray.dir.scale(-2 * Physics.surfaceEpsilon));\r\n                    let minCollider;\r\n                    let minTranslate = new Vector(Infinity, Infinity);\r\n                    this._dynamicCollisionTree.rayCastQuery(ray, updateDistance + Physics.surfaceEpsilon * 2, (other) => {\r\n                        if (!this._pairExists(collider, other) && Pair.canCollide(collider, other)) {\r\n                            const hitPoint = other.rayCast(ray, updateDistance + Physics.surfaceEpsilon * 10);\r\n                            if (hitPoint) {\r\n                                const translate = hitPoint.sub(origin);\r\n                                if (translate.size < minTranslate.size) {\r\n                                    minTranslate = translate;\r\n                                    minCollider = other;\r\n                                }\r\n                            }\r\n                        }\r\n                        return false;\r\n                    });\r\n                    if (minCollider && Vector.isValid(minTranslate)) {\r\n                        const pair = new Pair(collider, minCollider);\r\n                        if (!this._pairs.has(pair.id)) {\r\n                            this._pairs.add(pair.id);\r\n                            this._collisionPairCache.push(pair);\r\n                        }\r\n                        // move the fast moving object to the other body\r\n                        // need to push into the surface by ex.Physics.surfaceEpsilon\r\n                        const shift = centerPoint.sub(furthestPoint);\r\n                        body.pos = origin\r\n                            .add(shift)\r\n                            .add(minTranslate)\r\n                            .add(ray.dir.scale(10 * Physics.surfaceEpsilon)); // needed to push the shape slightly into contact\r\n                        collider.update(body.transform);\r\n                        if (stats) {\r\n                            stats.physics.fastBodyCollisions++;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // return cache\r\n        return this._collisionPairCache;\r\n    }\r\n    /**\r\n     * Applies narrow phase on collision pairs to find actual area intersections\r\n     * Adds actual colliding pairs to stats' Frame data\r\n     */\r\n    narrowphase(pairs, stats) {\r\n        let contacts = [];\r\n        for (let i = 0; i < pairs.length; i++) {\r\n            const newContacts = pairs[i].collide();\r\n            contacts = contacts.concat(newContacts);\r\n            if (stats && newContacts.length > 0) {\r\n                for (const c of newContacts) {\r\n                    stats.physics.contacts.set(c.id, c);\r\n                }\r\n            }\r\n        }\r\n        if (stats) {\r\n            stats.physics.collisions += contacts.length;\r\n        }\r\n        return contacts;\r\n    }\r\n    /**\r\n     * Update the dynamic tree positions\r\n     */\r\n    update(targets) {\r\n        let updated = 0;\r\n        const len = targets.length;\r\n        for (let i = 0; i < len; i++) {\r\n            if (this._dynamicCollisionTree.updateCollider(targets[i])) {\r\n                updated++;\r\n            }\r\n        }\r\n        return updated;\r\n    }\r\n    debug(ex) {\r\n        this._dynamicCollisionTree.debug(ex);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Colliders/Collider.ts\n\r\n\r\n/**\r\n * A collision collider specifies the geometry that can detect when other collision colliders intersect\r\n * for the purposes of colliding 2 objects in excalibur.\r\n */\r\nclass Collider {\r\n    constructor() {\r\n        this.id = createId('collider', Collider._ID++);\r\n        this.events = new EventDispatcher();\r\n    }\r\n    /**\r\n     * Returns a boolean indicating whether this body collided with\r\n     * or was in stationary contact with\r\n     * the body of the other [[Collider]]\r\n     */\r\n    touching(other) {\r\n        const contact = this.collide(other);\r\n        if (contact) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n}\r\nCollider._ID = 0;\r\n\n;// CONCATENATED MODULE: ./Collision/Colliders/CompositeCollider.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass CompositeCollider extends Collider {\r\n    constructor(colliders) {\r\n        super();\r\n        this._collisionProcessor = new DynamicTreeCollisionProcessor();\r\n        this._dynamicAABBTree = new DynamicTree();\r\n        this._colliders = [];\r\n        for (const c of colliders) {\r\n            this.addCollider(c);\r\n        }\r\n    }\r\n    clearColliders() {\r\n        this._colliders = [];\r\n    }\r\n    addCollider(collider) {\r\n        this.events.wire(collider.events);\r\n        this._colliders.push(collider);\r\n        this._collisionProcessor.track(collider);\r\n        this._dynamicAABBTree.trackCollider(collider);\r\n    }\r\n    removeCollider(collider) {\r\n        this.events.unwire(collider.events);\r\n        removeItemFromArray(collider, this._colliders);\r\n        this._collisionProcessor.untrack(collider);\r\n        this._dynamicAABBTree.untrackCollider(collider);\r\n    }\r\n    getColliders() {\r\n        return this._colliders;\r\n    }\r\n    get worldPos() {\r\n        var _a, _b;\r\n        // TODO transform component world pos\r\n        return (_b = (_a = this._transform) === null || _a === void 0 ? void 0 : _a.pos) !== null && _b !== void 0 ? _b : Vector.Zero;\r\n    }\r\n    get center() {\r\n        var _a, _b;\r\n        return (_b = (_a = this._transform) === null || _a === void 0 ? void 0 : _a.pos) !== null && _b !== void 0 ? _b : Vector.Zero;\r\n    }\r\n    get bounds() {\r\n        var _a, _b;\r\n        // TODO cache this\r\n        const colliders = this.getColliders();\r\n        const results = colliders.reduce((acc, collider) => acc.combine(collider.bounds), (_b = (_a = colliders[0]) === null || _a === void 0 ? void 0 : _a.bounds) !== null && _b !== void 0 ? _b : new BoundingBox().translate(this.worldPos));\r\n        return results;\r\n    }\r\n    get localBounds() {\r\n        var _a, _b;\r\n        // TODO cache this\r\n        const colliders = this.getColliders();\r\n        const results = colliders.reduce((acc, collider) => acc.combine(collider.localBounds), (_b = (_a = colliders[0]) === null || _a === void 0 ? void 0 : _a.localBounds) !== null && _b !== void 0 ? _b : new BoundingBox());\r\n        return results;\r\n    }\r\n    get axes() {\r\n        // TODO cache this\r\n        const colliders = this.getColliders();\r\n        let axes = [];\r\n        for (const collider of colliders) {\r\n            axes = axes.concat(collider.axes);\r\n        }\r\n        return axes;\r\n    }\r\n    getFurthestPoint(direction) {\r\n        const colliders = this.getColliders();\r\n        const furthestPoints = [];\r\n        for (const collider of colliders) {\r\n            furthestPoints.push(collider.getFurthestPoint(direction));\r\n        }\r\n        // Pick best point from all colliders\r\n        let bestPoint = furthestPoints[0];\r\n        let maxDistance = -Number.MAX_VALUE;\r\n        for (const point of furthestPoints) {\r\n            const distance = point.dot(direction);\r\n            if (distance > maxDistance) {\r\n                bestPoint = point;\r\n                maxDistance = distance;\r\n            }\r\n        }\r\n        return bestPoint;\r\n    }\r\n    getInertia(mass) {\r\n        const colliders = this.getColliders();\r\n        let totalInertia = 0;\r\n        for (const collider of colliders) {\r\n            totalInertia += collider.getInertia(mass);\r\n        }\r\n        return totalInertia;\r\n    }\r\n    collide(other) {\r\n        let otherColliders = [other];\r\n        if (other instanceof CompositeCollider) {\r\n            otherColliders = other.getColliders();\r\n        }\r\n        const pairs = [];\r\n        for (const c of otherColliders) {\r\n            this._dynamicAABBTree.query(c, (potentialCollider) => {\r\n                pairs.push(new Pair(c, potentialCollider));\r\n                return false;\r\n            });\r\n        }\r\n        let contacts = [];\r\n        for (const p of pairs) {\r\n            contacts = contacts.concat(p.collide());\r\n        }\r\n        return contacts;\r\n    }\r\n    getClosestLineBetween(other) {\r\n        const colliders = this.getColliders();\r\n        const lines = [];\r\n        if (other instanceof CompositeCollider) {\r\n            const otherColliders = other.getColliders();\r\n            for (const colliderA of colliders) {\r\n                for (const colliderB of otherColliders) {\r\n                    const maybeLine = colliderA.getClosestLineBetween(colliderB);\r\n                    if (maybeLine) {\r\n                        lines.push(maybeLine);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            for (const collider of colliders) {\r\n                const maybeLine = other.getClosestLineBetween(collider);\r\n                if (maybeLine) {\r\n                    lines.push(maybeLine);\r\n                }\r\n            }\r\n        }\r\n        if (lines.length) {\r\n            let minLength = lines[0].getLength();\r\n            let minLine = lines[0];\r\n            for (const line of lines) {\r\n                const length = line.getLength();\r\n                if (length < minLength) {\r\n                    minLength = length;\r\n                    minLine = line;\r\n                }\r\n            }\r\n            return minLine;\r\n        }\r\n        return null;\r\n    }\r\n    contains(point) {\r\n        const colliders = this.getColliders();\r\n        for (const collider of colliders) {\r\n            if (collider.contains(point)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    rayCast(ray, max) {\r\n        const colliders = this.getColliders();\r\n        const points = [];\r\n        for (const collider of colliders) {\r\n            const vec = collider.rayCast(ray, max);\r\n            if (vec) {\r\n                points.push(vec);\r\n            }\r\n        }\r\n        if (points.length) {\r\n            let minPoint = points[0];\r\n            let minDistance = minPoint.dot(ray.dir);\r\n            for (const point of points) {\r\n                const distance = ray.dir.dot(point);\r\n                if (distance < minDistance) {\r\n                    minPoint = point;\r\n                    minDistance = distance;\r\n                }\r\n            }\r\n            return minPoint;\r\n        }\r\n        return null;\r\n    }\r\n    project(axis) {\r\n        const colliders = this.getColliders();\r\n        const projs = [];\r\n        for (const collider of colliders) {\r\n            const proj = collider.project(axis);\r\n            if (proj) {\r\n                projs.push(proj);\r\n            }\r\n        }\r\n        // Merge all proj's on the same axis\r\n        if (projs.length) {\r\n            const newProjection = new Projection(projs[0].min, projs[0].max);\r\n            for (const proj of projs) {\r\n                newProjection.min = Math.min(proj.min, newProjection.min);\r\n                newProjection.max = Math.max(proj.max, newProjection.max);\r\n            }\r\n            return newProjection;\r\n        }\r\n        return null;\r\n    }\r\n    update(transform) {\r\n        if (transform) {\r\n            const colliders = this.getColliders();\r\n            for (const collider of colliders) {\r\n                collider.owner = this.owner;\r\n                collider.update(transform);\r\n            }\r\n        }\r\n    }\r\n    draw(ctx, color, pos) {\r\n        const colliders = this.getColliders();\r\n        for (const collider of colliders) {\r\n            collider.draw(ctx, color, pos);\r\n        }\r\n    }\r\n    debug(ex, color) {\r\n        const colliders = this.getColliders();\r\n        for (const collider of colliders) {\r\n            collider.debug(ex, color);\r\n        }\r\n    }\r\n    debugDraw(ctx, color) {\r\n        const colliders = this.getColliders();\r\n        for (const collider of colliders) {\r\n            collider.draw(ctx, color);\r\n        }\r\n    }\r\n    clone() {\r\n        return new CompositeCollider(this._colliders.map((c) => c.clone()));\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Math/line.ts\n\r\n/**\r\n * A 2D line segment\r\n */\r\nclass Line {\r\n    /**\r\n     * @param begin  The starting point of the line segment\r\n     * @param end  The ending point of the line segment\r\n     */\r\n    constructor(begin, end) {\r\n        this.begin = begin;\r\n        this.end = end;\r\n    }\r\n    /**\r\n     * Gets the raw slope (m) of the line. Will return (+/-)Infinity for vertical lines.\r\n     */\r\n    get slope() {\r\n        return (this.end.y - this.begin.y) / (this.end.x - this.begin.x);\r\n    }\r\n    /**\r\n     * Gets the Y-intercept (b) of the line. Will return (+/-)Infinity if there is no intercept.\r\n     */\r\n    get intercept() {\r\n        return this.begin.y - this.slope * this.begin.x;\r\n    }\r\n    /**\r\n     * Gets the normal of the line\r\n     */\r\n    normal() {\r\n        return this.end.sub(this.begin).normal();\r\n    }\r\n    dir() {\r\n        return this.end.sub(this.begin);\r\n    }\r\n    getPoints() {\r\n        return [this.begin, this.end];\r\n    }\r\n    /**\r\n     * Returns the slope of the line in the form of a vector of length 1\r\n     */\r\n    getSlope() {\r\n        const begin = this.begin;\r\n        const end = this.end;\r\n        const distance = begin.distance(end);\r\n        return end.sub(begin).scale(1 / distance);\r\n    }\r\n    /**\r\n     * Returns the edge of the line as vector, the length of the vector is the length of the edge\r\n     */\r\n    getEdge() {\r\n        const begin = this.begin;\r\n        const end = this.end;\r\n        return end.sub(begin);\r\n    }\r\n    /**\r\n     * Returns the length of the line segment in pixels\r\n     */\r\n    getLength() {\r\n        const begin = this.begin;\r\n        const end = this.end;\r\n        const distance = begin.distance(end);\r\n        return distance;\r\n    }\r\n    /**\r\n     * Returns the midpoint of the edge\r\n     */\r\n    get midpoint() {\r\n        return this.begin.add(this.end).scale(0.5);\r\n    }\r\n    /**\r\n     * Flips the direction of the line segment\r\n     */\r\n    flip() {\r\n        return new Line(this.end, this.begin);\r\n    }\r\n    /**\r\n     * Tests if a given point is below the line, points in the normal direction above the line are considered above.\r\n     * @param point\r\n     */\r\n    below(point) {\r\n        const above2 = (this.end.x - this.begin.x) * (point.y - this.begin.y) - (this.end.y - this.begin.y) * (point.x - this.begin.x);\r\n        return above2 >= 0;\r\n    }\r\n    /**\r\n     * Returns the clip point\r\n     * @param sideVector Vector that traces the line\r\n     * @param length Length to clip along side\r\n     */\r\n    clip(sideVector, length) {\r\n        let dir = sideVector;\r\n        dir = dir.normalize();\r\n        const near = dir.dot(this.begin) - length;\r\n        const far = dir.dot(this.end) - length;\r\n        const results = [];\r\n        if (near <= 0) {\r\n            results.push(this.begin);\r\n        }\r\n        if (far <= 0) {\r\n            results.push(this.end);\r\n        }\r\n        if (near * far < 0) {\r\n            const clipTime = near / (near - far);\r\n            results.push(this.begin.add(this.end.sub(this.begin).scale(clipTime)));\r\n        }\r\n        if (results.length !== 2) {\r\n            return null;\r\n        }\r\n        return new Line(results[0], results[1]);\r\n    }\r\n    /**\r\n     * Find the perpendicular distance from the line to a point\r\n     * https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line\r\n     * @param point\r\n     */\r\n    distanceToPoint(point, signed = false) {\r\n        const x0 = point.x;\r\n        const y0 = point.y;\r\n        const l = this.getLength();\r\n        const dy = this.end.y - this.begin.y;\r\n        const dx = this.end.x - this.begin.x;\r\n        const distance = (dy * x0 - dx * y0 + this.end.x * this.begin.y - this.end.y * this.begin.x) / l;\r\n        return signed ? distance : Math.abs(distance);\r\n    }\r\n    /**\r\n     * Find the perpendicular line from the line to a point\r\n     * https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line\r\n     * (a - p) - ((a - p) * n)n\r\n     * a is a point on the line\r\n     * p is the arbitrary point above the line\r\n     * n is a unit vector in direction of the line\r\n     * @param point\r\n     */\r\n    findVectorToPoint(point) {\r\n        const aMinusP = this.begin.sub(point);\r\n        const n = this.getSlope();\r\n        return aMinusP.sub(n.scale(aMinusP.dot(n)));\r\n    }\r\n    /**\r\n     * Finds a point on the line given only an X or a Y value. Given an X value, the function returns\r\n     * a new point with the calculated Y value and vice-versa.\r\n     *\r\n     * @param x The known X value of the target point\r\n     * @param y The known Y value of the target point\r\n     * @returns A new point with the other calculated axis value\r\n     */\r\n    findPoint(x = null, y = null) {\r\n        const m = this.slope;\r\n        const b = this.intercept;\r\n        if (x !== null) {\r\n            return new Vector(x, m * x + b);\r\n        }\r\n        else if (y !== null) {\r\n            return new Vector((y - b) / m, y);\r\n        }\r\n        else {\r\n            throw new Error('You must provide an X or a Y value');\r\n        }\r\n    }\r\n    /**\r\n     * @see http://stackoverflow.com/a/11908158/109458\r\n     */\r\n    hasPoint() {\r\n        let currPoint;\r\n        let threshold = 0;\r\n        if (typeof arguments[0] === 'number' && typeof arguments[1] === 'number') {\r\n            currPoint = new Vector(arguments[0], arguments[1]);\r\n            threshold = arguments[2] || 0;\r\n        }\r\n        else if (arguments[0] instanceof Vector) {\r\n            currPoint = arguments[0];\r\n            threshold = arguments[1] || 0;\r\n        }\r\n        else {\r\n            throw 'Could not determine the arguments for Vector.hasPoint';\r\n        }\r\n        const dxc = currPoint.x - this.begin.x;\r\n        const dyc = currPoint.y - this.begin.y;\r\n        const dx1 = this.end.x - this.begin.x;\r\n        const dy1 = this.end.y - this.begin.y;\r\n        const cross = dxc * dy1 - dyc * dx1;\r\n        // check whether point lines on the line\r\n        if (Math.abs(cross) > threshold) {\r\n            return false;\r\n        }\r\n        // check whether point lies in-between start and end\r\n        if (Math.abs(dx1) >= Math.abs(dy1)) {\r\n            return dx1 > 0 ? this.begin.x <= currPoint.x && currPoint.x <= this.end.x : this.end.x <= currPoint.x && currPoint.x <= this.begin.x;\r\n        }\r\n        else {\r\n            return dy1 > 0 ? this.begin.y <= currPoint.y && currPoint.y <= this.end.y : this.end.y <= currPoint.y && currPoint.y <= this.begin.y;\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Colliders/ClosestLineJumpTable.ts\n\r\n\r\n\r\n/**\r\n * Finds the closes line between 2 line segments, were the magnitude of u, v are the lengths of each segment\r\n * L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\r\n * L2 = Q(t) = q0 + t * v, where t is time and q0 is the start of the line\r\n * @param p0 Point where L1 begins\r\n * @param u Direction and length of L1\r\n * @param q0 Point were L2 begins\r\n * @param v Direction and length of L2\r\n */\r\nfunction ClosestLine(p0, u, q0, v) {\r\n    // Distance between 2 lines http://geomalgorithms.com/a07-_distance.html\r\n    // w(s, t) = P(s) - Q(t)\r\n    // The w(s, t) that has the minimum distance we will say is w(sClosest, tClosest) = wClosest\r\n    //\r\n    // wClosest is the vector that is uniquely perpendicular to the 2 line directions u & v.\r\n    // wClosest = w0 + sClosest * u - tClosest * v, where w0 is p0 - q0\r\n    //\r\n    // The closest point between 2 lines then satisfies this pair of equations\r\n    // 1: u * wClosest = 0\r\n    // 2: v * wClosest = 0\r\n    //\r\n    // Substituting wClosest into the equations we get\r\n    //\r\n    // 1: (u * u) * sClosest - (u * v) tClosest = -u * w0\r\n    // 2: (v * u) * sClosest - (v * v) tClosest = -v * w0\r\n    // simplify w0\r\n    const w0 = p0.sub(q0);\r\n    // simplify (u * u);\r\n    const a = u.dot(u);\r\n    // simplify (u * v);\r\n    const b = u.dot(v);\r\n    // simplify (v * v)\r\n    const c = v.dot(v);\r\n    // simplify (u * w0)\r\n    const d = u.dot(w0);\r\n    // simplify (v * w0)\r\n    const e = v.dot(w0);\r\n    // denominator ac - b^2\r\n    const denom = a * c - b * b;\r\n    let sDenom = denom;\r\n    let tDenom = denom;\r\n    // if denom is 0 they are parallel, use any point from either as the start in this case p0\r\n    if (denom === 0 || denom <= 0.01) {\r\n        const tClosestParallel = d / b;\r\n        return new Line(p0, q0.add(v.scale(tClosestParallel)));\r\n    }\r\n    // Solve for sClosest for infinite line\r\n    let sClosest = b * e - c * d; // / denom;\r\n    // Solve for tClosest for infinite line\r\n    let tClosest = a * e - b * d; // / denom;\r\n    // Solve for segments candidate edges, if sClosest and tClosest are outside their segments\r\n    if (sClosest < 0) {\r\n        sClosest = 0;\r\n        tClosest = e;\r\n        tDenom = c;\r\n    }\r\n    else if (sClosest > sDenom) {\r\n        sClosest = sDenom;\r\n        tClosest = e + b;\r\n        tDenom = c;\r\n    }\r\n    if (tClosest < 0) {\r\n        tClosest = 0;\r\n        if (-d < 0) {\r\n            sClosest = 0;\r\n        }\r\n        else if (-d > a) {\r\n            sClosest = sDenom;\r\n        }\r\n        else {\r\n            sClosest = -d;\r\n            sDenom = a;\r\n        }\r\n    }\r\n    else if (tClosest > tDenom) {\r\n        tClosest = tDenom;\r\n        if (-d + b < 0) {\r\n            sClosest = 0;\r\n        }\r\n        else if (-d + b > a) {\r\n            sClosest = sDenom;\r\n        }\r\n        else {\r\n            sClosest = -d + b;\r\n            sDenom = a;\r\n        }\r\n    }\r\n    sClosest = Math.abs(sClosest) < 0.001 ? 0 : sClosest / sDenom;\r\n    tClosest = Math.abs(tClosest) < 0.001 ? 0 : tClosest / tDenom;\r\n    return new Line(p0.add(u.scale(sClosest)), q0.add(v.scale(tClosest)));\r\n}\r\nconst ClosestLineJumpTable = {\r\n    PolygonPolygonClosestLine(polygonA, polygonB) {\r\n        // Find the 2 closest faces on each polygon\r\n        const otherWorldPos = polygonB.worldPos;\r\n        const otherDirection = otherWorldPos.sub(polygonA.worldPos);\r\n        const thisDirection = otherDirection.negate();\r\n        const rayTowardsOther = new Ray(polygonA.worldPos, otherDirection);\r\n        const rayTowardsThis = new Ray(otherWorldPos, thisDirection);\r\n        const thisPoint = polygonA.rayCast(rayTowardsOther).add(rayTowardsOther.dir.scale(0.1));\r\n        const otherPoint = polygonB.rayCast(rayTowardsThis).add(rayTowardsThis.dir.scale(0.1));\r\n        const thisFace = polygonA.getClosestFace(thisPoint);\r\n        const otherFace = polygonB.getClosestFace(otherPoint);\r\n        // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\r\n        const p0 = thisFace.face.begin;\r\n        const u = thisFace.face.getEdge();\r\n        // L2 = Q(t) = q0 + t * v, where t is time and q0 is the start of the line\r\n        const q0 = otherFace.face.begin;\r\n        const v = otherFace.face.getEdge();\r\n        return ClosestLine(p0, u, q0, v);\r\n    },\r\n    PolygonEdgeClosestLine(polygon, edge) {\r\n        // Find the 2 closest faces on each polygon\r\n        const otherWorldPos = edge.worldPos;\r\n        const otherDirection = otherWorldPos.sub(polygon.worldPos);\r\n        const rayTowardsOther = new Ray(polygon.worldPos, otherDirection);\r\n        const thisPoint = polygon.rayCast(rayTowardsOther).add(rayTowardsOther.dir.scale(0.1));\r\n        const thisFace = polygon.getClosestFace(thisPoint);\r\n        // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\r\n        const p0 = thisFace.face.begin;\r\n        const u = thisFace.face.getEdge();\r\n        // L2 = Q(t) = q0 + t * v, where t is time and q0 is the start of the line\r\n        const edgeLine = edge.asLine();\r\n        const edgeStart = edgeLine.begin;\r\n        const edgeVector = edgeLine.getEdge();\r\n        const q0 = edgeStart;\r\n        const v = edgeVector;\r\n        return ClosestLine(p0, u, q0, v);\r\n    },\r\n    PolygonCircleClosestLine(polygon, circle) {\r\n        // https://math.stackexchange.com/questions/1919177/how-to-find-point-on-line-closest-to-sphere\r\n        // Find the 2 closest faces on each polygon\r\n        const otherWorldPos = circle.worldPos;\r\n        const otherDirection = otherWorldPos.sub(polygon.worldPos);\r\n        const rayTowardsOther = new Ray(polygon.worldPos, otherDirection.normalize());\r\n        const thisPoint = polygon.rayCast(rayTowardsOther).add(rayTowardsOther.dir.scale(0.1));\r\n        const thisFace = polygon.getClosestFace(thisPoint);\r\n        // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\r\n        const p0 = thisFace.face.begin;\r\n        const u = thisFace.face.getEdge();\r\n        // Time of minimum distance\r\n        let t = (u.x * (otherWorldPos.x - p0.x) + u.y * (otherWorldPos.y - p0.y)) / (u.x * u.x + u.y * u.y);\r\n        // If time of minimum is past the edge clamp\r\n        if (t > 1) {\r\n            t = 1;\r\n        }\r\n        else if (t < 0) {\r\n            t = 0;\r\n        }\r\n        // Minimum distance\r\n        const d = Math.sqrt(Math.pow(p0.x + u.x * t - otherWorldPos.x, 2) + Math.pow(p0.y + u.y * t - otherWorldPos.y, 2)) - circle.radius;\r\n        const circlex = ((p0.x + u.x * t - otherWorldPos.x) * circle.radius) / (circle.radius + d);\r\n        const circley = ((p0.y + u.y * t - otherWorldPos.y) * circle.radius) / (circle.radius + d);\r\n        return new Line(u.scale(t).add(p0), new Vector(otherWorldPos.x + circlex, otherWorldPos.y + circley));\r\n    },\r\n    CircleCircleClosestLine(circleA, circleB) {\r\n        // Find the 2 closest faces on each polygon\r\n        const otherWorldPos = circleB.worldPos;\r\n        const otherDirection = otherWorldPos.sub(circleA.worldPos);\r\n        const thisWorldPos = circleA.worldPos;\r\n        const thisDirection = thisWorldPos.sub(circleB.worldPos);\r\n        const rayTowardsOther = new Ray(circleA.worldPos, otherDirection);\r\n        const rayTowardsThis = new Ray(circleB.worldPos, thisDirection);\r\n        const thisPoint = circleA.rayCast(rayTowardsOther);\r\n        const otherPoint = circleB.rayCast(rayTowardsThis);\r\n        return new Line(thisPoint, otherPoint);\r\n    },\r\n    CircleEdgeClosestLine(circle, edge) {\r\n        // https://math.stackexchange.com/questions/1919177/how-to-find-point-on-line-closest-to-sphere\r\n        const circleWorlPos = circle.worldPos;\r\n        // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\r\n        const edgeLine = edge.asLine();\r\n        const edgeStart = edgeLine.begin;\r\n        const edgeVector = edgeLine.getEdge();\r\n        const p0 = edgeStart;\r\n        const u = edgeVector;\r\n        // Time of minimum distance\r\n        let t = (u.x * (circleWorlPos.x - p0.x) + u.y * (circleWorlPos.y - p0.y)) / (u.x * u.x + u.y * u.y);\r\n        // If time of minimum is past the edge clamp to edge\r\n        if (t > 1) {\r\n            t = 1;\r\n        }\r\n        else if (t < 0) {\r\n            t = 0;\r\n        }\r\n        // Minimum distance\r\n        const d = Math.sqrt(Math.pow(p0.x + u.x * t - circleWorlPos.x, 2) + Math.pow(p0.y + u.y * t - circleWorlPos.y, 2)) - circle.radius;\r\n        const circlex = ((p0.x + u.x * t - circleWorlPos.x) * circle.radius) / (circle.radius + d);\r\n        const circley = ((p0.y + u.y * t - circleWorlPos.y) * circle.radius) / (circle.radius + d);\r\n        return new Line(u.scale(t).add(p0), new Vector(circleWorlPos.x + circlex, circleWorlPos.y + circley));\r\n    },\r\n    EdgeEdgeClosestLine(edgeA, edgeB) {\r\n        // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\r\n        const edgeLineA = edgeA.asLine();\r\n        const edgeStartA = edgeLineA.begin;\r\n        const edgeVectorA = edgeLineA.getEdge();\r\n        const p0 = edgeStartA;\r\n        const u = edgeVectorA;\r\n        // L2 = Q(t) = q0 + t * v, where t is time and q0 is the start of the line\r\n        const edgeLineB = edgeB.asLine();\r\n        const edgeStartB = edgeLineB.begin;\r\n        const edgeVectorB = edgeLineB.getEdge();\r\n        const q0 = edgeStartB;\r\n        const v = edgeVectorB;\r\n        return ClosestLine(p0, u, q0, v);\r\n    }\r\n};\r\n\n;// CONCATENATED MODULE: ./Collision/Colliders/CircleCollider.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * This is a circle collider for the excalibur rigid body physics simulation\r\n */\r\nclass CircleCollider extends Collider {\r\n    constructor(options) {\r\n        super();\r\n        /**\r\n         * Position of the circle relative to the collider, by default (0, 0).\r\n         */\r\n        this.offset = Vector.Zero;\r\n        this.offset = options.offset || Vector.Zero;\r\n        this.radius = options.radius || 0;\r\n    }\r\n    get worldPos() {\r\n        var _a, _b, _c, _d;\r\n        const tx = this._transform;\r\n        const scale = (_a = tx === null || tx === void 0 ? void 0 : tx.globalScale) !== null && _a !== void 0 ? _a : Vector.One;\r\n        const rotation = (_b = tx === null || tx === void 0 ? void 0 : tx.globalRotation) !== null && _b !== void 0 ? _b : 0;\r\n        const pos = ((_c = tx === null || tx === void 0 ? void 0 : tx.globalPos) !== null && _c !== void 0 ? _c : Vector.Zero);\r\n        return ((_d = this.offset) !== null && _d !== void 0 ? _d : Vector.Zero).scale(scale).rotate(rotation).add(pos);\r\n    }\r\n    /**\r\n     * Get the radius of the circle\r\n     */\r\n    get radius() {\r\n        var _a;\r\n        const tx = this._transform;\r\n        const scale = (_a = tx === null || tx === void 0 ? void 0 : tx.globalScale) !== null && _a !== void 0 ? _a : Vector.One;\r\n        // This is a trade off, the alternative is retooling circles to support ellipse collisions\r\n        return this._naturalRadius * Math.min(scale.x, scale.y);\r\n    }\r\n    /**\r\n     * Set the radius of the circle\r\n     */\r\n    set radius(val) {\r\n        var _a;\r\n        const tx = this._transform;\r\n        const scale = (_a = tx === null || tx === void 0 ? void 0 : tx.globalScale) !== null && _a !== void 0 ? _a : Vector.One;\r\n        // This is a trade off, the alternative is retooling circles to support ellipse collisions\r\n        this._naturalRadius = val / Math.min(scale.x, scale.y);\r\n    }\r\n    /**\r\n     * Returns a clone of this shape, not associated with any collider\r\n     */\r\n    clone() {\r\n        return new CircleCollider({\r\n            offset: this.offset.clone(),\r\n            radius: this.radius\r\n        });\r\n    }\r\n    /**\r\n     * Get the center of the collider in world coordinates\r\n     */\r\n    get center() {\r\n        var _a, _b, _c, _d;\r\n        const tx = this._transform;\r\n        const scale = (_a = tx === null || tx === void 0 ? void 0 : tx.globalScale) !== null && _a !== void 0 ? _a : Vector.One;\r\n        const rotation = (_b = tx === null || tx === void 0 ? void 0 : tx.globalRotation) !== null && _b !== void 0 ? _b : 0;\r\n        const pos = ((_c = tx === null || tx === void 0 ? void 0 : tx.globalPos) !== null && _c !== void 0 ? _c : Vector.Zero);\r\n        return ((_d = this.offset) !== null && _d !== void 0 ? _d : Vector.Zero).scale(scale).rotate(rotation).add(pos);\r\n    }\r\n    /**\r\n     * Tests if a point is contained in this collider\r\n     */\r\n    contains(point) {\r\n        var _a, _b;\r\n        const pos = (_b = (_a = this._transform) === null || _a === void 0 ? void 0 : _a.pos) !== null && _b !== void 0 ? _b : this.offset;\r\n        const distance = pos.distance(point);\r\n        if (distance <= this.radius) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Casts a ray at the Circle collider and returns the nearest point of collision\r\n     * @param ray\r\n     */\r\n    rayCast(ray, max = Infinity) {\r\n        //https://en.wikipedia.org/wiki/Line%E2%80%93sphere_intersection\r\n        const c = this.center;\r\n        const dir = ray.dir;\r\n        const orig = ray.pos;\r\n        const discriminant = Math.sqrt(Math.pow(dir.dot(orig.sub(c)), 2) - Math.pow(orig.sub(c).distance(), 2) + Math.pow(this.radius, 2));\r\n        if (discriminant < 0) {\r\n            // no intersection\r\n            return null;\r\n        }\r\n        else {\r\n            let toi = 0;\r\n            if (discriminant === 0) {\r\n                toi = -dir.dot(orig.sub(c));\r\n                if (toi > 0 && toi < max) {\r\n                    return ray.getPoint(toi);\r\n                }\r\n                return null;\r\n            }\r\n            else {\r\n                const toi1 = -dir.dot(orig.sub(c)) + discriminant;\r\n                const toi2 = -dir.dot(orig.sub(c)) - discriminant;\r\n                const positiveToi = [];\r\n                if (toi1 >= 0) {\r\n                    positiveToi.push(toi1);\r\n                }\r\n                if (toi2 >= 0) {\r\n                    positiveToi.push(toi2);\r\n                }\r\n                const mintoi = Math.min(...positiveToi);\r\n                if (mintoi <= max) {\r\n                    return ray.getPoint(mintoi);\r\n                }\r\n                return null;\r\n            }\r\n        }\r\n    }\r\n    getClosestLineBetween(shape) {\r\n        if (shape instanceof CircleCollider) {\r\n            return ClosestLineJumpTable.CircleCircleClosestLine(this, shape);\r\n        }\r\n        else if (shape instanceof PolygonCollider) {\r\n            return ClosestLineJumpTable.PolygonCircleClosestLine(shape, this).flip();\r\n        }\r\n        else if (shape instanceof EdgeCollider) {\r\n            return ClosestLineJumpTable.CircleEdgeClosestLine(this, shape).flip();\r\n        }\r\n        else {\r\n            throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof shape}`);\r\n        }\r\n    }\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    collide(collider) {\r\n        if (collider instanceof CircleCollider) {\r\n            return CollisionJumpTable.CollideCircleCircle(this, collider);\r\n        }\r\n        else if (collider instanceof PolygonCollider) {\r\n            return CollisionJumpTable.CollideCirclePolygon(this, collider);\r\n        }\r\n        else if (collider instanceof EdgeCollider) {\r\n            return CollisionJumpTable.CollideCircleEdge(this, collider);\r\n        }\r\n        else {\r\n            throw new Error(`Circle could not collide with unknown CollisionShape ${typeof collider}`);\r\n        }\r\n    }\r\n    /**\r\n     * Find the point on the collider furthest in the direction specified\r\n     */\r\n    getFurthestPoint(direction) {\r\n        return this.center.add(direction.normalize().scale(this.radius));\r\n    }\r\n    /**\r\n     * Find the local point on the shape in the direction specified\r\n     * @param direction\r\n     */\r\n    getFurthestLocalPoint(direction) {\r\n        const dir = direction.normalize();\r\n        return dir.scale(this.radius);\r\n    }\r\n    /**\r\n     * Get the axis aligned bounding box for the circle collider in world coordinates\r\n     */\r\n    get bounds() {\r\n        var _a, _b, _c;\r\n        const tx = this._transform;\r\n        const scale = (_a = tx === null || tx === void 0 ? void 0 : tx.globalScale) !== null && _a !== void 0 ? _a : Vector.One;\r\n        const rotation = (_b = tx === null || tx === void 0 ? void 0 : tx.globalRotation) !== null && _b !== void 0 ? _b : 0;\r\n        const pos = ((_c = tx === null || tx === void 0 ? void 0 : tx.globalPos) !== null && _c !== void 0 ? _c : Vector.Zero);\r\n        return new BoundingBox(this.offset.x - this._naturalRadius, this.offset.y - this._naturalRadius, this.offset.x + this._naturalRadius, this.offset.y + this._naturalRadius).rotate(rotation).scale(scale).translate(pos);\r\n    }\r\n    /**\r\n     * Get the axis aligned bounding box for the circle collider in local coordinates\r\n     */\r\n    get localBounds() {\r\n        return new BoundingBox(this.offset.x - this._naturalRadius, this.offset.y - this._naturalRadius, this.offset.x + this._naturalRadius, this.offset.y + this._naturalRadius);\r\n    }\r\n    /**\r\n     * Get axis not implemented on circles, since there are infinite axis in a circle\r\n     */\r\n    get axes() {\r\n        return [];\r\n    }\r\n    /**\r\n     * Returns the moment of inertia of a circle given it's mass\r\n     * https://en.wikipedia.org/wiki/List_of_moments_of_inertia\r\n     */\r\n    getInertia(mass) {\r\n        return (mass * this.radius * this.radius) / 2;\r\n    }\r\n    /* istanbul ignore next */\r\n    update(transform) {\r\n        this._transform = transform;\r\n    }\r\n    /**\r\n     * Project the circle along a specified axis\r\n     */\r\n    project(axis) {\r\n        const scalars = [];\r\n        const point = this.center;\r\n        const dotProduct = point.dot(axis);\r\n        scalars.push(dotProduct);\r\n        scalars.push(dotProduct + this.radius);\r\n        scalars.push(dotProduct - this.radius);\r\n        return new Projection(Math.min.apply(Math, scalars), Math.max.apply(Math, scalars));\r\n    }\r\n    /**\r\n     * @deprecated signature will change in v0.26.0\r\n     * @param ctx\r\n     * @param color\r\n     * @param pos\r\n     */\r\n    draw(ctx, color = Color.Green, pos = Vector.Zero) {\r\n        const newPos = pos.add(this.offset);\r\n        ctx.beginPath();\r\n        ctx.fillStyle = color.toString();\r\n        ctx.arc(newPos.x, newPos.y, this.radius, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    }\r\n    debug(ex, color) {\r\n        var _a, _b, _c, _d;\r\n        const tx = this._transform;\r\n        const scale = (_a = tx === null || tx === void 0 ? void 0 : tx.globalScale) !== null && _a !== void 0 ? _a : Vector.One;\r\n        const rotation = (_b = tx === null || tx === void 0 ? void 0 : tx.globalRotation) !== null && _b !== void 0 ? _b : 0;\r\n        const pos = ((_c = tx === null || tx === void 0 ? void 0 : tx.globalPos) !== null && _c !== void 0 ? _c : Vector.Zero);\r\n        ex.save();\r\n        ex.translate(pos.x, pos.y);\r\n        ex.rotate(rotation);\r\n        ex.scale(scale.x, scale.y);\r\n        ex.drawCircle(((_d = this.offset) !== null && _d !== void 0 ? _d : Vector.Zero), this._naturalRadius, Color.Transparent, color, 2);\r\n        ex.restore();\r\n    }\r\n    /**\r\n     * @deprecated signature will change in v0.26.0\r\n     * @param ctx\r\n     * @param color\r\n     */\r\n    /* istanbul ignore next */\r\n    debugDraw(ctx, color = Color.Green) {\r\n        const transform = this._transform;\r\n        const pos = transform ? transform.pos.add(this.offset) : this.offset;\r\n        const rotation = transform ? transform.rotation : 0;\r\n        ctx.beginPath();\r\n        ctx.strokeStyle = color.toString();\r\n        ctx.arc(pos.x, pos.y, this.radius, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n        ctx.beginPath();\r\n        ctx.moveTo(pos.x, pos.y);\r\n        ctx.lineTo(Math.cos(rotation) * this.radius + pos.x, Math.sin(rotation) * this.radius + pos.y);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Detection/CollisionContact.ts\n\r\n\r\n\r\n\r\n/**\r\n * Collision contacts are used internally by Excalibur to resolve collision between colliders. This\r\n * Pair prevents collisions from being evaluated more than one time\r\n */\r\nclass CollisionContact {\r\n    constructor(colliderA, colliderB, mtv, normal, tangent, points, localPoints, info) {\r\n        this._canceled = false;\r\n        this.colliderA = colliderA;\r\n        this.colliderB = colliderB;\r\n        this.mtv = mtv;\r\n        this.normal = normal;\r\n        this.tangent = tangent;\r\n        this.points = points;\r\n        this.localPoints = localPoints;\r\n        this.info = info;\r\n        this.id = Pair.calculatePairHash(colliderA.id, colliderB.id);\r\n    }\r\n    /**\r\n     * Match contact awake state, except if body's are Fixed\r\n     */\r\n    matchAwake() {\r\n        const bodyA = this.colliderA.owner.get(BodyComponent);\r\n        const bodyB = this.colliderB.owner.get(BodyComponent);\r\n        if (bodyA && bodyB) {\r\n            if (bodyA.sleeping !== bodyB.sleeping) {\r\n                if (bodyA.sleeping && bodyA.collisionType !== CollisionType.Fixed && bodyB.sleepMotion >= Physics.wakeThreshold) {\r\n                    bodyA.setSleeping(false);\r\n                }\r\n                if (bodyB.sleeping && bodyB.collisionType !== CollisionType.Fixed && bodyA.sleepMotion >= Physics.wakeThreshold) {\r\n                    bodyB.setSleeping(false);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    isCanceled() {\r\n        return this._canceled;\r\n    }\r\n    cancel() {\r\n        this._canceled = true;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Colliders/SeparatingAxis.ts\nclass SeparatingAxis {\r\n    static findPolygonPolygonSeparation(polyA, polyB) {\r\n        let bestSeparation = -Number.MAX_VALUE;\r\n        let bestSide = null;\r\n        let bestAxis = null;\r\n        let bestSideIndex = -1;\r\n        let bestOtherPoint = null;\r\n        const sides = polyA.getSides();\r\n        const localSides = polyA.getLocalSides();\r\n        for (let i = 0; i < sides.length; i++) {\r\n            const side = sides[i];\r\n            const axis = side.normal();\r\n            const vertB = polyB.getFurthestPoint(axis.negate());\r\n            // Separation on side i's axis\r\n            // We are looking for the largest separation between poly A's sides\r\n            const vertSeparation = side.distanceToPoint(vertB, true);\r\n            if (vertSeparation > bestSeparation) {\r\n                bestSeparation = vertSeparation;\r\n                bestSide = side;\r\n                bestAxis = axis;\r\n                bestSideIndex = i;\r\n                bestOtherPoint = vertB;\r\n            }\r\n        }\r\n        return {\r\n            collider: polyA,\r\n            separation: bestAxis ? bestSeparation : 99,\r\n            axis: bestAxis,\r\n            side: bestSide,\r\n            localSide: localSides[bestSideIndex],\r\n            sideId: bestSideIndex,\r\n            point: bestOtherPoint,\r\n            localPoint: bestAxis ? polyB.getFurthestLocalPoint(bestAxis.negate()) : null\r\n        };\r\n    }\r\n    static findCirclePolygonSeparation(circle, polygon) {\r\n        const axes = polygon.axes;\r\n        const pc = polygon.center;\r\n        // Special SAT with circles\r\n        const polyDir = pc.sub(circle.worldPos);\r\n        const closestPointOnPoly = polygon.getFurthestPoint(polyDir.negate());\r\n        axes.push(closestPointOnPoly.sub(circle.worldPos).normalize());\r\n        let minOverlap = Number.MAX_VALUE;\r\n        let minAxis = null;\r\n        let minIndex = -1;\r\n        for (let i = 0; i < axes.length; i++) {\r\n            const proj1 = polygon.project(axes[i]);\r\n            const proj2 = circle.project(axes[i]);\r\n            const overlap = proj1.getOverlap(proj2);\r\n            if (overlap <= 0) {\r\n                return null;\r\n            }\r\n            else {\r\n                if (overlap < minOverlap) {\r\n                    minOverlap = overlap;\r\n                    minAxis = axes[i];\r\n                    minIndex = i;\r\n                }\r\n            }\r\n        }\r\n        if (minIndex < 0) {\r\n            return null;\r\n        }\r\n        return minAxis.normalize().scale(minOverlap);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Colliders/CollisionJumpTable.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst CollisionJumpTable = {\r\n    CollideCircleCircle(circleA, circleB) {\r\n        const circleAPos = circleA.worldPos;\r\n        const circleBPos = circleB.worldPos;\r\n        const combinedRadius = circleA.radius + circleB.radius;\r\n        const distance = circleAPos.distance(circleBPos);\r\n        if (distance > combinedRadius) {\r\n            return [];\r\n        }\r\n        // negative means overlap\r\n        const separation = combinedRadius - distance;\r\n        // Normal points from A -> B\r\n        const normal = circleBPos.sub(circleAPos).normalize();\r\n        const tangent = normal.perpendicular();\r\n        const mvt = normal.scale(separation);\r\n        const point = circleA.getFurthestPoint(normal);\r\n        const local = circleA.getFurthestLocalPoint(normal);\r\n        const info = {\r\n            collider: circleA,\r\n            separation,\r\n            axis: normal,\r\n            point: point\r\n        };\r\n        return [new CollisionContact(circleA, circleB, mvt, normal, tangent, [point], [local], info)];\r\n    },\r\n    CollideCirclePolygon(circle, polygon) {\r\n        var _a, _b;\r\n        let minAxis = SeparatingAxis.findCirclePolygonSeparation(circle, polygon);\r\n        if (!minAxis) {\r\n            return [];\r\n        }\r\n        // make sure that the minAxis is pointing away from circle\r\n        const samedir = minAxis.dot(polygon.center.sub(circle.center));\r\n        minAxis = samedir < 0 ? minAxis.negate() : minAxis;\r\n        const point = circle.getFurthestPoint(minAxis);\r\n        const xf = (_b = (_a = circle.owner) === null || _a === void 0 ? void 0 : _a.get(TransformComponent)) !== null && _b !== void 0 ? _b : new TransformComponent();\r\n        const local = xf.applyInverse(point);\r\n        const normal = minAxis.normalize();\r\n        const info = {\r\n            collider: circle,\r\n            separation: -minAxis.size,\r\n            axis: normal,\r\n            point: point,\r\n            localPoint: local,\r\n            side: polygon.findSide(normal.negate()),\r\n            localSide: polygon.findLocalSide(normal.negate())\r\n        };\r\n        return [new CollisionContact(circle, polygon, minAxis, normal, normal.perpendicular(), [point], [local], info)];\r\n    },\r\n    CollideCircleEdge(circle, edge) {\r\n        // TODO not sure this actually abides by local/world collisions\r\n        // Are edge.begin and edge.end local space or world space? I think they should be local\r\n        // center of the circle in world pos\r\n        const cc = circle.center;\r\n        // vector in the direction of the edge\r\n        const edgeWorld = edge.asLine();\r\n        const e = edgeWorld.end.sub(edgeWorld.begin);\r\n        // amount of overlap with the circle's center along the edge direction\r\n        const u = e.dot(edgeWorld.end.sub(cc));\r\n        const v = e.dot(cc.sub(edgeWorld.begin));\r\n        const side = edge.asLine();\r\n        const localSide = edge.asLocalLine();\r\n        // Potential region A collision (circle is on the left side of the edge, before the beginning)\r\n        if (v <= 0) {\r\n            const da = edgeWorld.begin.sub(cc);\r\n            const dda = da.dot(da); // quick and dirty way of calc'n distance in r^2 terms saves some sqrts\r\n            // save some sqrts\r\n            if (dda > circle.radius * circle.radius) {\r\n                return []; // no collision\r\n            }\r\n            const normal = da.normalize();\r\n            const separation = circle.radius - Math.sqrt(dda);\r\n            const info = {\r\n                collider: circle,\r\n                separation: separation,\r\n                axis: normal,\r\n                point: side.begin,\r\n                side: side,\r\n                localSide: localSide\r\n            };\r\n            return [\r\n                new CollisionContact(circle, edge, normal.scale(separation), normal, normal.perpendicular(), [side.begin], [localSide.begin], info)\r\n            ];\r\n        }\r\n        // Potential region B collision (circle is on the right side of the edge, after the end)\r\n        if (u <= 0) {\r\n            const db = edgeWorld.end.sub(cc);\r\n            const ddb = db.dot(db);\r\n            if (ddb > circle.radius * circle.radius) {\r\n                return [];\r\n            }\r\n            const normal = db.normalize();\r\n            const separation = circle.radius - Math.sqrt(ddb);\r\n            const info = {\r\n                collider: circle,\r\n                separation: separation,\r\n                axis: normal,\r\n                point: side.end,\r\n                side: side,\r\n                localSide: localSide\r\n            };\r\n            return [\r\n                new CollisionContact(circle, edge, normal.scale(separation), normal, normal.perpendicular(), [side.end], [localSide.end], info)\r\n            ];\r\n        }\r\n        // Otherwise potential region AB collision (circle is in the middle of the edge between the beginning and end)\r\n        const den = e.dot(e);\r\n        const pointOnEdge = edgeWorld.begin\r\n            .scale(u)\r\n            .add(edgeWorld.end.scale(v))\r\n            .scale(1 / den);\r\n        const d = cc.sub(pointOnEdge);\r\n        const dd = d.dot(d);\r\n        if (dd > circle.radius * circle.radius) {\r\n            return []; // no collision\r\n        }\r\n        let normal = e.perpendicular();\r\n        // flip correct direction\r\n        if (normal.dot(cc.sub(edgeWorld.begin)) < 0) {\r\n            normal.x = -normal.x;\r\n            normal.y = -normal.y;\r\n        }\r\n        normal = normal.normalize();\r\n        const separation = circle.radius - Math.sqrt(dd);\r\n        const mvt = normal.scale(separation);\r\n        const info = {\r\n            collider: circle,\r\n            separation: separation,\r\n            axis: normal,\r\n            point: pointOnEdge,\r\n            side: side,\r\n            localSide: localSide\r\n        };\r\n        return [\r\n            new CollisionContact(circle, edge, mvt, normal.negate(), normal.negate().perpendicular(), [pointOnEdge], [pointOnEdge.sub(edge.worldPos)], info)\r\n        ];\r\n    },\r\n    CollideEdgeEdge() {\r\n        // Edge-edge collision doesn't make sense\r\n        return [];\r\n    },\r\n    CollidePolygonEdge(polygon, edge) {\r\n        var _a;\r\n        const pc = polygon.center;\r\n        const ec = edge.center;\r\n        const dir = ec.sub(pc).normalize();\r\n        // build a temporary polygon from the edge to use SAT\r\n        const linePoly = new PolygonCollider({\r\n            points: [edge.begin, edge.end, edge.end.add(dir.scale(100)), edge.begin.add(dir.scale(100))],\r\n            offset: edge.offset\r\n        });\r\n        linePoly.owner = edge.owner;\r\n        const tx = (_a = edge.owner) === null || _a === void 0 ? void 0 : _a.get(TransformComponent);\r\n        if (tx) {\r\n            linePoly.update(edge.owner.get(TransformComponent));\r\n        }\r\n        // Gross hack but poly-poly works well\r\n        const contact = this.CollidePolygonPolygon(polygon, linePoly);\r\n        if (contact.length) {\r\n            // Fudge the contact back to edge\r\n            contact[0].colliderB = edge;\r\n            contact[0].id = Pair.calculatePairHash(polygon.id, edge.id);\r\n            // contact[0].info.collider\r\n        }\r\n        return contact;\r\n    },\r\n    CollidePolygonPolygon(polyA, polyB) {\r\n        var _a, _b, _c, _d;\r\n        // Multi contact from SAT\r\n        // https://gamedev.stackexchange.com/questions/111390/multiple-contacts-for-sat-collision-detection\r\n        // do a SAT test to find a min axis if it exists\r\n        const separationA = SeparatingAxis.findPolygonPolygonSeparation(polyA, polyB);\r\n        // If there is no overlap from boxA's perspective we can end early\r\n        if (separationA.separation > 0) {\r\n            return [];\r\n        }\r\n        const separationB = SeparatingAxis.findPolygonPolygonSeparation(polyB, polyA);\r\n        // If there is no overlap from boxB's perspective exit now\r\n        if (separationB.separation > 0) {\r\n            return [];\r\n        }\r\n        // Separations are both negative, we want to pick the least negative (minimal movement)\r\n        const separation = separationA.separation > separationB.separation ? separationA : separationB;\r\n        // The incident side is the most opposite from the axes of collision on the other collider\r\n        const other = separation.collider === polyA ? polyB : polyA;\r\n        const incident = other.findSide(separation.axis.negate());\r\n        // Clip incident side by the perpendicular lines at each end of the reference side\r\n        // https://en.wikipedia.org/wiki/Sutherland%E2%80%93Hodgman_algorithm\r\n        const reference = separation.side;\r\n        const refDir = reference.dir().normalize();\r\n        // Find our contact points by clipping the incident by the collision side\r\n        const clipRight = incident.clip(refDir.negate(), -refDir.dot(reference.begin));\r\n        let clipLeft = null;\r\n        if (clipRight) {\r\n            clipLeft = clipRight.clip(refDir, refDir.dot(reference.end));\r\n        }\r\n        // If there is no left there is no collision\r\n        if (clipLeft) {\r\n            // We only want clip points below the reference edge, discard the others\r\n            const points = clipLeft.getPoints().filter((p) => {\r\n                return reference.below(p);\r\n            });\r\n            let normal = separation.axis;\r\n            let tangent = normal.perpendicular();\r\n            // Point Contact A -> B\r\n            if (polyB.center.sub(polyA.center).dot(normal) < 0) {\r\n                normal = normal.negate();\r\n                tangent = normal.perpendicular();\r\n            }\r\n            // Points are clipped from incident which is the other collider\r\n            // Store those as locals\r\n            let localPoints = [];\r\n            if (separation.collider === polyA) {\r\n                const xf = (_b = (_a = polyB.owner) === null || _a === void 0 ? void 0 : _a.get(TransformComponent)) !== null && _b !== void 0 ? _b : new TransformComponent();\r\n                localPoints = points.map((p) => xf.applyInverse(p));\r\n            }\r\n            else {\r\n                const xf = (_d = (_c = polyA.owner) === null || _c === void 0 ? void 0 : _c.get(TransformComponent)) !== null && _d !== void 0 ? _d : new TransformComponent();\r\n                localPoints = points.map((p) => xf.applyInverse(p));\r\n            }\r\n            return [new CollisionContact(polyA, polyB, normal.scale(-separation.separation), normal, tangent, points, localPoints, separation)];\r\n        }\r\n        return [];\r\n    },\r\n    FindContactSeparation(contact, localPoint) {\r\n        var _a, _b, _c, _d;\r\n        const shapeA = contact.colliderA;\r\n        const txA = (_b = (_a = contact.colliderA.owner) === null || _a === void 0 ? void 0 : _a.get(TransformComponent)) !== null && _b !== void 0 ? _b : new TransformComponent();\r\n        const shapeB = contact.colliderB;\r\n        const txB = (_d = (_c = contact.colliderB.owner) === null || _c === void 0 ? void 0 : _c.get(TransformComponent)) !== null && _d !== void 0 ? _d : new TransformComponent();\r\n        // both are circles\r\n        if (shapeA instanceof CircleCollider && shapeB instanceof CircleCollider) {\r\n            const combinedRadius = shapeA.radius + shapeB.radius;\r\n            const distance = txA.pos.distance(txB.pos);\r\n            const separation = combinedRadius - distance;\r\n            return -separation;\r\n        }\r\n        // both are polygons\r\n        if (shapeA instanceof PolygonCollider && shapeB instanceof PolygonCollider) {\r\n            if (contact.info.localSide) {\r\n                let side;\r\n                let worldPoint;\r\n                if (contact.info.collider === shapeA) {\r\n                    side = new Line(txA.apply(contact.info.localSide.begin), txA.apply(contact.info.localSide.end));\r\n                    worldPoint = txB.apply(localPoint);\r\n                }\r\n                else {\r\n                    side = new Line(txB.apply(contact.info.localSide.begin), txB.apply(contact.info.localSide.end));\r\n                    worldPoint = txA.apply(localPoint);\r\n                }\r\n                return side.distanceToPoint(worldPoint, true);\r\n            }\r\n        }\r\n        // polygon v circle\r\n        if ((shapeA instanceof PolygonCollider && shapeB instanceof CircleCollider) ||\r\n            (shapeB instanceof PolygonCollider && shapeA instanceof CircleCollider)) {\r\n            const worldPoint = txA.apply(localPoint);\r\n            if (contact.info.side) {\r\n                return contact.info.side.distanceToPoint(worldPoint, true);\r\n            }\r\n        }\r\n        // polygon v edge\r\n        if ((shapeA instanceof EdgeCollider && shapeB instanceof PolygonCollider) ||\r\n            (shapeB instanceof EdgeCollider && shapeA instanceof PolygonCollider)) {\r\n            let worldPoint;\r\n            if (contact.info.collider === shapeA) {\r\n                worldPoint = txB.apply(localPoint);\r\n            }\r\n            else {\r\n                worldPoint = txA.apply(localPoint);\r\n            }\r\n            if (contact.info.side) {\r\n                return contact.info.side.distanceToPoint(worldPoint, true);\r\n            }\r\n        }\r\n        // circle v edge\r\n        if ((shapeA instanceof CircleCollider && shapeB instanceof EdgeCollider) ||\r\n            (shapeB instanceof CircleCollider && shapeA instanceof EdgeCollider)) {\r\n            // Local point is always on the edge which is always shapeB\r\n            const worldPoint = txB.apply(localPoint);\r\n            let circlePoint;\r\n            if (shapeA instanceof CircleCollider) {\r\n                circlePoint = shapeA.getFurthestPoint(contact.normal);\r\n            }\r\n            const dist = worldPoint.distance(circlePoint);\r\n            if (contact.info.side) {\r\n                return dist > 0 ? -dist : 0;\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n};\r\n\n;// CONCATENATED MODULE: ./Collision/Colliders/EdgeCollider.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Edge is a single line collider to create collisions with a single line.\r\n */\r\nclass EdgeCollider extends Collider {\r\n    constructor(options) {\r\n        var _a;\r\n        super();\r\n        this.begin = options.begin || Vector.Zero;\r\n        this.end = options.end || Vector.Zero;\r\n        this.offset = (_a = options.offset) !== null && _a !== void 0 ? _a : Vector.Zero;\r\n    }\r\n    /**\r\n     * Returns a clone of this Edge, not associated with any collider\r\n     */\r\n    clone() {\r\n        return new EdgeCollider({\r\n            begin: this.begin.clone(),\r\n            end: this.end.clone()\r\n        });\r\n    }\r\n    get worldPos() {\r\n        var _a;\r\n        const tx = this._transform;\r\n        return (_a = tx === null || tx === void 0 ? void 0 : tx.globalPos.add(this.offset)) !== null && _a !== void 0 ? _a : this.offset;\r\n    }\r\n    /**\r\n     * Get the center of the collision area in world coordinates\r\n     */\r\n    get center() {\r\n        const pos = this.begin.average(this.end).add(this._getBodyPos());\r\n        return pos;\r\n    }\r\n    _getBodyPos() {\r\n        var _a;\r\n        const tx = this._transform;\r\n        const bodyPos = (_a = tx === null || tx === void 0 ? void 0 : tx.globalPos) !== null && _a !== void 0 ? _a : Vector.Zero;\r\n        return bodyPos;\r\n    }\r\n    _getTransformedBegin() {\r\n        const tx = this._transform;\r\n        const angle = tx ? tx.globalRotation : 0;\r\n        return this.begin.rotate(angle).add(this._getBodyPos());\r\n    }\r\n    _getTransformedEnd() {\r\n        const tx = this._transform;\r\n        const angle = tx ? tx.globalRotation : 0;\r\n        return this.end.rotate(angle).add(this._getBodyPos());\r\n    }\r\n    /**\r\n     * Returns the slope of the line in the form of a vector\r\n     */\r\n    getSlope() {\r\n        const begin = this._getTransformedBegin();\r\n        const end = this._getTransformedEnd();\r\n        const distance = begin.distance(end);\r\n        return end.sub(begin).scale(1 / distance);\r\n    }\r\n    /**\r\n     * Returns the length of the line segment in pixels\r\n     */\r\n    getLength() {\r\n        const begin = this._getTransformedBegin();\r\n        const end = this._getTransformedEnd();\r\n        const distance = begin.distance(end);\r\n        return distance;\r\n    }\r\n    /**\r\n     * Tests if a point is contained in this collision area\r\n     */\r\n    contains() {\r\n        return false;\r\n    }\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    rayCast(ray, max = Infinity) {\r\n        const numerator = this._getTransformedBegin().sub(ray.pos);\r\n        // Test is line and ray are parallel and non intersecting\r\n        if (ray.dir.cross(this.getSlope()) === 0 && numerator.cross(ray.dir) !== 0) {\r\n            return null;\r\n        }\r\n        // Lines are parallel\r\n        const divisor = ray.dir.cross(this.getSlope());\r\n        if (divisor === 0) {\r\n            return null;\r\n        }\r\n        const t = numerator.cross(this.getSlope()) / divisor;\r\n        if (t >= 0 && t <= max) {\r\n            const u = numerator.cross(ray.dir) / divisor / this.getLength();\r\n            if (u >= 0 && u <= 1) {\r\n                return ray.getPoint(t);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * Returns the closes line between this and another collider, from this -> collider\r\n     * @param shape\r\n     */\r\n    getClosestLineBetween(shape) {\r\n        if (shape instanceof CircleCollider) {\r\n            return ClosestLineJumpTable.CircleEdgeClosestLine(shape, this);\r\n        }\r\n        else if (shape instanceof PolygonCollider) {\r\n            return ClosestLineJumpTable.PolygonEdgeClosestLine(shape, this).flip();\r\n        }\r\n        else if (shape instanceof EdgeCollider) {\r\n            return ClosestLineJumpTable.EdgeEdgeClosestLine(this, shape);\r\n        }\r\n        else {\r\n            throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof shape}`);\r\n        }\r\n    }\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    collide(shape) {\r\n        if (shape instanceof CircleCollider) {\r\n            return CollisionJumpTable.CollideCircleEdge(shape, this);\r\n        }\r\n        else if (shape instanceof PolygonCollider) {\r\n            return CollisionJumpTable.CollidePolygonEdge(shape, this);\r\n        }\r\n        else if (shape instanceof EdgeCollider) {\r\n            return CollisionJumpTable.CollideEdgeEdge();\r\n        }\r\n        else {\r\n            throw new Error(`Edge could not collide with unknown CollisionShape ${typeof shape}`);\r\n        }\r\n    }\r\n    /**\r\n     * Find the point on the collider furthest in the direction specified\r\n     */\r\n    getFurthestPoint(direction) {\r\n        const transformedBegin = this._getTransformedBegin();\r\n        const transformedEnd = this._getTransformedEnd();\r\n        if (direction.dot(transformedBegin) > 0) {\r\n            return transformedBegin;\r\n        }\r\n        else {\r\n            return transformedEnd;\r\n        }\r\n    }\r\n    _boundsFromBeginEnd(begin, end, padding = 10) {\r\n        // A perfectly vertical or horizontal edge would have a bounds 0 width or height\r\n        // this causes problems for the collision system so we give them some padding\r\n        return new BoundingBox(Math.min(begin.x, end.x) - padding, Math.min(begin.y, end.y) - padding, Math.max(begin.x, end.x) + padding, Math.max(begin.y, end.y) + padding);\r\n    }\r\n    /**\r\n     * Get the axis aligned bounding box for the edge collider in world space\r\n     */\r\n    get bounds() {\r\n        const transformedBegin = this._getTransformedBegin();\r\n        const transformedEnd = this._getTransformedEnd();\r\n        return this._boundsFromBeginEnd(transformedBegin, transformedEnd);\r\n    }\r\n    /**\r\n     * Get the axis aligned bounding box for the edge collider in local space\r\n     */\r\n    get localBounds() {\r\n        return this._boundsFromBeginEnd(this.begin, this.end);\r\n    }\r\n    /**\r\n     * Returns this edge represented as a line in world coordinates\r\n     */\r\n    asLine() {\r\n        return new Line(this._getTransformedBegin(), this._getTransformedEnd());\r\n    }\r\n    /**\r\n     * Return this edge as a line in local line coordinates (relative to the position)\r\n     */\r\n    asLocalLine() {\r\n        return new Line(this.begin, this.end);\r\n    }\r\n    /**\r\n     * Get the axis associated with the edge\r\n     */\r\n    get axes() {\r\n        const e = this._getTransformedEnd().sub(this._getTransformedBegin());\r\n        const edgeNormal = e.normal();\r\n        const axes = [];\r\n        axes.push(edgeNormal);\r\n        axes.push(edgeNormal.negate());\r\n        axes.push(edgeNormal.normal());\r\n        axes.push(edgeNormal.normal().negate());\r\n        return axes;\r\n    }\r\n    /**\r\n     * Get the moment of inertia for an edge\r\n     * https://en.wikipedia.org/wiki/List_of_moments_of_inertia\r\n     */\r\n    getInertia(mass) {\r\n        const length = this.end.sub(this.begin).distance() / 2;\r\n        return mass * length * length;\r\n    }\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    update(transform) {\r\n        this._transform = transform;\r\n    }\r\n    /**\r\n     * Project the edge along a specified axis\r\n     */\r\n    project(axis) {\r\n        const scalars = [];\r\n        const points = [this._getTransformedBegin(), this._getTransformedEnd()];\r\n        const len = points.length;\r\n        for (let i = 0; i < len; i++) {\r\n            scalars.push(points[i].dot(axis));\r\n        }\r\n        return new Projection(Math.min.apply(Math, scalars), Math.max.apply(Math, scalars));\r\n    }\r\n    draw(ctx, color = Color.Green, pos = Vector.Zero) {\r\n        const begin = this.begin.add(pos);\r\n        const end = this.end.add(pos);\r\n        ctx.strokeStyle = color.toString();\r\n        ctx.beginPath();\r\n        ctx.moveTo(begin.x, begin.y);\r\n        ctx.lineTo(end.x, end.y);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n    }\r\n    debug(ex, color) {\r\n        const begin = this._getTransformedBegin();\r\n        const end = this._getTransformedEnd();\r\n        ex.drawLine(begin, end, color, 2);\r\n        ex.drawCircle(begin, 2, color);\r\n        ex.drawCircle(end, 2, color);\r\n    }\r\n    /* istanbul ignore next */\r\n    debugDraw(ctx, color = Color.Red) {\r\n        const begin = this._getTransformedBegin();\r\n        const end = this._getTransformedEnd();\r\n        ctx.strokeStyle = color.toString();\r\n        ctx.beginPath();\r\n        ctx.moveTo(begin.x, begin.y);\r\n        ctx.lineTo(end.x, end.y);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Colliders/PolygonCollider.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Polygon collider for detecting collisions\r\n */\r\nclass PolygonCollider extends Collider {\r\n    constructor(options) {\r\n        var _a;\r\n        super();\r\n        this._transformedPoints = [];\r\n        this._axes = [];\r\n        this._sides = [];\r\n        this._localSides = [];\r\n        this.offset = (_a = options.offset) !== null && _a !== void 0 ? _a : Vector.Zero;\r\n        const winding = !!options.clockwiseWinding;\r\n        this.points = (winding ? options.points.reverse() : options.points) || [];\r\n        // calculate initial transformation\r\n        this._calculateTransformation();\r\n    }\r\n    /**\r\n     * Returns a clone of this ConvexPolygon, not associated with any collider\r\n     */\r\n    clone() {\r\n        return new PolygonCollider({\r\n            offset: this.offset.clone(),\r\n            points: this.points.map((p) => p.clone())\r\n        });\r\n    }\r\n    /**\r\n     * Returns the world position of the collider, which is the current body transform plus any defined offset\r\n     */\r\n    get worldPos() {\r\n        if (this._transform) {\r\n            return this._transform.pos.add(this.offset);\r\n        }\r\n        return this.offset;\r\n    }\r\n    /**\r\n     * Get the center of the collider in world coordinates\r\n     */\r\n    get center() {\r\n        return this.bounds.center;\r\n    }\r\n    /**\r\n     * Calculates the underlying transformation from the body relative space to world space\r\n     */\r\n    _calculateTransformation() {\r\n        const transform = this._transform;\r\n        const pos = transform ? transform.globalPos.add(this.offset) : this.offset;\r\n        const angle = transform ? transform.globalRotation : 0;\r\n        const scale = transform ? transform.globalScale : Vector.One;\r\n        const len = this.points.length;\r\n        this._transformedPoints.length = 0; // clear out old transform\r\n        for (let i = 0; i < len; i++) {\r\n            this._transformedPoints[i] = this.points[i].scale(scale).rotate(angle).add(pos);\r\n        }\r\n    }\r\n    /**\r\n     * Gets the points that make up the polygon in world space, from actor relative space (if specified)\r\n     */\r\n    getTransformedPoints() {\r\n        this._calculateTransformation();\r\n        return this._transformedPoints;\r\n    }\r\n    /**\r\n     * Gets the sides of the polygon in world space\r\n     */\r\n    getSides() {\r\n        if (this._sides.length) {\r\n            return this._sides;\r\n        }\r\n        const lines = [];\r\n        const points = this.getTransformedPoints();\r\n        const len = points.length;\r\n        for (let i = 0; i < len; i++) {\r\n            // This winding is important\r\n            lines.push(new Line(points[i], points[(i + 1) % len]));\r\n        }\r\n        this._sides = lines;\r\n        return this._sides;\r\n    }\r\n    /**\r\n     * Returns the local coordinate space sides\r\n     */\r\n    getLocalSides() {\r\n        if (this._localSides.length) {\r\n            return this._localSides;\r\n        }\r\n        const lines = [];\r\n        const points = this.points;\r\n        const len = points.length;\r\n        for (let i = 0; i < len; i++) {\r\n            // This winding is important\r\n            lines.push(new Line(points[i], points[(i + 1) % len]));\r\n        }\r\n        this._localSides = lines;\r\n        return this._localSides;\r\n    }\r\n    /**\r\n     * Given a direction vector find the world space side that is most in that direction\r\n     * @param direction\r\n     */\r\n    findSide(direction) {\r\n        const sides = this.getSides();\r\n        let bestSide = sides[0];\r\n        let maxDistance = -Number.MAX_VALUE;\r\n        for (let side = 0; side < sides.length; side++) {\r\n            const currentSide = sides[side];\r\n            const sideNormal = currentSide.normal();\r\n            const mostDirection = sideNormal.dot(direction);\r\n            if (mostDirection > maxDistance) {\r\n                bestSide = currentSide;\r\n                maxDistance = mostDirection;\r\n            }\r\n        }\r\n        return bestSide;\r\n    }\r\n    /**\r\n     * Given a direction vector find the local space side that is most in that direction\r\n     * @param direction\r\n     */\r\n    findLocalSide(direction) {\r\n        const sides = this.getLocalSides();\r\n        let bestSide = sides[0];\r\n        let maxDistance = -Number.MAX_VALUE;\r\n        for (let side = 0; side < sides.length; side++) {\r\n            const currentSide = sides[side];\r\n            const sideNormal = currentSide.normal();\r\n            const mostDirection = sideNormal.dot(direction);\r\n            if (mostDirection > maxDistance) {\r\n                bestSide = currentSide;\r\n                maxDistance = mostDirection;\r\n            }\r\n        }\r\n        return bestSide;\r\n    }\r\n    /**\r\n     * Get the axis associated with the convex polygon\r\n     */\r\n    get axes() {\r\n        if (this._axes.length) {\r\n            return this._axes;\r\n        }\r\n        const axes = this.getSides().map((s) => s.normal());\r\n        this._axes = axes;\r\n        return this._axes;\r\n    }\r\n    update(transform) {\r\n        this._transform = transform;\r\n        this._sides.length = 0;\r\n        this._localSides.length = 0;\r\n        this._axes.length = 0;\r\n        this._transformedPoints.length = 0;\r\n        this.getTransformedPoints();\r\n        this.getSides();\r\n        this.getLocalSides();\r\n    }\r\n    /**\r\n     * Tests if a point is contained in this collider in world space\r\n     */\r\n    contains(point) {\r\n        // Always cast to the right, as long as we cast in a consistent fixed direction we\r\n        // will be fine\r\n        const testRay = new Ray(point, new Vector(1, 0));\r\n        const intersectCount = this.getSides().reduce(function (accum, side) {\r\n            if (testRay.intersect(side) >= 0) {\r\n                return accum + 1;\r\n            }\r\n            return accum;\r\n        }, 0);\r\n        if (intersectCount % 2 === 0) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    getClosestLineBetween(collider) {\r\n        if (collider instanceof CircleCollider) {\r\n            return ClosestLineJumpTable.PolygonCircleClosestLine(this, collider);\r\n        }\r\n        else if (collider instanceof PolygonCollider) {\r\n            return ClosestLineJumpTable.PolygonPolygonClosestLine(this, collider);\r\n        }\r\n        else if (collider instanceof EdgeCollider) {\r\n            return ClosestLineJumpTable.PolygonEdgeClosestLine(this, collider);\r\n        }\r\n        else {\r\n            throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof collider}`);\r\n        }\r\n    }\r\n    /**\r\n     * Returns a collision contact if the 2 colliders collide, otherwise collide will\r\n     * return null.\r\n     * @param collider\r\n     */\r\n    collide(collider) {\r\n        if (collider instanceof CircleCollider) {\r\n            return CollisionJumpTable.CollideCirclePolygon(collider, this);\r\n        }\r\n        else if (collider instanceof PolygonCollider) {\r\n            return CollisionJumpTable.CollidePolygonPolygon(this, collider);\r\n        }\r\n        else if (collider instanceof EdgeCollider) {\r\n            return CollisionJumpTable.CollidePolygonEdge(this, collider);\r\n        }\r\n        else {\r\n            throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof collider}`);\r\n        }\r\n    }\r\n    /**\r\n     * Find the point on the collider furthest in the direction specified\r\n     */\r\n    getFurthestPoint(direction) {\r\n        const pts = this.getTransformedPoints();\r\n        let furthestPoint = null;\r\n        let maxDistance = -Number.MAX_VALUE;\r\n        for (let i = 0; i < pts.length; i++) {\r\n            const distance = direction.dot(pts[i]);\r\n            if (distance > maxDistance) {\r\n                maxDistance = distance;\r\n                furthestPoint = pts[i];\r\n            }\r\n        }\r\n        return furthestPoint;\r\n    }\r\n    /**\r\n     * Find the local point on the collider furthest in the direction specified\r\n     * @param direction\r\n     */\r\n    getFurthestLocalPoint(direction) {\r\n        const pts = this.points;\r\n        let furthestPoint = pts[0];\r\n        let maxDistance = -Number.MAX_VALUE;\r\n        for (let i = 0; i < pts.length; i++) {\r\n            const distance = direction.dot(pts[i]);\r\n            if (distance > maxDistance) {\r\n                maxDistance = distance;\r\n                furthestPoint = pts[i];\r\n            }\r\n        }\r\n        return furthestPoint;\r\n    }\r\n    /**\r\n     * Finds the closes face to the point using perpendicular distance\r\n     * @param point point to test against polygon\r\n     */\r\n    getClosestFace(point) {\r\n        const sides = this.getSides();\r\n        let min = Number.POSITIVE_INFINITY;\r\n        let faceIndex = -1;\r\n        let distance = -1;\r\n        for (let i = 0; i < sides.length; i++) {\r\n            const dist = sides[i].distanceToPoint(point);\r\n            if (dist < min) {\r\n                min = dist;\r\n                faceIndex = i;\r\n                distance = dist;\r\n            }\r\n        }\r\n        if (faceIndex !== -1) {\r\n            return {\r\n                distance: sides[faceIndex].normal().scale(distance),\r\n                face: sides[faceIndex]\r\n            };\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * Get the axis aligned bounding box for the polygon collider in world coordinates\r\n     */\r\n    get bounds() {\r\n        var _a, _b, _c;\r\n        const tx = this._transform;\r\n        const scale = (_a = tx === null || tx === void 0 ? void 0 : tx.globalScale) !== null && _a !== void 0 ? _a : Vector.One;\r\n        const rotation = (_b = tx === null || tx === void 0 ? void 0 : tx.globalRotation) !== null && _b !== void 0 ? _b : 0;\r\n        const pos = ((_c = tx === null || tx === void 0 ? void 0 : tx.globalPos) !== null && _c !== void 0 ? _c : Vector.Zero).add(this.offset);\r\n        return this.localBounds.scale(scale).rotate(rotation).translate(pos);\r\n    }\r\n    /**\r\n     * Get the axis aligned bounding box for the polygon collider in local coordinates\r\n     */\r\n    get localBounds() {\r\n        return BoundingBox.fromPoints(this.points);\r\n    }\r\n    /**\r\n     * Get the moment of inertia for an arbitrary polygon\r\n     * https://en.wikipedia.org/wiki/List_of_moments_of_inertia\r\n     */\r\n    getInertia(mass) {\r\n        let numerator = 0;\r\n        let denominator = 0;\r\n        for (let i = 0; i < this.points.length; i++) {\r\n            const iplusone = (i + 1) % this.points.length;\r\n            const crossTerm = this.points[iplusone].cross(this.points[i]);\r\n            numerator +=\r\n                crossTerm *\r\n                    (this.points[i].dot(this.points[i]) + this.points[i].dot(this.points[iplusone]) + this.points[iplusone].dot(this.points[iplusone]));\r\n            denominator += crossTerm;\r\n        }\r\n        return (mass / 6) * (numerator / denominator);\r\n    }\r\n    /**\r\n     * Casts a ray into the polygon and returns a vector representing the point of contact (in world space) or null if no collision.\r\n     */\r\n    rayCast(ray, max = Infinity) {\r\n        // find the minimum contact time greater than 0\r\n        // contact times less than 0 are behind the ray and we don't want those\r\n        const sides = this.getSides();\r\n        const len = sides.length;\r\n        let minContactTime = Number.MAX_VALUE;\r\n        let contactIndex = -1;\r\n        for (let i = 0; i < len; i++) {\r\n            const contactTime = ray.intersect(sides[i]);\r\n            if (contactTime >= 0 && contactTime < minContactTime && contactTime <= max) {\r\n                minContactTime = contactTime;\r\n                contactIndex = i;\r\n            }\r\n        }\r\n        // contact was found\r\n        if (contactIndex >= 0) {\r\n            return ray.getPoint(minContactTime);\r\n        }\r\n        // no contact found\r\n        return null;\r\n    }\r\n    /**\r\n     * Project the edges of the polygon along a specified axis\r\n     */\r\n    project(axis) {\r\n        const points = this.getTransformedPoints();\r\n        const len = points.length;\r\n        let min = Number.MAX_VALUE;\r\n        let max = -Number.MAX_VALUE;\r\n        for (let i = 0; i < len; i++) {\r\n            const scalar = points[i].dot(axis);\r\n            min = Math.min(min, scalar);\r\n            max = Math.max(max, scalar);\r\n        }\r\n        return new Projection(min, max);\r\n    }\r\n    draw(ctx, color = Color.Green, pos = Vector.Zero) {\r\n        const effectiveOffset = pos.add(this.offset);\r\n        ctx.beginPath();\r\n        ctx.fillStyle = color.toString();\r\n        const firstPoint = this.points[0].add(effectiveOffset);\r\n        ctx.moveTo(firstPoint.x, firstPoint.y);\r\n        // Points are relative\r\n        this.points\r\n            .map((p) => p.add(effectiveOffset))\r\n            .forEach(function (point) {\r\n            ctx.lineTo(point.x, point.y);\r\n        });\r\n        ctx.lineTo(firstPoint.x, firstPoint.y);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    }\r\n    debug(ex, color) {\r\n        const firstPoint = this.getTransformedPoints()[0];\r\n        const points = [firstPoint, ...this.getTransformedPoints(), firstPoint];\r\n        for (let i = 0; i < points.length - 1; i++) {\r\n            ex.drawLine(points[i], points[i + 1], color, 2);\r\n            ex.drawCircle(points[i], 2, color);\r\n            ex.drawCircle(points[i + 1], 2, color);\r\n        }\r\n    }\r\n    /* istanbul ignore next */\r\n    debugDraw(ctx, color = Color.Red) {\r\n        ctx.beginPath();\r\n        ctx.strokeStyle = color.toString();\r\n        // Iterate through the supplied points and construct a 'polygon'\r\n        const firstPoint = this.getTransformedPoints()[0];\r\n        ctx.moveTo(firstPoint.x, firstPoint.y);\r\n        this.getTransformedPoints().forEach(function (point) {\r\n            ctx.lineTo(point.x, point.y);\r\n        });\r\n        ctx.lineTo(firstPoint.x, firstPoint.y);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Colliders/Shape.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Excalibur helper for defining colliders quickly\r\n */\r\nclass Shape {\r\n    /**\r\n     * Creates a box collider, under the hood defines a [[PolygonCollider]] collider\r\n     * @param width Width of the box\r\n     * @param height Height of the box\r\n     * @param anchor Anchor of the box (default (.5, .5)) which positions the box relative to the center of the collider's position\r\n     * @param offset Optional offset relative to the collider in local coordinates\r\n     */\r\n    static Box(width, height, anchor = Vector.Half, offset = Vector.Zero) {\r\n        return new PolygonCollider({\r\n            points: new BoundingBox(-width * anchor.x, -height * anchor.y, width - width * anchor.x, height - height * anchor.y).getPoints(),\r\n            offset: offset\r\n        });\r\n    }\r\n    /**\r\n     * Creates a new [[PolygonCollider|arbitrary polygon]] collider\r\n     *\r\n     * PolygonColliders are useful for creating convex polygon shapes\r\n     * @param points Points specified in counter clockwise\r\n     * @param clockwiseWinding Optionally changed the winding of points, by default false meaning counter-clockwise winding.\r\n     * @param offset Optional offset relative to the collider in local coordinates\r\n     */\r\n    static Polygon(points, clockwiseWinding = false, offset = Vector.Zero) {\r\n        return new PolygonCollider({\r\n            points: points,\r\n            offset: offset,\r\n            clockwiseWinding: clockwiseWinding\r\n        });\r\n    }\r\n    /**\r\n     * Creates a new [[CircleCollider|circle]] collider\r\n     *\r\n     * Circle colliders are useful for balls, or to make collisions more forgiving on sharp edges\r\n     * @param radius Radius of the circle collider\r\n     * @param offset Optional offset relative to the collider in local coordinates\r\n     */\r\n    static Circle(radius, offset = Vector.Zero) {\r\n        return new CircleCollider({\r\n            radius: radius,\r\n            offset: offset\r\n        });\r\n    }\r\n    /**\r\n     * Creates a new [[EdgeCollider|edge]] collider\r\n     *\r\n     * Edge colliders are useful for  floors, walls, and other barriers\r\n     * @param begin Beginning of the edge in local coordinates to the collider\r\n     * @param end Ending of the edge in local coordinates to the collider\r\n     */\r\n    static Edge(begin, end) {\r\n        return new EdgeCollider({\r\n            begin: begin,\r\n            end: end\r\n        });\r\n    }\r\n    /**\r\n     * Creates a new capsule shaped [[CompositeCollider]] using 2 circles and a box\r\n     *\r\n     * Capsule colliders are useful for platformers with incline or jagged floors to have a smooth\r\n     * player experience.\r\n     *\r\n     * @param width\r\n     * @param height\r\n     * @param offset Optional offset\r\n     */\r\n    static Capsule(width, height, offset = Vector.Zero) {\r\n        const logger = Logger.getInstance();\r\n        if (width === height) {\r\n            logger.warn('A capsule collider with equal width and height is a circle, consider using a ex.Shape.Circle or ex.CircleCollider');\r\n        }\r\n        const vertical = height >= width;\r\n        if (vertical) {\r\n            // height > width, if equal maybe use a circle\r\n            const capsule = new CompositeCollider([\r\n                Shape.Circle(width / 2, vec(0, -height / 2 + width / 2).add(offset)),\r\n                Shape.Box(width, height - width, Vector.Half, offset),\r\n                Shape.Circle(width / 2, vec(0, height / 2 - width / 2).add(offset))\r\n            ]);\r\n            return capsule;\r\n        }\r\n        else {\r\n            // width > height, if equal maybe use a circle\r\n            const capsule = new CompositeCollider([\r\n                Shape.Circle(height / 2, vec(-width / 2 + height / 2, 0).add(offset)),\r\n                Shape.Box(width - height, height, Vector.Half, offset),\r\n                Shape.Circle(height / 2, vec(width / 2 - height / 2, 0).add(offset))\r\n            ]);\r\n            return capsule;\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/ColliderComponent.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass ColliderComponent extends Component {\r\n    constructor(collider) {\r\n        super();\r\n        this.type = 'ex.collider';\r\n        this.events = new EventDispatcher();\r\n        /**\r\n         * Observable that notifies when a collider is added to the body\r\n         */\r\n        this.$colliderAdded = new Observable();\r\n        /**\r\n         * Observable that notifies when a collider is removed from the body\r\n         */\r\n        this.$colliderRemoved = new Observable();\r\n        this.set(collider);\r\n    }\r\n    /**\r\n     * Get the current collider geometry\r\n     */\r\n    get() {\r\n        return this._collider;\r\n    }\r\n    /**\r\n     * Set the collider geometry\r\n     * @param collider\r\n     * @returns the collider you set\r\n     */\r\n    set(collider) {\r\n        this.clear();\r\n        if (collider) {\r\n            this._collider = collider;\r\n            this._collider.owner = this.owner;\r\n            this.events.wire(collider.events);\r\n            this.$colliderAdded.notifyAll(collider);\r\n            this.update();\r\n        }\r\n        return collider;\r\n    }\r\n    /**\r\n     * Remove collider geometry from collider component\r\n     */\r\n    clear() {\r\n        if (this._collider) {\r\n            this.events.unwire(this._collider.events);\r\n            this.$colliderRemoved.notifyAll(this._collider);\r\n            this._collider.owner = null;\r\n            this._collider = null;\r\n        }\r\n    }\r\n    /**\r\n     * Return world space bounds\r\n     */\r\n    get bounds() {\r\n        var _a, _b;\r\n        return (_b = (_a = this._collider) === null || _a === void 0 ? void 0 : _a.bounds) !== null && _b !== void 0 ? _b : new BoundingBox();\r\n    }\r\n    /**\r\n     * Return local space bounds\r\n     */\r\n    get localBounds() {\r\n        var _a, _b;\r\n        return (_b = (_a = this._collider) === null || _a === void 0 ? void 0 : _a.localBounds) !== null && _b !== void 0 ? _b : new BoundingBox();\r\n    }\r\n    /**\r\n     * Update the collider's transformed geometry\r\n     */\r\n    update() {\r\n        var _a;\r\n        const tx = (_a = this.owner) === null || _a === void 0 ? void 0 : _a.get(TransformComponent);\r\n        if (this._collider) {\r\n            this._collider.owner = this.owner;\r\n            if (tx) {\r\n                this._collider.update(tx);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Collide component with another\r\n     * @param other\r\n     */\r\n    collide(other) {\r\n        let colliderA = this._collider;\r\n        let colliderB = other._collider;\r\n        if (!colliderA || !colliderB) {\r\n            return [];\r\n        }\r\n        // If we have a composite lefthand side :(\r\n        // Might bite us, but to avoid updating all the handlers make composite always left side\r\n        let flipped = false;\r\n        if (colliderB instanceof CompositeCollider) {\r\n            colliderA = colliderB;\r\n            colliderB = this._collider;\r\n            flipped = true;\r\n        }\r\n        if (this._collider) {\r\n            const contacts = colliderA.collide(colliderB);\r\n            if (contacts) {\r\n                if (flipped) {\r\n                    contacts.forEach((contact) => {\r\n                        contact.mtv = contact.mtv.negate();\r\n                        contact.normal = contact.normal.negate();\r\n                        contact.tangent = contact.normal.perpendicular();\r\n                        contact.colliderA = this._collider;\r\n                        contact.colliderB = other._collider;\r\n                    });\r\n                }\r\n                return contacts;\r\n            }\r\n            return [];\r\n        }\r\n        return [];\r\n    }\r\n    onAdd(entity) {\r\n        if (this._collider) {\r\n            this.update();\r\n        }\r\n        // Wire up the collider events to the owning entity\r\n        this.events.on('precollision', (evt) => {\r\n            const precollision = evt;\r\n            entity.events.emit('precollision', new PreCollisionEvent(precollision.target.owner, precollision.other.owner, precollision.side, precollision.intersection));\r\n        });\r\n        this.events.on('postcollision', (evt) => {\r\n            const postcollision = evt;\r\n            entity.events.emit('postcollision', new PostCollisionEvent(postcollision.target.owner, postcollision.other.owner, postcollision.side, postcollision.intersection));\r\n        });\r\n        this.events.on('collisionstart', (evt) => {\r\n            const start = evt;\r\n            entity.events.emit('collisionstart', new CollisionStartEvent(start.target.owner, start.other.owner, start.contact));\r\n        });\r\n        this.events.on('collisionend', (evt) => {\r\n            const end = evt;\r\n            entity.events.emit('collisionend', new CollisionEndEvent(end.target.owner, end.other.owner));\r\n        });\r\n    }\r\n    onRemove() {\r\n        this.events.clear();\r\n        this.$colliderRemoved.notifyAll(this._collider);\r\n    }\r\n    /**\r\n     * Sets up a box geometry based on the current bounds of the associated actor of this physics body.\r\n     *\r\n     * If no width/height are specified the body will attempt to use the associated actor's width/height.\r\n     *\r\n     * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\r\n     */\r\n    useBoxCollider(width, height, anchor = Vector.Half, center = Vector.Zero) {\r\n        const collider = Shape.Box(width, height, anchor, center);\r\n        return (this.set(collider));\r\n    }\r\n    /**\r\n     * Sets up a [[PolygonCollider|polygon]] collision geometry based on a list of of points relative\r\n     *  to the anchor of the associated actor\r\n     * of this physics body.\r\n     *\r\n     * Only [convex polygon](https://en.wikipedia.org/wiki/Convex_polygon) definitions are supported.\r\n     *\r\n     * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\r\n     */\r\n    usePolygonCollider(points, center = Vector.Zero) {\r\n        const poly = Shape.Polygon(points, false, center);\r\n        return (this.set(poly));\r\n    }\r\n    /**\r\n     * Sets up a [[Circle|circle collision geometry]] as the only collider with a specified radius in pixels.\r\n     *\r\n     * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\r\n     */\r\n    useCircleCollider(radius, center = Vector.Zero) {\r\n        const collider = Shape.Circle(radius, center);\r\n        return (this.set(collider));\r\n    }\r\n    /**\r\n     * Sets up an [[Edge|edge collision geometry]] with a start point and an end point relative to the anchor of the associated actor\r\n     * of this physics body.\r\n     *\r\n     * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\r\n     */\r\n    useEdgeCollider(begin, end) {\r\n        const collider = Shape.Edge(begin, end);\r\n        return (this.set(collider));\r\n    }\r\n    /**\r\n     * Setups up a [[CompositeCollider]] which can define any arbitrary set of excalibur colliders\r\n     * @param colliders\r\n     */\r\n    useCompositeCollider(colliders) {\r\n        return (this.set(new CompositeCollider(colliders)));\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/BodyComponent.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar DegreeOfFreedom;\r\n(function (DegreeOfFreedom) {\r\n    DegreeOfFreedom[\"Rotation\"] = \"rotation\";\r\n    DegreeOfFreedom[\"X\"] = \"x\";\r\n    DegreeOfFreedom[\"Y\"] = \"y\";\r\n})(DegreeOfFreedom || (DegreeOfFreedom = {}));\r\n/**\r\n * Body describes all the physical properties pos, vel, acc, rotation, angular velocity for the purpose of\r\n * of physics simulation.\r\n */\r\nclass BodyComponent extends Component {\r\n    constructor(options) {\r\n        var _a, _b, _c;\r\n        super();\r\n        this.type = 'ex.body';\r\n        this.dependencies = [TransformComponent, MotionComponent];\r\n        this.id = createId('body', BodyComponent._ID++);\r\n        this.events = new EventDispatcher();\r\n        /**\r\n         * Collision type for the rigidbody physics simulation, by default [[CollisionType.PreventCollision]]\r\n         */\r\n        this.collisionType = CollisionType.PreventCollision;\r\n        /**\r\n         * The collision group for the body's colliders, by default body colliders collide with everything\r\n         */\r\n        this.group = CollisionGroup.All;\r\n        /**\r\n         * The amount of mass the body has\r\n         */\r\n        this.mass = Physics.defaultMass;\r\n        /**\r\n         * Amount of \"motion\" the body has before sleeping. If below [[Physics.sleepEpsilon]] it goes to \"sleep\"\r\n         */\r\n        this.sleepMotion = Physics.sleepEpsilon * 5;\r\n        /**\r\n         * Can this body sleep, by default bodies do not sleep\r\n         */\r\n        this.canSleep = Physics.bodiesCanSleepByDefault;\r\n        this._sleeping = false;\r\n        /**\r\n         * The also known as coefficient of restitution of this actor, represents the amount of energy preserved after collision or the\r\n         * bounciness. If 1, it is 100% bouncy, 0 it completely absorbs.\r\n         */\r\n        this.bounciness = 0.2;\r\n        /**\r\n         * The coefficient of friction on this actor\r\n         */\r\n        this.friction = 0.99;\r\n        /**\r\n         * Should use global gravity [[Physics.gravity]] in it's physics simulation, default is true\r\n         */\r\n        this.useGravity = true;\r\n        /**\r\n         * Degrees of freedom to limit\r\n         */\r\n        this.limitDegreeOfFreedom = [];\r\n        /**\r\n         * The position of the actor last frame (x, y) in pixels\r\n         */\r\n        this.oldPos = new Vector(0, 0);\r\n        /**\r\n         * The velocity of the actor last frame (vx, vy) in pixels/second\r\n         */\r\n        this.oldVel = new Vector(0, 0);\r\n        /**\r\n         * Gets/sets the acceleration of the actor from the last frame. This does not include the global acc [[Physics.acc]].\r\n         */\r\n        this.oldAcc = Vector.Zero;\r\n        /**\r\n         * Gets/sets the rotation of the body from the last frame.\r\n         */\r\n        this.oldRotation = 0; // radians\r\n        /**\r\n         * The scale of the actor last frame\r\n         * @deprecated ex.Body.scale will be removed in v0.25.0\r\n         */\r\n        this.oldScale = Vector.One;\r\n        if (options) {\r\n            this.collisionType = (_a = options.type) !== null && _a !== void 0 ? _a : this.collisionType;\r\n            this.group = (_b = options.group) !== null && _b !== void 0 ? _b : this.group;\r\n            this.useGravity = (_c = options.useGravity) !== null && _c !== void 0 ? _c : this.useGravity;\r\n        }\r\n    }\r\n    /**\r\n     * The inverse mass (1/mass) of the body. If [[CollisionType.Fixed]] this is 0, meaning \"infinite\" mass\r\n     */\r\n    get inverseMass() {\r\n        return this.collisionType === CollisionType.Fixed ? 0 : 1 / this.mass;\r\n    }\r\n    /**\r\n     * Whether this body is sleeping or not\r\n     */\r\n    get sleeping() {\r\n        return this._sleeping;\r\n    }\r\n    /**\r\n     * Set the sleep state of the body\r\n     * @param sleeping\r\n     */\r\n    setSleeping(sleeping) {\r\n        this._sleeping = sleeping;\r\n        if (!sleeping) {\r\n            // Give it a kick to keep it from falling asleep immediately\r\n            this.sleepMotion = Physics.sleepEpsilon * 5;\r\n        }\r\n        else {\r\n            this.vel = Vector.Zero;\r\n            this.acc = Vector.Zero;\r\n            this.angularVelocity = 0;\r\n            this.sleepMotion = 0;\r\n        }\r\n    }\r\n    /**\r\n     * Update body's [[BodyComponent.sleepMotion]] for the purpose of sleeping\r\n     */\r\n    updateMotion() {\r\n        if (this._sleeping) {\r\n            this.setSleeping(true);\r\n        }\r\n        const currentMotion = this.vel.size * this.vel.size + Math.abs(this.angularVelocity * this.angularVelocity);\r\n        const bias = Physics.sleepBias;\r\n        this.sleepMotion = bias * this.sleepMotion + (1 - bias) * currentMotion;\r\n        this.sleepMotion = clamp(this.sleepMotion, 0, 10 * Physics.sleepEpsilon);\r\n        if (this.canSleep && this.sleepMotion < Physics.sleepEpsilon) {\r\n            this.setSleeping(true);\r\n        }\r\n    }\r\n    /**\r\n     * Get the moment of inertia from the [[ColliderComponent]]\r\n     */\r\n    get inertia() {\r\n        // Inertia is a property of the geometry, so this is a little goofy but seems to be okay?\r\n        const collider = this.owner.get(ColliderComponent);\r\n        if (collider === null || collider === void 0 ? void 0 : collider.get()) {\r\n            return collider.get().getInertia(this.mass);\r\n        }\r\n        return 0;\r\n    }\r\n    /**\r\n     * Get the inverse moment of inertial from the [[ColliderComponent]]. If [[CollisionType.Fixed]] this is 0, meaning \"infinite\" mass\r\n     */\r\n    get inverseInertia() {\r\n        return this.collisionType === CollisionType.Fixed ? 0 : 1 / this.inertia;\r\n    }\r\n    /**\r\n     * Returns if the owner is active\r\n     */\r\n    get active() {\r\n        var _a;\r\n        return !!((_a = this.owner) === null || _a === void 0 ? void 0 : _a.active);\r\n    }\r\n    get center() {\r\n        return this.pos;\r\n    }\r\n    get transform() {\r\n        var _a;\r\n        return (_a = this.owner) === null || _a === void 0 ? void 0 : _a.get(TransformComponent);\r\n    }\r\n    get motion() {\r\n        var _a;\r\n        return (_a = this.owner) === null || _a === void 0 ? void 0 : _a.get(MotionComponent);\r\n    }\r\n    /**\r\n     * The (x, y) position of the actor this will be in the middle of the actor if the\r\n     * [[Actor.anchor]] is set to (0.5, 0.5) which is default.\r\n     * If you want the (x, y) position to be the top left of the actor specify an anchor of (0, 0).\r\n     */\r\n    get pos() {\r\n        return this.transform.globalPos;\r\n    }\r\n    set pos(val) {\r\n        this.transform.globalPos = val;\r\n    }\r\n    /**\r\n     * The current velocity vector (vx, vy) of the actor in pixels/second\r\n     */\r\n    get vel() {\r\n        return this.motion.vel;\r\n    }\r\n    set vel(val) {\r\n        this.motion.vel = val;\r\n    }\r\n    /**\r\n     * The current acceleration vector (ax, ay) of the actor in pixels/second/second. An acceleration pointing down such as (0, 100) may\r\n     * be useful to simulate a gravitational effect.\r\n     */\r\n    get acc() {\r\n        return this.motion.acc;\r\n    }\r\n    set acc(val) {\r\n        this.motion.acc = val;\r\n    }\r\n    /**\r\n     * The current torque applied to the actor\r\n     */\r\n    get torque() {\r\n        return this.motion.torque;\r\n    }\r\n    set torque(val) {\r\n        this.motion.torque = val;\r\n    }\r\n    /**\r\n     * The rotation of the body in radians\r\n     */\r\n    get rotation() {\r\n        return this.transform.globalRotation;\r\n    }\r\n    set rotation(val) {\r\n        this.transform.globalRotation = val;\r\n    }\r\n    /**\r\n     * The scale vector of the actor\r\n     * @deprecated ex.Body.scale will be removed in v0.25.0, Use ex.Transform.scale\r\n     */\r\n    get scale() {\r\n        return this.transform.globalScale;\r\n    }\r\n    set scale(val) {\r\n        this.transform.globalScale = val;\r\n    }\r\n    /**\r\n     * The x scalar velocity of the actor in scale/second\r\n     * @deprecated ex.Body.scale will be removed in v0.25.0\r\n     */\r\n    get sx() {\r\n        return this.motion.scaleFactor.x;\r\n    }\r\n    set sx(xFactor) {\r\n        this.motion.scaleFactor.x = xFactor;\r\n    }\r\n    /**\r\n     * The y scalar velocity of the actor in scale/second\r\n     * @deprecated ex.Body.scale will be removed in v0.25.0\r\n     */\r\n    get sy() {\r\n        return this.motion.scaleFactor.y;\r\n    }\r\n    set sy(yFactor) {\r\n        this.motion.scaleFactor.y = yFactor;\r\n    }\r\n    /**\r\n     * The rotational velocity of the actor in radians/second\r\n     * @deprecated\r\n     */\r\n    get rx() {\r\n        return this.motion.angularVelocity;\r\n    }\r\n    /**\r\n     * The rotational velocity of the actor in radians/second\r\n     * @deprecated\r\n     */\r\n    set rx(value) {\r\n        this.motion.angularVelocity = value;\r\n    }\r\n    /**\r\n     * Get the angular velocity in radians/second\r\n     */\r\n    get angularVelocity() {\r\n        return this.motion.angularVelocity;\r\n    }\r\n    /**\r\n     * Set the angular velocity in radians/second\r\n     */\r\n    set angularVelocity(value) {\r\n        this.motion.angularVelocity = value;\r\n    }\r\n    /**\r\n     * Apply a specific impulse to the body\r\n     * @param point\r\n     * @param impulse\r\n     */\r\n    applyImpulse(point, impulse) {\r\n        if (this.collisionType !== CollisionType.Active) {\r\n            return; // only active objects participate in the simulation\r\n        }\r\n        const finalImpulse = impulse.scale(this.inverseMass);\r\n        if (this.limitDegreeOfFreedom.includes(DegreeOfFreedom.X)) {\r\n            finalImpulse.x = 0;\r\n        }\r\n        if (this.limitDegreeOfFreedom.includes(DegreeOfFreedom.Y)) {\r\n            finalImpulse.y = 0;\r\n        }\r\n        this.vel.addEqual(finalImpulse);\r\n        if (!this.limitDegreeOfFreedom.includes(DegreeOfFreedom.Rotation)) {\r\n            const distanceFromCenter = point.sub(this.pos);\r\n            this.angularVelocity += this.inverseInertia * distanceFromCenter.cross(impulse);\r\n        }\r\n    }\r\n    /**\r\n     * Apply only linear impulse to the body\r\n     * @param impulse\r\n     */\r\n    applyLinearImpulse(impulse) {\r\n        if (this.collisionType !== CollisionType.Active) {\r\n            return; // only active objects participate in the simulation\r\n        }\r\n        const finalImpulse = impulse.scale(this.inverseMass);\r\n        if (this.limitDegreeOfFreedom.includes(DegreeOfFreedom.X)) {\r\n            finalImpulse.x = 0;\r\n        }\r\n        if (this.limitDegreeOfFreedom.includes(DegreeOfFreedom.Y)) {\r\n            finalImpulse.y = 0;\r\n        }\r\n        this.vel = this.vel.add(finalImpulse);\r\n    }\r\n    /**\r\n     * Apply only angular impulse to the body\r\n     * @param point\r\n     * @param impulse\r\n     */\r\n    applyAngularImpulse(point, impulse) {\r\n        if (this.collisionType !== CollisionType.Active) {\r\n            return; // only active objects participate in the simulation\r\n        }\r\n        if (!this.limitDegreeOfFreedom.includes(DegreeOfFreedom.Rotation)) {\r\n            const distanceFromCenter = point.sub(this.pos);\r\n            this.angularVelocity += this.inverseInertia * distanceFromCenter.cross(impulse);\r\n        }\r\n    }\r\n    /**\r\n     * Sets the old versions of pos, vel, acc, and scale.\r\n     */\r\n    captureOldTransform() {\r\n        // Capture old values before integration step updates them\r\n        this.oldVel.setTo(this.vel.x, this.vel.y);\r\n        this.oldPos.setTo(this.pos.x, this.pos.y);\r\n        this.oldAcc.setTo(this.acc.x, this.acc.y);\r\n        this.oldScale.setTo(this.scale.x, this.scale.y);\r\n        this.oldRotation = this.rotation;\r\n    }\r\n    /**\r\n     * @deprecated signature will change in v0.26.0\r\n     * @param _ctx\r\n     */\r\n    debugDraw(_ctx) {\r\n        // pass\r\n    }\r\n}\r\nBodyComponent._ID = 0;\r\n\n;// CONCATENATED MODULE: ./Util/CullingBox.ts\n\r\n\r\n/**\r\n * @deprecated Will be removed in 0.26.0\r\n */\r\nclass CullingBox {\r\n    constructor() {\r\n        this._topLeft = new Vector(0, 0);\r\n        this._topRight = new Vector(0, 0);\r\n        this._bottomLeft = new Vector(0, 0);\r\n        this._bottomRight = new Vector(0, 0);\r\n    }\r\n    isSpriteOffScreen(actor, engine) {\r\n        const drawingWidth = actor.currentDrawing.drawWidth;\r\n        const drawingHeight = actor.currentDrawing.drawHeight;\r\n        const rotation = actor.rotation;\r\n        const anchor = actor.center;\r\n        const worldPos = actor.getGlobalPos();\r\n        this._topLeft = vec(worldPos.x - drawingWidth / 2, worldPos.y - drawingHeight / 2);\r\n        this._topLeft = this._topLeft.rotate(rotation, anchor);\r\n        this._topRight = vec(worldPos.x + drawingWidth / 2, worldPos.y - drawingHeight / 2);\r\n        this._topRight = this._topRight.rotate(rotation, anchor);\r\n        this._bottomLeft = vec(worldPos.x - drawingWidth / 2, worldPos.y + drawingHeight / 2);\r\n        this._bottomLeft = this._bottomLeft.rotate(rotation, anchor);\r\n        this._bottomRight = vec(worldPos.x + drawingWidth / 2, worldPos.y + drawingHeight / 2);\r\n        this._bottomRight = this._bottomRight.rotate(rotation, anchor);\r\n        const topLeftScreen = engine.worldToScreenCoordinates(this._topLeft);\r\n        const topRightScreen = engine.worldToScreenCoordinates(this._topRight);\r\n        const bottomLeftScreen = engine.worldToScreenCoordinates(this._bottomLeft);\r\n        const bottomRightScreen = engine.worldToScreenCoordinates(this._bottomRight);\r\n        this._xCoords = [];\r\n        this._yCoords = [];\r\n        this._xCoords.push(topLeftScreen.x, topRightScreen.x, bottomLeftScreen.x, bottomRightScreen.x);\r\n        this._yCoords.push(topLeftScreen.y, topRightScreen.y, bottomLeftScreen.y, bottomRightScreen.y);\r\n        this._xMin = Math.min.apply(null, this._xCoords);\r\n        this._yMin = Math.min.apply(null, this._yCoords);\r\n        this._xMax = Math.max.apply(null, this._xCoords);\r\n        this._yMax = Math.max.apply(null, this._yCoords);\r\n        const minWorld = engine.screenToWorldCoordinates(new Vector(this._xMin, this._yMin));\r\n        const maxWorld = engine.screenToWorldCoordinates(new Vector(this._xMax, this._yMax));\r\n        this._xMinWorld = minWorld.x;\r\n        this._yMinWorld = minWorld.y;\r\n        this._xMaxWorld = maxWorld.x;\r\n        this._yMaxWorld = maxWorld.y;\r\n        const boundingPoints = [\r\n            new Vector(this._xMin, this._yMin),\r\n            new Vector(this._xMax, this._yMin),\r\n            new Vector(this._xMin, this._yMax),\r\n            new Vector(this._xMax, this._yMax) // bottom right\r\n        ];\r\n        // sprite can be wider than canvas screen (and still visible within canvas)\r\n        // top or bottom of sprite must be within canvas\r\n        if (boundingPoints[0].x < 0 &&\r\n            boundingPoints[1].x > engine.canvas.clientWidth &&\r\n            (boundingPoints[0].y > 0 || boundingPoints[2].y < engine.canvas.clientHeight)) {\r\n            return false;\r\n        }\r\n        // sprite can be taller than canvas screen (and still visible within canvas)\r\n        // left or right of sprite must be within canvas\r\n        if (boundingPoints[0].y < 0 &&\r\n            boundingPoints[2].y > engine.canvas.clientHeight &&\r\n            (boundingPoints[1].x > 0 || boundingPoints[0].x < engine.canvas.clientWidth)) {\r\n            return false;\r\n        }\r\n        // otherwise if any corner is visible, we're not offscreen\r\n        for (let i = 0; i < boundingPoints.length; i++) {\r\n            if (boundingPoints[i].x > 0 &&\r\n                boundingPoints[i].y > 0 &&\r\n                boundingPoints[i].x < engine.canvas.clientWidth &&\r\n                boundingPoints[i].y < engine.canvas.clientHeight) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    debugDraw(ctx) {\r\n        // bounding rectangle\r\n        ctx.beginPath();\r\n        ctx.strokeStyle = Color.White.toString();\r\n        ctx.rect(this._xMinWorld, this._yMinWorld, this._xMaxWorld - this._xMinWorld, this._yMaxWorld - this._yMinWorld);\r\n        ctx.stroke();\r\n        ctx.fillStyle = Color.Red.toString();\r\n        ctx.beginPath();\r\n        ctx.arc(this._topLeft.x, this._topLeft.y, 5, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        ctx.fillStyle = Color.Green.toString();\r\n        ctx.beginPath();\r\n        ctx.arc(this._topRight.x, this._topRight.y, 5, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        ctx.fillStyle = Color.Blue.toString();\r\n        ctx.beginPath();\r\n        ctx.arc(this._bottomLeft.x, this._bottomLeft.y, 5, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        ctx.fillStyle = Color.Magenta.toString();\r\n        ctx.beginPath();\r\n        ctx.arc(this._bottomRight.x, this._bottomRight.y, 5, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Traits/OffscreenCulling.ts\n\r\n\r\n\r\n/**\r\n * @deprecated will be removed in 0.26.0\r\n */\r\nclass OffscreenCulling {\r\n    constructor() {\r\n        this.cullingBox = new CullingBox();\r\n    }\r\n    update(actor, engine) {\r\n        const events = actor.eventDispatcher;\r\n        let isSpriteOffScreen = true;\r\n        if (actor.currentDrawing != null) {\r\n            isSpriteOffScreen = this.cullingBox.isSpriteOffScreen(actor, engine);\r\n        }\r\n        let actorBoundsOffscreen = false;\r\n        if (engine && engine.currentScene && engine.currentScene.camera && engine.currentScene.camera.viewport && !actor.parent) {\r\n            actorBoundsOffscreen = !engine.currentScene.camera.viewport.intersect(actor.collider.bounds);\r\n        }\r\n        if (!actor.isOffScreen) {\r\n            if (actorBoundsOffscreen && isSpriteOffScreen) {\r\n                events.emit('exitviewport', new ExitViewPortEvent(actor));\r\n                actor.addComponent(new TagComponent('offscreen'));\r\n            }\r\n        }\r\n        else {\r\n            if (!actorBoundsOffscreen || !isSpriteOffScreen) {\r\n                events.emit('enterviewport', new EnterViewPortEvent(actor));\r\n                actor.removeComponent('offscreen');\r\n            }\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./EntityComponentSystem/Entity.ts\n\r\n\r\n\r\n\r\n\r\n/**\r\n * AddedComponent message\r\n */\r\nclass AddedComponent {\r\n    constructor(data) {\r\n        this.data = data;\r\n        this.type = 'Component Added';\r\n    }\r\n}\r\n/**\r\n * Type guard to know if message is f an Added Component\r\n */\r\nfunction isAddedComponent(x) {\r\n    return !!x && x.type === 'Component Added';\r\n}\r\n/**\r\n * RemovedComponent message\r\n */\r\nclass RemovedComponent {\r\n    constructor(data) {\r\n        this.data = data;\r\n        this.type = 'Component Removed';\r\n    }\r\n}\r\n/**\r\n * Type guard to know if message is for a Removed Component\r\n */\r\nfunction isRemovedComponent(x) {\r\n    return !!x && x.type === 'Component Removed';\r\n}\r\n/**\r\n * An Entity is the base type of anything that can have behavior in Excalibur, they are part of the built in entity component system\r\n *\r\n * Entities can be strongly typed with the components they contain\r\n *\r\n * ```typescript\r\n * const entity = new Entity<ComponentA | ComponentB>();\r\n * entity.components.a; // Type ComponentA\r\n * entity.components.b; // Type ComponentB\r\n * ```\r\n */\r\nclass Entity extends Class {\r\n    constructor(components, name) {\r\n        super();\r\n        /**\r\n         * The unique identifier for the entity\r\n         */\r\n        this.id = Entity._ID++;\r\n        this._name = 'anonymous';\r\n        /**\r\n         * Whether this entity is active, if set to false it will be reclaimed\r\n         */\r\n        this.active = true;\r\n        /**\r\n         * Bucket to hold on to deferred removals\r\n         */\r\n        this._componentsToRemove = [];\r\n        this._componentTypeToInstance = new Map();\r\n        this._componentStringToInstance = new Map();\r\n        this._tagsMemo = [];\r\n        this._typesMemo = [];\r\n        /**\r\n         * Observable that keeps track of component add or remove changes on the entity\r\n         */\r\n        this.componentAdded$ = new Observable();\r\n        this.componentRemoved$ = new Observable();\r\n        this._parent = null;\r\n        this.childrenAdded$ = new Observable();\r\n        this.childrenRemoved$ = new Observable();\r\n        this._children = [];\r\n        this._isInitialized = false;\r\n        this._setName(name);\r\n        if (components) {\r\n            for (const component of components) {\r\n                this.addComponent(component);\r\n            }\r\n        }\r\n    }\r\n    _setName(name) {\r\n        if (name) {\r\n            this._name = name;\r\n        }\r\n    }\r\n    get name() {\r\n        return this._name;\r\n    }\r\n    get events() {\r\n        return this.eventDispatcher;\r\n    }\r\n    /**\r\n     * Kill the entity, means it will no longer be updated. Kills are deferred to the end of the update.\r\n     */\r\n    kill() {\r\n        this.active = false;\r\n    }\r\n    isKilled() {\r\n        return !this.active;\r\n    }\r\n    /**\r\n     * Specifically get the tags on the entity from [[TagComponent]]\r\n     */\r\n    get tags() {\r\n        return this._tagsMemo;\r\n    }\r\n    /**\r\n     * Check if a tag exists on the entity\r\n     * @param tag name to check for\r\n     */\r\n    hasTag(tag) {\r\n        return this.tags.includes(tag);\r\n    }\r\n    /**\r\n     * Adds a tag to an entity\r\n     * @param tag\r\n     * @returns Entity\r\n     */\r\n    addTag(tag) {\r\n        return this.addComponent(new TagComponent(tag));\r\n    }\r\n    /**\r\n     * Removes a tag on the entity\r\n     *\r\n     * Removals are deferred until the end of update\r\n     * @param tag\r\n     * @param force Remove component immediately, no deferred\r\n     */\r\n    removeTag(tag, force = false) {\r\n        return this.removeComponent(tag, force);\r\n    }\r\n    /**\r\n     * The types of the components on the Entity\r\n     */\r\n    get types() {\r\n        return this._typesMemo;\r\n    }\r\n    _rebuildMemos() {\r\n        this._tagsMemo = Array.from(this._componentStringToInstance.values())\r\n            .filter((c) => c instanceof TagComponent)\r\n            .map((c) => c.type);\r\n        this._typesMemo = Array.from(this._componentStringToInstance.keys());\r\n    }\r\n    getComponents() {\r\n        return Array.from(this._componentStringToInstance.values());\r\n    }\r\n    _notifyAddComponent(component) {\r\n        this._rebuildMemos();\r\n        const added = new AddedComponent({\r\n            component,\r\n            entity: this\r\n        });\r\n        this.componentAdded$.notifyAll(added);\r\n    }\r\n    _notifyRemoveComponent(component) {\r\n        const removed = new RemovedComponent({\r\n            component,\r\n            entity: this\r\n        });\r\n        this.componentRemoved$.notifyAll(removed);\r\n        this._rebuildMemos();\r\n    }\r\n    get parent() {\r\n        return this._parent;\r\n    }\r\n    /**\r\n     * Get the direct children of this entity\r\n     */\r\n    get children() {\r\n        return this._children;\r\n    }\r\n    /**\r\n     * Unparents this entity, if there is a parent. Otherwise it does nothing.\r\n     */\r\n    unparent() {\r\n        if (this._parent) {\r\n            this._parent.removeChild(this);\r\n            this._parent = null;\r\n        }\r\n    }\r\n    /**\r\n     * Adds an entity to be a child of this entity\r\n     * @param entity\r\n     */\r\n    addChild(entity) {\r\n        if (entity.parent === null) {\r\n            if (this.getAncestors().includes(entity)) {\r\n                throw new Error('Cycle detected, cannot add entity');\r\n            }\r\n            this._children.push(entity);\r\n            entity._parent = this;\r\n            this.childrenAdded$.notifyAll(entity);\r\n        }\r\n        else {\r\n            throw new Error('Entity already has a parent, cannot add without unparenting');\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Remove an entity from children if it exists\r\n     * @param entity\r\n     */\r\n    removeChild(entity) {\r\n        if (entity.parent === this) {\r\n            removeItemFromArray(entity, this._children);\r\n            entity._parent = null;\r\n            this.childrenRemoved$.notifyAll(entity);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Removes all children from this entity\r\n     */\r\n    removeAllChildren() {\r\n        this.children.forEach((c) => {\r\n            this.removeChild(c);\r\n        });\r\n        return this;\r\n    }\r\n    /**\r\n     * Returns a list of parent entities starting with the topmost parent. Includes the current entity.\r\n     */\r\n    getAncestors() {\r\n        const result = [this];\r\n        let current = this.parent;\r\n        while (current) {\r\n            result.push(current);\r\n            current = current.parent;\r\n        }\r\n        return result.reverse();\r\n    }\r\n    /**\r\n     * Returns a list of all the entities that descend from this entity. Includes the current entity.\r\n     */\r\n    getDescendants() {\r\n        let result = [this];\r\n        let queue = [this];\r\n        while (queue.length > 0) {\r\n            const curr = queue.pop();\r\n            queue = queue.concat(curr.children);\r\n            result = result.concat(curr.children);\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * Creates a deep copy of the entity and a copy of all its components\r\n     */\r\n    clone() {\r\n        const newEntity = new Entity();\r\n        for (const c of this.types) {\r\n            newEntity.addComponent(this.get(c).clone());\r\n        }\r\n        for (const child of this.children) {\r\n            newEntity.addChild(child.clone());\r\n        }\r\n        return newEntity;\r\n    }\r\n    /**\r\n     * Adds a copy of all the components from another template entity as a \"prefab\"\r\n     * @param templateEntity Entity to use as a template\r\n     * @param force Force component replacement if it already exists on the target entity\r\n     */\r\n    addTemplate(templateEntity, force = false) {\r\n        for (const c of templateEntity.getComponents()) {\r\n            this.addComponent(c.clone(), force);\r\n        }\r\n        for (const child of templateEntity.children) {\r\n            this.addChild(child.clone().addTemplate(child));\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Adds a component to the entity\r\n     * @param component Component or Entity to add copy of components from\r\n     * @param force Optionally overwrite any existing components of the same type\r\n     */\r\n    addComponent(component, force = false) {\r\n        // if component already exists, skip if not forced\r\n        if (this.has(component.type)) {\r\n            if (force) {\r\n                // Remove existing component type if exists when forced\r\n                this.removeComponent(component);\r\n            }\r\n            else {\r\n                // early exit component exits\r\n                return this;\r\n            }\r\n        }\r\n        // TODO circular dependencies will be a problem\r\n        if (component.dependencies && component.dependencies.length) {\r\n            for (const ctor of component.dependencies) {\r\n                this.addComponent(new ctor());\r\n            }\r\n        }\r\n        component.owner = this;\r\n        const constuctorType = component.constructor;\r\n        this._componentTypeToInstance.set(constuctorType, component);\r\n        this._componentStringToInstance.set(component.type, component);\r\n        if (component.onAdd) {\r\n            component.onAdd(this);\r\n        }\r\n        this._notifyAddComponent(component);\r\n        return this;\r\n    }\r\n    /**\r\n     * Removes a component from the entity, by default removals are deferred to the end of entity update to avoid consistency issues\r\n     *\r\n     * Components can be force removed with the `force` flag, the removal is not deferred and happens immediately\r\n     * @param componentOrType\r\n     * @param force\r\n     */\r\n    removeComponent(componentOrType, force = false) {\r\n        if (force) {\r\n            if (typeof componentOrType === 'string') {\r\n                this._removeComponentByType(componentOrType);\r\n            }\r\n            else if (componentOrType instanceof Component) {\r\n                this._removeComponentByType(componentOrType.type);\r\n            }\r\n        }\r\n        else {\r\n            this._componentsToRemove.push(componentOrType);\r\n        }\r\n        return this;\r\n    }\r\n    _removeComponentByType(type) {\r\n        if (this.has(type)) {\r\n            const component = this.get(type);\r\n            component.owner = null;\r\n            if (component.onRemove) {\r\n                component.onRemove(this);\r\n            }\r\n            const ctor = component.constructor;\r\n            this._componentTypeToInstance.delete(ctor);\r\n            this._componentStringToInstance.delete(component.type);\r\n            this._notifyRemoveComponent(component);\r\n        }\r\n    }\r\n    /**\r\n     * @hidden\r\n     * @internal\r\n     */\r\n    processComponentRemoval() {\r\n        for (const componentOrType of this._componentsToRemove) {\r\n            const type = typeof componentOrType === 'string' ? componentOrType : componentOrType.type;\r\n            this._removeComponentByType(type);\r\n        }\r\n        this._componentsToRemove.length = 0;\r\n    }\r\n    has(type) {\r\n        if (typeof type === 'string') {\r\n            return this._componentStringToInstance.has(type);\r\n        }\r\n        else {\r\n            return this._componentTypeToInstance.has(type);\r\n        }\r\n    }\r\n    get(type) {\r\n        if (typeof type === 'string') {\r\n            return this._componentStringToInstance.get(type);\r\n        }\r\n        else {\r\n            return this._componentTypeToInstance.get(type);\r\n        }\r\n    }\r\n    /**\r\n     * Gets whether the actor is Initialized\r\n     */\r\n    get isInitialized() {\r\n        return this._isInitialized;\r\n    }\r\n    /**\r\n     * Initializes this entity, meant to be called by the Scene before first update not by users of Excalibur.\r\n     *\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * @internal\r\n     */\r\n    _initialize(engine) {\r\n        if (!this.isInitialized) {\r\n            this.onInitialize(engine);\r\n            super.emit('initialize', new InitializeEvent(engine, this));\r\n            this._isInitialized = true;\r\n        }\r\n    }\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Internal _preupdate handler for [[onPreUpdate]] lifecycle event\r\n     * @internal\r\n     */\r\n    _preupdate(engine, delta) {\r\n        this.emit('preupdate', new PreUpdateEvent(engine, delta, this));\r\n        this.onPreUpdate(engine, delta);\r\n    }\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Internal _preupdate handler for [[onPostUpdate]] lifecycle event\r\n     * @internal\r\n     */\r\n    _postupdate(engine, delta) {\r\n        this.emit('postupdate', new PostUpdateEvent(engine, delta, this));\r\n        this.onPostUpdate(engine, delta);\r\n    }\r\n    /**\r\n     * `onInitialize` is called before the first update of the entity. This method is meant to be\r\n     * overridden.\r\n     *\r\n     * Synonymous with the event handler `.on('initialize', (evt) => {...})`\r\n     */\r\n    onInitialize(_engine) {\r\n        // Override me\r\n    }\r\n    /**\r\n     * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPreUpdate` is called directly before an entity is updated.\r\n     */\r\n    onPreUpdate(_engine, _delta) {\r\n        // Override me\r\n    }\r\n    /**\r\n     * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('postupdate', (evt) =>{...})`\r\n     *\r\n     * `onPostUpdate` is called directly after an entity is updated.\r\n     */\r\n    onPostUpdate(_engine, _delta) {\r\n        // Override me\r\n    }\r\n    /**\r\n     *\r\n     * Entity update lifecycle, called internally\r\n     *\r\n     * @internal\r\n     * @param engine\r\n     * @param delta\r\n     */\r\n    update(engine, delta) {\r\n        this._initialize(engine);\r\n        this._preupdate(engine, delta);\r\n        for (const child of this.children) {\r\n            child.update(engine, delta);\r\n        }\r\n        this._postupdate(engine, delta);\r\n    }\r\n}\r\nEntity._ID = 0;\r\n\n;// CONCATENATED MODULE: ./Drawing/CanvasDrawComponent.ts\n\r\n/**\r\n * Shim to draw to the canvas when in LegacyDrawing mode\r\n * @deprecated\r\n */\r\nclass CanvasDrawComponent extends Component {\r\n    constructor(draw) {\r\n        var _a;\r\n        super();\r\n        this.draw = draw;\r\n        this.type = 'ex.canvas';\r\n        // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n        this.draw = (_a = this.draw) !== null && _a !== void 0 ? _a : (() => { });\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/GraphicsComponent.ts\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Type guard for checking if a Graphic HasTick (used for graphics that change over time like animations)\r\n * @param graphic\r\n */\r\nfunction hasGraphicsTick(graphic) {\r\n    return !!graphic.tick;\r\n}\r\nclass GraphicsLayer {\r\n    constructor(_options, _graphics) {\r\n        this._options = _options;\r\n        this._graphics = _graphics;\r\n        this.graphics = [];\r\n    }\r\n    get name() {\r\n        return this._options.name;\r\n    }\r\n    hide(nameOrGraphic) {\r\n        if (!nameOrGraphic) {\r\n            this.graphics.length = 0;\r\n        }\r\n        else {\r\n            let gfx = null;\r\n            if (nameOrGraphic instanceof Graphic) {\r\n                gfx = nameOrGraphic;\r\n            }\r\n            else {\r\n                gfx = this._graphics.getGraphic(nameOrGraphic);\r\n            }\r\n            this.graphics = this.graphics.filter((g) => g.graphic !== gfx);\r\n        }\r\n    }\r\n    /**\r\n     * Show a graphic by name or instance at an offset, graphics are shown in the order in which `show()` is called.\r\n     *\r\n     * If `show()` is called multiple times for the same graphic it will be shown multiple times.\r\n     * @param nameOrGraphic\r\n     * @param options\r\n     */\r\n    show(nameOrGraphic, options) {\r\n        options = { ...options };\r\n        let gfx;\r\n        if (nameOrGraphic instanceof Graphic) {\r\n            gfx = this._graphics.copyGraphics ? nameOrGraphic.clone() : nameOrGraphic;\r\n        }\r\n        else {\r\n            gfx = this._graphics.getGraphic(nameOrGraphic);\r\n            if (!gfx) {\r\n                Logger.getInstance().error(`No such graphic added to component named ${nameOrGraphic}. These named graphics are available: `, this._graphics.getNames());\r\n            }\r\n        }\r\n        if (gfx) {\r\n            this.graphics.push({ graphic: gfx, options });\r\n            return gfx;\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    /**\r\n     * Use a specific graphic, swap out any current graphics being shown\r\n     * @param nameOrGraphic\r\n     * @param options\r\n     */\r\n    use(nameOrGraphic, options) {\r\n        options = { ...options };\r\n        this.hide();\r\n        return this.show(nameOrGraphic, options);\r\n    }\r\n    /**\r\n     * Current order of the layer, higher numbers are on top, lower numbers are on the bottom.\r\n     *\r\n     * For example a layer with `order = -1` would be under a layer of `order = 1`\r\n     */\r\n    get order() {\r\n        return this._options.order;\r\n    }\r\n    /**\r\n     * Set the order of the layer, higher numbers are on top, lower numbers are on the bottom.\r\n     *\r\n     * For example a layer with `order = -1` would be under a layer of `order = 1`\r\n     */\r\n    set order(order) {\r\n        this._options.order = order;\r\n    }\r\n    /**\r\n     * Get or set the pixel offset from the layer anchor for all graphics in the layer\r\n     */\r\n    get offset() {\r\n        var _a;\r\n        return (_a = this._options.offset) !== null && _a !== void 0 ? _a : Vector.Zero;\r\n    }\r\n    set offset(value) {\r\n        this._options.offset = value;\r\n    }\r\n    get currentKeys() {\r\n        var _a;\r\n        return (_a = this.name) !== null && _a !== void 0 ? _a : 'anonymous';\r\n    }\r\n}\r\nclass GraphicsLayers {\r\n    constructor(_component) {\r\n        this._component = _component;\r\n        this._layers = [];\r\n        this._layerMap = {};\r\n        this.default = new GraphicsLayer({ name: 'default', order: 0 }, _component);\r\n        this._maybeAddLayer(this.default);\r\n    }\r\n    create(options) {\r\n        const layer = new GraphicsLayer(options, this._component);\r\n        return this._maybeAddLayer(layer);\r\n    }\r\n    get(name) {\r\n        if (name) {\r\n            return this._getLayer(name);\r\n        }\r\n        return this._layers;\r\n    }\r\n    currentKeys() {\r\n        const graphicsLayerKeys = [];\r\n        for (const layer of this._layers) {\r\n            graphicsLayerKeys.push(layer.currentKeys);\r\n        }\r\n        return graphicsLayerKeys;\r\n    }\r\n    has(name) {\r\n        return name in this._layerMap;\r\n    }\r\n    _maybeAddLayer(layer) {\r\n        if (this._layerMap[layer.name]) {\r\n            // todo log warning\r\n            return this._layerMap[layer.name];\r\n        }\r\n        this._layerMap[layer.name] = layer;\r\n        this._layers.push(layer);\r\n        this._layers.sort((a, b) => a.order - b.order);\r\n        return layer;\r\n    }\r\n    _getLayer(name) {\r\n        return this._layerMap[name];\r\n    }\r\n}\r\n/**\r\n * Component to manage drawings, using with the position component\r\n */\r\nclass GraphicsComponent extends Component {\r\n    constructor(options) {\r\n        super();\r\n        this.type = 'ex.graphics';\r\n        this._graphics = {};\r\n        /**\r\n         * Sets or gets wether any drawing should be visible in this component\r\n         */\r\n        this.visible = true;\r\n        /**\r\n         * Sets or gets wither all drawings should have an opacity applied\r\n         */\r\n        this.opacity = 1;\r\n        /**\r\n         * Offset to apply to graphics by default\r\n         */\r\n        this.offset = Vector.Zero;\r\n        /**\r\n         * Anchor to apply to graphics by default\r\n         */\r\n        this.anchor = Vector.Half;\r\n        /**\r\n         * If set to true graphics added to the component will be copied. This can affect performance\r\n         */\r\n        this.copyGraphics = false;\r\n        this._bounds = null;\r\n        // Defaults\r\n        options = {\r\n            visible: this.visible,\r\n            ...options\r\n        };\r\n        const { current, anchor, opacity, visible, graphics, offset, copyGraphics, onPreDraw, onPostDraw } = options;\r\n        this._graphics = graphics || {};\r\n        this.offset = offset !== null && offset !== void 0 ? offset : this.offset;\r\n        this.opacity = opacity !== null && opacity !== void 0 ? opacity : this.opacity;\r\n        this.anchor = anchor !== null && anchor !== void 0 ? anchor : this.anchor;\r\n        this.copyGraphics = copyGraphics !== null && copyGraphics !== void 0 ? copyGraphics : this.copyGraphics;\r\n        this.onPreDraw = onPreDraw !== null && onPreDraw !== void 0 ? onPreDraw : this.onPreDraw;\r\n        this.onPostDraw = onPostDraw !== null && onPostDraw !== void 0 ? onPostDraw : this.onPostDraw;\r\n        this.visible = !!visible;\r\n        this.layers = new GraphicsLayers(this);\r\n        if (current && this._graphics[current]) {\r\n            this.show(this._graphics[current]);\r\n        }\r\n    }\r\n    getGraphic(name) {\r\n        return this._graphics[name];\r\n    }\r\n    /**\r\n     * Get registered graphics names\r\n     */\r\n    getNames() {\r\n        return Object.keys(this._graphics);\r\n    }\r\n    /**\r\n     * Returns the currently displayed graphics and their offsets, empty array if hidden\r\n     */\r\n    get current() {\r\n        return this.layers.default.graphics;\r\n    }\r\n    /**\r\n     * Returns all graphics associated with this component\r\n     */\r\n    get graphics() {\r\n        return this._graphics;\r\n    }\r\n    add(nameOrGraphic, graphic) {\r\n        let name = 'default';\r\n        let graphicToSet = null;\r\n        if (typeof nameOrGraphic === 'string') {\r\n            name = nameOrGraphic;\r\n            graphicToSet = graphic;\r\n        }\r\n        else {\r\n            graphicToSet = nameOrGraphic;\r\n        }\r\n        this._graphics[name] = this.copyGraphics ? graphicToSet.clone() : graphicToSet;\r\n        if (name === 'default') {\r\n            this.show('default');\r\n        }\r\n        return graphicToSet;\r\n    }\r\n    /**\r\n     * Show a graphic by name on the **default** layer, returns the new [[Graphic]]\r\n     */\r\n    show(nameOrGraphic, options) {\r\n        return this.layers.default.show(nameOrGraphic, options);\r\n    }\r\n    /**\r\n     * Use a graphic only, swap out any graphics on the **default** layer, returns the new [[Graphic]]\r\n     * @param nameOrGraphic\r\n     * @param options\r\n     */\r\n    use(nameOrGraphic, options) {\r\n        return this.layers.default.use(nameOrGraphic, options);\r\n    }\r\n    hide(nameOrGraphic) {\r\n        this.layers.default.hide(nameOrGraphic);\r\n    }\r\n    set localBounds(bounds) {\r\n        this._bounds = bounds;\r\n    }\r\n    get localBounds() {\r\n        if (this._bounds) {\r\n            return this._bounds;\r\n        }\r\n        let bb = new BoundingBox();\r\n        for (const layer of this.layers.get()) {\r\n            for (const { graphic, options } of layer.graphics) {\r\n                let anchor = this.anchor;\r\n                let offset = this.offset;\r\n                if (options === null || options === void 0 ? void 0 : options.anchor) {\r\n                    anchor = options.anchor;\r\n                }\r\n                if (options === null || options === void 0 ? void 0 : options.offset) {\r\n                    offset = options.offset;\r\n                }\r\n                const bounds = graphic.localBounds;\r\n                const offsetX = -bounds.width * anchor.x + offset.x;\r\n                const offsetY = -bounds.height * anchor.y + offset.y;\r\n                bb = graphic === null || graphic === void 0 ? void 0 : graphic.localBounds.translate(vec(offsetX + layer.offset.x, offsetY + layer.offset.y)).combine(bb);\r\n            }\r\n        }\r\n        return bb;\r\n    }\r\n    /**\r\n     * Update underlying graphics if necesary, called internally\r\n     * @param elapsed\r\n     * @internal\r\n     */\r\n    update(elapsed, idempotencyToken = 0) {\r\n        for (const layer of this.layers.get()) {\r\n            for (const { graphic } of layer.graphics) {\r\n                if (hasGraphicsTick(graphic)) {\r\n                    graphic === null || graphic === void 0 ? void 0 : graphic.tick(elapsed, idempotencyToken);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Rectangle.ts\n\r\n/**\r\n * A Rectangle [[Graphic]] for drawing rectangles to the [[ExcaliburGraphicsContext]]\r\n */\r\nclass Rectangle extends Raster {\r\n    constructor(options) {\r\n        super(options);\r\n        this.width = options.width;\r\n        this.height = options.height;\r\n        this.rasterize();\r\n    }\r\n    clone() {\r\n        return new Rectangle({\r\n            width: this.width,\r\n            height: this.height,\r\n            ...this.cloneGraphicOptions(),\r\n            ...this.cloneRasterOptions()\r\n        });\r\n    }\r\n    execute(ctx) {\r\n        if (this.color) {\r\n            ctx.fillRect(0, 0, this.width, this.height);\r\n        }\r\n        if (this.strokeColor) {\r\n            ctx.strokeRect(0, 0, this.width, this.height);\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Circle.ts\n\r\n\r\n/**\r\n * A circle [[Graphic]] for drawing circles to the [[ExcaliburGraphicsContext]]\r\n *\r\n * Circles default to [[ImageFiltering.Blended]]\r\n */\r\nclass Circle extends Raster {\r\n    constructor(options) {\r\n        var _a, _b;\r\n        super(options);\r\n        this._radius = 0;\r\n        this.padding = (_a = options.padding) !== null && _a !== void 0 ? _a : 2; // default 2 padding for circles looks nice\r\n        this.radius = options.radius;\r\n        this.filtering = (_b = options.filtering) !== null && _b !== void 0 ? _b : ImageFiltering.Blended;\r\n        this.rasterize();\r\n    }\r\n    get radius() {\r\n        return this._radius;\r\n    }\r\n    set radius(value) {\r\n        this._radius = value;\r\n        this.width = this._radius * 2;\r\n        this.height = this._radius * 2;\r\n        this.flagDirty();\r\n    }\r\n    clone() {\r\n        return new Circle({\r\n            radius: this.radius,\r\n            ...this.cloneGraphicOptions(),\r\n            ...this.cloneRasterOptions()\r\n        });\r\n    }\r\n    execute(ctx) {\r\n        if (this.radius > 0) {\r\n            ctx.beginPath();\r\n            ctx.arc(this.radius, this.radius, this.radius, 0, Math.PI * 2);\r\n            if (this.color) {\r\n                ctx.fill();\r\n            }\r\n            if (this.strokeColor) {\r\n                ctx.stroke();\r\n            }\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Input/PointerComponent.ts\n\r\n/**\r\n * Add this component to optionally configure how the pointer\r\n * system detects pointer events.\r\n *\r\n * By default the collider shape is used and graphics bounds is not.\r\n *\r\n * If both collider shape and graphics bounds are enabled it will fire events if either or\r\n * are intersecting the pointer.\r\n */\r\nclass PointerComponent extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.type = 'ex.pointer';\r\n        /**\r\n         * Use any existing Collider component geometry for pointer events. This is useful if you want\r\n         * user pointer events only to trigger on the same collision geometry used in the collider component\r\n         * for collision resolution. Default is `true`.\r\n         */\r\n        this.useColliderShape = true;\r\n        /**\r\n         * Use any existing Graphics component bounds for pointers. This is useful if you want the axis aligned\r\n         * bounds around the graphic to trigger pointer events. Default is `false`.\r\n         */\r\n        this.useGraphicsBounds = false;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Util/EasingFunctions.ts\nvar EasingFunctions_decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\n\r\n\r\n/**\r\n * Standard easing functions for motion in Excalibur, defined on a domain of [0, duration] and a range from [+startValue,+endValue]\r\n * Given a time, the function will return a value from positive startValue to positive endValue.\r\n *\r\n * ```js\r\n * function Linear (t) {\r\n *    return t * t;\r\n * }\r\n *\r\n * // accelerating from zero velocity\r\n * function EaseInQuad (t) {\r\n *    return t * t;\r\n * }\r\n *\r\n * // decelerating to zero velocity\r\n * function EaseOutQuad (t) {\r\n *    return t * (2 - t);\r\n * }\r\n *\r\n * // acceleration until halfway, then deceleration\r\n * function EaseInOutQuad (t) {\r\n *    return t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\r\n * }\r\n *\r\n * // accelerating from zero velocity\r\n * function EaseInCubic (t) {\r\n *    return t * t * t;\r\n * }\r\n *\r\n * // decelerating to zero velocity\r\n * function EaseOutCubic (t) {\r\n *    return (--t) * t * t + 1;\r\n * }\r\n *\r\n * // acceleration until halfway, then deceleration\r\n * function EaseInOutCubic (t) {\r\n *    return t < .5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\r\n * }\r\n * ```\r\n */\r\nclass EasingFunctions {\r\n    static CreateReversibleEasingFunction(easing) {\r\n        return (time, start, end, duration) => {\r\n            if (end < start) {\r\n                return start - (easing(time, end, start, duration) - end);\r\n            }\r\n            else {\r\n                return easing(time, start, end, duration);\r\n            }\r\n        };\r\n    }\r\n    static CreateReversableEasingFunction(easing) {\r\n        return EasingFunctions.CreateReversibleEasingFunction(easing);\r\n    }\r\n    static CreateVectorEasingFunction(easing) {\r\n        return (time, start, end, duration) => {\r\n            return new Vector(easing(time, start.x, end.x, duration), easing(time, start.y, end.y, duration));\r\n        };\r\n    }\r\n}\r\nEasingFunctions.Linear = EasingFunctions.CreateReversibleEasingFunction((currentTime, startValue, endValue, duration) => {\r\n    endValue = endValue - startValue;\r\n    return (endValue * currentTime) / duration + startValue;\r\n});\r\nEasingFunctions.EaseInQuad = EasingFunctions.CreateReversibleEasingFunction((currentTime, startValue, endValue, duration) => {\r\n    endValue = endValue - startValue;\r\n    currentTime /= duration;\r\n    return endValue * currentTime * currentTime + startValue;\r\n});\r\nEasingFunctions.EaseOutQuad = EasingFunctions.CreateReversibleEasingFunction((currentTime, startValue, endValue, duration) => {\r\n    endValue = endValue - startValue;\r\n    currentTime /= duration;\r\n    return -endValue * currentTime * (currentTime - 2) + startValue;\r\n});\r\nEasingFunctions.EaseInOutQuad = EasingFunctions.CreateReversibleEasingFunction((currentTime, startValue, endValue, duration) => {\r\n    endValue = endValue - startValue;\r\n    currentTime /= duration / 2;\r\n    if (currentTime < 1) {\r\n        return (endValue / 2) * currentTime * currentTime + startValue;\r\n    }\r\n    currentTime--;\r\n    return (-endValue / 2) * (currentTime * (currentTime - 2) - 1) + startValue;\r\n});\r\nEasingFunctions.EaseInCubic = EasingFunctions.CreateReversibleEasingFunction((currentTime, startValue, endValue, duration) => {\r\n    endValue = endValue - startValue;\r\n    currentTime /= duration;\r\n    return endValue * currentTime * currentTime * currentTime + startValue;\r\n});\r\nEasingFunctions.EaseOutCubic = EasingFunctions.CreateReversibleEasingFunction((currentTime, startValue, endValue, duration) => {\r\n    endValue = endValue - startValue;\r\n    currentTime /= duration;\r\n    currentTime--;\r\n    return endValue * (currentTime * currentTime * currentTime + 1) + startValue;\r\n});\r\nEasingFunctions.EaseInOutCubic = EasingFunctions.CreateReversibleEasingFunction((currentTime, startValue, endValue, duration) => {\r\n    endValue = endValue - startValue;\r\n    currentTime /= duration / 2;\r\n    if (currentTime < 1) {\r\n        return (endValue / 2) * currentTime * currentTime * currentTime + startValue;\r\n    }\r\n    currentTime -= 2;\r\n    return (endValue / 2) * (currentTime * currentTime * currentTime + 2) + startValue;\r\n});\r\nEasingFunctions_decorate([\r\n    obsolete({\r\n        message: 'Alias for incorrect spelling used in older versions, will be removed in v0.25.0',\r\n        alternateMethod: 'CreateReversibleEasingFunction'\r\n    })\r\n], EasingFunctions, \"CreateReversableEasingFunction\", null);\r\n\n;// CONCATENATED MODULE: ./Actions/ActionQueue.ts\n/**\r\n * Action Queues represent an ordered sequence of actions\r\n *\r\n * Action queues are part of the [[ActionContext|Action API]] and\r\n * store the list of actions to be executed for an [[Actor]].\r\n *\r\n * Actors implement [[Actor.actions]] which can be manipulated by\r\n * advanced users to adjust the actions currently being executed in the\r\n * queue.\r\n */\r\nclass ActionQueue {\r\n    constructor(entity) {\r\n        this._actions = [];\r\n        this._completedActions = [];\r\n        this._entity = entity;\r\n    }\r\n    /**\r\n     * Add an action to the sequence\r\n     * @param action\r\n     */\r\n    add(action) {\r\n        this._actions.push(action);\r\n    }\r\n    /**\r\n     * Remove an action by reference from the sequence\r\n     * @param action\r\n     */\r\n    remove(action) {\r\n        const index = this._actions.indexOf(action);\r\n        this._actions.splice(index, 1);\r\n    }\r\n    /**\r\n     * Removes all actions from this sequence\r\n     */\r\n    clearActions() {\r\n        this._actions.length = 0;\r\n        this._completedActions.length = 0;\r\n        if (this._currentAction) {\r\n            this._currentAction.stop();\r\n        }\r\n    }\r\n    /**\r\n     *\r\n     * @returns The total list of actions in this sequence complete or not\r\n     */\r\n    getActions() {\r\n        return this._actions.concat(this._completedActions);\r\n    }\r\n    /**\r\n     *\r\n     * @returns `true` if there are more actions to process in the sequence\r\n     */\r\n    hasNext() {\r\n        return this._actions.length > 0;\r\n    }\r\n    /**\r\n     * @returns `true` if the current sequence of actions is done\r\n     */\r\n    isComplete() {\r\n        return this._actions.length === 0;\r\n    }\r\n    /**\r\n     * Resets the sequence of actions, this is used to restart a sequence from the beginning\r\n     */\r\n    reset() {\r\n        this._actions = this.getActions();\r\n        const len = this._actions.length;\r\n        for (let i = 0; i < len; i++) {\r\n            this._actions[i].reset();\r\n        }\r\n        this._completedActions = [];\r\n    }\r\n    /**\r\n     * Update the queue which updates actions and handles completing actions\r\n     * @param elapsedMs\r\n     */\r\n    update(elapsedMs) {\r\n        if (this._actions.length > 0) {\r\n            this._currentAction = this._actions[0];\r\n            this._currentAction.update(elapsedMs);\r\n            if (this._currentAction.isComplete(this._entity)) {\r\n                this._completedActions.push(this._actions.shift());\r\n            }\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/Repeat.ts\n\r\nclass Repeat {\r\n    constructor(entity, repeatBuilder, repeat) {\r\n        this._stopped = false;\r\n        this._repeatBuilder = repeatBuilder;\r\n        this._repeatContext = new ActionContext(entity);\r\n        this._actionQueue = this._repeatContext.getQueue();\r\n        this._repeat = repeat;\r\n        this._originalRepeat = repeat;\r\n        this._repeatBuilder(this._repeatContext);\r\n        this._repeat--; // current execution is the first repeat\r\n    }\r\n    update(delta) {\r\n        if (this._actionQueue.isComplete()) {\r\n            this._actionQueue.clearActions();\r\n            this._repeatBuilder(this._repeatContext);\r\n            this._repeat--;\r\n        }\r\n        this._actionQueue.update(delta);\r\n    }\r\n    isComplete() {\r\n        return this._stopped || (this._repeat <= 0 && this._actionQueue.isComplete());\r\n    }\r\n    stop() {\r\n        this._stopped = true;\r\n    }\r\n    reset() {\r\n        this._repeat = this._originalRepeat;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/RepeatForever.ts\n\r\n/**\r\n * RepeatForever Action implementation, it is recommended you use the fluent action\r\n * context API.\r\n *\r\n *\r\n */\r\nclass RepeatForever {\r\n    constructor(entity, repeatBuilder) {\r\n        this._stopped = false;\r\n        this._repeatBuilder = repeatBuilder;\r\n        this._repeatContext = new ActionContext(entity);\r\n        this._actionQueue = this._repeatContext.getQueue();\r\n        this._repeatBuilder(this._repeatContext);\r\n    }\r\n    update(delta) {\r\n        if (this._stopped) {\r\n            return;\r\n        }\r\n        if (this._actionQueue.isComplete()) {\r\n            this._actionQueue.clearActions();\r\n            this._repeatBuilder(this._repeatContext);\r\n        }\r\n        this._actionQueue.update(delta);\r\n    }\r\n    isComplete() {\r\n        return this._stopped;\r\n    }\r\n    stop() {\r\n        this._stopped = true;\r\n        this._actionQueue.clearActions();\r\n    }\r\n    reset() {\r\n        return;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/MoveBy.ts\n\r\n\r\n\r\n\r\nclass MoveBy {\r\n    constructor(entity, offsetX, offsetY, speed) {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._entity = entity;\r\n        this._tx = entity.get(TransformComponent);\r\n        this._motion = entity.get(MotionComponent);\r\n        this._speed = speed;\r\n        this._offset = new Vector(offsetX, offsetY);\r\n        if (speed <= 0) {\r\n            Logger.getInstance().error('Attempted to moveBy with speed less than or equal to zero : ' + speed);\r\n            throw new Error('Speed must be greater than 0 pixels per second');\r\n        }\r\n    }\r\n    update(_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._start = new Vector(this._tx.pos.x, this._tx.pos.y);\r\n            this._end = this._start.add(this._offset);\r\n            this._distance = this._offset.size;\r\n            this._dir = this._end.sub(this._start).normalize();\r\n        }\r\n        if (this.isComplete(this._entity)) {\r\n            this._tx.pos = vec(this._end.x, this._end.y);\r\n            this._motion.vel = vec(0, 0);\r\n        }\r\n        else {\r\n            this._motion.vel = this._dir.scale(this._speed);\r\n        }\r\n    }\r\n    isComplete(entity) {\r\n        const tx = entity.get(TransformComponent);\r\n        return this._stopped || tx.pos.distance(this._start) >= this._distance;\r\n    }\r\n    stop() {\r\n        this._motion.vel = vec(0, 0);\r\n        this._stopped = true;\r\n    }\r\n    reset() {\r\n        this._started = false;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/MoveTo.ts\n\r\n\r\n\r\nclass MoveTo {\r\n    constructor(entity, destx, desty, speed) {\r\n        this.entity = entity;\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._tx = entity.get(TransformComponent);\r\n        this._motion = entity.get(MotionComponent);\r\n        this._end = new Vector(destx, desty);\r\n        this._speed = speed;\r\n    }\r\n    update(_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._start = new Vector(this._tx.pos.x, this._tx.pos.y);\r\n            this._distance = this._start.distance(this._end);\r\n            this._dir = this._end.sub(this._start).normalize();\r\n        }\r\n        const m = this._dir.scale(this._speed);\r\n        this._motion.vel = vec(m.x, m.y);\r\n        if (this.isComplete(this.entity)) {\r\n            this._tx.pos = vec(this._end.x, this._end.y);\r\n            this._motion.vel = vec(0, 0);\r\n        }\r\n    }\r\n    isComplete(entity) {\r\n        const tx = entity.get(TransformComponent);\r\n        return this._stopped || new Vector(tx.pos.x, tx.pos.y).distance(this._start) >= this._distance;\r\n    }\r\n    stop() {\r\n        this._motion.vel = vec(0, 0);\r\n        this._stopped = true;\r\n    }\r\n    reset() {\r\n        this._started = false;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/RotationType.ts\n/**\r\n * An enum that describes the strategies that rotation actions can use\r\n */\r\nvar RotationType;\r\n(function (RotationType) {\r\n    /**\r\n     * Rotation via `ShortestPath` will use the smallest angle\r\n     * between the starting and ending points. This strategy is the default behavior.\r\n     */\r\n    RotationType[RotationType[\"ShortestPath\"] = 0] = \"ShortestPath\";\r\n    /**\r\n     * Rotation via `LongestPath` will use the largest angle\r\n     * between the starting and ending points.\r\n     */\r\n    RotationType[RotationType[\"LongestPath\"] = 1] = \"LongestPath\";\r\n    /**\r\n     * Rotation via `Clockwise` will travel in a clockwise direction,\r\n     * regardless of the starting and ending points.\r\n     */\r\n    RotationType[RotationType[\"Clockwise\"] = 2] = \"Clockwise\";\r\n    /**\r\n     * Rotation via `CounterClockwise` will travel in a counterclockwise direction,\r\n     * regardless of the starting and ending points.\r\n     */\r\n    RotationType[RotationType[\"CounterClockwise\"] = 3] = \"CounterClockwise\";\r\n})(RotationType || (RotationType = {}));\r\n\n;// CONCATENATED MODULE: ./Actions/Action/RotateTo.ts\n\r\n\r\n\r\n\r\nclass RotateTo {\r\n    constructor(entity, angleRadians, speed, rotationType) {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._tx = entity.get(TransformComponent);\r\n        this._motion = entity.get(MotionComponent);\r\n        this._end = angleRadians;\r\n        this._speed = speed;\r\n        this._rotationType = rotationType || RotationType.ShortestPath;\r\n    }\r\n    update(_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._start = this._tx.rotation;\r\n            this._currentNonCannonAngle = this._tx.rotation;\r\n            const distance1 = Math.abs(this._end - this._start);\r\n            const distance2 = TwoPI - distance1;\r\n            if (distance1 > distance2) {\r\n                this._shortDistance = distance2;\r\n                this._longDistance = distance1;\r\n            }\r\n            else {\r\n                this._shortDistance = distance1;\r\n                this._longDistance = distance2;\r\n            }\r\n            this._shortestPathIsPositive = (this._start - this._end + TwoPI) % TwoPI >= Math.PI;\r\n            switch (this._rotationType) {\r\n                case RotationType.ShortestPath:\r\n                    this._distance = this._shortDistance;\r\n                    if (this._shortestPathIsPositive) {\r\n                        this._direction = 1;\r\n                    }\r\n                    else {\r\n                        this._direction = -1;\r\n                    }\r\n                    break;\r\n                case RotationType.LongestPath:\r\n                    this._distance = this._longDistance;\r\n                    if (this._shortestPathIsPositive) {\r\n                        this._direction = -1;\r\n                    }\r\n                    else {\r\n                        this._direction = 1;\r\n                    }\r\n                    break;\r\n                case RotationType.Clockwise:\r\n                    this._direction = 1;\r\n                    if (this._shortestPathIsPositive) {\r\n                        this._distance = this._shortDistance;\r\n                    }\r\n                    else {\r\n                        this._distance = this._longDistance;\r\n                    }\r\n                    break;\r\n                case RotationType.CounterClockwise:\r\n                    this._direction = -1;\r\n                    if (!this._shortestPathIsPositive) {\r\n                        this._distance = this._shortDistance;\r\n                    }\r\n                    else {\r\n                        this._distance = this._longDistance;\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n        this._motion.angularVelocity = this._direction * this._speed;\r\n        this._currentNonCannonAngle += this._direction * this._speed * (_delta / 1000);\r\n        if (this.isComplete()) {\r\n            this._tx.rotation = this._end;\r\n            this._motion.angularVelocity = 0;\r\n            this._stopped = true;\r\n        }\r\n    }\r\n    isComplete() {\r\n        const distanceTravelled = Math.abs(this._currentNonCannonAngle - this._start);\r\n        return this._stopped || distanceTravelled >= Math.abs(this._distance);\r\n    }\r\n    stop() {\r\n        this._motion.angularVelocity = 0;\r\n        this._stopped = true;\r\n    }\r\n    reset() {\r\n        this._started = false;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/RotateBy.ts\n\r\n\r\n\r\n\r\nclass RotateBy {\r\n    constructor(entity, angleRadiansOffset, speed, rotationType) {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._tx = entity.get(TransformComponent);\r\n        this._motion = entity.get(MotionComponent);\r\n        this._speed = speed;\r\n        this._offset = angleRadiansOffset;\r\n        this._rotationType = rotationType || RotationType.ShortestPath;\r\n    }\r\n    update(_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._start = this._tx.rotation;\r\n            this._currentNonCannonAngle = this._tx.rotation;\r\n            this._end = this._start + this._offset;\r\n            const distance1 = Math.abs(this._end - this._start);\r\n            const distance2 = TwoPI - distance1;\r\n            if (distance1 > distance2) {\r\n                this._shortDistance = distance2;\r\n                this._longDistance = distance1;\r\n            }\r\n            else {\r\n                this._shortDistance = distance1;\r\n                this._longDistance = distance2;\r\n            }\r\n            this._shortestPathIsPositive = (this._start - this._end + TwoPI) % TwoPI >= Math.PI;\r\n            switch (this._rotationType) {\r\n                case RotationType.ShortestPath:\r\n                    this._distance = this._shortDistance;\r\n                    if (this._shortestPathIsPositive) {\r\n                        this._direction = 1;\r\n                    }\r\n                    else {\r\n                        this._direction = -1;\r\n                    }\r\n                    break;\r\n                case RotationType.LongestPath:\r\n                    this._distance = this._longDistance;\r\n                    if (this._shortestPathIsPositive) {\r\n                        this._direction = -1;\r\n                    }\r\n                    else {\r\n                        this._direction = 1;\r\n                    }\r\n                    break;\r\n                case RotationType.Clockwise:\r\n                    this._direction = 1;\r\n                    if (this._shortDistance >= 0) {\r\n                        this._distance = this._shortDistance;\r\n                    }\r\n                    else {\r\n                        this._distance = this._longDistance;\r\n                    }\r\n                    break;\r\n                case RotationType.CounterClockwise:\r\n                    this._direction = -1;\r\n                    if (this._shortDistance <= 0) {\r\n                        this._distance = this._shortDistance;\r\n                    }\r\n                    else {\r\n                        this._distance = this._longDistance;\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n        this._motion.angularVelocity = this._direction * this._speed;\r\n        this._currentNonCannonAngle += this._direction * this._speed * (_delta / 1000);\r\n        if (this.isComplete()) {\r\n            this._tx.rotation = this._end;\r\n            this._motion.angularVelocity = 0;\r\n            this._stopped = true;\r\n        }\r\n    }\r\n    isComplete() {\r\n        const distanceTravelled = Math.abs(this._currentNonCannonAngle - this._start);\r\n        return this._stopped || distanceTravelled >= Math.abs(this._distance);\r\n    }\r\n    stop() {\r\n        this._motion.angularVelocity = 0;\r\n        this._stopped = true;\r\n    }\r\n    reset() {\r\n        this._started = false;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/ScaleTo.ts\n\r\n\r\n\r\nclass ScaleTo {\r\n    constructor(entity, scaleX, scaleY, speedX, speedY) {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._tx = entity.get(TransformComponent);\r\n        this._motion = entity.get(MotionComponent);\r\n        this._endX = scaleX;\r\n        this._endY = scaleY;\r\n        this._speedX = speedX;\r\n        this._speedY = speedY;\r\n    }\r\n    update(_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._startX = this._tx.scale.x;\r\n            this._startY = this._tx.scale.y;\r\n            this._distanceX = Math.abs(this._endX - this._startX);\r\n            this._distanceY = Math.abs(this._endY - this._startY);\r\n        }\r\n        if (!(Math.abs(this._tx.scale.x - this._startX) >= this._distanceX)) {\r\n            const directionX = this._endY < this._startY ? -1 : 1;\r\n            this._motion.scaleFactor.x = this._speedX * directionX;\r\n        }\r\n        else {\r\n            this._motion.scaleFactor.x = 0;\r\n        }\r\n        if (!(Math.abs(this._tx.scale.y - this._startY) >= this._distanceY)) {\r\n            const directionY = this._endY < this._startY ? -1 : 1;\r\n            this._motion.scaleFactor.y = this._speedY * directionY;\r\n        }\r\n        else {\r\n            this._motion.scaleFactor.y = 0;\r\n        }\r\n        if (this.isComplete()) {\r\n            this._tx.scale = vec(this._endX, this._endY);\r\n            this._motion.scaleFactor.x = 0;\r\n            this._motion.scaleFactor.y = 0;\r\n        }\r\n    }\r\n    isComplete() {\r\n        return (this._stopped ||\r\n            (Math.abs(this._tx.scale.y - this._startX) >= this._distanceX && Math.abs(this._tx.scale.y - this._startY) >= this._distanceY));\r\n    }\r\n    stop() {\r\n        this._motion.scaleFactor.x = 0;\r\n        this._motion.scaleFactor.y = 0;\r\n        this._stopped = true;\r\n    }\r\n    reset() {\r\n        this._started = false;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/ScaleBy.ts\n\r\n\r\n\r\nclass ScaleBy {\r\n    constructor(entity, scaleOffsetX, scaleOffsetY, speed) {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._tx = entity.get(TransformComponent);\r\n        this._motion = entity.get(MotionComponent);\r\n        this._offset = new Vector(scaleOffsetX, scaleOffsetY);\r\n        this._speedX = this._speedY = speed;\r\n    }\r\n    update(_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._startScale = this._tx.scale.clone();\r\n            this._endScale = this._startScale.add(this._offset);\r\n            this._distanceX = Math.abs(this._endScale.x - this._startScale.x);\r\n            this._distanceY = Math.abs(this._endScale.y - this._startScale.y);\r\n            this._directionX = this._endScale.x < this._startScale.x ? -1 : 1;\r\n            this._directionY = this._endScale.y < this._startScale.y ? -1 : 1;\r\n        }\r\n        this._motion.scaleFactor.x = this._speedX * this._directionX;\r\n        this._motion.scaleFactor.y = this._speedY * this._directionY;\r\n        if (this.isComplete()) {\r\n            this._tx.scale = this._endScale;\r\n            this._motion.scaleFactor.x = 0;\r\n            this._motion.scaleFactor.y = 0;\r\n        }\r\n    }\r\n    isComplete() {\r\n        return (this._stopped ||\r\n            (Math.abs(this._tx.scale.x - this._startScale.x) >= this._distanceX &&\r\n                Math.abs(this._tx.scale.y - this._startScale.y) >= this._distanceY));\r\n    }\r\n    stop() {\r\n        this._motion.scaleFactor.x = 0;\r\n        this._motion.scaleFactor.y = 0;\r\n        this._stopped = true;\r\n    }\r\n    reset() {\r\n        this._started = false;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/CallMethod.ts\nclass CallMethod {\r\n    constructor(method) {\r\n        this._method = null;\r\n        this._hasBeenCalled = false;\r\n        this._method = method;\r\n    }\r\n    update(_delta) {\r\n        this._method();\r\n        this._hasBeenCalled = true;\r\n    }\r\n    isComplete() {\r\n        return this._hasBeenCalled;\r\n    }\r\n    reset() {\r\n        this._hasBeenCalled = false;\r\n    }\r\n    stop() {\r\n        this._hasBeenCalled = true;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/EaseTo.ts\n\r\n\r\n\r\nclass EaseTo {\r\n    constructor(entity, x, y, duration, easingFcn) {\r\n        this.easingFcn = easingFcn;\r\n        this._currentLerpTime = 0;\r\n        this._lerpDuration = 1 * 1000; // 1 second\r\n        this._lerpStart = new Vector(0, 0);\r\n        this._lerpEnd = new Vector(0, 0);\r\n        this._initialized = false;\r\n        this._stopped = false;\r\n        this._distance = 0;\r\n        this._tx = entity.get(TransformComponent);\r\n        this._motion = entity.get(MotionComponent);\r\n        this._lerpDuration = duration;\r\n        this._lerpEnd = new Vector(x, y);\r\n    }\r\n    _initialize() {\r\n        this._lerpStart = new Vector(this._tx.pos.x, this._tx.pos.y);\r\n        this._currentLerpTime = 0;\r\n        this._distance = this._lerpStart.distance(this._lerpEnd);\r\n    }\r\n    update(delta) {\r\n        if (!this._initialized) {\r\n            this._initialize();\r\n            this._initialized = true;\r\n        }\r\n        // Need to update lerp time first, otherwise the first update will always be zero\r\n        this._currentLerpTime += delta;\r\n        let newX = this._tx.pos.x;\r\n        let newY = this._tx.pos.y;\r\n        if (this._currentLerpTime < this._lerpDuration) {\r\n            if (this._lerpEnd.x < this._lerpStart.x) {\r\n                newX =\r\n                    this._lerpStart.x -\r\n                        (this.easingFcn(this._currentLerpTime, this._lerpEnd.x, this._lerpStart.x, this._lerpDuration) - this._lerpEnd.x);\r\n            }\r\n            else {\r\n                newX = this.easingFcn(this._currentLerpTime, this._lerpStart.x, this._lerpEnd.x, this._lerpDuration);\r\n            }\r\n            if (this._lerpEnd.y < this._lerpStart.y) {\r\n                newY =\r\n                    this._lerpStart.y -\r\n                        (this.easingFcn(this._currentLerpTime, this._lerpEnd.y, this._lerpStart.y, this._lerpDuration) - this._lerpEnd.y);\r\n            }\r\n            else {\r\n                newY = this.easingFcn(this._currentLerpTime, this._lerpStart.y, this._lerpEnd.y, this._lerpDuration);\r\n            }\r\n            // Given the lerp position figure out the velocity in pixels per second\r\n            this._motion.vel = vec((newX - this._tx.pos.x) / (delta / 1000), (newY - this._tx.pos.y) / (delta / 1000));\r\n        }\r\n        else {\r\n            this._tx.pos = vec(this._lerpEnd.x, this._lerpEnd.y);\r\n            this._motion.vel = Vector.Zero;\r\n        }\r\n    }\r\n    isComplete(actor) {\r\n        return this._stopped || new Vector(actor.pos.x, actor.pos.y).distance(this._lerpStart) >= this._distance;\r\n    }\r\n    reset() {\r\n        this._initialized = false;\r\n    }\r\n    stop() {\r\n        this._motion.vel = vec(0, 0);\r\n        this._stopped = true;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/Blink.ts\n\r\nclass Blink {\r\n    constructor(entity, timeVisible, timeNotVisible, numBlinks = 1) {\r\n        this._timeVisible = 0;\r\n        this._timeNotVisible = 0;\r\n        this._elapsedTime = 0;\r\n        this._totalTime = 0;\r\n        this._stopped = false;\r\n        this._started = false;\r\n        this._graphics = entity.get(GraphicsComponent);\r\n        this._timeVisible = timeVisible;\r\n        this._timeNotVisible = timeNotVisible;\r\n        this._duration = (timeVisible + timeNotVisible) * numBlinks;\r\n    }\r\n    update(delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n        }\r\n        if (!this._graphics) {\r\n            return;\r\n        }\r\n        this._elapsedTime += delta;\r\n        this._totalTime += delta;\r\n        if (this._graphics.visible && this._elapsedTime >= this._timeVisible) {\r\n            this._graphics.visible = false;\r\n            this._elapsedTime = 0;\r\n        }\r\n        if (!this._graphics.visible && this._elapsedTime >= this._timeNotVisible) {\r\n            this._graphics.visible = true;\r\n            this._elapsedTime = 0;\r\n        }\r\n        if (this.isComplete()) {\r\n            this._graphics.visible = true;\r\n        }\r\n    }\r\n    isComplete() {\r\n        return this._stopped || this._totalTime >= this._duration;\r\n    }\r\n    stop() {\r\n        if (this._graphics) {\r\n            this._graphics.visible = true;\r\n        }\r\n        this._stopped = true;\r\n    }\r\n    reset() {\r\n        this._started = false;\r\n        this._elapsedTime = 0;\r\n        this._totalTime = 0;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/Fade.ts\n\r\n\r\nclass Fade {\r\n    constructor(entity, endOpacity, speed) {\r\n        this._multiplier = 1;\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._graphics = entity.get(GraphicsComponent);\r\n        this._endOpacity = endOpacity;\r\n        this._speed = speed;\r\n    }\r\n    update(delta) {\r\n        if (!this._graphics) {\r\n            return;\r\n        }\r\n        if (!this._started) {\r\n            this._started = true;\r\n            // determine direction when we start\r\n            if (this._endOpacity < this._graphics.opacity) {\r\n                this._multiplier = -1;\r\n            }\r\n            else {\r\n                this._multiplier = 1;\r\n            }\r\n        }\r\n        if (this._speed > 0) {\r\n            this._graphics.opacity += (this._multiplier *\r\n                (Math.abs(this._graphics.opacity - this._endOpacity) * delta)) / this._speed;\r\n        }\r\n        this._speed -= delta;\r\n        if (this.isComplete()) {\r\n            this._graphics.opacity = this._endOpacity;\r\n        }\r\n        Logger.getInstance().debug('[Action fade] Actor opacity:', this._graphics.opacity);\r\n    }\r\n    isComplete() {\r\n        return this._stopped || Math.abs(this._graphics.opacity - this._endOpacity) < 0.05;\r\n    }\r\n    stop() {\r\n        this._stopped = true;\r\n    }\r\n    reset() {\r\n        this._started = false;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/Delay.ts\nclass Delay {\r\n    constructor(delay) {\r\n        this._elapsedTime = 0;\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._delay = delay;\r\n    }\r\n    update(delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n        }\r\n        this._elapsedTime += delta;\r\n    }\r\n    isComplete() {\r\n        return this._stopped || this._elapsedTime >= this._delay;\r\n    }\r\n    stop() {\r\n        this._stopped = true;\r\n    }\r\n    reset() {\r\n        this._elapsedTime = 0;\r\n        this._started = false;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/Die.ts\n\r\nclass Die {\r\n    constructor(entity) {\r\n        this._stopped = false;\r\n        this._entity = entity;\r\n    }\r\n    update(_delta) {\r\n        this._entity.get(ActionsComponent).clearActions();\r\n        this._entity.kill();\r\n        this._stopped = true;\r\n    }\r\n    isComplete() {\r\n        return this._stopped;\r\n    }\r\n    stop() {\r\n        return;\r\n    }\r\n    reset() {\r\n        return;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/Follow.ts\n\r\n\r\n\r\nclass Follow {\r\n    constructor(entity, entityToFollow, followDistance) {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._tx = entity.get(TransformComponent);\r\n        this._motion = entity.get(MotionComponent);\r\n        this._followTx = entityToFollow.get(TransformComponent);\r\n        this._followMotion = entityToFollow.get(MotionComponent);\r\n        this._current = new Vector(this._tx.pos.x, this._tx.pos.y);\r\n        this._end = new Vector(this._followTx.pos.x, this._followTx.pos.y);\r\n        this._maximumDistance = followDistance !== undefined ? followDistance : this._current.distance(this._end);\r\n        this._speed = 0;\r\n    }\r\n    update(_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._distanceBetween = this._current.distance(this._end);\r\n            this._dir = this._end.sub(this._current).normalize();\r\n        }\r\n        const actorToFollowSpeed = Math.sqrt(Math.pow(this._followMotion.vel.x, 2) + Math.pow(this._followMotion.vel.y, 2));\r\n        if (actorToFollowSpeed !== 0) {\r\n            this._speed = actorToFollowSpeed;\r\n        }\r\n        this._current = vec(this._tx.pos.x, this._tx.pos.y);\r\n        this._end = vec(this._followTx.pos.x, this._followTx.pos.y);\r\n        this._distanceBetween = this._current.distance(this._end);\r\n        this._dir = this._end.sub(this._current).normalize();\r\n        if (this._distanceBetween >= this._maximumDistance) {\r\n            const m = this._dir.scale(this._speed);\r\n            this._motion.vel = vec(m.x, m.y);\r\n        }\r\n        else {\r\n            this._motion.vel = vec(0, 0);\r\n        }\r\n        if (this.isComplete()) {\r\n            this._tx.pos = vec(this._end.x, this._end.y);\r\n            this._motion.vel = vec(0, 0);\r\n        }\r\n    }\r\n    stop() {\r\n        this._motion.vel = vec(0, 0);\r\n        this._stopped = true;\r\n    }\r\n    isComplete() {\r\n        // the actor following should never stop unless specified to do so\r\n        return this._stopped;\r\n    }\r\n    reset() {\r\n        this._started = false;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/Action/Meet.ts\n\r\n\r\n\r\nclass Meet {\r\n    constructor(actor, actorToMeet, speed) {\r\n        this._started = false;\r\n        this._stopped = false;\r\n        this._speedWasSpecified = false;\r\n        this._tx = actor.get(TransformComponent);\r\n        this._motion = actor.get(MotionComponent);\r\n        this._meetTx = actorToMeet.get(TransformComponent);\r\n        this._meetMotion = actorToMeet.get(MotionComponent);\r\n        this._current = new Vector(this._tx.pos.x, this._tx.pos.y);\r\n        this._end = new Vector(this._meetTx.pos.x, this._meetTx.pos.y);\r\n        this._speed = speed || 0;\r\n        if (speed !== undefined) {\r\n            this._speedWasSpecified = true;\r\n        }\r\n    }\r\n    update(_delta) {\r\n        if (!this._started) {\r\n            this._started = true;\r\n            this._distanceBetween = this._current.distance(this._end);\r\n            this._dir = this._end.sub(this._current).normalize();\r\n        }\r\n        const actorToMeetSpeed = Math.sqrt(Math.pow(this._meetMotion.vel.x, 2) + Math.pow(this._meetMotion.vel.y, 2));\r\n        if (actorToMeetSpeed !== 0 && !this._speedWasSpecified) {\r\n            this._speed = actorToMeetSpeed;\r\n        }\r\n        this._current = vec(this._tx.pos.x, this._tx.pos.y);\r\n        this._end = vec(this._meetTx.pos.x, this._meetTx.pos.y);\r\n        this._distanceBetween = this._current.distance(this._end);\r\n        this._dir = this._end.sub(this._current).normalize();\r\n        const m = this._dir.scale(this._speed);\r\n        this._motion.vel = vec(m.x, m.y);\r\n        if (this.isComplete()) {\r\n            this._tx.pos = vec(this._end.x, this._end.y);\r\n            this._motion.vel = vec(0, 0);\r\n        }\r\n    }\r\n    isComplete() {\r\n        return this._stopped || this._distanceBetween <= 1;\r\n    }\r\n    stop() {\r\n        this._motion.vel = vec(0, 0);\r\n        this._stopped = true;\r\n    }\r\n    reset() {\r\n        this._started = false;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/ActionContext.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * The fluent Action API allows you to perform \"actions\" on\r\n * [[Actor|Actors]] such as following, moving, rotating, and\r\n * more. You can implement your own actions by implementing\r\n * the [[Action]] interface.\r\n */\r\nclass ActionContext {\r\n    constructor(entity) {\r\n        this._entity = entity;\r\n        this._queue = new ActionQueue(entity);\r\n    }\r\n    getQueue() {\r\n        return this._queue;\r\n    }\r\n    update(elapsedMs) {\r\n        this._queue.update(elapsedMs);\r\n    }\r\n    /**\r\n     * Clears all queued actions from the Actor\r\n     */\r\n    clearActions() {\r\n        this._queue.clearActions();\r\n    }\r\n    easeTo(...args) {\r\n        var _a, _b;\r\n        let x = 0;\r\n        let y = 0;\r\n        let duration = 0;\r\n        let easingFcn = EasingFunctions.Linear;\r\n        if (args[0] instanceof Vector) {\r\n            x = args[0].x;\r\n            y = args[0].y;\r\n            duration = args[1];\r\n            easingFcn = (_a = args[2]) !== null && _a !== void 0 ? _a : easingFcn;\r\n        }\r\n        else {\r\n            x = args[0];\r\n            y = args[1];\r\n            duration = args[2];\r\n            easingFcn = (_b = args[3]) !== null && _b !== void 0 ? _b : easingFcn;\r\n        }\r\n        this._queue.add(new EaseTo(this._entity, x, y, duration, easingFcn));\r\n        return this;\r\n    }\r\n    moveTo(xOrPos, yOrSpeed, speedOrUndefined) {\r\n        let x = 0;\r\n        let y = 0;\r\n        let speed = 0;\r\n        if (xOrPos instanceof Vector) {\r\n            x = xOrPos.x;\r\n            y = xOrPos.y;\r\n            speed = yOrSpeed;\r\n        }\r\n        else {\r\n            x = xOrPos;\r\n            y = yOrSpeed;\r\n            speed = speedOrUndefined;\r\n        }\r\n        this._queue.add(new MoveTo(this._entity, x, y, speed));\r\n        return this;\r\n    }\r\n    moveBy(xOffsetOrVector, yOffsetOrSpeed, speedOrUndefined) {\r\n        let xOffset = 0;\r\n        let yOffset = 0;\r\n        let speed = 0;\r\n        if (xOffsetOrVector instanceof Vector) {\r\n            xOffset = xOffsetOrVector.x;\r\n            yOffset = xOffsetOrVector.y;\r\n            speed = yOffsetOrSpeed;\r\n        }\r\n        else {\r\n            xOffset = xOffsetOrVector;\r\n            yOffset = yOffsetOrSpeed;\r\n            speed = speedOrUndefined;\r\n        }\r\n        this._queue.add(new MoveBy(this._entity, xOffset, yOffset, speed));\r\n        return this;\r\n    }\r\n    /**\r\n     * This method will rotate an actor to the specified angle at the speed\r\n     * specified (in radians per second) and return back the actor. This\r\n     * method is part of the actor 'Action' fluent API allowing action chaining.\r\n     * @param angleRadians  The angle to rotate to in radians\r\n     * @param speed         The angular velocity of the rotation specified in radians per second\r\n     * @param rotationType  The [[RotationType]] to use for this rotation\r\n     */\r\n    rotateTo(angleRadians, speed, rotationType) {\r\n        this._queue.add(new RotateTo(this._entity, angleRadians, speed, rotationType));\r\n        return this;\r\n    }\r\n    /**\r\n     * This method will rotate an actor by the specified angle offset, from it's current rotation given a certain speed\r\n     * in radians/sec and return back the actor. This method is part\r\n     * of the actor 'Action' fluent API allowing action chaining.\r\n     * @param angleRadiansOffset  The angle to rotate to in radians relative to the current rotation\r\n     * @param speed          The speed in radians/sec the actor should rotate at\r\n     * @param rotationType  The [[RotationType]] to use for this rotation, default is shortest path\r\n     */\r\n    rotateBy(angleRadiansOffset, speed, rotationType) {\r\n        this._queue.add(new RotateBy(this._entity, angleRadiansOffset, speed, rotationType));\r\n        return this;\r\n    }\r\n    scaleTo(sizeXOrVector, sizeYOrSpeed, speedXOrUndefined, speedYOrUndefined) {\r\n        let sizeX = 1;\r\n        let sizeY = 1;\r\n        let speedX = 0;\r\n        let speedY = 0;\r\n        if (sizeXOrVector instanceof Vector && sizeYOrSpeed instanceof Vector) {\r\n            sizeX = sizeXOrVector.x;\r\n            sizeY = sizeXOrVector.y;\r\n            speedX = sizeYOrSpeed.x;\r\n            speedY = sizeYOrSpeed.y;\r\n        }\r\n        if (typeof sizeXOrVector === 'number' && typeof sizeYOrSpeed === 'number') {\r\n            sizeX = sizeXOrVector;\r\n            sizeY = sizeYOrSpeed;\r\n            speedX = speedXOrUndefined;\r\n            speedY = speedYOrUndefined;\r\n        }\r\n        this._queue.add(new ScaleTo(this._entity, sizeX, sizeY, speedX, speedY));\r\n        return this;\r\n    }\r\n    scaleBy(sizeOffsetXOrVector, sizeOffsetYOrSpeed, speed) {\r\n        let sizeOffsetX = 1;\r\n        let sizeOffsetY = 1;\r\n        if (sizeOffsetXOrVector instanceof Vector) {\r\n            sizeOffsetX = sizeOffsetXOrVector.x;\r\n            sizeOffsetY = sizeOffsetXOrVector.y;\r\n            speed = sizeOffsetYOrSpeed;\r\n        }\r\n        if (typeof sizeOffsetXOrVector === 'number' && typeof sizeOffsetYOrSpeed === 'number') {\r\n            sizeOffsetX = sizeOffsetXOrVector;\r\n            sizeOffsetY = sizeOffsetYOrSpeed;\r\n        }\r\n        this._queue.add(new ScaleBy(this._entity, sizeOffsetX, sizeOffsetY, speed));\r\n        return this;\r\n    }\r\n    /**\r\n     * This method will cause an actor to blink (become visible and not\r\n     * visible). Optionally, you may specify the number of blinks. Specify the amount of time\r\n     * the actor should be visible per blink, and the amount of time not visible.\r\n     * This method is part of the actor 'Action' fluent API allowing action chaining.\r\n     * @param timeVisible     The amount of time to stay visible per blink in milliseconds\r\n     * @param timeNotVisible  The amount of time to stay not visible per blink in milliseconds\r\n     * @param numBlinks       The number of times to blink\r\n     */\r\n    blink(timeVisible, timeNotVisible, numBlinks = 1) {\r\n        this._queue.add(new Blink(this._entity, timeVisible, timeNotVisible, numBlinks));\r\n        return this;\r\n    }\r\n    /**\r\n     * This method will cause an actor's opacity to change from its current value\r\n     * to the provided value by a specified time (in milliseconds). This method is\r\n     * part of the actor 'Action' fluent API allowing action chaining.\r\n     * @param opacity  The ending opacity\r\n     * @param time     The time it should take to fade the actor (in milliseconds)\r\n     */\r\n    fade(opacity, time) {\r\n        this._queue.add(new Fade(this._entity, opacity, time));\r\n        return this;\r\n    }\r\n    /**\r\n     * This method will delay the next action from executing for a certain\r\n     * amount of time (in milliseconds). This method is part of the actor\r\n     * 'Action' fluent API allowing action chaining.\r\n     * @param time  The amount of time to delay the next action in the queue from executing in milliseconds\r\n     */\r\n    delay(time) {\r\n        this._queue.add(new Delay(time));\r\n        return this;\r\n    }\r\n    /**\r\n     * This method will add an action to the queue that will remove the actor from the\r\n     * scene once it has completed its previous  Any actions on the\r\n     * action queue after this action will not be executed.\r\n     */\r\n    die() {\r\n        this._queue.add(new Die(this._entity));\r\n        return this;\r\n    }\r\n    /**\r\n     * This method allows you to call an arbitrary method as the next action in the\r\n     * action queue. This is useful if you want to execute code in after a specific\r\n     * action, i.e An actor arrives at a destination after traversing a path\r\n     */\r\n    callMethod(method) {\r\n        this._queue.add(new CallMethod(method));\r\n        return this;\r\n    }\r\n    /**\r\n     * This method will cause the actor to repeat all of the actions built in\r\n     * the `repeatBuilder` callback. If the number of repeats\r\n     * is not specified it will repeat forever. This method is part of\r\n     * the actor 'Action' fluent API allowing action chaining\r\n     *\r\n     * ```typescript\r\n     * // Move up in a zig-zag by repeated moveBy's\r\n     * actor.actions.repeat(repeatCtx => {\r\n     *  repeatCtx.moveBy(10, 0, 10);\r\n     *  repeatCtx.moveBy(0, 10, 10);\r\n     * }, 5);\r\n     * ```\r\n     *\r\n     * @param repeatBuilder The builder to specify the repeatable list of actions\r\n     * @param times  The number of times to repeat all the previous actions in the action queue. If nothing is specified the actions\r\n     * will repeat forever\r\n     */\r\n    repeat(repeatBuilder, times) {\r\n        if (!times) {\r\n            this.repeatForever(repeatBuilder);\r\n            return this;\r\n        }\r\n        this._queue.add(new Repeat(this._entity, repeatBuilder, times));\r\n        return this;\r\n    }\r\n    /**\r\n     * This method will cause the actor to repeat all of the actions built in\r\n     * the `repeatBuilder` callback. If the number of repeats\r\n     * is not specified it will repeat forever. This method is part of\r\n     * the actor 'Action' fluent API allowing action chaining\r\n     *\r\n     * ```typescript\r\n     * // Move up in a zig-zag by repeated moveBy's\r\n     * actor.actions.repeat(repeatCtx => {\r\n     *  repeatCtx.moveBy(10, 0, 10);\r\n     *  repeatCtx.moveBy(0, 10, 10);\r\n     * }, 5);\r\n     * ```\r\n     *\r\n     * @param repeatBuilder The builder to specify the repeatable list of actions\r\n     */\r\n    repeatForever(repeatBuilder) {\r\n        this._queue.add(new RepeatForever(this._entity, repeatBuilder));\r\n        return this;\r\n    }\r\n    /**\r\n     * This method will cause the entity to follow another at a specified distance\r\n     * @param entity           The entity to follow\r\n     * @param followDistance  The distance to maintain when following, if not specified the actor will follow at the current distance.\r\n     */\r\n    follow(entity, followDistance) {\r\n        if (followDistance === undefined) {\r\n            this._queue.add(new Follow(this._entity, entity));\r\n        }\r\n        else {\r\n            this._queue.add(new Follow(this._entity, entity, followDistance));\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * This method will cause the entity to move towards another until they\r\n     * collide \"meet\" at a specified speed.\r\n     * @param entity  The entity to meet\r\n     * @param speed  The speed in pixels per second to move, if not specified it will match the speed of the other actor\r\n     */\r\n    meet(entity, speed) {\r\n        if (speed === undefined) {\r\n            this._queue.add(new Meet(this._entity, entity));\r\n        }\r\n        else {\r\n            this._queue.add(new Meet(this._entity, entity, speed));\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Returns a promise that resolves when the current action queue up to now\r\n     * is finished.\r\n     * @deprecated Use `toPromise()` will be removed in v0.26.0\r\n     */\r\n    asPromise() {\r\n        return this.toPromise();\r\n    }\r\n    /**\r\n     * Returns a promise that resolves when the current action queue up to now\r\n     * is finished.\r\n     */\r\n    toPromise() {\r\n        const temp = new Promise((resolve) => {\r\n            this._queue.add(new CallMethod(() => {\r\n                resolve();\r\n            }));\r\n        });\r\n        return temp;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/ActionsComponent.ts\n\r\n\r\n\r\n\r\n;\r\nclass ActionsComponent extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.type = 'ex.actions';\r\n        this.dependencies = [TransformComponent, MotionComponent];\r\n    }\r\n    onAdd(entity) {\r\n        this._ctx = new ActionContext(entity);\r\n    }\r\n    onRemove() {\r\n        this._ctx = null;\r\n    }\r\n    /**\r\n     * Returns the internal action queue\r\n     * @returns action queue\r\n     */\r\n    getQueue() {\r\n        var _a;\r\n        return (_a = this._ctx) === null || _a === void 0 ? void 0 : _a.getQueue();\r\n    }\r\n    /**\r\n     * Updates the internal action context, performing action and moving through the internal queue\r\n     * @param elapsedMs\r\n     */\r\n    update(elapsedMs) {\r\n        var _a;\r\n        return (_a = this._ctx) === null || _a === void 0 ? void 0 : _a.update(elapsedMs);\r\n    }\r\n    /**\r\n     * Clears all queued actions from the Actor\r\n     */\r\n    clearActions() {\r\n        var _a;\r\n        (_a = this._ctx) === null || _a === void 0 ? void 0 : _a.clearActions();\r\n    }\r\n    easeTo(...args) {\r\n        return this._ctx.easeTo.apply(this._ctx, args);\r\n    }\r\n    moveTo(xOrPos, yOrSpeed, speedOrUndefined) {\r\n        return this._ctx.moveTo.apply(this._ctx, [xOrPos, yOrSpeed, speedOrUndefined]);\r\n    }\r\n    moveBy(xOffsetOrVector, yOffsetOrSpeed, speedOrUndefined) {\r\n        return this._ctx.moveBy.apply(this._ctx, [xOffsetOrVector, yOffsetOrSpeed, speedOrUndefined]);\r\n    }\r\n    /**\r\n     * This method will rotate an actor to the specified angle at the speed\r\n     * specified (in radians per second) and return back the actor. This\r\n     * method is part of the actor 'Action' fluent API allowing action chaining.\r\n     * @param angleRadians  The angle to rotate to in radians\r\n     * @param speed         The angular velocity of the rotation specified in radians per second\r\n     * @param rotationType  The [[RotationType]] to use for this rotation\r\n     */\r\n    rotateTo(angleRadians, speed, rotationType) {\r\n        return this._ctx.rotateTo(angleRadians, speed, rotationType);\r\n    }\r\n    /**\r\n     * This method will rotate an actor by the specified angle offset, from it's current rotation given a certain speed\r\n     * in radians/sec and return back the actor. This method is part\r\n     * of the actor 'Action' fluent API allowing action chaining.\r\n     * @param angleRadiansOffset  The angle to rotate to in radians relative to the current rotation\r\n     * @param speed          The speed in radians/sec the actor should rotate at\r\n     * @param rotationType  The [[RotationType]] to use for this rotation, default is shortest path\r\n     */\r\n    rotateBy(angleRadiansOffset, speed, rotationType) {\r\n        return this._ctx.rotateBy(angleRadiansOffset, speed, rotationType);\r\n    }\r\n    scaleTo(sizeXOrVector, sizeYOrSpeed, speedXOrUndefined, speedYOrUndefined) {\r\n        return this._ctx.scaleTo.apply(this._ctx, [sizeXOrVector, sizeYOrSpeed, speedXOrUndefined, speedYOrUndefined]);\r\n    }\r\n    scaleBy(sizeOffsetXOrVector, sizeOffsetYOrSpeed, speed) {\r\n        return this._ctx.scaleBy.apply(this._ctx, [sizeOffsetXOrVector, sizeOffsetYOrSpeed, speed]);\r\n    }\r\n    /**\r\n     * This method will cause an actor to blink (become visible and not\r\n     * visible). Optionally, you may specify the number of blinks. Specify the amount of time\r\n     * the actor should be visible per blink, and the amount of time not visible.\r\n     * This method is part of the actor 'Action' fluent API allowing action chaining.\r\n     * @param timeVisible     The amount of time to stay visible per blink in milliseconds\r\n     * @param timeNotVisible  The amount of time to stay not visible per blink in milliseconds\r\n     * @param numBlinks       The number of times to blink\r\n     */\r\n    blink(timeVisible, timeNotVisible, numBlinks) {\r\n        return this._ctx.blink(timeVisible, timeNotVisible, numBlinks);\r\n    }\r\n    /**\r\n     * This method will cause an actor's opacity to change from its current value\r\n     * to the provided value by a specified time (in milliseconds). This method is\r\n     * part of the actor 'Action' fluent API allowing action chaining.\r\n     * @param opacity  The ending opacity\r\n     * @param time     The time it should take to fade the actor (in milliseconds)\r\n     */\r\n    fade(opacity, time) {\r\n        return this._ctx.fade(opacity, time);\r\n    }\r\n    /**\r\n     * This method will delay the next action from executing for a certain\r\n     * amount of time (in milliseconds). This method is part of the actor\r\n     * 'Action' fluent API allowing action chaining.\r\n     * @param time  The amount of time to delay the next action in the queue from executing in milliseconds\r\n     */\r\n    delay(time) {\r\n        return this._ctx.delay(time);\r\n    }\r\n    /**\r\n     * This method will add an action to the queue that will remove the actor from the\r\n     * scene once it has completed its previous  Any actions on the\r\n     * action queue after this action will not be executed.\r\n     */\r\n    die() {\r\n        return this._ctx.die();\r\n    }\r\n    /**\r\n     * This method allows you to call an arbitrary method as the next action in the\r\n     * action queue. This is useful if you want to execute code in after a specific\r\n     * action, i.e An actor arrives at a destination after traversing a path\r\n     */\r\n    callMethod(method) {\r\n        return this._ctx.callMethod(method);\r\n    }\r\n    /**\r\n     * This method will cause the actor to repeat all of the actions built in\r\n     * the `repeatBuilder` callback. If the number of repeats\r\n     * is not specified it will repeat forever. This method is part of\r\n     * the actor 'Action' fluent API allowing action chaining\r\n     *\r\n     * ```typescript\r\n     * // Move up in a zig-zag by repeated moveBy's\r\n     * actor.actions.repeat(repeatCtx => {\r\n     *  repeatCtx.moveBy(10, 0, 10);\r\n     *  repeatCtx.moveBy(0, 10, 10);\r\n     * }, 5);\r\n     * ```\r\n     *\r\n     * @param repeatBuilder The builder to specify the repeatable list of actions\r\n     * @param times  The number of times to repeat all the previous actions in the action queue. If nothing is specified the actions\r\n     * will repeat forever\r\n     */\r\n    repeat(repeatBuilder, times) {\r\n        return this._ctx.repeat(repeatBuilder, times);\r\n    }\r\n    /**\r\n     * This method will cause the actor to repeat all of the actions built in\r\n     * the `repeatBuilder` callback. If the number of repeats\r\n     * is not specified it will repeat forever. This method is part of\r\n     * the actor 'Action' fluent API allowing action chaining\r\n     *\r\n     * ```typescript\r\n     * // Move up in a zig-zag by repeated moveBy's\r\n     * actor.actions.repeat(repeatCtx => {\r\n     *  repeatCtx.moveBy(10, 0, 10);\r\n     *  repeatCtx.moveBy(0, 10, 10);\r\n     * }, 5);\r\n     * ```\r\n     *\r\n     * @param repeatBuilder The builder to specify the repeatable list of actions\r\n     */\r\n    repeatForever(repeatBuilder) {\r\n        return this._ctx.repeatForever(repeatBuilder);\r\n    }\r\n    /**\r\n     * This method will cause the entity to follow another at a specified distance\r\n     * @param entity           The entity to follow\r\n     * @param followDistance  The distance to maintain when following, if not specified the actor will follow at the current distance.\r\n     */\r\n    follow(entity, followDistance) {\r\n        return this._ctx.follow(entity, followDistance);\r\n    }\r\n    /**\r\n     * This method will cause the entity to move towards another until they\r\n     * collide \"meet\" at a specified speed.\r\n     * @param entity  The entity to meet\r\n     * @param speed  The speed in pixels per second to move, if not specified it will match the speed of the other actor\r\n     */\r\n    meet(entity, speed) {\r\n        return this._ctx.meet(entity, speed);\r\n    }\r\n    /**\r\n     * Returns a promise that resolves when the current action queue up to now\r\n     * is finished.\r\n     * @deprecated Use `toPromise()` will be removed in v0.26.0\r\n     */\r\n    asPromise() {\r\n        return this.toPromise();\r\n    }\r\n    /**\r\n     * Returns a promise that resolves when the current action queue up to now\r\n     * is finished.\r\n     */\r\n    toPromise() {\r\n        return this._ctx.toPromise();\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Font.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Represents a system or web font in Excalibur\r\n *\r\n * If no options specified, the system sans-serif 10 pixel is used\r\n *\r\n * If loading a custom web font be sure to have the font loaded before you use it https://erikonarheim.com/posts/dont-test-fonts/\r\n */\r\nclass Font extends Graphic {\r\n    constructor(options = {}) {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u;\r\n        super(options); // <- Graphics properties\r\n        /**\r\n         * Set the font filtering mode, by default set to [[ImageFiltering.Blended]] regardless of the engine default smoothing\r\n         *\r\n         * If you have a pixel style font that may be a reason to switch this to [[ImageFiltering.Pixel]]\r\n         */\r\n        this.filtering = ImageFiltering.Blended;\r\n        /**\r\n         * Font quality determines the size of the underlying raster text, higher quality means less jagged edges.\r\n         * If quality is set to 1, then just enough raster bitmap is generated to render the text.\r\n         *\r\n         * You can think of quality as how zoomed in to the text you can get before seeing jagged edges.\r\n         *\r\n         * (Default 2)\r\n         */\r\n        this.quality = 2;\r\n        // Raster properties for fonts\r\n        this.padding = 2;\r\n        this.smoothing = false;\r\n        this.lineWidth = 1;\r\n        this.lineDash = [];\r\n        this.color = Color.Black;\r\n        this.family = 'sans-serif';\r\n        this.style = FontStyle.Normal;\r\n        this.bold = false;\r\n        this.unit = FontUnit.Px;\r\n        this.textAlign = TextAlign.Left;\r\n        this.baseAlign = BaseAlign.Alphabetic;\r\n        this.direction = Direction.LeftToRight;\r\n        this.size = 10;\r\n        this.shadow = null;\r\n        this._textBounds = new BoundingBox();\r\n        this._textToBitmap = new Map();\r\n        this._bitmapUsage = new Map();\r\n        // Raster properties\r\n        this.smoothing = (_a = options === null || options === void 0 ? void 0 : options.smoothing) !== null && _a !== void 0 ? _a : this.smoothing;\r\n        this.padding = (_b = options === null || options === void 0 ? void 0 : options.padding) !== null && _b !== void 0 ? _b : this.padding;\r\n        this.color = (_c = options === null || options === void 0 ? void 0 : options.color) !== null && _c !== void 0 ? _c : this.color;\r\n        this.strokeColor = (_d = options === null || options === void 0 ? void 0 : options.strokeColor) !== null && _d !== void 0 ? _d : this.strokeColor;\r\n        this.lineDash = (_e = options === null || options === void 0 ? void 0 : options.lineDash) !== null && _e !== void 0 ? _e : this.lineDash;\r\n        this.lineWidth = (_f = options === null || options === void 0 ? void 0 : options.lineWidth) !== null && _f !== void 0 ? _f : this.lineWidth;\r\n        this.filtering = (_g = options === null || options === void 0 ? void 0 : options.filtering) !== null && _g !== void 0 ? _g : this.filtering;\r\n        // Font specific properties\r\n        this.family = (_h = options === null || options === void 0 ? void 0 : options.family) !== null && _h !== void 0 ? _h : this.family;\r\n        this.style = (_j = options === null || options === void 0 ? void 0 : options.style) !== null && _j !== void 0 ? _j : this.style;\r\n        this.bold = (_k = options === null || options === void 0 ? void 0 : options.bold) !== null && _k !== void 0 ? _k : this.bold;\r\n        this.size = (_l = options === null || options === void 0 ? void 0 : options.size) !== null && _l !== void 0 ? _l : this.size;\r\n        this.unit = (_m = options === null || options === void 0 ? void 0 : options.unit) !== null && _m !== void 0 ? _m : this.unit;\r\n        this.textAlign = (_o = options === null || options === void 0 ? void 0 : options.textAlign) !== null && _o !== void 0 ? _o : this.textAlign;\r\n        this.baseAlign = (_p = options === null || options === void 0 ? void 0 : options.baseAlign) !== null && _p !== void 0 ? _p : this.baseAlign;\r\n        this.direction = (_q = options === null || options === void 0 ? void 0 : options.direction) !== null && _q !== void 0 ? _q : this.direction;\r\n        this.quality = (_r = options === null || options === void 0 ? void 0 : options.quality) !== null && _r !== void 0 ? _r : this.quality;\r\n        if (options === null || options === void 0 ? void 0 : options.shadow) {\r\n            this.shadow = {};\r\n            this.shadow.blur = (_s = options.shadow.blur) !== null && _s !== void 0 ? _s : this.shadow.blur;\r\n            this.shadow.offset = (_t = options.shadow.offset) !== null && _t !== void 0 ? _t : this.shadow.offset;\r\n            this.shadow.color = (_u = options.shadow.color) !== null && _u !== void 0 ? _u : this.shadow.color;\r\n        }\r\n    }\r\n    clone() {\r\n        return new Font({\r\n            ...this.cloneGraphicOptions(),\r\n            size: this.size,\r\n            unit: this.unit,\r\n            family: this.family,\r\n            style: this.style,\r\n            bold: this.bold,\r\n            textAlign: this.textAlign,\r\n            baseAlign: this.baseAlign,\r\n            direction: this.direction,\r\n            shadow: this.shadow\r\n                ? {\r\n                    blur: this.shadow.blur,\r\n                    offset: this.shadow.offset,\r\n                    color: this.shadow.color\r\n                }\r\n                : null\r\n        });\r\n    }\r\n    get fontString() {\r\n        return `${this.style} ${this.bold ? 'bold' : ''} ${this.size}${this.unit} ${this.family}`;\r\n    }\r\n    get localBounds() {\r\n        return this._textBounds;\r\n    }\r\n    _drawImage(_ex, _x, _y) {\r\n        // TODO weird vestigial drawimage\r\n    }\r\n    _rotate(ex) {\r\n        var _a;\r\n        // TODO this needs to change depending on the bounding box...\r\n        const origin = (_a = this.origin) !== null && _a !== void 0 ? _a : this._textBounds.center;\r\n        ex.translate(origin.x, origin.y);\r\n        ex.rotate(this.rotation);\r\n        ex.translate(-origin.x, -origin.y);\r\n    }\r\n    _flip(ex) {\r\n        if (this.flipHorizontal) {\r\n            ex.translate(this._textBounds.width / this.scale.x, 0);\r\n            ex.scale(-1, 1);\r\n        }\r\n        if (this.flipVertical) {\r\n            ex.translate(0, -this._textBounds.height / 2 / this.scale.y);\r\n            ex.scale(1, -1);\r\n        }\r\n    }\r\n    /**\r\n     * Returns a BoundingBox that is the total size of the text including multiple lines\r\n     *\r\n     * Does not include any padding or adjustment\r\n     * @param text\r\n     * @returns BoundingBox\r\n     */\r\n    measureText(text) {\r\n        const lines = text.split('\\n');\r\n        const maxWidthLine = lines.reduce((a, b) => {\r\n            return a.length > b.length ? a : b;\r\n        });\r\n        const ctx = this._getTextBitmap(text);\r\n        this._applyFont(ctx); // font must be applied to the context to measure it\r\n        const metrics = ctx.measureText(maxWidthLine);\r\n        let textHeight = Math.abs(metrics.actualBoundingBoxAscent) + Math.abs(metrics.actualBoundingBoxDescent);\r\n        // TODO lineheight makes the text bounds wonky\r\n        const lineAdjustedHeight = textHeight * lines.length;\r\n        textHeight = lineAdjustedHeight;\r\n        const bottomBounds = lineAdjustedHeight - Math.abs(metrics.actualBoundingBoxAscent);\r\n        const x = 0;\r\n        const y = 0;\r\n        return new BoundingBox({\r\n            left: x - Math.abs(metrics.actualBoundingBoxLeft) - this.padding,\r\n            top: y - Math.abs(metrics.actualBoundingBoxAscent) - this.padding,\r\n            bottom: y + bottomBounds + this.padding,\r\n            right: x + Math.abs(metrics.actualBoundingBoxRight) + this.padding\r\n        });\r\n    }\r\n    _setDimension(textBounds, bitmap) {\r\n        // Changing the width and height clears the context properties\r\n        // We double the bitmap width to account for all possible alignment\r\n        // We scale by \"quality\" so we render text without jaggies\r\n        bitmap.canvas.width = (textBounds.width + this.padding * 2) * 2 * this.quality;\r\n        bitmap.canvas.height = (textBounds.height + this.padding * 2) * 2 * this.quality;\r\n    }\r\n    _postDraw(ex) {\r\n        ex.restore();\r\n    }\r\n    /**\r\n     * We need to identify bitmaps with more than just the text content\r\n     *\r\n     * Any properties that can change the rendering of the text\r\n     */\r\n    _getRasterPropertiesHash(color) {\r\n        var _a, _b;\r\n        const hash = '__hashcode__' +\r\n            this.fontString +\r\n            this.showDebug +\r\n            this.textAlign +\r\n            this.baseAlign +\r\n            this.direction +\r\n            JSON.stringify(this.shadow) +\r\n            (this.padding.toString() +\r\n                this.smoothing.toString() +\r\n                this.lineWidth.toString() +\r\n                this.lineDash.toString() +\r\n                ((_a = this.strokeColor) === null || _a === void 0 ? void 0 : _a.toString()) +\r\n                (color ? color.toString() : (_b = this.color) === null || _b === void 0 ? void 0 : _b.toString()).toString());\r\n        return hash;\r\n    }\r\n    _applyRasterProperties(ctx, color) {\r\n        var _a, _b, _c;\r\n        ctx.translate(this.padding, this.padding);\r\n        ctx.imageSmoothingEnabled = this.smoothing;\r\n        ctx.lineWidth = this.lineWidth;\r\n        ctx.setLineDash((_a = this.lineDash) !== null && _a !== void 0 ? _a : ctx.getLineDash());\r\n        ctx.strokeStyle = (_b = this.strokeColor) === null || _b === void 0 ? void 0 : _b.toString();\r\n        ctx.fillStyle = color ? color.toString() : (_c = this.color) === null || _c === void 0 ? void 0 : _c.toString();\r\n    }\r\n    _applyFont(ctx) {\r\n        ctx.translate(this.padding + ctx.canvas.width / 2, this.padding + ctx.canvas.height / 2);\r\n        ctx.scale(this.quality, this.quality);\r\n        ctx.textAlign = this.textAlign;\r\n        ctx.textBaseline = this.baseAlign;\r\n        ctx.font = this.fontString;\r\n        ctx.direction = this.direction;\r\n        if (this.shadow) {\r\n            ctx.shadowColor = this.shadow.color.toString();\r\n            ctx.shadowBlur = this.shadow.blur;\r\n            ctx.shadowOffsetX = this.shadow.offset.x;\r\n            ctx.shadowOffsetY = this.shadow.offset.y;\r\n        }\r\n    }\r\n    _drawText(ctx, text, colorOverride, lineHeight) {\r\n        const lines = text.split('\\n');\r\n        this._applyRasterProperties(ctx, colorOverride);\r\n        this._applyFont(ctx);\r\n        for (let i = 0; i < lines.length; i++) {\r\n            const line = lines[i];\r\n            if (this.color) {\r\n                ctx.fillText(line, 0, i * lineHeight);\r\n            }\r\n            if (this.strokeColor) {\r\n                ctx.strokeText(line, 0, i * lineHeight);\r\n            }\r\n        }\r\n        if (this.showDebug) {\r\n            // Horizontal line\r\n            /* istanbul ignore next */\r\n            line(ctx, Color.Red, -ctx.canvas.width / 2, 0, ctx.canvas.width / 2, 0, 2);\r\n            // Vertical line\r\n            /* istanbul ignore next */\r\n            line(ctx, Color.Red, 0, -ctx.canvas.height / 2, 0, ctx.canvas.height / 2, 2);\r\n        }\r\n    }\r\n    _getTextBitmap(text, color) {\r\n        const textAndHash = text + this._getRasterPropertiesHash(color);\r\n        const bitmap = this._textToBitmap.get(textAndHash);\r\n        if (bitmap) {\r\n            return bitmap;\r\n        }\r\n        const canvas = document.createElement('canvas');\r\n        const ctx = canvas.getContext('2d');\r\n        this._textToBitmap.set(textAndHash, ctx);\r\n        return ctx;\r\n    }\r\n    render(ex, text, colorOverride, x, y) {\r\n        if (this.showDebug) {\r\n            this.clearCache();\r\n        }\r\n        this.checkAndClearCache();\r\n        const bitmap = this._getTextBitmap(text, colorOverride);\r\n        const isNewBitmap = !this._bitmapUsage.get(bitmap);\r\n        this._textBounds = this.measureText(text);\r\n        if (isNewBitmap) {\r\n            this._setDimension(this._textBounds, bitmap);\r\n        }\r\n        this._preDraw(ex, x, y);\r\n        const lines = text.split('\\n');\r\n        const lineHeight = this._textBounds.height / lines.length;\r\n        const rasterWidth = bitmap.canvas.width;\r\n        const rasterHeight = bitmap.canvas.height;\r\n        if (isNewBitmap) {\r\n            // draws the text to the bitmap\r\n            this._drawText(bitmap, text, colorOverride, lineHeight);\r\n            // draws the bitmap to excalibur graphics context\r\n            TextureLoader.load(bitmap.canvas, this.filtering, true);\r\n        }\r\n        ex.drawImage(bitmap.canvas, 0, 0, rasterWidth, rasterHeight, x - rasterWidth / this.quality / 2, y - rasterHeight / this.quality / 2, rasterWidth / this.quality, rasterHeight / this.quality);\r\n        this._postDraw(ex);\r\n        // Cache the bitmap for certain amount of time\r\n        this._bitmapUsage.set(bitmap, performance.now());\r\n    }\r\n    /**\r\n     * Get the internal cache size of the font\r\n     * This is useful when debugging memory usage, these numbers indicate the number of cached in memory text bitmaps\r\n     */\r\n    get cacheSize() {\r\n        return this._bitmapUsage.size;\r\n    }\r\n    /**\r\n     * Force clear all cached text bitmaps\r\n     */\r\n    clearCache() {\r\n        this._bitmapUsage.clear();\r\n    }\r\n    /**\r\n     * Remove any expired cached text bitmaps\r\n     */\r\n    checkAndClearCache() {\r\n        for (const [bitmap, time] of this._bitmapUsage.entries()) {\r\n            // if bitmap hasn't been used in 1 second clear it\r\n            if (time + 1000 < performance.now()) {\r\n                this._bitmapUsage.delete(bitmap);\r\n            }\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Text.ts\n\r\n\r\n\r\n/**\r\n * Represent Text graphics in excalibur\r\n *\r\n * Useful for in game labels, ui, or overlays\r\n */\r\nclass Text extends Graphic {\r\n    constructor(options) {\r\n        var _a, _b;\r\n        super(options);\r\n        this._text = '';\r\n        this._textWidth = 0;\r\n        this._textHeight = 0;\r\n        // This order is important font, color, then text\r\n        this.font = (_a = options.font) !== null && _a !== void 0 ? _a : new Font();\r\n        this.color = (_b = options.color) !== null && _b !== void 0 ? _b : this.color;\r\n        this.text = options.text;\r\n    }\r\n    clone() {\r\n        var _a, _b;\r\n        return new Text({\r\n            text: this.text.slice(),\r\n            color: (_b = (_a = this.color) === null || _a === void 0 ? void 0 : _a.clone()) !== null && _b !== void 0 ? _b : Color.Black,\r\n            font: this.font.clone()\r\n        });\r\n    }\r\n    get text() {\r\n        return this._text;\r\n    }\r\n    set text(value) {\r\n        this._text = value;\r\n        const bounds = this.font.measureText(this._text);\r\n        this._textWidth = bounds.width;\r\n        this._textHeight = bounds.height;\r\n    }\r\n    get font() {\r\n        return this._font;\r\n    }\r\n    set font(font) {\r\n        this._font = font;\r\n    }\r\n    get width() {\r\n        if (this._textWidth === 0) {\r\n            this._calculateDimension();\r\n        }\r\n        return this._textWidth * this.scale.x;\r\n    }\r\n    get height() {\r\n        if (this._textHeight === 0) {\r\n            this._calculateDimension();\r\n        }\r\n        return this._textHeight * this.scale.y;\r\n    }\r\n    _calculateDimension() {\r\n        const { width, height } = this.font.measureText(this._text);\r\n        this._textWidth = width;\r\n        this._textHeight = height;\r\n    }\r\n    get localBounds() {\r\n        return this.font.measureText(this._text).scale(this.scale);\r\n    }\r\n    _rotate(_ex) {\r\n        // None this is delegated to font\r\n        // This override erases the default behavior\r\n    }\r\n    _flip(_ex) {\r\n        // None this is delegated to font\r\n        // This override erases the default behavior\r\n    }\r\n    _drawImage(ex, x, y) {\r\n        var _a;\r\n        let color = Color.Black;\r\n        if (this.font instanceof Font) {\r\n            color = (_a = this.color) !== null && _a !== void 0 ? _a : this.font.color;\r\n        }\r\n        if (this.isStale() || this.font.isStale()) {\r\n            this.font.flipHorizontal = this.flipHorizontal;\r\n            this.font.flipVertical = this.flipVertical;\r\n            this.font.rotation = this.rotation;\r\n            this.font.origin = this.origin;\r\n            this.font.opacity = this.opacity;\r\n        }\r\n        const { width, height } = this.font.measureText(this._text);\r\n        this._textWidth = width;\r\n        this._textHeight = height;\r\n        this.font.render(ex, this._text, color, x, y);\r\n        if (this.font.showDebug) {\r\n            ex.debug.drawRect(x - width, y - height, width * 2, height * 2);\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actor.ts\nvar Actor_decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Type guard for checking if something is an Actor\r\n * @param x\r\n */\r\nfunction isActor(x) {\r\n    return x instanceof Actor;\r\n}\r\n/**\r\n * The most important primitive in Excalibur is an `Actor`. Anything that\r\n * can move on the screen, collide with another `Actor`, respond to events,\r\n * or interact with the current scene, must be an actor. An `Actor` **must**\r\n * be part of a [[Scene]] for it to be drawn to the screen.\r\n */\r\nclass Actor extends Entity {\r\n    // #endregion\r\n    /**\r\n     *\r\n     * @param config\r\n     */\r\n    constructor(config) {\r\n        super();\r\n        /**\r\n         * The anchor to apply all actor related transformations like rotation,\r\n         * translation, and scaling. By default the anchor is in the center of\r\n         * the actor. By default it is set to the center of the actor (.5, .5)\r\n         *\r\n         * An anchor of (.5, .5) will ensure that drawings are centered.\r\n         *\r\n         * Use `anchor.setTo` to set the anchor to a different point using\r\n         * values between 0 and 1. For example, anchoring to the top-left would be\r\n         * `Actor.anchor.setTo(0, 0)` and top-right would be `Actor.anchor.setTo(0, 1)`.\r\n         */\r\n        this._anchor = watch(Vector.Half, (v) => this._handleAnchorChange(v));\r\n        /**\r\n         * Convenience reference to the global logger\r\n         */\r\n        this.logger = Logger.getInstance();\r\n        /**\r\n         * The scene that the actor is in\r\n         */\r\n        this.scene = null;\r\n        /**\r\n         * @deprecated will be removed in v0.26.0\r\n         */\r\n        this.frames = {};\r\n        /**\r\n         * Access to the current drawing for the actor, this can be\r\n         * an [[Animation]], [[Sprite]], or [[Polygon]].\r\n         * Set drawings with [[setDrawing]].\r\n         * @deprecated will be removed in v0.26.0\r\n         */\r\n        this.currentDrawing = null;\r\n        /**\r\n         * Draggable helper\r\n         */\r\n        this._draggable = false;\r\n        this._dragging = false;\r\n        this._pointerDragStartHandler = () => {\r\n            this._dragging = true;\r\n        };\r\n        this._pointerDragEndHandler = () => {\r\n            this._dragging = false;\r\n        };\r\n        this._pointerDragMoveHandler = (pe) => {\r\n            if (this._dragging) {\r\n                this.pos = pe.worldPos;\r\n            }\r\n        };\r\n        this._pointerDragLeaveHandler = (pe) => {\r\n            if (this._dragging) {\r\n                this.pos = pe.worldPos;\r\n            }\r\n        };\r\n        /**\r\n         * Modify the current actor update pipeline.\r\n         * @deprecated will be removed in v0.26.0\r\n         */\r\n        this.traits = [];\r\n        const { name, x, y, pos, coordPlane, scale, width, height, radius, collider, vel, acc, rotation, angularVelocity, z, color, visible, anchor, collisionType, collisionGroup } = {\r\n            ...config\r\n        };\r\n        this._setName(name);\r\n        this.anchor = anchor !== null && anchor !== void 0 ? anchor : Actor.defaults.anchor.clone();\r\n        const tx = new TransformComponent();\r\n        this.addComponent(tx);\r\n        this.pos = pos !== null && pos !== void 0 ? pos : vec(x !== null && x !== void 0 ? x : 0, y !== null && y !== void 0 ? y : 0);\r\n        this.rotation = rotation !== null && rotation !== void 0 ? rotation : 0;\r\n        this.scale = scale !== null && scale !== void 0 ? scale : vec(1, 1);\r\n        this.z = z !== null && z !== void 0 ? z : 0;\r\n        tx.coordPlane = coordPlane !== null && coordPlane !== void 0 ? coordPlane : CoordPlane.World;\r\n        this.addComponent(new PointerComponent);\r\n        this.addComponent(new GraphicsComponent({\r\n            anchor: this.anchor\r\n        }));\r\n        this.addComponent(new CanvasDrawComponent((ctx, delta) => this.draw(ctx, delta)));\r\n        this.addComponent(new MotionComponent());\r\n        this.vel = vel !== null && vel !== void 0 ? vel : Vector.Zero;\r\n        this.acc = acc !== null && acc !== void 0 ? acc : Vector.Zero;\r\n        this.angularVelocity = angularVelocity !== null && angularVelocity !== void 0 ? angularVelocity : 0;\r\n        this.addComponent(new ActionsComponent());\r\n        this.addComponent(new BodyComponent());\r\n        this.body.collisionType = collisionType !== null && collisionType !== void 0 ? collisionType : CollisionType.Passive;\r\n        if (collisionGroup) {\r\n            this.body.group = collisionGroup;\r\n        }\r\n        if (collider) {\r\n            this.addComponent(new ColliderComponent(collider));\r\n        }\r\n        else if (radius) {\r\n            this.addComponent(new ColliderComponent(Shape.Circle(radius, this.anchor)));\r\n        }\r\n        else {\r\n            if (width > 0 && height > 0) {\r\n                this.addComponent(new ColliderComponent(Shape.Box(width, height, this.anchor)));\r\n            }\r\n            else {\r\n                this.addComponent(new ColliderComponent()); // no collider\r\n            }\r\n        }\r\n        this.graphics.visible = visible !== null && visible !== void 0 ? visible : true;\r\n        if (color) {\r\n            this.color = color;\r\n            if (width && height) {\r\n                this.graphics.add(new Rectangle({\r\n                    color: color,\r\n                    width,\r\n                    height\r\n                }));\r\n            }\r\n            else if (radius) {\r\n                this.graphics.add(new Circle({\r\n                    color: color,\r\n                    radius\r\n                }));\r\n            }\r\n        }\r\n        // Build default pipeline\r\n        if (Flags.isEnabled(Legacy.LegacyDrawing)) {\r\n            // TODO remove offscreen trait after legacy drawing removed\r\n            this.traits.push(new OffscreenCulling());\r\n        }\r\n    }\r\n    /**\r\n     * The physics body the is associated with this actor. The body is the container for all physical properties, like position, velocity,\r\n     * acceleration, mass, inertia, etc.\r\n     */\r\n    get body() {\r\n        return this.get(BodyComponent);\r\n    }\r\n    /**\r\n     * Access the Actor's built in [[TransformComponent]]\r\n     */\r\n    get transform() {\r\n        return this.get(TransformComponent);\r\n    }\r\n    /**\r\n     * Access the Actor's built in [[MotionComponent]]\r\n     */\r\n    get motion() {\r\n        return this.get(MotionComponent);\r\n    }\r\n    /**\r\n     * Access to the Actor's built in [[GraphicsComponent]]\r\n     */\r\n    get graphics() {\r\n        return this.get(GraphicsComponent);\r\n    }\r\n    /**\r\n     * Access to the Actor's built in [[ColliderComponent]]\r\n     */\r\n    get collider() {\r\n        return this.get(ColliderComponent);\r\n    }\r\n    /**\r\n     * Access to the Actor's built in [[PointerComponent]] config\r\n     */\r\n    get pointer() {\r\n        return this.get(PointerComponent);\r\n    }\r\n    /**\r\n     * Useful for quickly scripting actor behavior, like moving to a place, patrolling back and forth, blinking, etc.\r\n     *\r\n     *  Access to the Actor's built in [[ActionsComponent]] which forwards to the\r\n     * [[ActionContext|Action context]] of the actor.\r\n     */\r\n    get actions() {\r\n        return this.get(ActionsComponent);\r\n    }\r\n    /**\r\n     * Gets the position vector of the actor in pixels\r\n     */\r\n    get pos() {\r\n        return this.transform.pos;\r\n    }\r\n    /**\r\n     * Sets the position vector of the actor in pixels\r\n     */\r\n    set pos(thePos) {\r\n        this.transform.pos = thePos.clone();\r\n    }\r\n    /**\r\n     * Gets the position vector of the actor from the last frame\r\n     */\r\n    get oldPos() {\r\n        return this.body.oldPos;\r\n    }\r\n    /**\r\n     * Sets the position vector of the actor in the last frame\r\n     */\r\n    set oldPos(thePos) {\r\n        this.body.oldPos.setTo(thePos.x, thePos.y);\r\n    }\r\n    /**\r\n     * Gets the velocity vector of the actor in pixels/sec\r\n     */\r\n    get vel() {\r\n        return this.motion.vel;\r\n    }\r\n    /**\r\n     * Sets the velocity vector of the actor in pixels/sec\r\n     */\r\n    set vel(theVel) {\r\n        this.motion.vel = theVel.clone();\r\n    }\r\n    /**\r\n     * Gets the velocity vector of the actor from the last frame\r\n     */\r\n    get oldVel() {\r\n        return this.body.oldVel;\r\n    }\r\n    /**\r\n     * Sets the velocity vector of the actor from the last frame\r\n     */\r\n    set oldVel(theVel) {\r\n        this.body.oldVel.setTo(theVel.x, theVel.y);\r\n    }\r\n    /**\r\n     * Gets the acceleration vector of the actor in pixels/second/second. An acceleration pointing down such as (0, 100) may be\r\n     * useful to simulate a gravitational effect.\r\n     */\r\n    get acc() {\r\n        return this.motion.acc;\r\n    }\r\n    /**\r\n     * Sets the acceleration vector of teh actor in pixels/second/second\r\n     */\r\n    set acc(theAcc) {\r\n        this.motion.acc = theAcc.clone();\r\n    }\r\n    /**\r\n     * Sets the acceleration of the actor from the last frame. This does not include the global acc [[Physics.acc]].\r\n     */\r\n    set oldAcc(theAcc) {\r\n        this.body.oldAcc.setTo(theAcc.x, theAcc.y);\r\n    }\r\n    /**\r\n     * Gets the acceleration of the actor from the last frame. This does not include the global acc [[Physics.acc]].\r\n     */\r\n    get oldAcc() {\r\n        return this.body.oldAcc;\r\n    }\r\n    /**\r\n     * Gets the rotation of the actor in radians. 1 radian = 180/PI Degrees.\r\n     */\r\n    get rotation() {\r\n        return this.transform.rotation;\r\n    }\r\n    /**\r\n     * Sets the rotation of the actor in radians. 1 radian = 180/PI Degrees.\r\n     */\r\n    set rotation(theAngle) {\r\n        this.transform.rotation = theAngle;\r\n    }\r\n    /**\r\n     * Gets the rotational velocity of the actor in radians/second\r\n     */\r\n    get angularVelocity() {\r\n        return this.motion.angularVelocity;\r\n    }\r\n    /**\r\n     * Sets the rotational velocity of the actor in radians/sec\r\n     */\r\n    set angularVelocity(angularVelocity) {\r\n        this.motion.angularVelocity = angularVelocity;\r\n    }\r\n    get scale() {\r\n        return this.get(TransformComponent).scale;\r\n    }\r\n    set scale(scale) {\r\n        this.get(TransformComponent).scale = scale;\r\n    }\r\n    get anchor() {\r\n        return this._anchor;\r\n    }\r\n    set anchor(vec) {\r\n        this._anchor = watch(vec, (v) => this._handleAnchorChange(v));\r\n        this._handleAnchorChange(vec);\r\n    }\r\n    _handleAnchorChange(v) {\r\n        if (this.graphics) {\r\n            this.graphics.anchor = v;\r\n        }\r\n    }\r\n    /**\r\n     * Indicates whether the actor is physically in the viewport\r\n     */\r\n    get isOffScreen() {\r\n        return this.hasTag('offscreen');\r\n    }\r\n    /**\r\n     * The visibility of an actor\r\n     * @deprecated Use [[GraphicsComponent.visible|Actor.graphics.visible]], will be removed in v0.26.0\r\n     */\r\n    get visible() {\r\n        return this.graphics.visible;\r\n    }\r\n    set visible(isVisible) {\r\n        this.graphics.visible = isVisible;\r\n    }\r\n    /**\r\n     * The opacity of an actor.\r\n     *\r\n     * @deprecated Actor.opacity will be removed in v0.26.0, use [[GraphicsComponent.opacity|Actor.graphics.opacity]].\r\n     */\r\n    get opacity() {\r\n        return this.graphics.opacity;\r\n    }\r\n    set opacity(opacity) {\r\n        this.graphics.opacity = opacity;\r\n    }\r\n    get draggable() {\r\n        return this._draggable;\r\n    }\r\n    set draggable(isDraggable) {\r\n        if (isDraggable) {\r\n            if (isDraggable && !this._draggable) {\r\n                this.on('pointerdragstart', this._pointerDragStartHandler);\r\n                this.on('pointerdragend', this._pointerDragEndHandler);\r\n                this.on('pointerdragmove', this._pointerDragMoveHandler);\r\n                this.on('pointerdragleave', this._pointerDragLeaveHandler);\r\n            }\r\n            else if (!isDraggable && this._draggable) {\r\n                this.off('pointerdragstart', this._pointerDragStartHandler);\r\n                this.off('pointerdragend', this._pointerDragEndHandler);\r\n                this.off('pointerdragmove', this._pointerDragMoveHandler);\r\n                this.off('pointerdragleave', this._pointerDragLeaveHandler);\r\n            }\r\n            this._draggable = isDraggable;\r\n        }\r\n    }\r\n    /**\r\n     * Sets the color of the actor's current graphic\r\n     */\r\n    get color() {\r\n        return this._color;\r\n    }\r\n    set color(v) {\r\n        var _a;\r\n        this._color = v.clone();\r\n        const defaultLayer = this.graphics.layers.default;\r\n        const currentGraphic = (_a = defaultLayer.graphics[0]) === null || _a === void 0 ? void 0 : _a.graphic;\r\n        if (currentGraphic instanceof Raster || currentGraphic instanceof Text) {\r\n            currentGraphic.color = this._color;\r\n        }\r\n    }\r\n    /**\r\n     * `onInitialize` is called before the first update of the actor. This method is meant to be\r\n     * overridden. This is where initialization of child actors should take place.\r\n     *\r\n     * Synonymous with the event handler `.on('initialize', (evt) => {...})`\r\n     */\r\n    onInitialize(_engine) {\r\n        // Override me\r\n    }\r\n    /**\r\n     * Initializes this actor and all it's child actors, meant to be called by the Scene before first update not by users of Excalibur.\r\n     *\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * @internal\r\n     */\r\n    _initialize(engine) {\r\n        super._initialize(engine);\r\n        for (const child of this.children) {\r\n            child._initialize(engine);\r\n        }\r\n    }\r\n    on(eventName, handler) {\r\n        super.on(eventName, handler);\r\n    }\r\n    once(eventName, handler) {\r\n        super.once(eventName, handler);\r\n    }\r\n    off(eventName, handler) {\r\n        super.off(eventName, handler);\r\n    }\r\n    // #endregion\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Internal _prekill handler for [[onPreKill]] lifecycle event\r\n     * @internal\r\n     */\r\n    _prekill(_scene) {\r\n        super.emit('prekill', new PreKillEvent(this));\r\n        this.onPreKill(_scene);\r\n    }\r\n    /**\r\n     * Safe to override onPreKill lifecycle event handler. Synonymous with `.on('prekill', (evt) =>{...})`\r\n     *\r\n     * `onPreKill` is called directly before an actor is killed and removed from its current [[Scene]].\r\n     */\r\n    onPreKill(_scene) {\r\n        // Override me\r\n    }\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Internal _prekill handler for [[onPostKill]] lifecycle event\r\n     * @internal\r\n     */\r\n    _postkill(_scene) {\r\n        super.emit('postkill', new PostKillEvent(this));\r\n        this.onPostKill(_scene);\r\n    }\r\n    /**\r\n     * Safe to override onPostKill lifecycle event handler. Synonymous with `.on('postkill', (evt) => {...})`\r\n     *\r\n     * `onPostKill` is called directly after an actor is killed and remove from its current [[Scene]].\r\n     */\r\n    onPostKill(_scene) {\r\n        // Override me\r\n    }\r\n    /**\r\n     * If the current actor is a member of the scene, this will remove\r\n     * it from the scene graph. It will no longer be drawn or updated.\r\n     */\r\n    kill() {\r\n        if (this.scene) {\r\n            this._prekill(this.scene);\r\n            this.emit('kill', new KillEvent(this));\r\n            super.kill();\r\n            this._postkill(this.scene);\r\n        }\r\n        else {\r\n            this.logger.warn('Cannot kill actor, it was never added to the Scene');\r\n        }\r\n    }\r\n    /**\r\n     * If the current actor is killed, it will now not be killed.\r\n     */\r\n    unkill() {\r\n        this.active = true;\r\n    }\r\n    /**\r\n     * Indicates wether the actor has been killed.\r\n     */\r\n    isKilled() {\r\n        return !this.active;\r\n    }\r\n    setDrawing(key) {\r\n        key = key.toString();\r\n        if (this.currentDrawing !== this.frames[key]) {\r\n            if (this.frames[key] != null) {\r\n                this.frames[key].reset();\r\n                this.currentDrawing = this.frames[key];\r\n            }\r\n            else {\r\n                Logger.getInstance().error(`the specified drawing key ${key} does not exist`);\r\n            }\r\n        }\r\n        if (this.currentDrawing && this.currentDrawing instanceof Animation_Animation) {\r\n            this.currentDrawing.tick(0);\r\n        }\r\n    }\r\n    addDrawing() {\r\n        if (arguments.length === 2) {\r\n            this.frames[arguments[0]] = arguments[1];\r\n            if (!this.currentDrawing) {\r\n                this.currentDrawing = arguments[1];\r\n            }\r\n        }\r\n        else {\r\n            if (arguments[0] instanceof Sprite_Sprite) {\r\n                this.addDrawing('default', arguments[0]);\r\n            }\r\n            if (arguments[0] instanceof Texture) {\r\n                this.addDrawing('default', arguments[0].asSprite());\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Gets the z-index of an actor. The z-index determines the relative order an actor is drawn in.\r\n     * Actors with a higher z-index are drawn on top of actors with a lower z-index\r\n     */\r\n    get z() {\r\n        return this.get(TransformComponent).z;\r\n    }\r\n    /**\r\n     * @deprecated Use [[Actor.z]], will be removed in v0.26.0\r\n     */\r\n    getZIndex() {\r\n        return this.get(TransformComponent).z;\r\n    }\r\n    /**\r\n     * Sets the z-index of an actor and updates it in the drawing list for the scene.\r\n     * The z-index determines the relative order an actor is drawn in.\r\n     * Actors with a higher z-index are drawn on top of actors with a lower z-index\r\n     * @param newZ new z-index to assign\r\n     */\r\n    set z(newZ) {\r\n        this.get(TransformComponent).z = newZ;\r\n    }\r\n    /**\r\n     * @param newIndex new z-index to assign\r\n     * @deprecated Use [[Actor.z]], will be removed in v0.26.0\r\n     */\r\n    setZIndex(newIndex) {\r\n        this.get(TransformComponent).z = newIndex;\r\n    }\r\n    /**\r\n     * Get the center point of an actor (global position)\r\n     */\r\n    get center() {\r\n        const globalPos = this.getGlobalPos();\r\n        return new Vector(globalPos.x + this.width / 2 - this.anchor.x * this.width, globalPos.y + this.height / 2 - this.anchor.y * this.height);\r\n    }\r\n    /**\r\n     * Get the local center point of an actor\r\n     */\r\n    get localCenter() {\r\n        return new Vector(this.pos.x + this.width / 2 - this.anchor.x * this.width, this.pos.y + this.height / 2 - this.anchor.y * this.height);\r\n    }\r\n    get width() {\r\n        return this.collider.localBounds.width * this.getGlobalScale().x;\r\n    }\r\n    get height() {\r\n        return this.collider.localBounds.height * this.getGlobalScale().y;\r\n    }\r\n    /**\r\n     * Gets this actor's rotation taking into account any parent relationships\r\n     *\r\n     * @returns Rotation angle in radians\r\n     */\r\n    getGlobalRotation() {\r\n        return this.get(TransformComponent).globalRotation;\r\n    }\r\n    /**\r\n     * Gets an actor's world position taking into account parent relationships, scaling, rotation, and translation\r\n     *\r\n     * @returns Position in world coordinates\r\n     */\r\n    getGlobalPos() {\r\n        return this.get(TransformComponent).globalPos;\r\n    }\r\n    /**\r\n     * Gets the global scale of the Actor\r\n     */\r\n    getGlobalScale() {\r\n        return this.get(TransformComponent).globalScale;\r\n    }\r\n    // #region Collision\r\n    /**\r\n     * Tests whether the x/y specified are contained in the actor\r\n     * @param x  X coordinate to test (in world coordinates)\r\n     * @param y  Y coordinate to test (in world coordinates)\r\n     * @param recurse checks whether the x/y are contained in any child actors (if they exist).\r\n     */\r\n    contains(x, y, recurse = false) {\r\n        const point = vec(x, y);\r\n        const collider = this.get(ColliderComponent);\r\n        collider.update();\r\n        const geom = collider.get();\r\n        if (!geom) {\r\n            return false;\r\n        }\r\n        const containment = geom.contains(point);\r\n        if (recurse) {\r\n            return (containment ||\r\n                this.children.some((child) => {\r\n                    return child.contains(x, y, true);\r\n                }));\r\n        }\r\n        return containment;\r\n    }\r\n    /**\r\n     * Returns true if the two actor.collider's surfaces are less than or equal to the distance specified from each other\r\n     * @param actor     Actor to test\r\n     * @param distance  Distance in pixels to test\r\n     */\r\n    within(actor, distance) {\r\n        const collider = this.get(ColliderComponent);\r\n        const otherCollider = actor.get(ColliderComponent);\r\n        const me = collider.get();\r\n        const other = otherCollider.get();\r\n        if (me && other) {\r\n            return me.getClosestLineBetween(other).getLength() <= distance;\r\n        }\r\n        return false;\r\n    }\r\n    // #endregion\r\n    // #region Update\r\n    /**\r\n     * Called by the Engine, updates the state of the actor\r\n     * @internal\r\n     * @param engine The reference to the current game engine\r\n     * @param delta  The time elapsed since the last update in milliseconds\r\n     */\r\n    update(engine, delta) {\r\n        this._initialize(engine);\r\n        this._preupdate(engine, delta);\r\n        // Tick animations\r\n        const drawing = this.currentDrawing;\r\n        if (drawing && drawing instanceof Animation_Animation) {\r\n            drawing.tick(delta, engine.stats.currFrame.id);\r\n        }\r\n        // Update actor pipeline (movement, collision detection, event propagation, offscreen culling)\r\n        for (const trait of this.traits) {\r\n            trait.update(this, engine, delta);\r\n        }\r\n        this._postupdate(engine, delta);\r\n    }\r\n    /**\r\n     * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPreUpdate` is called directly before an actor is updated.\r\n     */\r\n    onPreUpdate(_engine, _delta) {\r\n        // Override me\r\n    }\r\n    /**\r\n     * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('postupdate', (evt) =>{...})`\r\n     *\r\n     * `onPostUpdate` is called directly after an actor is updated.\r\n     */\r\n    onPostUpdate(_engine, _delta) {\r\n        // Override me\r\n    }\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Internal _preupdate handler for [[onPreUpdate]] lifecycle event\r\n     * @internal\r\n     */\r\n    _preupdate(engine, delta) {\r\n        this.emit('preupdate', new PreUpdateEvent(engine, delta, this));\r\n        this.onPreUpdate(engine, delta);\r\n    }\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Internal _preupdate handler for [[onPostUpdate]] lifecycle event\r\n     * @internal\r\n     */\r\n    _postupdate(engine, delta) {\r\n        this.emit('postupdate', new PreUpdateEvent(engine, delta, this));\r\n        this.onPostUpdate(engine, delta);\r\n    }\r\n    // endregion\r\n    // #region Drawing\r\n    /**\r\n     * Called by the Engine, draws the actor to the screen\r\n     * @param ctx   The rendering context\r\n     * @param delta The time since the last draw in milliseconds\r\n     *\r\n     * **Warning** only works with Flags.useLegacyDrawing() enabled\r\n     * @deprecated Use Actor.graphics, will be removed in v0.26.0\r\n     */\r\n    draw(ctx, delta) {\r\n        var _a;\r\n        // translate canvas by anchor offset\r\n        ctx.save();\r\n        if (this.currentDrawing) {\r\n            ctx.translate(-(this.width * this.anchor.x), -(this.height * this.anchor.y));\r\n            this._predraw(ctx, delta);\r\n            const drawing = this.currentDrawing;\r\n            // See https://github.com/excaliburjs/Excalibur/pull/619 for discussion on this formula\r\n            const offsetX = (this.width - drawing.width * drawing.scale.x) * this.anchor.x;\r\n            const offsetY = (this.height - drawing.height * drawing.scale.y) * this.anchor.y;\r\n            this.currentDrawing.draw({ ctx, x: offsetX, y: offsetY, opacity: this.graphics.opacity });\r\n        }\r\n        else {\r\n            this._predraw(ctx, delta);\r\n            if (this.color && this.collider) {\r\n                // update collider geometry based on transform\r\n                const collider = this.get(ColliderComponent);\r\n                collider.update();\r\n                if (collider && !collider.bounds.hasZeroDimensions()) {\r\n                    // Colliders are already shifted by anchor, unshift\r\n                    ctx.globalAlpha = this.graphics.opacity;\r\n                    (_a = collider.get()) === null || _a === void 0 ? void 0 : _a.draw(ctx, this.color, vec(0, 0));\r\n                }\r\n            }\r\n        }\r\n        ctx.restore();\r\n        this._postdraw(ctx, delta);\r\n    }\r\n    /**\r\n     * Safe to override onPreDraw lifecycle event handler. Synonymous with `.on('predraw', (evt) =>{...})`\r\n     *\r\n     * `onPreDraw` is called directly before an actor is drawn, but after local transforms are made.\r\n     *\r\n     * **Warning** only works with Flags.useLegacyDrawing() enabled\r\n     * @deprecated Use Actor.graphics.onPostDraw, will be removed in v0.26.0\r\n     */\r\n    onPreDraw(_ctx, _delta) {\r\n        // Override me\r\n    }\r\n    /**\r\n     * Safe to override onPostDraw lifecycle event handler. Synonymous with `.on('postdraw', (evt) =>{...})`\r\n     *\r\n     * `onPostDraw` is called directly after an actor is drawn, and before local transforms are removed.\r\n     *\r\n     * **Warning** only works with Flags.useLegacyDrawing() enabled\r\n     * @deprecated Use Actor.graphics.onPostDraw, will be removed in v0.26.0\r\n     */\r\n    onPostDraw(_ctx, _delta) {\r\n        // Override me\r\n    }\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Internal _predraw handler for [[onPreDraw]] lifecycle event\r\n     *\r\n     * **Warning** only works with Flags.useLegacyDrawing() enabled\r\n     * @deprecated Use Actor.graphics.onPreDraw, will be removed in v0.26.0\r\n     * @internal\r\n     */\r\n    _predraw(ctx, delta) {\r\n        this.emit('predraw', new PreDrawEvent(ctx, delta, this));\r\n        this.onPreDraw(ctx, delta);\r\n    }\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Internal _postdraw handler for [[onPostDraw]] lifecycle event\r\n     *\r\n     * **Warning** only works with Flags.useLegacyDrawing() enabled\r\n     * @deprecated Use Actor.graphics.onPostDraw, will be removed in v0.26.0\r\n     * @internal\r\n     */\r\n    _postdraw(ctx, delta) {\r\n        this.emit('postdraw', new PreDrawEvent(ctx, delta, this));\r\n        this.onPostDraw(ctx, delta);\r\n    }\r\n    /**\r\n     * Called by the Engine, draws the actors debugging to the screen\r\n     * @param ctx The rendering context\r\n     *\r\n     *\r\n     * **Warning** only works with Flags.useLegacyDrawing() enabled\r\n     * @deprecated will be removed in v0.26.0\r\n     * @internal\r\n     */\r\n    /* istanbul ignore next */\r\n    debugDraw(_ctx) {\r\n        // pass\r\n    }\r\n}\r\n// #region Properties\r\n/**\r\n * Set defaults for all Actors\r\n */\r\nActor.defaults = {\r\n    anchor: Vector.Half\r\n};\r\nActor_decorate([\r\n    obsolete({ message: 'Actor.visible will be removed in v0.26.0', alternateMethod: 'Use Actor.graphics.visible' })\r\n], Actor.prototype, \"visible\", null);\r\nActor_decorate([\r\n    obsolete({\r\n        message: 'Actor.opacity will be removed in v0.26.0',\r\n        alternateMethod: 'Use Actor.graphics.opacity'\r\n    })\r\n], Actor.prototype, \"opacity\", null);\r\nActor_decorate([\r\n    obsolete({\r\n        message: 'Actor.setDrawing will be removed in v0.26.0',\r\n        alternateMethod: 'Use Actor.graphics.show() or Actor.graphics.use()'\r\n    })\r\n], Actor.prototype, \"setDrawing\", null);\r\nActor_decorate([\r\n    obsolete({\r\n        message: 'Actor.addDrawing will be removed in v0.26.0',\r\n        alternateMethod: 'Use Actor.graphics.add()'\r\n    })\r\n], Actor.prototype, \"addDrawing\", null);\r\nActor_decorate([\r\n    obsolete({\r\n        message: 'Actor.getZIndex will be removed in v0.26.0',\r\n        alternateMethod: 'Use Actor.transform.z or Actor.z'\r\n    })\r\n], Actor.prototype, \"getZIndex\", null);\r\nActor_decorate([\r\n    obsolete({\r\n        message: 'Actor.setZIndex will be removed in v0.26.0',\r\n        alternateMethod: 'Use Actor.transform.z or Actor.z'\r\n    })\r\n], Actor.prototype, \"setZIndex\", null);\r\n\n;// CONCATENATED MODULE: ./ScreenElement.ts\n\r\n\r\n\r\n\r\n/**\r\n * Helper [[Actor]] primitive for drawing UI's, optimized for UI drawing. Does\r\n * not participate in collisions. Drawn on top of all other actors.\r\n */\r\nclass ScreenElement_ScreenElement extends Actor {\r\n    constructor(config) {\r\n        super({ ...config });\r\n        this.get(TransformComponent).coordPlane = CoordPlane.Screen;\r\n        this.anchor = vec(0, 0);\r\n        this.body.collisionType = CollisionType.PreventCollision;\r\n        this.collider.useBoxCollider(this.width, this.height, this.anchor);\r\n    }\r\n    _initialize(engine) {\r\n        this._engine = engine;\r\n        super._initialize(engine);\r\n    }\r\n    contains(x, y, useWorld = true) {\r\n        if (useWorld) {\r\n            return super.contains(x, y);\r\n        }\r\n        const coords = this._engine.worldToScreenCoordinates(new Vector(x, y));\r\n        return super.contains(coords.x, coords.y);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Timer.ts\nvar Timer_decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\n\r\n\r\n/**\r\n * The Excalibur timer hooks into the internal timer and fires callbacks,\r\n * after a certain interval, optionally repeating.\r\n */\r\nclass Timer {\r\n    constructor(fcn, interval, repeats, numberOfRepeats) {\r\n        this._logger = Logger.getInstance();\r\n        this.id = 0;\r\n        this._elapsedTime = 0;\r\n        this._totalTimeAlive = 0;\r\n        this._running = false;\r\n        this._numberOfTicks = 0;\r\n        this.interval = 10;\r\n        this.repeats = false;\r\n        this.maxNumberOfRepeats = -1;\r\n        this._complete = false;\r\n        this.scene = null;\r\n        if (typeof fcn !== 'function') {\r\n            const options = fcn;\r\n            fcn = options.fcn;\r\n            interval = options.interval;\r\n            repeats = options.repeats;\r\n            numberOfRepeats = options.numberOfRepeats;\r\n        }\r\n        if (!!numberOfRepeats && numberOfRepeats >= 0) {\r\n            this.maxNumberOfRepeats = numberOfRepeats;\r\n            if (!repeats) {\r\n                throw new Error('repeats must be set to true if numberOfRepeats is set');\r\n            }\r\n        }\r\n        this.id = Timer._MAX_ID++;\r\n        this.interval = interval || this.interval;\r\n        this.repeats = repeats || this.repeats;\r\n        this._callbacks = [];\r\n        if (fcn) {\r\n            this.on(fcn);\r\n        }\r\n    }\r\n    get complete() {\r\n        return this._complete;\r\n    }\r\n    /**\r\n     * Adds a new callback to be fired after the interval is complete\r\n     * @param fcn The callback to be added to the callback list, to be fired after the interval is complete.\r\n     */\r\n    on(fcn) {\r\n        this._callbacks.push(fcn);\r\n    }\r\n    /**\r\n     * Removes a callback from the callback list to be fired after the interval is complete.\r\n     * @param fcn The callback to be removed from the callback list, to be fired after the interval is complete.\r\n     */\r\n    off(fcn) {\r\n        const index = this._callbacks.indexOf(fcn);\r\n        this._callbacks.splice(index, 1);\r\n    }\r\n    /**\r\n     * Updates the timer after a certain number of milliseconds have elapsed. This is used internally by the engine.\r\n     * @param delta  Number of elapsed milliseconds since the last update.\r\n     */\r\n    update(delta) {\r\n        if (this._running) {\r\n            this._totalTimeAlive += delta;\r\n            this._elapsedTime += delta;\r\n            if (this.maxNumberOfRepeats > -1 && this._numberOfTicks >= this.maxNumberOfRepeats) {\r\n                this._complete = true;\r\n                this._running = false;\r\n                this._elapsedTime = 0;\r\n            }\r\n            if (!this.complete && this._elapsedTime >= this.interval) {\r\n                this._callbacks.forEach((c) => {\r\n                    c.call(this);\r\n                });\r\n                this._numberOfTicks++;\r\n                if (this.repeats) {\r\n                    this._elapsedTime = 0;\r\n                }\r\n                else {\r\n                    this._complete = true;\r\n                    this._running = false;\r\n                    this._elapsedTime = 0;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Resets the timer so that it can be reused, and optionally reconfigure the timers interval.\r\n     *\r\n     * Warning** you may need to call `timer.start()` again if the timer had completed\r\n     * @param newInterval If specified, sets a new non-negative interval in milliseconds to refire the callback\r\n     * @param newNumberOfRepeats If specified, sets a new non-negative upper limit to the number of time this timer executes\r\n     */\r\n    reset(newInterval, newNumberOfRepeats) {\r\n        if (!!newInterval && newInterval >= 0) {\r\n            this.interval = newInterval;\r\n        }\r\n        if (!!this.maxNumberOfRepeats && this.maxNumberOfRepeats >= 0) {\r\n            this.maxNumberOfRepeats = newNumberOfRepeats;\r\n            if (!this.repeats) {\r\n                throw new Error('repeats must be set to true if numberOfRepeats is set');\r\n            }\r\n        }\r\n        this._complete = false;\r\n        this._elapsedTime = 0;\r\n        this._numberOfTicks = 0;\r\n    }\r\n    get timesRepeated() {\r\n        return this._numberOfTicks;\r\n    }\r\n    getTimeRunning() {\r\n        return this._totalTimeAlive;\r\n    }\r\n    /**\r\n     * @returns milliseconds until the next action callback, if complete will return 0\r\n     */\r\n    get timeToNextAction() {\r\n        if (this.complete) {\r\n            return 0;\r\n        }\r\n        return this.interval - this._elapsedTime;\r\n    }\r\n    /**\r\n     * @returns milliseconds elapsed toward the next action\r\n     */\r\n    get timeElapsedTowardNextAction() {\r\n        return this._elapsedTime;\r\n    }\r\n    get isRunning() {\r\n        return this._running;\r\n    }\r\n    /**\r\n     * Pauses the timer, time will no longer increment towards the next call\r\n     */\r\n    pause() {\r\n        this._running = false;\r\n        return this;\r\n    }\r\n    /**\r\n     * Unpauses the timer. Time will now increment towards the next call\r\n     * @deprecated Will be removed in v0.26.0\r\n     */\r\n    unpause() {\r\n        this._running = true;\r\n    }\r\n    /**\r\n     * Resumes the timer, time will now increment towards the next call.\r\n     */\r\n    resume() {\r\n        this._running = true;\r\n        return this;\r\n    }\r\n    /**\r\n     * Starts the timer, if the timer was complete it will restart the timer and reset the elapsed time counter\r\n     */\r\n    start() {\r\n        if (!this.scene) {\r\n            this._logger.warn('Cannot start a timer not part of a scene, timer wont start until added');\r\n        }\r\n        this._running = true;\r\n        if (this.complete) {\r\n            this._complete = false;\r\n            this._elapsedTime = 0;\r\n            this._numberOfTicks = 0;\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Stops the timer and resets the elapsed time counter towards the next action invocation\r\n     */\r\n    stop() {\r\n        this._running = false;\r\n        this._elapsedTime = 0;\r\n        this._numberOfTicks = 0;\r\n        return this;\r\n    }\r\n    /**\r\n     * Cancels the timer, preventing any further executions.\r\n     */\r\n    cancel() {\r\n        this.pause();\r\n        if (this.scene) {\r\n            this.scene.cancelTimer(this);\r\n        }\r\n    }\r\n}\r\nTimer._MAX_ID = 0;\r\nTimer_decorate([\r\n    obsolete({ message: 'Will be removed in v0.26.0', alternateMethod: 'Use Timer.resume()' })\r\n], Timer.prototype, \"unpause\", null);\r\n\n;// CONCATENATED MODULE: ./Graphics/DebugGraphicsComponent.ts\n\r\n/**\r\n * Provide arbitrary drawing for the purposes of debugging your game\r\n *\r\n * Will only show when the Engine is set to debug mode [[Engine.showDebug]] or [[Engine.toggleDebug]]\r\n *\r\n */\r\nclass DebugGraphicsComponent extends Component {\r\n    constructor(draw) {\r\n        super();\r\n        this.draw = draw;\r\n        this.type = 'ex.debuggraphics';\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./TileMap.ts\nvar TileMap_decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @hidden\r\n */\r\nclass TileMapImpl extends Entity {\r\n    /**\r\n     * @param xOrConfig     The x coordinate to anchor the TileMap's upper left corner (should not be changed once set) or TileMap option bag\r\n     * @param y             The y coordinate to anchor the TileMap's upper left corner (should not be changed once set)\r\n     * @param cellWidth     The individual width of each cell (in pixels) (should not be changed once set)\r\n     * @param cellHeight    The individual height of each cell (in pixels) (should not be changed once set)\r\n     * @param rows          The number of rows in the TileMap (should not be changed once set)\r\n     * @param cols          The number of cols in the TileMap (should not be changed once set)\r\n     */\r\n    constructor(xOrConfig, y, cellWidth, cellHeight, rows, cols) {\r\n        super();\r\n        this._token = 0;\r\n        this._onScreenXStart = 0;\r\n        this._onScreenXEnd = 9999;\r\n        this._onScreenYStart = 0;\r\n        this._onScreenYEnd = 9999;\r\n        this._spriteSheets = {};\r\n        this._legacySpriteMap = new Map();\r\n        this.logger = Logger.getInstance();\r\n        this.data = [];\r\n        this._rows = [];\r\n        this._cols = [];\r\n        this.visible = true;\r\n        this.isOffscreen = false;\r\n        this._dirty = true;\r\n        if (xOrConfig && typeof xOrConfig === 'object') {\r\n            const config = xOrConfig;\r\n            xOrConfig = config.x;\r\n            y = config.y;\r\n            cellWidth = config.cellWidth;\r\n            cellHeight = config.cellHeight;\r\n            rows = config.rows;\r\n            cols = config.cols;\r\n        }\r\n        this.addComponent(new TransformComponent());\r\n        this.addComponent(new MotionComponent());\r\n        this.addComponent(new BodyComponent({\r\n            type: CollisionType.Fixed\r\n        }));\r\n        this.addComponent(new CanvasDrawComponent((ctx, delta) => this.draw(ctx, delta)));\r\n        this.addComponent(new GraphicsComponent({\r\n            onPostDraw: (ctx, delta) => this.draw(ctx, delta)\r\n        }));\r\n        this.addComponent(new DebugGraphicsComponent((ctx) => this.debug(ctx)));\r\n        this.addComponent(new ColliderComponent());\r\n        this._transform = this.get(TransformComponent);\r\n        this._motion = this.get(MotionComponent);\r\n        this._collider = this.get(ColliderComponent);\r\n        this._composite = this._collider.useCompositeCollider([]);\r\n        this.x = xOrConfig;\r\n        this.y = y;\r\n        this.cellWidth = cellWidth;\r\n        this.cellHeight = cellHeight;\r\n        this.rows = rows;\r\n        this.cols = cols;\r\n        this.data = new Array(rows * cols);\r\n        this._rows = new Array(rows);\r\n        this._cols = new Array(cols);\r\n        let currentCol = [];\r\n        for (let i = 0; i < cols; i++) {\r\n            for (let j = 0; j < rows; j++) {\r\n                const cd = new Cell(i * cellWidth + xOrConfig, j * cellHeight + y, cellWidth, cellHeight, i + j * cols);\r\n                cd.map = this;\r\n                this.data[i + j * cols] = cd;\r\n                currentCol.push(cd);\r\n                if (!this._rows[j]) {\r\n                    this._rows[j] = [];\r\n                }\r\n                this._rows[j].push(cd);\r\n            }\r\n            this._cols[i] = currentCol;\r\n            currentCol = [];\r\n        }\r\n        this.get(GraphicsComponent).localBounds = new BoundingBox({\r\n            left: 0,\r\n            top: 0,\r\n            right: this.cols * this.cellWidth,\r\n            bottom: this.rows * this.cellHeight\r\n        });\r\n    }\r\n    flagDirty() {\r\n        this._dirty = true;\r\n    }\r\n    get x() {\r\n        var _a;\r\n        return (_a = this._transform.pos.x) !== null && _a !== void 0 ? _a : 0;\r\n    }\r\n    set x(val) {\r\n        var _a;\r\n        if ((_a = this._transform) === null || _a === void 0 ? void 0 : _a.pos) {\r\n            this.get(TransformComponent).pos = vec(val, this.y);\r\n        }\r\n    }\r\n    get y() {\r\n        var _a, _b;\r\n        return (_b = (_a = this._transform) === null || _a === void 0 ? void 0 : _a.pos.y) !== null && _b !== void 0 ? _b : 0;\r\n    }\r\n    set y(val) {\r\n        var _a;\r\n        if ((_a = this._transform) === null || _a === void 0 ? void 0 : _a.pos) {\r\n            this._transform.pos = vec(this.x, val);\r\n        }\r\n    }\r\n    get z() {\r\n        var _a;\r\n        return (_a = this._transform.z) !== null && _a !== void 0 ? _a : 0;\r\n    }\r\n    set z(val) {\r\n        if (this._transform) {\r\n            this._transform.z = val;\r\n        }\r\n    }\r\n    get rotation() {\r\n        var _a, _b;\r\n        return (_b = (_a = this._transform) === null || _a === void 0 ? void 0 : _a.rotation) !== null && _b !== void 0 ? _b : 0;\r\n    }\r\n    set rotation(val) {\r\n        var _a;\r\n        if ((_a = this._transform) === null || _a === void 0 ? void 0 : _a.rotation) {\r\n            this._transform.rotation = val;\r\n        }\r\n    }\r\n    get scale() {\r\n        var _a, _b;\r\n        return (_b = (_a = this._transform) === null || _a === void 0 ? void 0 : _a.scale) !== null && _b !== void 0 ? _b : Vector.One;\r\n    }\r\n    set scale(val) {\r\n        var _a;\r\n        if ((_a = this._transform) === null || _a === void 0 ? void 0 : _a.scale) {\r\n            this._transform.scale = val;\r\n        }\r\n    }\r\n    get pos() {\r\n        return this._transform.pos;\r\n    }\r\n    set pos(val) {\r\n        this._transform.pos = val;\r\n    }\r\n    get vel() {\r\n        return this._motion.vel;\r\n    }\r\n    set vel(val) {\r\n        this._motion.vel = val;\r\n    }\r\n    on(eventName, handler) {\r\n        super.on(eventName, handler);\r\n    }\r\n    _initialize(engine) {\r\n        super._initialize(engine);\r\n    }\r\n    registerSpriteSheet(key, spriteSheet) {\r\n        if (spriteSheet instanceof SpriteSheet) {\r\n            this._spriteSheets[key] = spriteSheet;\r\n        }\r\n        else {\r\n            this._spriteSheets[key] = SpriteSheet.fromLegacySpriteSheet(spriteSheet);\r\n        }\r\n    }\r\n    /**\r\n     * Tiles colliders based on the solid tiles in the tilemap.\r\n     */\r\n    _updateColliders() {\r\n        this._composite.clearColliders();\r\n        const colliders = [];\r\n        let current;\r\n        // Bad square tesselation algo\r\n        for (let i = 0; i < this.cols; i++) {\r\n            // Scan column for colliders\r\n            for (let j = 0; j < this.rows; j++) {\r\n                // Columns start with a new collider\r\n                if (j === 0) {\r\n                    current = null;\r\n                }\r\n                const tile = this.data[i + j * this.cols];\r\n                // Current tile in column is solid build up current collider\r\n                if (tile.solid) {\r\n                    if (!current) {\r\n                        current = tile.bounds;\r\n                    }\r\n                    else {\r\n                        current = current.combine(tile.bounds);\r\n                    }\r\n                }\r\n                else {\r\n                    // Not solid skip and cut off the current collider\r\n                    if (current) {\r\n                        colliders.push(current);\r\n                    }\r\n                    current = null;\r\n                }\r\n            }\r\n            // After a column is complete check to see if it can be merged into the last one\r\n            if (current) {\r\n                // if previous is the same combine it\r\n                const prev = colliders[colliders.length - 1];\r\n                if (prev && prev.top === current.top && prev.bottom === current.bottom) {\r\n                    colliders[colliders.length - 1] = prev.combine(current);\r\n                }\r\n                else {\r\n                    // else new collider\r\n                    colliders.push(current);\r\n                }\r\n            }\r\n        }\r\n        this._composite = this._collider.useCompositeCollider([]);\r\n        for (const c of colliders) {\r\n            const collider = Shape.Box(c.width, c.height, Vector.Zero, vec(c.left - this.pos.x, c.top - this.pos.y));\r\n            collider.owner = this;\r\n            this._composite.addCollider(collider);\r\n        }\r\n        this._collider.update();\r\n    }\r\n    /**\r\n     * Returns the [[Cell]] by index (row major order)\r\n     */\r\n    getCellByIndex(index) {\r\n        return this.data[index];\r\n    }\r\n    /**\r\n     * Returns the [[Cell]] by its x and y coordinates\r\n     */\r\n    getCell(x, y) {\r\n        if (x < 0 || y < 0 || x >= this.cols || y >= this.rows) {\r\n            return null;\r\n        }\r\n        return this.data[x + y * this.cols];\r\n    }\r\n    /**\r\n     * Returns the [[Cell]] by testing a point in global coordinates,\r\n     * returns `null` if no cell was found.\r\n     */\r\n    getCellByPoint(x, y) {\r\n        x = Math.floor((x - this.pos.x) / this.cellWidth);\r\n        y = Math.floor((y - this.pos.y) / this.cellHeight);\r\n        const cell = this.getCell(x, y);\r\n        if (x >= 0 && y >= 0 && x < this.cols && y < this.rows && cell) {\r\n            return cell;\r\n        }\r\n        return null;\r\n    }\r\n    getRows() {\r\n        return this._rows;\r\n    }\r\n    getColumns() {\r\n        return this._cols;\r\n    }\r\n    onPreUpdate(_engine, _delta) {\r\n        // Override me\r\n    }\r\n    onPostUpdate(_engine, _delta) {\r\n        // Override me\r\n    }\r\n    update(engine, delta) {\r\n        this.onPreUpdate(engine, delta);\r\n        this.emit('preupdate', new PreUpdateEvent(engine, delta, this));\r\n        if (this._dirty) {\r\n            this._dirty = false;\r\n            this._updateColliders();\r\n        }\r\n        this._token++;\r\n        const worldBounds = engine.getWorldBounds();\r\n        const worldCoordsUpperLeft = vec(worldBounds.left, worldBounds.top);\r\n        const worldCoordsLowerRight = vec(worldBounds.right, worldBounds.bottom);\r\n        this._onScreenXStart = Math.max(Math.floor((worldCoordsUpperLeft.x - this.x) / this.cellWidth) - 2, 0);\r\n        this._onScreenYStart = Math.max(Math.floor((worldCoordsUpperLeft.y - this.y) / this.cellHeight) - 2, 0);\r\n        this._onScreenXEnd = Math.max(Math.floor((worldCoordsLowerRight.x - this.x) / this.cellWidth) + 2, 0);\r\n        this._onScreenYEnd = Math.max(Math.floor((worldCoordsLowerRight.y - this.y) / this.cellHeight) + 2, 0);\r\n        this._transform.pos = vec(this.x, this.y);\r\n        this.onPostUpdate(engine, delta);\r\n        this.emit('postupdate', new PostUpdateEvent(engine, delta, this));\r\n    }\r\n    /**\r\n     * Draws the tile map to the screen. Called by the [[Scene]].\r\n     * @param ctx CanvasRenderingContext2D or ExcaliburGraphicsContext\r\n     * @param delta  The number of milliseconds since the last draw\r\n     */\r\n    draw(ctx, delta) {\r\n        this.emit('predraw', new PreDrawEvent(ctx, delta, this)); // TODO fix event\r\n        let x = this._onScreenXStart;\r\n        const xEnd = Math.min(this._onScreenXEnd, this.cols);\r\n        let y = this._onScreenYStart;\r\n        const yEnd = Math.min(this._onScreenYEnd, this.rows);\r\n        let graphics, graphicsIndex, graphicsLen;\r\n        for (x; x < xEnd; x++) {\r\n            for (y; y < yEnd; y++) {\r\n                // get non-negative tile sprites\r\n                graphics = this.getCell(x, y).graphics;\r\n                for (graphicsIndex = 0, graphicsLen = graphics.length; graphicsIndex < graphicsLen; graphicsIndex++) {\r\n                    // draw sprite, warning if sprite doesn't exist\r\n                    const graphic = graphics[graphicsIndex];\r\n                    if (graphic) {\r\n                        if (!(ctx instanceof CanvasRenderingContext2D)) {\r\n                            if (hasGraphicsTick(graphic)) {\r\n                                graphic === null || graphic === void 0 ? void 0 : graphic.tick(delta, this._token);\r\n                            }\r\n                            graphic.draw(ctx, x * this.cellWidth, y * this.cellHeight);\r\n                        }\r\n                        else if (graphic instanceof Sprite) {\r\n                            // TODO legacy drawing mode\r\n                            if (!this._legacySpriteMap.has(graphic)) {\r\n                                this._legacySpriteMap.set(graphic, Sprite.toLegacySprite(graphic));\r\n                            }\r\n                            this._legacySpriteMap.get(graphic).draw(ctx, x * this.cellWidth, y * this.cellHeight);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            y = this._onScreenYStart;\r\n        }\r\n        this.emit('postdraw', new PostDrawEvent(ctx, delta, this));\r\n    }\r\n    debug(gfx) {\r\n        const width = this.cellWidth * this.cols;\r\n        const height = this.cellHeight * this.rows;\r\n        const pos = Vector.Zero;\r\n        for (let r = 0; r < this.rows + 1; r++) {\r\n            const yOffset = vec(0, r * this.cellHeight);\r\n            gfx.drawLine(pos.add(yOffset), pos.add(vec(width, yOffset.y)), Color.Red, 2);\r\n        }\r\n        for (let c = 0; c < this.cols + 1; c++) {\r\n            const xOffset = vec(c * this.cellWidth, 0);\r\n            gfx.drawLine(pos.add(xOffset), pos.add(vec(xOffset.x, height)), Color.Red, 2);\r\n        }\r\n        const colliders = this._composite.getColliders();\r\n        for (const collider of colliders) {\r\n            const grayish = Color.Gray;\r\n            grayish.a = 0.5;\r\n            const bounds = collider.localBounds;\r\n            const pos = collider.worldPos.sub(this.pos);\r\n            gfx.drawRectangle(pos, bounds.width, bounds.height, grayish);\r\n        }\r\n    }\r\n}\r\nTileMap_decorate([\r\n    obsolete({ message: 'No longer used, will be removed in v0.26.0' })\r\n], TileMapImpl.prototype, \"registerSpriteSheet\", null);\r\n/**\r\n * The [[TileMap]] class provides a lightweight way to do large complex scenes with collision\r\n * without the overhead of actors.\r\n */\r\nclass TileMap extends Configurable(TileMapImpl) {\r\n    constructor(xOrConfig, y, cellWidth, cellHeight, rows, cols) {\r\n        super(xOrConfig, y, cellWidth, cellHeight, rows, cols);\r\n    }\r\n}\r\n/**\r\n * @hidden\r\n */\r\nclass CellImpl extends Entity {\r\n    /**\r\n     * @param xOrConfig Gets or sets x coordinate of the cell in world coordinates or cell option bag\r\n     * @param y       Gets or sets y coordinate of the cell in world coordinates\r\n     * @param width   Gets or sets the width of the cell\r\n     * @param height  Gets or sets the height of the cell\r\n     * @param index   The index of the cell in row major order\r\n     * @param solid   Gets or sets whether this cell is solid\r\n     * @param graphics The list of tile graphics to use to draw in this cell (in order)\r\n     */\r\n    constructor(xOrConfig, y, width, height, index, solid = false, graphics = []) {\r\n        super();\r\n        this._solid = false;\r\n        /**\r\n         * Current list of graphics for this cell\r\n         */\r\n        this.graphics = [];\r\n        /**\r\n         * Arbitrary data storage per cell, useful for any game specific data\r\n         */\r\n        this.data = new Map();\r\n        if (xOrConfig && typeof xOrConfig === 'object') {\r\n            const config = xOrConfig;\r\n            xOrConfig = config.x;\r\n            y = config.y;\r\n            width = config.width;\r\n            height = config.height;\r\n            index = config.index;\r\n            solid = config.solid;\r\n            graphics = config.sprites;\r\n        }\r\n        this.x = xOrConfig;\r\n        this.y = y;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.index = index;\r\n        this.solid = solid;\r\n        this.graphics = graphics;\r\n        this._bounds = new BoundingBox(this.x, this.y, this.x + this.width, this.y + this.height);\r\n    }\r\n    /**\r\n     * Wether this cell should be treated as solid by the tilemap\r\n     */\r\n    get solid() {\r\n        return this._solid;\r\n    }\r\n    /**\r\n     * Wether this cell should be treated as solid by the tilemap\r\n     */\r\n    set solid(val) {\r\n        var _a;\r\n        (_a = this.map) === null || _a === void 0 ? void 0 : _a.flagDirty();\r\n        this._solid = val;\r\n    }\r\n    get bounds() {\r\n        return this._bounds;\r\n    }\r\n    get center() {\r\n        return new Vector(this.x + this.width / 2, this.y + this.height / 2);\r\n    }\r\n    /**\r\n     * Add another [[Sprite]] to this cell\r\n     * @deprecated Use addSprite, will be removed in v0.26.0\r\n     */\r\n    pushSprite(sprite) {\r\n        this.addGraphic(sprite);\r\n    }\r\n    /**\r\n     * Add another [[Graphic]] to this TileMap cell\r\n     * @param graphic\r\n     */\r\n    addGraphic(graphic) {\r\n        if (graphic instanceof Sprite_Sprite) {\r\n            this.graphics.push(Sprite.fromLegacySprite(graphic));\r\n        }\r\n        else {\r\n            this.graphics.push(graphic);\r\n        }\r\n    }\r\n    /**\r\n     * Remove an instance of a [[Graphic]] from this cell\r\n     */\r\n    removeGraphic(graphic) {\r\n        removeItemFromArray(graphic, this.graphics);\r\n    }\r\n    /**\r\n     * Clear all graphics from this cell\r\n     */\r\n    clearGraphics() {\r\n        this.graphics.length = 0;\r\n    }\r\n}\r\nTileMap_decorate([\r\n    obsolete({ message: 'Will be removed in v0.26.0', alternateMethod: 'addSprite' })\r\n], CellImpl.prototype, \"pushSprite\", null);\r\n/**\r\n * TileMap Cell\r\n *\r\n * A light-weight object that occupies a space in a collision map. Generally\r\n * created by a [[TileMap]].\r\n *\r\n * Cells can draw multiple sprites. Note that the order of drawing is the order\r\n * of the sprites in the array so the last one will be drawn on top. You can\r\n * use transparency to create layers this way.\r\n */\r\nclass Cell extends Configurable(CellImpl) {\r\n    constructor(xOrConfig, y, width, height, index, solid, sprites) {\r\n        super(xOrConfig, y, width, height, index, solid, sprites);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Camera.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Container to house convenience strategy methods\r\n * @internal\r\n */\r\nclass StrategyContainer {\r\n    constructor(camera) {\r\n        this.camera = camera;\r\n    }\r\n    /**\r\n     * Creates and adds the [[LockCameraToActorStrategy]] on the current camera.\r\n     * @param actor The actor to lock the camera to\r\n     */\r\n    lockToActor(actor) {\r\n        this.camera.addStrategy(new LockCameraToActorStrategy(actor));\r\n    }\r\n    /**\r\n     * Creates and adds the [[LockCameraToActorAxisStrategy]] on the current camera\r\n     * @param actor The actor to lock the camera to\r\n     * @param axis The axis to follow the actor on\r\n     */\r\n    lockToActorAxis(actor, axis) {\r\n        this.camera.addStrategy(new LockCameraToActorAxisStrategy(actor, axis));\r\n    }\r\n    /**\r\n     * Creates and adds the [[ElasticToActorStrategy]] on the current camera\r\n     * If cameraElasticity < cameraFriction < 1.0, the behavior will be a dampened spring that will slowly end at the target without bouncing\r\n     * If cameraFriction < cameraElasticity < 1.0, the behavior will be an oscillating spring that will over\r\n     * correct and bounce around the target\r\n     *\r\n     * @param actor Target actor to elastically follow\r\n     * @param cameraElasticity [0 - 1.0] The higher the elasticity the more force that will drive the camera towards the target\r\n     * @param cameraFriction [0 - 1.0] The higher the friction the more that the camera will resist motion towards the target\r\n     */\r\n    elasticToActor(actor, cameraElasticity, cameraFriction) {\r\n        this.camera.addStrategy(new ElasticToActorStrategy(actor, cameraElasticity, cameraFriction));\r\n    }\r\n    /**\r\n     * Creates and adds the [[RadiusAroundActorStrategy]] on the current camera\r\n     * @param actor Target actor to follow when it is \"radius\" pixels away\r\n     * @param radius Number of pixels away before the camera will follow\r\n     */\r\n    radiusAroundActor(actor, radius) {\r\n        this.camera.addStrategy(new RadiusAroundActorStrategy(actor, radius));\r\n    }\r\n    /**\r\n     * Creates and adds the [[LimitCameraBoundsStrategy]] on the current camera\r\n     * @param box The bounding box to limit the camera to.\r\n     */\r\n    limitCameraBounds(box) {\r\n        this.camera.addStrategy(new LimitCameraBoundsStrategy(box));\r\n    }\r\n}\r\n/**\r\n * Camera axis enum\r\n */\r\nvar Axis;\r\n(function (Axis) {\r\n    Axis[Axis[\"X\"] = 0] = \"X\";\r\n    Axis[Axis[\"Y\"] = 1] = \"Y\";\r\n})(Axis || (Axis = {}));\r\n/**\r\n * Lock a camera to the exact x/y position of an actor.\r\n */\r\nclass LockCameraToActorStrategy {\r\n    constructor(target) {\r\n        this.target = target;\r\n        this.action = (target, _cam, _eng, _delta) => {\r\n            const center = target.center;\r\n            return center;\r\n        };\r\n    }\r\n}\r\n/**\r\n * Lock a camera to a specific axis around an actor.\r\n */\r\nclass LockCameraToActorAxisStrategy {\r\n    constructor(target, axis) {\r\n        this.target = target;\r\n        this.axis = axis;\r\n        this.action = (target, cam, _eng, _delta) => {\r\n            const center = target.center;\r\n            const currentFocus = cam.getFocus();\r\n            if (this.axis === Axis.X) {\r\n                return new Vector(center.x, currentFocus.y);\r\n            }\r\n            else {\r\n                return new Vector(currentFocus.x, center.y);\r\n            }\r\n        };\r\n    }\r\n}\r\n/**\r\n * Using [Hook's law](https://en.wikipedia.org/wiki/Hooke's_law), elastically move the camera towards the target actor.\r\n */\r\nclass ElasticToActorStrategy {\r\n    /**\r\n     * If cameraElasticity < cameraFriction < 1.0, the behavior will be a dampened spring that will slowly end at the target without bouncing\r\n     * If cameraFriction < cameraElasticity < 1.0, the behavior will be an oscillating spring that will over\r\n     * correct and bounce around the target\r\n     *\r\n     * @param target Target actor to elastically follow\r\n     * @param cameraElasticity [0 - 1.0] The higher the elasticity the more force that will drive the camera towards the target\r\n     * @param cameraFriction [0 - 1.0] The higher the friction the more that the camera will resist motion towards the target\r\n     */\r\n    constructor(target, cameraElasticity, cameraFriction) {\r\n        this.target = target;\r\n        this.cameraElasticity = cameraElasticity;\r\n        this.cameraFriction = cameraFriction;\r\n        this.action = (target, cam, _eng, _delta) => {\r\n            const position = target.center;\r\n            let focus = cam.getFocus();\r\n            let cameraVel = cam.vel.clone();\r\n            // Calculate the stretch vector, using the spring equation\r\n            // F = kX\r\n            // https://en.wikipedia.org/wiki/Hooke's_law\r\n            // Apply to the current camera velocity\r\n            const stretch = position.sub(focus).scale(this.cameraElasticity); // stretch is X\r\n            cameraVel = cameraVel.add(stretch);\r\n            // Calculate the friction (-1 to apply a force in the opposition of motion)\r\n            // Apply to the current camera velocity\r\n            const friction = cameraVel.scale(-1).scale(this.cameraFriction);\r\n            cameraVel = cameraVel.add(friction);\r\n            // Update position by velocity deltas\r\n            focus = focus.add(cameraVel);\r\n            return focus;\r\n        };\r\n    }\r\n}\r\nclass RadiusAroundActorStrategy {\r\n    /**\r\n     *\r\n     * @param target Target actor to follow when it is \"radius\" pixels away\r\n     * @param radius Number of pixels away before the camera will follow\r\n     */\r\n    constructor(target, radius) {\r\n        this.target = target;\r\n        this.radius = radius;\r\n        this.action = (target, cam, _eng, _delta) => {\r\n            const position = target.center;\r\n            const focus = cam.getFocus();\r\n            const direction = position.sub(focus);\r\n            const distance = direction.size;\r\n            if (distance >= this.radius) {\r\n                const offset = distance - this.radius;\r\n                return focus.add(direction.normalize().scale(offset));\r\n            }\r\n            return focus;\r\n        };\r\n    }\r\n}\r\n/**\r\n * Prevent a camera from going beyond the given camera dimensions.\r\n */\r\nclass LimitCameraBoundsStrategy {\r\n    constructor(target) {\r\n        this.target = target;\r\n        /**\r\n         * Useful for limiting the camera to a [[TileMap]]'s dimensions, or a specific area inside the map.\r\n         *\r\n         * Note that this strategy does not perform any movement by itself.\r\n         * It only sets the camera position to within the given bounds when the camera has gone beyond them.\r\n         * Thus, it is a good idea to combine it with other camera strategies and set this strategy as the last one.\r\n         *\r\n         * Make sure that the camera bounds are at least as large as the viewport size.\r\n         *\r\n         * @param target The bounding box to limit the camera to\r\n         */\r\n        this.boundSizeChecked = false; // Check and warn only once\r\n        this.action = (target, cam, _eng, _delta) => {\r\n            const focus = cam.getFocus();\r\n            if (!this.boundSizeChecked) {\r\n                if (target.bottom - target.top < _eng.drawHeight || target.right - target.left < _eng.drawWidth) {\r\n                    Logger.getInstance().warn('Camera bounds should not be smaller than the engine viewport');\r\n                }\r\n                this.boundSizeChecked = true;\r\n            }\r\n            let focusX = focus.x;\r\n            let focusY = focus.y;\r\n            if (focus.x < target.left + _eng.halfDrawWidth) {\r\n                focusX = target.left + _eng.halfDrawWidth;\r\n            }\r\n            else if (focus.x > target.right - _eng.halfDrawWidth) {\r\n                focusX = target.right - _eng.halfDrawWidth;\r\n            }\r\n            if (focus.y < target.top + _eng.halfDrawHeight) {\r\n                focusY = target.top + _eng.halfDrawHeight;\r\n            }\r\n            else if (focus.y > target.bottom - _eng.halfDrawHeight) {\r\n                focusY = target.bottom - _eng.halfDrawHeight;\r\n            }\r\n            return vec(focusX, focusY);\r\n        };\r\n    }\r\n}\r\n/**\r\n * Cameras\r\n *\r\n * [[Camera]] is the base class for all Excalibur cameras. Cameras are used\r\n * to move around your game and set focus. They are used to determine\r\n * what is \"off screen\" and can be used to scale the game.\r\n *\r\n */\r\nclass Camera extends Class {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.transform = Matrix.identity();\r\n        this.inverse = Matrix.identity();\r\n        this._cameraStrategies = [];\r\n        this.strategy = new StrategyContainer(this);\r\n        /**\r\n         * Get or set current zoom of the camera, defaults to 1\r\n         */\r\n        this._z = 1;\r\n        /**\r\n         * Get or set rate of change in zoom, defaults to 0\r\n         */\r\n        this.dz = 0;\r\n        /**\r\n         * Get or set zoom acceleration\r\n         */\r\n        this.az = 0;\r\n        /**\r\n         * Current rotation of the camera\r\n         */\r\n        this.rotation = 0;\r\n        /**\r\n         * Current angular velocity\r\n         * @deprecated will be removed in v0.26.0, use angularVelocity\r\n         */\r\n        this.rx = 0;\r\n        /**\r\n         * Get or set the camera's position\r\n         */\r\n        this._posChanged = false;\r\n        this._pos = watchAny(Vector.Zero, () => (this._posChanged = true));\r\n        /**\r\n         * Get or set the camera's velocity\r\n         */\r\n        this.vel = Vector.Zero;\r\n        /**\r\n         * Get or set the camera's acceleration\r\n         */\r\n        this.acc = Vector.Zero;\r\n        this._cameraMoving = false;\r\n        this._currentLerpTime = 0;\r\n        this._lerpDuration = 1000; // 1 second\r\n        this._lerpStart = null;\r\n        this._lerpEnd = null;\r\n        //camera effects\r\n        this._isShaking = false;\r\n        this._shakeMagnitudeX = 0;\r\n        this._shakeMagnitudeY = 0;\r\n        this._shakeDuration = 0;\r\n        this._elapsedShakeTime = 0;\r\n        this._xShake = 0;\r\n        this._yShake = 0;\r\n        this._isZooming = false;\r\n        this._zoomStart = 1;\r\n        this._zoomEnd = 1;\r\n        this._currentZoomTime = 0;\r\n        this._zoomDuration = 0;\r\n        this._zoomEasing = EasingFunctions.EaseInOutCubic;\r\n        this._easing = EasingFunctions.EaseInOutCubic;\r\n        this._halfWidth = 0;\r\n        this._halfHeight = 0;\r\n        this._viewport = null;\r\n        this._isInitialized = false;\r\n    }\r\n    get zoom() {\r\n        return this._z;\r\n    }\r\n    set zoom(val) {\r\n        this._z = val;\r\n        if (this._engine) {\r\n            this._halfWidth = this._engine.halfDrawWidth;\r\n            this._halfHeight = this._engine.halfDrawHeight;\r\n        }\r\n    }\r\n    /**\r\n     * Get or set the camera's angular velocity\r\n     */\r\n    get angularVelocity() {\r\n        return this.rx;\r\n    }\r\n    set angularVelocity(value) {\r\n        this.rx = value;\r\n    }\r\n    get pos() {\r\n        return this._pos;\r\n    }\r\n    set pos(vec) {\r\n        this._pos = watchAny(vec, () => (this._posChanged = true));\r\n        this._posChanged = true;\r\n    }\r\n    /**\r\n     * Get the camera's x position\r\n     */\r\n    get x() {\r\n        return this.pos.x;\r\n    }\r\n    /**\r\n     * Set the camera's x position (cannot be set when following an [[Actor]] or when moving)\r\n     */\r\n    set x(value) {\r\n        if (!this._follow && !this._cameraMoving) {\r\n            this.pos = vec(value, this.pos.y);\r\n        }\r\n    }\r\n    /**\r\n     * Get the camera's y position\r\n     */\r\n    get y() {\r\n        return this.pos.y;\r\n    }\r\n    /**\r\n     * Set the camera's y position (cannot be set when following an [[Actor]] or when moving)\r\n     */\r\n    set y(value) {\r\n        if (!this._follow && !this._cameraMoving) {\r\n            this.pos = vec(this.pos.x, value);\r\n        }\r\n    }\r\n    /**\r\n     * Get or set the camera's x velocity\r\n     */\r\n    get dx() {\r\n        return this.vel.x;\r\n    }\r\n    set dx(value) {\r\n        this.vel = vec(value, this.vel.y);\r\n    }\r\n    /**\r\n     * Get or set the camera's y velocity\r\n     */\r\n    get dy() {\r\n        return this.vel.y;\r\n    }\r\n    set dy(value) {\r\n        this.vel = vec(this.vel.x, value);\r\n    }\r\n    /**\r\n     * Get or set the camera's x acceleration\r\n     */\r\n    get ax() {\r\n        return this.acc.x;\r\n    }\r\n    set ax(value) {\r\n        this.acc = vec(value, this.acc.y);\r\n    }\r\n    /**\r\n     * Get or set the camera's y acceleration\r\n     */\r\n    get ay() {\r\n        return this.acc.y;\r\n    }\r\n    set ay(value) {\r\n        this.acc = vec(this.acc.x, value);\r\n    }\r\n    /**\r\n     * Returns the focal point of the camera, a new point giving the x and y position of the camera\r\n     */\r\n    getFocus() {\r\n        return this.pos;\r\n    }\r\n    /**\r\n     * This moves the camera focal point to the specified position using specified easing function. Cannot move when following an Actor.\r\n     *\r\n     * @param pos The target position to move to\r\n     * @param duration The duration in milliseconds the move should last\r\n     * @param [easingFn] An optional easing function ([[ex.EasingFunctions.EaseInOutCubic]] by default)\r\n     * @returns A [[Promise]] that resolves when movement is finished, including if it's interrupted.\r\n     *          The [[Promise]] value is the [[Vector]] of the target position. It will be rejected if a move cannot be made.\r\n     */\r\n    move(pos, duration, easingFn = EasingFunctions.EaseInOutCubic) {\r\n        if (typeof easingFn !== 'function') {\r\n            throw 'Please specify an EasingFunction';\r\n        }\r\n        // cannot move when following an actor\r\n        if (this._follow) {\r\n            return Promise.reject(pos);\r\n        }\r\n        // resolve existing promise, if any\r\n        if (this._lerpPromise && this._lerpResolve) {\r\n            this._lerpResolve(pos);\r\n        }\r\n        this._lerpPromise = new Promise((resolve) => {\r\n            this._lerpResolve = resolve;\r\n        });\r\n        this._lerpStart = this.getFocus().clone();\r\n        this._lerpDuration = duration;\r\n        this._lerpEnd = pos;\r\n        this._currentLerpTime = 0;\r\n        this._cameraMoving = true;\r\n        this._easing = easingFn;\r\n        return this._lerpPromise;\r\n    }\r\n    /**\r\n     * Sets the camera to shake at the specified magnitudes for the specified duration\r\n     * @param magnitudeX  The x magnitude of the shake\r\n     * @param magnitudeY  The y magnitude of the shake\r\n     * @param duration    The duration of the shake in milliseconds\r\n     */\r\n    shake(magnitudeX, magnitudeY, duration) {\r\n        this._isShaking = true;\r\n        this._shakeMagnitudeX = magnitudeX;\r\n        this._shakeMagnitudeY = magnitudeY;\r\n        this._shakeDuration = duration;\r\n    }\r\n    /**\r\n     * Zooms the camera in or out by the specified scale over the specified duration.\r\n     * If no duration is specified, it take effect immediately.\r\n     * @param scale    The scale of the zoom\r\n     * @param duration The duration of the zoom in milliseconds\r\n     */\r\n    zoomOverTime(scale, duration = 0, easingFn = EasingFunctions.EaseInOutCubic) {\r\n        this._zoomPromise = new Promise((resolve) => {\r\n            this._zoomResolve = resolve;\r\n        });\r\n        if (duration) {\r\n            this._isZooming = true;\r\n            this._zoomEasing = easingFn;\r\n            this._currentZoomTime = 0;\r\n            this._zoomDuration = duration;\r\n            this._zoomStart = this.zoom;\r\n            this._zoomEnd = scale;\r\n        }\r\n        else {\r\n            this._isZooming = false;\r\n            this.zoom = scale;\r\n            return Promise.resolve(true);\r\n        }\r\n        return this._zoomPromise;\r\n    }\r\n    /**\r\n     * Gets the bounding box of the viewport of this camera in world coordinates\r\n     */\r\n    get viewport() {\r\n        if (this._viewport) {\r\n            return this._viewport;\r\n        }\r\n        return new BoundingBox(0, 0, 0, 0);\r\n    }\r\n    /**\r\n     * Adds a new camera strategy to this camera\r\n     * @param cameraStrategy Instance of an [[CameraStrategy]]\r\n     */\r\n    addStrategy(cameraStrategy) {\r\n        this._cameraStrategies.push(cameraStrategy);\r\n    }\r\n    /**\r\n     * Removes a camera strategy by reference\r\n     * @param cameraStrategy Instance of an [[CameraStrategy]]\r\n     */\r\n    removeStrategy(cameraStrategy) {\r\n        removeItemFromArray(cameraStrategy, this._cameraStrategies);\r\n    }\r\n    /**\r\n     * Clears all camera strategies from the camera\r\n     */\r\n    clearAllStrategies() {\r\n        this._cameraStrategies.length = 0;\r\n    }\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Internal _preupdate handler for [[onPreUpdate]] lifecycle event\r\n     * @internal\r\n     */\r\n    _preupdate(engine, delta) {\r\n        this.emit('preupdate', new PreUpdateEvent(engine, delta, this));\r\n        this.onPreUpdate(engine, delta);\r\n    }\r\n    /**\r\n     * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPreUpdate` is called directly before a scene is updated.\r\n     */\r\n    onPreUpdate(_engine, _delta) {\r\n        // Overridable\r\n    }\r\n    /**\r\n     *  It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Internal _preupdate handler for [[onPostUpdate]] lifecycle event\r\n     * @internal\r\n     */\r\n    _postupdate(engine, delta) {\r\n        this.emit('postupdate', new PostUpdateEvent(engine, delta, this));\r\n        this.onPostUpdate(engine, delta);\r\n    }\r\n    /**\r\n     * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPostUpdate` is called directly after a scene is updated.\r\n     */\r\n    onPostUpdate(_engine, _delta) {\r\n        // Overridable\r\n    }\r\n    get isInitialized() {\r\n        return this._isInitialized;\r\n    }\r\n    _initialize(_engine) {\r\n        if (!this.isInitialized) {\r\n            this._engine = _engine;\r\n            this._screen = _engine.screen;\r\n            const currentRes = this._screen.resolution;\r\n            let center = vec(currentRes.width / 2, currentRes.height / 2);\r\n            if (!this._engine.loadingComplete) {\r\n                // If there was a loading screen, we peek the configured resolution\r\n                const res = this._screen.peekResolution();\r\n                if (res) {\r\n                    center = vec(res.width / 2, res.height / 2);\r\n                }\r\n            }\r\n            this._halfWidth = center.x;\r\n            this._halfHeight = center.y;\r\n            // If the user has not set the camera pos, apply default center screen position\r\n            if (!this._posChanged) {\r\n                this.pos = center;\r\n            }\r\n            // First frame bootstrap\r\n            // Ensure camera tx is correct\r\n            this.updateTransform();\r\n            // Run strategies for first frame\r\n            this.runStrategies(_engine, _engine.clock.elapsed());\r\n            // Setup the first frame viewport\r\n            this.updateViewport();\r\n            this.onInitialize(_engine);\r\n            super.emit('initialize', new InitializeEvent(_engine, this));\r\n            this._isInitialized = true;\r\n        }\r\n    }\r\n    /**\r\n     * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPostUpdate` is called directly after a scene is updated.\r\n     */\r\n    onInitialize(_engine) {\r\n        // Overridable\r\n    }\r\n    on(eventName, handler) {\r\n        super.on(eventName, handler);\r\n    }\r\n    off(eventName, handler) {\r\n        super.off(eventName, handler);\r\n    }\r\n    once(eventName, handler) {\r\n        super.once(eventName, handler);\r\n    }\r\n    runStrategies(engine, delta) {\r\n        for (const s of this._cameraStrategies) {\r\n            this.pos = s.action.call(s, s.target, this, engine, delta);\r\n        }\r\n    }\r\n    updateViewport() {\r\n        // recalc viewport\r\n        this._viewport = new BoundingBox(this.x - this._halfWidth, this.y - this._halfHeight, this.x + this._halfWidth, this.y + this._halfHeight);\r\n    }\r\n    update(_engine, delta) {\r\n        this._initialize(_engine);\r\n        this._preupdate(_engine, delta);\r\n        // Update placements based on linear algebra\r\n        this.pos = this.pos.add(this.vel.scale(delta / 1000));\r\n        this.zoom += (this.dz * delta) / 1000;\r\n        this.vel = this.vel.add(this.acc.scale(delta / 1000));\r\n        this.dz += (this.az * delta) / 1000;\r\n        this.rotation += (this.angularVelocity * delta) / 1000;\r\n        if (this._isZooming) {\r\n            if (this._currentZoomTime < this._zoomDuration) {\r\n                const zoomEasing = this._zoomEasing;\r\n                const newZoom = zoomEasing(this._currentZoomTime, this._zoomStart, this._zoomEnd, this._zoomDuration);\r\n                this.zoom = newZoom;\r\n                this._currentZoomTime += delta;\r\n            }\r\n            else {\r\n                this._isZooming = false;\r\n                this.zoom = this._zoomEnd;\r\n                this._currentZoomTime = 0;\r\n                this._zoomResolve(true);\r\n            }\r\n        }\r\n        if (this._cameraMoving) {\r\n            if (this._currentLerpTime < this._lerpDuration) {\r\n                const moveEasing = EasingFunctions.CreateVectorEasingFunction(this._easing);\r\n                const lerpPoint = moveEasing(this._currentLerpTime, this._lerpStart, this._lerpEnd, this._lerpDuration);\r\n                this.pos = lerpPoint;\r\n                this._currentLerpTime += delta;\r\n            }\r\n            else {\r\n                this.pos = this._lerpEnd;\r\n                const end = this._lerpEnd.clone();\r\n                this._lerpStart = null;\r\n                this._lerpEnd = null;\r\n                this._currentLerpTime = 0;\r\n                this._cameraMoving = false;\r\n                // Order matters here, resolve should be last so any chain promises have a clean slate\r\n                this._lerpResolve(end);\r\n            }\r\n        }\r\n        if (this._isDoneShaking()) {\r\n            this._isShaking = false;\r\n            this._elapsedShakeTime = 0;\r\n            this._shakeMagnitudeX = 0;\r\n            this._shakeMagnitudeY = 0;\r\n            this._shakeDuration = 0;\r\n            this._xShake = 0;\r\n            this._yShake = 0;\r\n        }\r\n        else {\r\n            this._elapsedShakeTime += delta;\r\n            this._xShake = ((Math.random() * this._shakeMagnitudeX) | 0) + 1;\r\n            this._yShake = ((Math.random() * this._shakeMagnitudeY) | 0) + 1;\r\n        }\r\n        this.updateTransform();\r\n        this.runStrategies(_engine, delta);\r\n        this.updateViewport();\r\n        this._postupdate(_engine, delta);\r\n    }\r\n    draw(ctx) {\r\n        // Apply transform\r\n        if (ctx instanceof CanvasRenderingContext2D) {\r\n            // TODO This will be removed in v0.26.0\r\n            const focus = this.getFocus();\r\n            // center the camera\r\n            const newCanvasWidth = this._screen.resolution.width / this.zoom;\r\n            const newCanvasHeight = this._screen.resolution.height / this.zoom;\r\n            const cameraPos = vec(-focus.x + newCanvasWidth / 2 + this._xShake, -focus.y + newCanvasHeight / 2 + this._yShake);\r\n            ctx.scale(this.zoom, this.zoom);\r\n            ctx.translate(cameraPos.x, cameraPos.y);\r\n        }\r\n        else {\r\n            ctx.multiply(this.transform);\r\n        }\r\n    }\r\n    updateTransform() {\r\n        // center the camera\r\n        const newCanvasWidth = this._screen.resolution.width / this.zoom;\r\n        const newCanvasHeight = this._screen.resolution.height / this.zoom;\r\n        const cameraPos = vec(-this.x + newCanvasWidth / 2 + this._xShake, -this.y + newCanvasHeight / 2 + this._yShake);\r\n        // Calculate camera transform\r\n        this.transform.reset();\r\n        this.transform.scale(this.zoom, this.zoom);\r\n        this.transform.translate(cameraPos.x, cameraPos.y);\r\n        this.transform.getAffineInverse(this.inverse);\r\n    }\r\n    /* istanbul ignore next */\r\n    debugDraw(_ctx) {\r\n        // pass\r\n    }\r\n    _isDoneShaking() {\r\n        return !this._isShaking || this._elapsedShakeTime >= this._shakeDuration;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Util/Actors.ts\n\r\n\r\n\r\n/**\r\n * Type guard to detect if something is an actor\r\n * @deprecated Will be removed in v0.26.0\r\n * @param actor\r\n */\r\nfunction isVanillaActor(actor) {\r\n    return !(actor instanceof ScreenElement) && !(actor instanceof Trigger) && !(actor instanceof Label);\r\n}\r\n/**\r\n * Type guard to detect a screen element\r\n * @todo move to ScreenElement\r\n */\r\nfunction isScreenElement(actor) {\r\n    return actor instanceof ScreenElement_ScreenElement;\r\n}\r\n\n;// CONCATENATED MODULE: ./Trigger.ts\n\r\n\r\n\r\n\r\n\r\n\r\nconst triggerDefaults = {\r\n    pos: Vector.Zero,\r\n    width: 10,\r\n    height: 10,\r\n    visible: false,\r\n    action: () => {\r\n        return;\r\n    },\r\n    filter: () => true,\r\n    repeat: -1\r\n};\r\n/**\r\n * Triggers are a method of firing arbitrary code on collision. These are useful\r\n * as 'buttons', 'switches', or to trigger effects in a game. By default triggers\r\n * are invisible, and can only be seen when [[Trigger.visible]] is set to `true`.\r\n */\r\nclass Trigger_Trigger extends Actor {\r\n    /**\r\n     *\r\n     * @param opts Trigger options\r\n     */\r\n    constructor(opts) {\r\n        super({ x: opts.pos.x, y: opts.pos.y, width: opts.width, height: opts.height });\r\n        /**\r\n         * Action to fire when triggered by collision\r\n         */\r\n        this.action = () => {\r\n            return;\r\n        };\r\n        /**\r\n         * Filter to add additional granularity to action dispatch, if a filter is specified the action will only fire when\r\n         * filter return true for the collided actor.\r\n         */\r\n        this.filter = () => true;\r\n        /**\r\n         * Number of times to repeat before killing the trigger,\r\n         */\r\n        this.repeat = -1;\r\n        opts = {\r\n            ...triggerDefaults,\r\n            ...opts\r\n        };\r\n        this.filter = opts.filter || this.filter;\r\n        this.repeat = opts.repeat || this.repeat;\r\n        this.action = opts.action || this.action;\r\n        if (opts.target) {\r\n            this.target = opts.target;\r\n        }\r\n        this.graphics.visible = opts.visible;\r\n        this.body.collisionType = CollisionType.Passive;\r\n        this.eventDispatcher = new EventDispatcher();\r\n        this.events.on('collisionstart', (evt) => {\r\n            if (this.filter(evt.other)) {\r\n                this.emit('enter', new EnterTriggerEvent(this, evt.other));\r\n                this._dispatchAction();\r\n                // remove trigger if its done, -1 repeat forever\r\n                if (this.repeat === 0) {\r\n                    this.kill();\r\n                }\r\n            }\r\n        });\r\n        this.events.on('collisionend', (evt) => {\r\n            if (this.filter(evt.other)) {\r\n                this.emit('exit', new ExitTriggerEvent(this, evt.other));\r\n            }\r\n        });\r\n    }\r\n    set target(target) {\r\n        this._target = target;\r\n        this.filter = (actor) => actor === target;\r\n    }\r\n    get target() {\r\n        return this._target;\r\n    }\r\n    _initialize(engine) {\r\n        super._initialize(engine);\r\n    }\r\n    _dispatchAction() {\r\n        if (this.repeat !== 0) {\r\n            this.action.call(this);\r\n            this.repeat--;\r\n        }\r\n    }\r\n    /**\r\n     * @deprecated signature will change in v0.26.0\r\n     * @param ctx\r\n     */\r\n    /* istanbul ignore next */\r\n    debugDraw(ctx) {\r\n        super.debugDraw(ctx);\r\n        // Meant to draw debug information about actors\r\n        ctx.save();\r\n        ctx.translate(this.pos.x, this.pos.y);\r\n        const bb = this.collider.bounds;\r\n        const wp = this.getGlobalPos();\r\n        bb.left = bb.left - wp.x;\r\n        bb.right = bb.right - wp.x;\r\n        bb.top = bb.top - wp.y;\r\n        bb.bottom = bb.bottom - wp.y;\r\n        ctx.fillStyle = Color.Violet.toString();\r\n        ctx.strokeStyle = Color.Violet.toString();\r\n        ctx.fillText('Trigger', 10, 10);\r\n        bb.debugDraw(ctx);\r\n        ctx.restore();\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./EntityComponentSystem/System.ts\n/**\r\n * Enum that determines whether to run the system in the update or draw phase\r\n */\r\nvar SystemType;\r\n(function (SystemType) {\r\n    SystemType[\"Update\"] = \"update\";\r\n    SystemType[\"Draw\"] = \"draw\";\r\n})(SystemType || (SystemType = {}));\r\n/**\r\n * An Excalibur [[System]] that updates entities of certain types.\r\n * Systems are scene specific\r\n *\r\n * Excalibur Systems currently require at least 1 Component type to operated\r\n *\r\n * Multiple types are declared as a type union\r\n * For example:\r\n *\r\n * ```typescript\r\n * class MySystem extends System<ComponentA | ComponentB> {\r\n *   public readonly types = ['a', 'b'] as const;\r\n *   public readonly systemType = SystemType.Update;\r\n *   public update(entities: Entity<ComponentA | ComponentB>) {\r\n *      ...\r\n *   }\r\n * }\r\n * ```\r\n */\r\nclass System {\r\n    constructor() {\r\n        /**\r\n         * System can execute in priority order, by default all systems are priority 0. Lower values indicated higher priority.\r\n         * For a system to execute before all other a lower priority value (-1 for example) must be set.\r\n         * For a system to execute after all other a higher priority value (10 for example) must be set.\r\n         */\r\n        this.priority = 0;\r\n    }\r\n    /**\r\n     * Systems observe when entities match their types or no longer match their types, override\r\n     * @param _entityAddedOrRemoved\r\n     */\r\n    notify(_entityAddedOrRemoved) {\r\n        // Override me\r\n    }\r\n}\r\n/**\r\n * An [[Entity]] with [[Component]] types that matches a [[System]] types exists in the current scene.\r\n */\r\nclass AddedEntity {\r\n    constructor(data) {\r\n        this.data = data;\r\n        this.type = 'Entity Added';\r\n    }\r\n}\r\n/**\r\n * Type guard to check for AddedEntity messages\r\n * @param x\r\n */\r\nfunction isAddedSystemEntity(x) {\r\n    return !!x && x.type === 'Entity Added';\r\n}\r\n/**\r\n * An [[Entity]] with [[Component]] types that no longer matches a [[System]] types exists in the current scene.\r\n */\r\nclass RemovedEntity {\r\n    constructor(data) {\r\n        this.data = data;\r\n        this.type = 'Entity Removed';\r\n    }\r\n}\r\n/**\r\n * type guard to check for the RemovedEntity message\r\n */\r\nfunction isRemoveSystemEntity(x) {\r\n    return !!x && x.type === 'Entity Removed';\r\n}\r\n\n;// CONCATENATED MODULE: ./EntityComponentSystem/EntityManager.ts\n\r\n\r\n// Add/Remove entities and components\r\nclass EntityManager {\r\n    constructor(_world) {\r\n        this._world = _world;\r\n        this.entities = [];\r\n        this._entityIndex = {};\r\n        this._entitiesToRemove = [];\r\n    }\r\n    /**\r\n     * Runs the entity lifecycle\r\n     * @param _context\r\n     */\r\n    updateEntities(_context, elapsed) {\r\n        for (const entity of this.entities) {\r\n            // TODO is this right?\r\n            entity.update(_context.engine, elapsed);\r\n            if (!entity.active) {\r\n                this.removeEntity(entity);\r\n            }\r\n        }\r\n    }\r\n    findEntitiesForRemoval() {\r\n        for (const entity of this.entities) {\r\n            if (!entity.active) {\r\n                this.removeEntity(entity);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * EntityManager observes changes on entities\r\n     * @param message\r\n     */\r\n    notify(message) {\r\n        if (isAddedComponent(message)) {\r\n            // we don't need the component, it's already on the entity\r\n            this._world.queryManager.addEntity(message.data.entity);\r\n        }\r\n        if (isRemovedComponent(message)) {\r\n            this._world.queryManager.removeComponent(message.data.entity, message.data.component);\r\n        }\r\n    }\r\n    /**\r\n     * Adds an entity to be tracked by the EntityManager\r\n     * @param entity\r\n     */\r\n    addEntity(entity) {\r\n        entity.active = true;\r\n        if (entity && !this._entityIndex[entity.id]) {\r\n            this._entityIndex[entity.id] = entity;\r\n            this.entities.push(entity);\r\n            this._world.queryManager.addEntity(entity);\r\n            entity.componentAdded$.register(this);\r\n            entity.componentRemoved$.register(this);\r\n            // if entity has children\r\n            entity.children.forEach((c) => this.addEntity(c));\r\n            entity.childrenAdded$.register({\r\n                notify: (e) => {\r\n                    this.addEntity(e);\r\n                }\r\n            });\r\n            entity.childrenRemoved$.register({\r\n                notify: (e) => {\r\n                    this.removeEntity(e, false);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    removeEntity(idOrEntity, deferred = true) {\r\n        var _a;\r\n        let id = 0;\r\n        if (idOrEntity instanceof Entity) {\r\n            id = idOrEntity.id;\r\n        }\r\n        else {\r\n            id = idOrEntity;\r\n        }\r\n        const entity = this._entityIndex[id];\r\n        if (entity && entity.active) {\r\n            entity.kill();\r\n        }\r\n        if (entity && deferred) {\r\n            this._entitiesToRemove.push(entity);\r\n            return;\r\n        }\r\n        delete this._entityIndex[id];\r\n        if (entity) {\r\n            removeItemFromArray(entity, this.entities);\r\n            this._world.queryManager.removeEntity(entity);\r\n            entity.componentAdded$.unregister(this);\r\n            entity.componentRemoved$.unregister(this);\r\n            // if entity has children\r\n            entity.children.forEach((c) => this.removeEntity(c, deferred));\r\n            entity.childrenAdded$.clear();\r\n            entity.childrenRemoved$.clear();\r\n            // stats\r\n            if ((_a = this._world.context) === null || _a === void 0 ? void 0 : _a.engine) {\r\n                this._world.context.engine.stats.currFrame.actors.killed++;\r\n            }\r\n        }\r\n    }\r\n    processEntityRemovals() {\r\n        for (const entity of this._entitiesToRemove) {\r\n            if (entity.active) {\r\n                continue;\r\n            }\r\n            this.removeEntity(entity, false);\r\n        }\r\n    }\r\n    processComponentRemovals() {\r\n        for (const entity of this.entities) {\r\n            entity.processComponentRemoval();\r\n        }\r\n    }\r\n    getById(id) {\r\n        return this._entityIndex[id];\r\n    }\r\n    getByName(name) {\r\n        return this.entities.filter(e => e.name === name);\r\n    }\r\n    clear() {\r\n        for (const entity of this.entities) {\r\n            this.removeEntity(entity);\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./EntityComponentSystem/Util.ts\nconst buildTypeKey = (types) => {\r\n    const key = [...types].sort((a, b) => a.localeCompare(b)).join('+');\r\n    return key;\r\n};\r\n\n;// CONCATENATED MODULE: ./EntityComponentSystem/Query.ts\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Represents query for entities that match a list of types that is cached and observable\r\n *\r\n * Queries can be strongly typed by supplying a type union in the optional type parameter\r\n * ```typescript\r\n * const queryAB = new ex.Query<ComponentTypeA | ComponentTypeB>(['A', 'B']);\r\n * ```\r\n */\r\nclass Query extends Observable {\r\n    constructor(types) {\r\n        super();\r\n        this._entities = [];\r\n        if (types[0] instanceof Function) {\r\n            this.types = types.map(T => (new T).type);\r\n        }\r\n        else {\r\n            this.types = types;\r\n        }\r\n    }\r\n    get key() {\r\n        if (this._key) {\r\n            return this._key;\r\n        }\r\n        return (this._key = buildTypeKey(this.types));\r\n    }\r\n    /**\r\n     * Returns a list of entities that match the query\r\n     *\r\n     * @param sort Optional sorting function to sort entities returned from the query\r\n     */\r\n    getEntities(sort) {\r\n        if (sort) {\r\n            this._entities.sort(sort);\r\n        }\r\n        return this._entities;\r\n    }\r\n    /**\r\n     * Add an entity to the query, will only be added if the entity matches the query types\r\n     * @param entity\r\n     */\r\n    addEntity(entity) {\r\n        if (!contains(this._entities, entity) && this.matches(entity)) {\r\n            this._entities.push(entity);\r\n            this.notifyAll(new AddedEntity(entity));\r\n        }\r\n    }\r\n    /**\r\n     * If the entity is part of the query it will be removed regardless of types\r\n     * @param entity\r\n     */\r\n    removeEntity(entity) {\r\n        if (removeItemFromArray(entity, this._entities)) {\r\n            this.notifyAll(new RemovedEntity(entity));\r\n        }\r\n    }\r\n    /**\r\n     * Removes all entities and observers from the query\r\n     */\r\n    clear() {\r\n        this._entities.length = 0;\r\n        for (const observer of this.observers) {\r\n            this.unregister(observer);\r\n        }\r\n    }\r\n    matches(typesOrEntity) {\r\n        let types = [];\r\n        if (typesOrEntity instanceof Entity) {\r\n            types = typesOrEntity.types;\r\n        }\r\n        else {\r\n            types = typesOrEntity;\r\n        }\r\n        let matches = true;\r\n        for (const type of this.types) {\r\n            matches = matches && types.indexOf(type) > -1;\r\n            if (!matches) {\r\n                return false;\r\n            }\r\n        }\r\n        return matches;\r\n    }\r\n    contain(type) {\r\n        return this.types.indexOf(type) > -1;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./EntityComponentSystem/QueryManager.ts\n\r\n\r\n/**\r\n * The query manager is responsible for updating all queries when entities/components change\r\n */\r\nclass QueryManager {\r\n    constructor(_world) {\r\n        this._world = _world;\r\n        this._queries = {};\r\n    }\r\n    /**\r\n     * Adds a query to the manager and populates with any entities that match\r\n     * @param query\r\n     */\r\n    _addQuery(query) {\r\n        this._queries[buildTypeKey(query.types)] = query;\r\n        for (const entity of this._world.entityManager.entities) {\r\n            query.addEntity(entity);\r\n        }\r\n    }\r\n    /**\r\n     * Removes the query if there are no observers left\r\n     * @param query\r\n     */\r\n    maybeRemoveQuery(query) {\r\n        if (query.observers.length === 0) {\r\n            query.clear();\r\n            delete this._queries[buildTypeKey(query.types)];\r\n        }\r\n    }\r\n    /**\r\n     * Adds the entity to any matching query in the query manage\r\n     * @param entity\r\n     */\r\n    addEntity(entity) {\r\n        for (const queryType in this._queries) {\r\n            if (this._queries[queryType]) {\r\n                this._queries[queryType].addEntity(entity);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Removes an entity from queries if the removed component disqualifies it\r\n     * @param entity\r\n     * @param component\r\n     */\r\n    removeComponent(entity, component) {\r\n        for (const queryType in this._queries) {\r\n            // If the component being removed from an entity is a part of a query,\r\n            // it is now disqualified from that query, remove it\r\n            if (this._queries[queryType].contain(component.type)) {\r\n                this._queries[queryType].removeEntity(entity);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Removes an entity from all queries it is currently a part of\r\n     * @param entity\r\n     */\r\n    removeEntity(entity) {\r\n        for (const queryType in this._queries) {\r\n            this._queries[queryType].removeEntity(entity);\r\n        }\r\n    }\r\n    /**\r\n     * Creates a populated query and returns, if the query already exists that will be returned instead of a new instance\r\n     * @param types\r\n     */\r\n    createQuery(types) {\r\n        const maybeExistingQuery = this.getQuery(types);\r\n        if (maybeExistingQuery) {\r\n            return maybeExistingQuery;\r\n        }\r\n        const query = new Query(types);\r\n        this._addQuery(query);\r\n        return query;\r\n    }\r\n    /**\r\n     * Retrieves an existing query by types if it exists otherwise returns null\r\n     * @param types\r\n     */\r\n    getQuery(types) {\r\n        const key = buildTypeKey(types);\r\n        if (this._queries[key]) {\r\n            return this._queries[key];\r\n        }\r\n        return null;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./EntityComponentSystem/SystemManager.ts\n\r\n/**\r\n * The SystemManager is responsible for keeping track of all systems in a scene.\r\n * Systems are scene specific\r\n */\r\nclass SystemManager {\r\n    constructor(_world) {\r\n        this._world = _world;\r\n        /**\r\n         * List of systems, to add a new system call [[SystemManager.addSystem]]\r\n         */\r\n        this.systems = [];\r\n        this.initialized = false;\r\n    }\r\n    /**\r\n     * Get a system registered in the manager by type\r\n     * @param systemType\r\n     */\r\n    get(systemType) {\r\n        return this.systems.find((s) => s instanceof systemType);\r\n    }\r\n    /**\r\n     * Adds a system to the manager, it will now be updated every frame\r\n     * @param system\r\n     */\r\n    addSystem(system) {\r\n        // validate system has types\r\n        if (!system.types || system.types.length === 0) {\r\n            throw new Error(`Attempted to add a System without any types`);\r\n        }\r\n        const query = this._world.queryManager.createQuery(system.types);\r\n        this.systems.push(system);\r\n        this.systems.sort((a, b) => a.priority - b.priority);\r\n        query.register(system);\r\n        if (this.initialized && system.initialize) {\r\n            system.initialize(this._world.context);\r\n        }\r\n    }\r\n    /**\r\n     * Removes a system from the manager, it will no longer be updated\r\n     * @param system\r\n     */\r\n    removeSystem(system) {\r\n        removeItemFromArray(system, this.systems);\r\n        const query = this._world.queryManager.getQuery(system.types);\r\n        if (query) {\r\n            query.unregister(system);\r\n            this._world.queryManager.maybeRemoveQuery(query);\r\n        }\r\n    }\r\n    /**\r\n     * Initialize all systems in the manager\r\n     *\r\n     * Systems added after initialize() will be initialized on add\r\n     */\r\n    initialize() {\r\n        if (!this.initialized) {\r\n            this.initialized = true;\r\n            for (const s of this.systems) {\r\n                if (s.initialize) {\r\n                    s.initialize(this._world.context);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Updates all systems\r\n     * @param type whether this is an update or draw system\r\n     * @param context context reference\r\n     * @param delta time in milliseconds\r\n     */\r\n    updateSystems(type, context, delta) {\r\n        const systems = this.systems.filter((s) => s.systemType === type);\r\n        for (const s of systems) {\r\n            if (s.preupdate) {\r\n                s.preupdate(context, delta);\r\n            }\r\n        }\r\n        for (const s of systems) {\r\n            // Get entities that match the system types, pre-sort\r\n            const entities = this._world.queryManager.getQuery(s.types).getEntities(s.sort);\r\n            // Initialize entities if needed\r\n            if (context instanceof Scene) {\r\n                for (const entity of entities) {\r\n                    entity._initialize(context === null || context === void 0 ? void 0 : context.engine);\r\n                }\r\n            }\r\n            s.update(entities, delta);\r\n        }\r\n        for (const s of systems) {\r\n            if (s.postupdate) {\r\n                s.postupdate(context, delta);\r\n            }\r\n        }\r\n    }\r\n    clear() {\r\n        for (const system of this.systems) {\r\n            this.removeSystem(system);\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./EntityComponentSystem/World.ts\n\r\n\r\n\r\n\r\n\r\n/**\r\n * The World is a self-contained entity component system for a particular context.\r\n */\r\nclass World {\r\n    /**\r\n     * The context type is passed to the system updates\r\n     * @param context\r\n     */\r\n    constructor(context) {\r\n        this.context = context;\r\n        this.queryManager = new QueryManager(this);\r\n        this.entityManager = new EntityManager(this);\r\n        this.systemManager = new SystemManager(this);\r\n    }\r\n    /**\r\n     * Update systems by type and time elapsed in milliseconds\r\n     */\r\n    update(type, delta) {\r\n        if (type === SystemType.Update) {\r\n            this.entityManager.updateEntities(this.context, delta);\r\n        }\r\n        this.systemManager.updateSystems(type, this.context, delta);\r\n        this.entityManager.findEntitiesForRemoval();\r\n        this.entityManager.processComponentRemovals();\r\n        this.entityManager.processEntityRemovals();\r\n    }\r\n    add(entityOrSystem) {\r\n        if (entityOrSystem instanceof Entity) {\r\n            this.entityManager.addEntity(entityOrSystem);\r\n        }\r\n        if (entityOrSystem instanceof System) {\r\n            this.systemManager.addSystem(entityOrSystem);\r\n        }\r\n    }\r\n    remove(entityOrSystem, deferred = true) {\r\n        if (entityOrSystem instanceof Entity) {\r\n            this.entityManager.removeEntity(entityOrSystem, deferred);\r\n        }\r\n        if (entityOrSystem instanceof System) {\r\n            this.systemManager.removeSystem(entityOrSystem);\r\n        }\r\n    }\r\n    clearEntities() {\r\n        this.entityManager.clear();\r\n    }\r\n    clearSystems() {\r\n        this.systemManager.clear();\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Integrator.ts\nclass EulerIntegrator {\r\n    static integrate(transform, motion, totalAcc, elapsedMs) {\r\n        const seconds = elapsedMs / 1000;\r\n        motion.vel.addEqual(totalAcc.scale(seconds));\r\n        transform.pos.addEqual(motion.vel.scale(seconds)).addEqual(totalAcc.scale(0.5 * seconds * seconds));\r\n        motion.angularVelocity += motion.torque * (1.0 / motion.inertia) * seconds;\r\n        transform.rotation += motion.angularVelocity * seconds;\r\n        transform.scale.addEqual(motion.scaleFactor.scale(seconds));\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/MotionSystem.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass MotionSystem extends System {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.types = ['ex.transform', 'ex.motion'];\r\n        this.systemType = SystemType.Update;\r\n        this.priority = -1;\r\n    }\r\n    update(_entities, elapsedMs) {\r\n        let transform;\r\n        let motion;\r\n        for (const entity of _entities) {\r\n            transform = entity.get(TransformComponent);\r\n            motion = entity.get(MotionComponent);\r\n            const optionalBody = entity.get(BodyComponent);\r\n            if (optionalBody === null || optionalBody === void 0 ? void 0 : optionalBody.sleeping) {\r\n                continue;\r\n            }\r\n            const totalAcc = motion.acc.clone();\r\n            if ((optionalBody === null || optionalBody === void 0 ? void 0 : optionalBody.collisionType) === CollisionType.Active && (optionalBody === null || optionalBody === void 0 ? void 0 : optionalBody.useGravity)) {\r\n                totalAcc.addEqual(Physics.gravity);\r\n            }\r\n            optionalBody === null || optionalBody === void 0 ? void 0 : optionalBody.captureOldTransform();\r\n            // Update transform and motion based on Euler linear algebra\r\n            EulerIntegrator.integrate(transform, motion, totalAcc, elapsedMs);\r\n        }\r\n    }\r\n    /**\r\n     * @deprecated signature will change in v0.26.0\r\n     * @param _ctx\r\n     */\r\n    debugDraw(_ctx) {\r\n        // pass\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Solver/Solver.ts\n/**\r\n * A collision solver figures out how to position colliders such that they are no longer overlapping\r\n *\r\n * Solvers are executed in the order\r\n *\r\n * 1. preSolve\r\n * 2. solveVelocity\r\n * 3. solvePosition\r\n * 4. postSolve\r\n * @inheritdoc\r\n */\r\nclass CollisionSolver {\r\n    /**\r\n     * Solves overlapping contact in\r\n     *\r\n     * Solvers are executed in the order\r\n     * 1. preSolve\r\n     * 2. solveVelocity\r\n     * 3. solvePosition\r\n     * 4. postSolve\r\n     * @param contacts\r\n     */\r\n    solve(contacts) {\r\n        // Events and init\r\n        this.preSolve(contacts);\r\n        // Remove any canceled contacts\r\n        contacts = contacts.filter(c => !c.isCanceled());\r\n        // Solve velocity first\r\n        this.solveVelocity(contacts);\r\n        // Solve position last because non-overlap is the most important\r\n        this.solvePosition(contacts);\r\n        // Events and any contact house-keeping the solver needs\r\n        this.postSolve(contacts);\r\n        return contacts;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Solver/ArcadeSolver.ts\n\r\n\r\n\r\n\r\n\r\n/**\r\n * ArcadeSolver is the default in Excalibur. It solves collisions so that there is no overlap between contacts,\r\n * and negates velocity along the collision normal.\r\n *\r\n * This is usually the type of collisions used for 2D games that don't need a more realistic collision simulation.\r\n *\r\n */\r\nclass ArcadeSolver extends CollisionSolver {\r\n    preSolve(contacts) {\r\n        for (const contact of contacts) {\r\n            const side = Side.fromDirection(contact.mtv);\r\n            const mtv = contact.mtv.negate();\r\n            // Publish collision events on both participants\r\n            contact.colliderA.events.emit('precollision', new PreCollisionEvent(contact.colliderA, contact.colliderB, side, mtv));\r\n            contact.colliderB.events.emit('precollision', new PreCollisionEvent(contact.colliderB, contact.colliderA, Side.getOpposite(side), mtv.negate()));\r\n        }\r\n    }\r\n    postSolve(contacts) {\r\n        var _a, _b;\r\n        for (const contact of contacts) {\r\n            const colliderA = contact.colliderA;\r\n            const colliderB = contact.colliderB;\r\n            const bodyA = (_a = colliderA.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\r\n            const bodyB = (_b = colliderB.owner) === null || _b === void 0 ? void 0 : _b.get(BodyComponent);\r\n            if (bodyA && bodyB) {\r\n                if (bodyA.collisionType === CollisionType.Passive || bodyB.collisionType === CollisionType.Passive) {\r\n                    continue;\r\n                }\r\n            }\r\n            const side = Side.fromDirection(contact.mtv);\r\n            const mtv = contact.mtv.negate();\r\n            // Publish collision events on both participants\r\n            contact.colliderA.events.emit('postcollision', new PostCollisionEvent(contact.colliderA, contact.colliderB, side, mtv));\r\n            contact.colliderB.events.emit('postcollision', new PostCollisionEvent(contact.colliderB, contact.colliderA, Side.getOpposite(side), mtv.negate()));\r\n        }\r\n    }\r\n    solvePosition(contacts) {\r\n        var _a, _b;\r\n        for (const contact of contacts) {\r\n            // if bounds no longer interesect skip to the next\r\n            // this removes jitter from overlapping/stacked solid tiles or a wall of solid tiles\r\n            if (!contact.colliderA.bounds.intersect(contact.colliderB.bounds)) {\r\n                continue;\r\n            }\r\n            let mtv = contact.mtv;\r\n            const colliderA = contact.colliderA;\r\n            const colliderB = contact.colliderB;\r\n            const bodyA = (_a = colliderA.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\r\n            const bodyB = (_b = colliderB.owner) === null || _b === void 0 ? void 0 : _b.get(BodyComponent);\r\n            if (bodyA && bodyB) {\r\n                if (bodyA.collisionType === CollisionType.Passive || bodyB.collisionType === CollisionType.Passive) {\r\n                    continue;\r\n                }\r\n                if (bodyA.collisionType === CollisionType.Active && bodyB.collisionType === CollisionType.Active) {\r\n                    // split overlaps if both are Active\r\n                    mtv = mtv.scale(0.5);\r\n                }\r\n                // Resolve overlaps\r\n                if (bodyA.collisionType === CollisionType.Active) {\r\n                    bodyA.pos.x -= mtv.x;\r\n                    bodyA.pos.y -= mtv.y;\r\n                }\r\n                if (bodyB.collisionType === CollisionType.Active) {\r\n                    bodyB.pos.x += mtv.x;\r\n                    bodyB.pos.y += mtv.y;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    solveVelocity(contacts) {\r\n        var _a, _b;\r\n        for (const contact of contacts) {\r\n            const colliderA = contact.colliderA;\r\n            const colliderB = contact.colliderB;\r\n            const bodyA = (_a = colliderA.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\r\n            const bodyB = (_b = colliderB.owner) === null || _b === void 0 ? void 0 : _b.get(BodyComponent);\r\n            if (bodyA && bodyB) {\r\n                if (bodyA.collisionType === CollisionType.Passive || bodyB.collisionType === CollisionType.Passive) {\r\n                    continue;\r\n                }\r\n                const normal = contact.normal;\r\n                const opposite = normal.negate();\r\n                // Cancel out velocity opposite direction of collision normal\r\n                if (bodyA.collisionType === CollisionType.Active) {\r\n                    const velAdj = normal.scale(normal.dot(bodyA.vel.negate()));\r\n                    bodyA.vel = bodyA.vel.add(velAdj);\r\n                }\r\n                if (bodyB.collisionType === CollisionType.Active) {\r\n                    const velAdj = opposite.scale(opposite.dot(bodyB.vel.negate()));\r\n                    bodyB.vel = bodyB.vel.add(velAdj);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Solver/ContactConstraintPoint.ts\n\r\n\r\n/**\r\n * Holds information about contact points, meant to be reused over multiple frames of contact\r\n */\r\nclass ContactConstraintPoint {\r\n    constructor(point, local, contact) {\r\n        this.point = point;\r\n        this.local = local;\r\n        this.contact = contact;\r\n        /**\r\n         * Impulse accumulated over time in normal direction\r\n         */\r\n        this.normalImpulse = 0;\r\n        /**\r\n         * Impulse accumulated over time in the tangent direction\r\n         */\r\n        this.tangentImpulse = 0;\r\n        /**\r\n         * Effective mass seen in the normal direction\r\n         */\r\n        this.normalMass = 0;\r\n        /**\r\n         * Effective mass seen in the tangent direction\r\n         */\r\n        this.tangentMass = 0;\r\n        /**\r\n         * Direction from center of mass of bodyA to contact point\r\n         */\r\n        this.aToContact = new Vector(0, 0);\r\n        /**\r\n         * Direction from center of mass of bodyB to contact point\r\n         */\r\n        this.bToContact = new Vector(0, 0);\r\n        this.update();\r\n    }\r\n    /**\r\n     * Updates the contact information\r\n     */\r\n    update() {\r\n        var _a, _b;\r\n        const bodyA = (_a = this.contact.colliderA.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\r\n        const bodyB = (_b = this.contact.colliderB.owner) === null || _b === void 0 ? void 0 : _b.get(BodyComponent);\r\n        if (bodyA && bodyB) {\r\n            const normal = this.contact.normal;\r\n            const tangent = this.contact.tangent;\r\n            this.aToContact = this.point.sub(bodyA.pos);\r\n            this.bToContact = this.point.sub(bodyB.pos);\r\n            const aToContactNormal = this.aToContact.cross(normal);\r\n            const bToContactNormal = this.bToContact.cross(normal);\r\n            this.normalMass =\r\n                bodyA.inverseMass +\r\n                    bodyB.inverseMass +\r\n                    bodyA.inverseInertia * aToContactNormal * aToContactNormal +\r\n                    bodyB.inverseInertia * bToContactNormal * bToContactNormal;\r\n            const aToContactTangent = this.aToContact.cross(tangent);\r\n            const bToContactTangent = this.bToContact.cross(tangent);\r\n            this.tangentMass =\r\n                bodyA.inverseMass +\r\n                    bodyB.inverseMass +\r\n                    bodyA.inverseInertia * aToContactTangent * aToContactTangent +\r\n                    bodyB.inverseInertia * bToContactTangent * bToContactTangent;\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Returns the relative velocity between bodyA and bodyB\r\n     */\r\n    getRelativeVelocity() {\r\n        var _a, _b;\r\n        const bodyA = (_a = this.contact.colliderA.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\r\n        const bodyB = (_b = this.contact.colliderB.owner) === null || _b === void 0 ? void 0 : _b.get(BodyComponent);\r\n        if (bodyA && bodyB) {\r\n            // Relative velocity in linear terms\r\n            // Angular to linear velocity formula -> omega = velocity/radius so omega x radius = velocity\r\n            const velA = bodyA.vel.add(Vector.cross(bodyA.angularVelocity, this.aToContact));\r\n            const velB = bodyB.vel.add(Vector.cross(bodyB.angularVelocity, this.bToContact));\r\n            return velB.sub(velA);\r\n        }\r\n        return Vector.Zero;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/Solver/RealisticSolver.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass RealisticSolver extends CollisionSolver {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.lastFrameContacts = new Map();\r\n        // map contact id to contact points\r\n        this.idToContactConstraint = new Map();\r\n    }\r\n    getContactConstraints(id) {\r\n        var _a;\r\n        return (_a = this.idToContactConstraint.get(id)) !== null && _a !== void 0 ? _a : [];\r\n    }\r\n    preSolve(contacts) {\r\n        var _a, _b, _c;\r\n        for (const contact of contacts) {\r\n            // Publish collision events on both participants\r\n            const side = Side.fromDirection(contact.mtv);\r\n            contact.colliderA.events.emit('precollision', new PreCollisionEvent(contact.colliderA, contact.colliderB, side, contact.mtv));\r\n            contact.colliderA.events.emit('beforecollisionresolve', new CollisionPreSolveEvent(contact.colliderA, contact.colliderB, side, contact.mtv, contact));\r\n            contact.colliderB.events.emit('precollision', new PreCollisionEvent(contact.colliderB, contact.colliderA, Side.getOpposite(side), contact.mtv.negate()));\r\n            contact.colliderB.events.emit('beforecollisionresolve', new CollisionPreSolveEvent(contact.colliderB, contact.colliderA, Side.getOpposite(side), contact.mtv.negate(), contact));\r\n            // Match awake state for sleeping\r\n            contact.matchAwake();\r\n        }\r\n        // Keep track of contacts that done\r\n        const finishedContactIds = Array.from(this.idToContactConstraint.keys());\r\n        for (const contact of contacts) {\r\n            // Remove all current contacts that are not done\r\n            const index = finishedContactIds.indexOf(contact.id);\r\n            if (index > -1) {\r\n                finishedContactIds.splice(index, 1);\r\n            }\r\n            const contactPoints = (_a = this.idToContactConstraint.get(contact.id)) !== null && _a !== void 0 ? _a : [];\r\n            let pointIndex = 0;\r\n            const bodyA = contact.colliderA.owner.get(BodyComponent);\r\n            const bodyB = contact.colliderB.owner.get(BodyComponent);\r\n            if (bodyA && bodyB) {\r\n                for (const point of contact.points) {\r\n                    const normal = contact.normal;\r\n                    const tangent = contact.tangent;\r\n                    const aToContact = point.sub(bodyA.pos);\r\n                    const bToContact = point.sub(bodyB.pos);\r\n                    const aToContactNormal = aToContact.cross(normal);\r\n                    const bToContactNormal = bToContact.cross(normal);\r\n                    const normalMass = bodyA.inverseMass +\r\n                        bodyB.inverseMass +\r\n                        bodyA.inverseInertia * aToContactNormal * aToContactNormal +\r\n                        bodyB.inverseInertia * bToContactNormal * bToContactNormal;\r\n                    const aToContactTangent = aToContact.cross(tangent);\r\n                    const bToContactTangent = bToContact.cross(tangent);\r\n                    const tangentMass = bodyA.inverseMass +\r\n                        bodyB.inverseMass +\r\n                        bodyA.inverseInertia * aToContactTangent * aToContactTangent +\r\n                        bodyB.inverseInertia * bToContactTangent * bToContactTangent;\r\n                    // Preserve normal/tangent impulse by re-using the contact point if it's close\r\n                    if (contactPoints[pointIndex] && ((_c = (_b = contactPoints[pointIndex]) === null || _b === void 0 ? void 0 : _b.point) === null || _c === void 0 ? void 0 : _c.squareDistance(point)) < 4) {\r\n                        contactPoints[pointIndex].point = point;\r\n                        contactPoints[pointIndex].local = contact.localPoints[pointIndex];\r\n                    }\r\n                    else {\r\n                        // new contact if it's not close or doesn't exist\r\n                        contactPoints[pointIndex] = new ContactConstraintPoint(point, contact.localPoints[pointIndex], contact);\r\n                    }\r\n                    // Update contact point calculations\r\n                    contactPoints[pointIndex].aToContact = aToContact;\r\n                    contactPoints[pointIndex].bToContact = bToContact;\r\n                    contactPoints[pointIndex].normalMass = normalMass;\r\n                    contactPoints[pointIndex].tangentMass = tangentMass;\r\n                    pointIndex++;\r\n                }\r\n            }\r\n            this.idToContactConstraint.set(contact.id, contactPoints);\r\n        }\r\n        // Clean up any contacts that did not occur last frame\r\n        for (const id of finishedContactIds) {\r\n            this.idToContactConstraint.delete(id);\r\n        }\r\n        // Warm contacts with accumulated impulse\r\n        // Useful for tall stacks\r\n        if (Physics.warmStart) {\r\n            this.warmStart(contacts);\r\n        }\r\n        else {\r\n            for (const contact of contacts) {\r\n                const contactPoints = this.getContactConstraints(contact.id);\r\n                for (const point of contactPoints) {\r\n                    point.normalImpulse = 0;\r\n                    point.tangentImpulse = 0;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    postSolve(contacts) {\r\n        for (const contact of contacts) {\r\n            const bodyA = contact.colliderA.owner.get(BodyComponent);\r\n            const bodyB = contact.colliderB.owner.get(BodyComponent);\r\n            if (bodyA && bodyB) {\r\n                // Skip post solve for active+passive collisions\r\n                if (bodyA.collisionType === CollisionType.Passive || bodyB.collisionType === CollisionType.Passive) {\r\n                    continue;\r\n                }\r\n                // Update motion values for sleeping\r\n                bodyA.updateMotion();\r\n                bodyB.updateMotion();\r\n            }\r\n            // Publish collision events on both participants\r\n            const side = Side.fromDirection(contact.mtv);\r\n            contact.colliderA.events.emit('postcollision', new PostCollisionEvent(contact.colliderA, contact.colliderB, side, contact.mtv));\r\n            contact.colliderA.events.emit('aftercollisionresolve', new CollisionPostSolveEvent(contact.colliderA, contact.colliderB, side, contact.mtv, contact));\r\n            contact.colliderB.events.emit('postcollision', new PostCollisionEvent(contact.colliderB, contact.colliderA, Side.getOpposite(side), contact.mtv.negate()));\r\n            contact.colliderB.events.emit('aftercollisionresolve', new CollisionPostSolveEvent(contact.colliderB, contact.colliderA, Side.getOpposite(side), contact.mtv.negate(), contact));\r\n        }\r\n        // Store contacts\r\n        this.lastFrameContacts.clear();\r\n        for (const c of contacts) {\r\n            this.lastFrameContacts.set(c.id, c);\r\n        }\r\n    }\r\n    /**\r\n     * Warm up body's based on previous frame contact points\r\n     * @param contacts\r\n     */\r\n    warmStart(contacts) {\r\n        var _a, _b, _c;\r\n        for (const contact of contacts) {\r\n            const bodyA = (_a = contact.colliderA.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\r\n            const bodyB = (_b = contact.colliderB.owner) === null || _b === void 0 ? void 0 : _b.get(BodyComponent);\r\n            if (bodyA && bodyB) {\r\n                const contactPoints = (_c = this.idToContactConstraint.get(contact.id)) !== null && _c !== void 0 ? _c : [];\r\n                for (const point of contactPoints) {\r\n                    if (Physics.warmStart) {\r\n                        const normalImpulse = contact.normal.scale(point.normalImpulse);\r\n                        const tangentImpulse = contact.tangent.scale(point.tangentImpulse);\r\n                        const impulse = normalImpulse.add(tangentImpulse);\r\n                        bodyA.applyImpulse(point.point, impulse.negate());\r\n                        bodyB.applyImpulse(point.point, impulse);\r\n                    }\r\n                    else {\r\n                        point.normalImpulse = 0;\r\n                        point.tangentImpulse = 0;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Iteratively solve the position overlap constraint\r\n     * @param contacts\r\n     */\r\n    solvePosition(contacts) {\r\n        var _a, _b, _c;\r\n        for (let i = 0; i < Physics.positionIterations; i++) {\r\n            for (const contact of contacts) {\r\n                const bodyA = (_a = contact.colliderA.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\r\n                const bodyB = (_b = contact.colliderB.owner) === null || _b === void 0 ? void 0 : _b.get(BodyComponent);\r\n                if (bodyA && bodyB) {\r\n                    // Skip solving active+passive\r\n                    if (bodyA.collisionType === CollisionType.Passive || bodyB.collisionType === CollisionType.Passive) {\r\n                        continue;\r\n                    }\r\n                    const constraints = (_c = this.idToContactConstraint.get(contact.id)) !== null && _c !== void 0 ? _c : [];\r\n                    for (const point of constraints) {\r\n                        const normal = contact.normal;\r\n                        const separation = CollisionJumpTable.FindContactSeparation(contact, point.local);\r\n                        const steeringConstant = Physics.steeringFactor; //0.2;\r\n                        const maxCorrection = -5;\r\n                        const slop = Physics.slop; //1;\r\n                        // Clamp to avoid over-correction\r\n                        // Remember that we are shooting for 0 overlap in the end\r\n                        const steeringForce = clamp(steeringConstant * (separation + slop), maxCorrection, 0);\r\n                        const impulse = normal.scale(-steeringForce / point.normalMass);\r\n                        // This is a pseudo impulse, meaning we aren't doing a real impulse calculation\r\n                        // We adjust position and rotation instead of doing the velocity\r\n                        if (bodyA.collisionType === CollisionType.Active) {\r\n                            bodyA.pos = bodyA.pos.add(impulse.negate().scale(bodyA.inverseMass));\r\n                            bodyA.rotation -= point.aToContact.cross(impulse) * bodyA.inverseInertia;\r\n                        }\r\n                        if (bodyB.collisionType === CollisionType.Active) {\r\n                            bodyB.pos = bodyB.pos.add(impulse.scale(bodyB.inverseMass));\r\n                            bodyB.rotation += point.bToContact.cross(impulse) * bodyB.inverseInertia;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    solveVelocity(contacts) {\r\n        var _a, _b, _c;\r\n        for (let i = 0; i < Physics.velocityIterations; i++) {\r\n            for (const contact of contacts) {\r\n                const bodyA = (_a = contact.colliderA.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\r\n                const bodyB = (_b = contact.colliderB.owner) === null || _b === void 0 ? void 0 : _b.get(BodyComponent);\r\n                if (bodyA && bodyB) {\r\n                    // Skip solving active+passive\r\n                    if (bodyA.collisionType === CollisionType.Passive || bodyB.collisionType === CollisionType.Passive) {\r\n                        continue;\r\n                    }\r\n                    const restitution = bodyA.bounciness * bodyB.bounciness;\r\n                    const friction = Math.min(bodyA.friction, bodyB.friction);\r\n                    const constraints = (_c = this.idToContactConstraint.get(contact.id)) !== null && _c !== void 0 ? _c : [];\r\n                    for (const point of constraints) {\r\n                        const relativeVelocity = point.getRelativeVelocity();\r\n                        // Negate velocity in tangent direction to simulate friction\r\n                        const tangentVelocity = -relativeVelocity.dot(contact.tangent);\r\n                        let impulseDelta = tangentVelocity / point.tangentMass;\r\n                        // Clamping based in Erin Catto's GDC 2006 talk\r\n                        // Correct clamping https://github.com/erincatto/box2d-lite/blob/master/docs/GDC2006_Catto_Erin_PhysicsTutorial.pdf\r\n                        // Accumulated fiction impulse is always between -uMaxFriction < dT < uMaxFriction\r\n                        // But deltas can vary\r\n                        const maxFriction = friction * point.normalImpulse;\r\n                        const newImpulse = clamp(point.tangentImpulse + impulseDelta, -maxFriction, maxFriction);\r\n                        impulseDelta = newImpulse - point.tangentImpulse;\r\n                        point.tangentImpulse = newImpulse;\r\n                        const impulse = contact.tangent.scale(impulseDelta);\r\n                        bodyA.applyImpulse(point.point, impulse.negate());\r\n                        bodyB.applyImpulse(point.point, impulse);\r\n                    }\r\n                    for (const point of constraints) {\r\n                        // Need to recalc relative velocity because the previous step could have changed vel\r\n                        const relativeVelocity = point.getRelativeVelocity();\r\n                        // Compute impulse in normal direction\r\n                        const normalVelocity = relativeVelocity.dot(contact.normal);\r\n                        // See https://en.wikipedia.org/wiki/Collision_response\r\n                        let impulseDelta = (-(1 + restitution) * normalVelocity) / point.normalMass;\r\n                        // Clamping based in Erin Catto's GDC 2014 talk\r\n                        // Accumulated impulse stored in the contact is always positive (dV > 0)\r\n                        // But deltas can be negative\r\n                        const newImpulse = Math.max(point.normalImpulse + impulseDelta, 0);\r\n                        impulseDelta = newImpulse - point.normalImpulse;\r\n                        point.normalImpulse = newImpulse;\r\n                        const impulse = contact.normal.scale(impulseDelta);\r\n                        bodyA.applyImpulse(point.point, impulse.negate());\r\n                        bodyB.applyImpulse(point.point, impulse);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Collision/CollisionSystem.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass CollisionSystem extends System {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.types = ['ex.transform', 'ex.motion', 'ex.collider'];\r\n        this.systemType = SystemType.Update;\r\n        this.priority = -1;\r\n        this._realisticSolver = new RealisticSolver();\r\n        this._arcadeSolver = new ArcadeSolver();\r\n        this._processor = new DynamicTreeCollisionProcessor();\r\n        this._lastFrameContacts = new Map();\r\n        this._currentFrameContacts = new Map();\r\n        this._trackCollider = (c) => this._processor.track(c);\r\n        this._untrackCollider = (c) => this._processor.untrack(c);\r\n    }\r\n    notify(message) {\r\n        if (isAddedSystemEntity(message)) {\r\n            const colliderComponent = message.data.get(ColliderComponent);\r\n            colliderComponent.$colliderAdded.subscribe(this._trackCollider);\r\n            colliderComponent.$colliderRemoved.subscribe(this._untrackCollider);\r\n            const collider = colliderComponent.get();\r\n            if (collider) {\r\n                this._processor.track(collider);\r\n            }\r\n        }\r\n        else {\r\n            const colliderComponent = message.data.get(ColliderComponent);\r\n            const collider = colliderComponent.get();\r\n            if (colliderComponent && collider) {\r\n                this._processor.untrack(collider);\r\n            }\r\n        }\r\n    }\r\n    initialize(scene) {\r\n        this._engine = scene.engine;\r\n    }\r\n    update(_entities, elapsedMs) {\r\n        var _a;\r\n        if (!Physics.enabled) {\r\n            return;\r\n        }\r\n        // Collect up all the colliders\r\n        let colliders = [];\r\n        for (const entity of _entities) {\r\n            const colliderComp = entity.get(ColliderComponent);\r\n            const collider = colliderComp === null || colliderComp === void 0 ? void 0 : colliderComp.get();\r\n            if (colliderComp && ((_a = colliderComp.owner) === null || _a === void 0 ? void 0 : _a.active) && collider) {\r\n                colliderComp.update();\r\n                if (collider instanceof CompositeCollider) {\r\n                    colliders = colliders.concat(collider.getColliders());\r\n                }\r\n                else {\r\n                    colliders.push(collider);\r\n                }\r\n            }\r\n        }\r\n        // Update the spatial partitioning data structures\r\n        // TODO if collider invalid it will break the processor\r\n        // TODO rename \"update\" to something more specific\r\n        this._processor.update(colliders);\r\n        // Run broadphase on all colliders and locates potential collisions\r\n        const pairs = this._processor.broadphase(colliders, elapsedMs);\r\n        this._currentFrameContacts.clear();\r\n        // Given possible pairs find actual contacts\r\n        let contacts = this._processor.narrowphase(pairs, this._engine.debug.stats.currFrame);\r\n        const solver = this.getSolver();\r\n        // Solve, this resolves the position/velocity so entities aren't overlapping\r\n        contacts = solver.solve(contacts);\r\n        // Record contacts\r\n        contacts.forEach((c) => this._currentFrameContacts.set(c.id, c));\r\n        // Emit contact start/end events\r\n        this.runContactStartEnd();\r\n        // reset the last frame cache\r\n        this._lastFrameContacts.clear();\r\n        // Keep track of collisions contacts that have started or ended\r\n        this._lastFrameContacts = new Map(this._currentFrameContacts);\r\n    }\r\n    getSolver() {\r\n        return Physics.collisionResolutionStrategy === CollisionResolutionStrategy.Realistic ? this._realisticSolver : this._arcadeSolver;\r\n    }\r\n    debug(ex) {\r\n        this._processor.debug(ex);\r\n    }\r\n    runContactStartEnd() {\r\n        for (const [id, c] of this._currentFrameContacts) {\r\n            // find all new contacts\r\n            if (!this._lastFrameContacts.has(id)) {\r\n                const colliderA = c.colliderA;\r\n                const colliderB = c.colliderB;\r\n                colliderA.events.emit('collisionstart', new CollisionStartEvent(colliderA, colliderB, c));\r\n                colliderA.events.emit('contactstart', new ContactStartEvent(colliderA, colliderB, c));\r\n                colliderB.events.emit('collisionstart', new CollisionStartEvent(colliderB, colliderA, c));\r\n                colliderB.events.emit('contactstart', new ContactStartEvent(colliderB, colliderA, c));\r\n            }\r\n        }\r\n        // find all contacts taht have ceased\r\n        for (const [id, c] of this._lastFrameContacts) {\r\n            if (!this._currentFrameContacts.has(id)) {\r\n                const colliderA = c.colliderA;\r\n                const colliderB = c.colliderB;\r\n                colliderA.events.emit('collisionend', new CollisionEndEvent(colliderA, colliderB));\r\n                colliderA.events.emit('contactend', new ContactEndEvent(colliderA, colliderB));\r\n                colliderB.events.emit('collisionend', new CollisionEndEvent(colliderB, colliderA));\r\n                colliderB.events.emit('contactend', new ContactEndEvent(colliderB, colliderA));\r\n            }\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Animation.ts\n\r\n\r\n\r\n\r\n\r\n\r\nvar AnimationDirection;\r\n(function (AnimationDirection) {\r\n    /**\r\n     * Animation is playing forwards\r\n     */\r\n    AnimationDirection[\"Forward\"] = \"forward\";\r\n    /**\r\n     * Animation is play backwards\r\n     */\r\n    AnimationDirection[\"Backward\"] = \"backward\";\r\n})(AnimationDirection || (AnimationDirection = {}));\r\nvar AnimationStrategy;\r\n(function (AnimationStrategy) {\r\n    /**\r\n     * Animation ends without displaying anything\r\n     */\r\n    AnimationStrategy[\"End\"] = \"end\";\r\n    /**\r\n     * Animation loops to the first frame after the last frame\r\n     */\r\n    AnimationStrategy[\"Loop\"] = \"loop\";\r\n    /**\r\n     * Animation plays to the last frame, then backwards to the first frame, then repeats\r\n     */\r\n    AnimationStrategy[\"PingPong\"] = \"pingpong\";\r\n    /**\r\n     * Animation ends stopping on the last frame\r\n     */\r\n    AnimationStrategy[\"Freeze\"] = \"freeze\";\r\n})(AnimationStrategy || (AnimationStrategy = {}));\r\n/**\r\n * Create an Animation given a list of [[Frame|frames]] in [[AnimationOptions]]\r\n *\r\n * To create an Animation from a [[SpriteSheet]], use [[Animation.fromSpriteSheet]]\r\n */\r\nclass Animation extends Graphic {\r\n    constructor(options) {\r\n        var _a, _b;\r\n        super(options);\r\n        this.events = new EventDispatcher(); // TODO replace with new Emitter\r\n        this.frames = [];\r\n        this.strategy = AnimationStrategy.Loop;\r\n        this.frameDuration = 100;\r\n        this.timeScale = 1;\r\n        this._idempotencyToken = -1;\r\n        this._firstTick = true;\r\n        this._currentFrame = 0;\r\n        this._timeLeftInFrame = 0;\r\n        this._direction = 1; // TODO only used in ping-pong\r\n        this._done = false;\r\n        this._playing = true;\r\n        this._reversed = false;\r\n        this.frames = options.frames;\r\n        this.strategy = (_a = options.strategy) !== null && _a !== void 0 ? _a : this.strategy;\r\n        this.frameDuration = options.totalDuration ? options.totalDuration / this.frames.length : (_b = options.frameDuration) !== null && _b !== void 0 ? _b : this.frameDuration;\r\n        if (options.reverse) {\r\n            this.reverse();\r\n        }\r\n        this.goToFrame(0);\r\n    }\r\n    clone() {\r\n        return new Animation({\r\n            frames: this.frames.map((f) => ({ ...f })),\r\n            frameDuration: this.frameDuration,\r\n            reverse: this._reversed,\r\n            strategy: this.strategy,\r\n            ...this.cloneGraphicOptions()\r\n        });\r\n    }\r\n    get width() {\r\n        const maybeFrame = this.currentFrame;\r\n        if (maybeFrame) {\r\n            return Math.abs(maybeFrame.graphic.width * this.scale.x);\r\n        }\r\n        return 0;\r\n    }\r\n    get height() {\r\n        const maybeFrame = this.currentFrame;\r\n        if (maybeFrame) {\r\n            return Math.abs(maybeFrame.graphic.height * this.scale.y);\r\n        }\r\n        return 0;\r\n    }\r\n    /**\r\n     * Create an Animation from a [[SpriteSheet]], a list of indices into the sprite sheet, a duration per frame\r\n     * and optional [[AnimationStrategy]]\r\n     *\r\n     * Example:\r\n     * ```typescript\r\n     * const spriteSheet = SpriteSheet.fromImageSource({...});\r\n     *\r\n     * const anim = Animation.fromSpriteSheet(spriteSheet, range(0, 5), 200, AnimationStrategy.Loop);\r\n     * ```\r\n     *\r\n     * @param spriteSheet\r\n     * @param frameIndices\r\n     * @param durationPerFrameMs\r\n     * @param strategy\r\n     */\r\n    static fromSpriteSheet(spriteSheet, frameIndices, durationPerFrameMs, strategy = AnimationStrategy.Loop) {\r\n        const maxIndex = spriteSheet.sprites.length - 1;\r\n        const invalidIndices = frameIndices.filter((index) => index < 0 || index > maxIndex);\r\n        if (invalidIndices.length) {\r\n            Animation._LOGGER.warn(`Indices into SpriteSheet were provided that don\\'t exist: ${invalidIndices.join(',')} no frame will be shown`);\r\n        }\r\n        return new Animation({\r\n            frames: spriteSheet.sprites\r\n                .filter((_, index) => frameIndices.indexOf(index) > -1)\r\n                .map((f) => ({\r\n                graphic: f,\r\n                duration: durationPerFrameMs\r\n            })),\r\n            strategy: strategy\r\n        });\r\n    }\r\n    /**\r\n     * Converts an animation to a legacy animation\r\n     * @deprecated\r\n     * @param engine\r\n     * @param animation\r\n     * @returns LegacyDrawing.Animation\r\n     */\r\n    static toLegacyAnimation(engine, animation) {\r\n        const legacySprites = animation.frames.map(f => Sprite.toLegacySprite(f.graphic));\r\n        return new Animation_Animation({\r\n            sprites: legacySprites,\r\n            loop: animation.strategy === AnimationStrategy.Loop,\r\n            freezeFrame: animation.strategy === AnimationStrategy.Freeze ? legacySprites.length - 1 : undefined,\r\n            speed: animation.frameDuration,\r\n            engine: engine\r\n        });\r\n    }\r\n    /**\r\n     * Returns the current Frame of the animation\r\n     */\r\n    get currentFrame() {\r\n        if (this._currentFrame >= 0 && this._currentFrame < this.frames.length) {\r\n            return this.frames[this._currentFrame];\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * Returns the current frame index of the animation\r\n     */\r\n    get currentFrameIndex() {\r\n        return this._currentFrame;\r\n    }\r\n    /**\r\n     * Returns `true` if the animation is playing\r\n     */\r\n    get isPlaying() {\r\n        return this._playing;\r\n    }\r\n    /**\r\n     * Reverses the play direction of the Animation, this preserves the current frame\r\n     */\r\n    reverse() {\r\n        // Don't mutate with the original frame list, create a copy\r\n        this.frames = this.frames.slice().reverse();\r\n        this._reversed = !this._reversed;\r\n    }\r\n    /**\r\n     * Returns the current play direction of the animation\r\n     */\r\n    get direction() {\r\n        // Keep logically consistent with ping-pong direction\r\n        // If ping-pong is forward = 1 and reversed is true then we are logically reversed\r\n        const reversed = (this._reversed && this._direction === 1) ? true : false;\r\n        return reversed ? AnimationDirection.Backward : AnimationDirection.Forward;\r\n    }\r\n    /**\r\n     * Plays or resumes the animation from the current frame\r\n     */\r\n    play() {\r\n        this._playing = true;\r\n    }\r\n    /**\r\n     * Pauses the animation on the current frame\r\n     */\r\n    pause() {\r\n        this._playing = false;\r\n        this._firstTick = true; // firstTick must be set to emit the proper frame event\r\n    }\r\n    /**\r\n     * Reset the animation back to the beginning, including if the animation were done\r\n     */\r\n    reset() {\r\n        this._done = false;\r\n        this._firstTick = true;\r\n        this._currentFrame = 0;\r\n    }\r\n    /**\r\n     * Returns `true` if the animation can end\r\n     */\r\n    get canFinish() {\r\n        switch (this.strategy) {\r\n            case AnimationStrategy.End:\r\n            case AnimationStrategy.Freeze: {\r\n                return true;\r\n            }\r\n            default: {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Returns `true` if the animation is done, for looping type animations\r\n     * `ex.AnimationStrategy.PingPong` and `ex.AnimationStrategy.Loop` this will always return `false`\r\n     *\r\n     * See the `ex.Animation.canFinish()` method to know if an animation type can end\r\n     */\r\n    get done() {\r\n        return this._done;\r\n    }\r\n    /**\r\n     * Jump the animation immediately to a specific frame if it exists\r\n     * @param frameNumber\r\n     */\r\n    goToFrame(frameNumber) {\r\n        this._currentFrame = frameNumber;\r\n        this._timeLeftInFrame = this.frameDuration;\r\n        const maybeFrame = this.frames[this._currentFrame];\r\n        if (maybeFrame && !this._done) {\r\n            this._timeLeftInFrame = (maybeFrame === null || maybeFrame === void 0 ? void 0 : maybeFrame.duration) || this.frameDuration;\r\n            this.events.emit('frame', maybeFrame);\r\n        }\r\n    }\r\n    _nextFrame() {\r\n        const currentFrame = this._currentFrame;\r\n        if (this._done) {\r\n            return currentFrame;\r\n        }\r\n        let next = -1;\r\n        switch (this.strategy) {\r\n            case AnimationStrategy.Loop: {\r\n                next = (currentFrame + 1) % this.frames.length;\r\n                if (next === 0) {\r\n                    this.events.emit('loop', this);\r\n                }\r\n                break;\r\n            }\r\n            case AnimationStrategy.End: {\r\n                next = currentFrame + 1;\r\n                if (next >= this.frames.length) {\r\n                    this._done = true;\r\n                    this._currentFrame = this.frames.length;\r\n                    this.events.emit('end', this);\r\n                }\r\n                break;\r\n            }\r\n            case AnimationStrategy.Freeze: {\r\n                next = clamp(currentFrame + 1, 0, this.frames.length - 1);\r\n                if (next >= this.frames.length - 1) {\r\n                    this._done = true;\r\n                    this.events.emit('end', this);\r\n                }\r\n                break;\r\n            }\r\n            case AnimationStrategy.PingPong: {\r\n                if (currentFrame + this._direction >= this.frames.length) {\r\n                    this._direction = -1;\r\n                    this.events.emit('loop', this);\r\n                }\r\n                if (currentFrame + this._direction < 0) {\r\n                    this._direction = 1;\r\n                    this.events.emit('loop', this);\r\n                }\r\n                next = currentFrame + (this._direction % this.frames.length);\r\n                break;\r\n            }\r\n        }\r\n        return next;\r\n    }\r\n    /**\r\n     * Called internally by Excalibur to update the state of the animation potential update the current frame\r\n     * @param elapsedMilliseconds Milliseconds elapsed\r\n     * @param idempotencyToken Prevents double ticking in a frame by passing a unique token to the frame\r\n     */\r\n    tick(elapsedMilliseconds, idempotencyToken = 0) {\r\n        if (this._idempotencyToken === idempotencyToken) {\r\n            return;\r\n        }\r\n        this._idempotencyToken = idempotencyToken;\r\n        if (!this._playing) {\r\n            return;\r\n        }\r\n        // if it's the first frame emit frame event\r\n        if (this._firstTick) {\r\n            this._firstTick = false;\r\n            this.events.emit('frame', this.currentFrame);\r\n        }\r\n        this._timeLeftInFrame -= elapsedMilliseconds * this.timeScale;\r\n        if (this._timeLeftInFrame <= 0) {\r\n            this.goToFrame(this._nextFrame());\r\n        }\r\n    }\r\n    _drawImage(ctx, x, y) {\r\n        if (this.currentFrame) {\r\n            this.currentFrame.graphic.draw(ctx, x, y);\r\n        }\r\n    }\r\n}\r\nAnimation._LOGGER = Logger.getInstance();\r\n\n;// CONCATENATED MODULE: ./Graphics/GraphicsGroup.ts\n\r\n\r\n\r\nclass GraphicsGroup extends Graphic {\r\n    constructor(options) {\r\n        super(options);\r\n        this.members = [];\r\n        this.members = options.members;\r\n        this._updateDimensions();\r\n    }\r\n    clone() {\r\n        return new GraphicsGroup({\r\n            members: [...this.members],\r\n            ...this.cloneGraphicOptions()\r\n        });\r\n    }\r\n    _updateDimensions() {\r\n        let bb = new BoundingBox();\r\n        for (const { graphic, pos } of this.members) {\r\n            bb = graphic.localBounds.translate(pos).combine(bb);\r\n        }\r\n        this.width = bb.width;\r\n        this.height = bb.height;\r\n        return bb;\r\n    }\r\n    get localBounds() {\r\n        let bb = new BoundingBox();\r\n        for (const { graphic, pos } of this.members) {\r\n            bb = graphic.localBounds.translate(pos).combine(bb);\r\n        }\r\n        return bb;\r\n    }\r\n    _isAnimationOrGroup(graphic) {\r\n        return graphic instanceof Animation || graphic instanceof GraphicsGroup;\r\n    }\r\n    tick(elapsedMilliseconds, idempotencyToken) {\r\n        for (const member of this.members) {\r\n            const maybeAnimation = member.graphic;\r\n            if (this._isAnimationOrGroup(maybeAnimation)) {\r\n                maybeAnimation.tick(elapsedMilliseconds, idempotencyToken);\r\n            }\r\n        }\r\n    }\r\n    reset() {\r\n        for (const member of this.members) {\r\n            const maybeAnimation = member.graphic;\r\n            if (this._isAnimationOrGroup(maybeAnimation)) {\r\n                maybeAnimation.reset();\r\n            }\r\n        }\r\n    }\r\n    _preDraw(ex, x, y) {\r\n        this._updateDimensions();\r\n        super._preDraw(ex, x, y);\r\n    }\r\n    _drawImage(ex, x, y) {\r\n        for (const member of this.members) {\r\n            ex.save();\r\n            ex.translate(x, y);\r\n            member.graphic.draw(ex, member.pos.x, member.pos.y);\r\n            if (this.showDebug) {\r\n                /* istanbul ignore next */\r\n                ex.debug.drawRect(0, 0, this.width, this.height);\r\n            }\r\n            ex.restore();\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Particles.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * An enum that represents the types of emitter nozzles\r\n */\r\nvar EmitterType;\r\n(function (EmitterType) {\r\n    /**\r\n     * Constant for the circular emitter type\r\n     */\r\n    EmitterType[EmitterType[\"Circle\"] = 0] = \"Circle\";\r\n    /**\r\n     * Constant for the rectangular emitter type\r\n     */\r\n    EmitterType[EmitterType[\"Rectangle\"] = 1] = \"Rectangle\";\r\n})(EmitterType || (EmitterType = {}));\r\n/**\r\n * @hidden\r\n */\r\nclass ParticleImpl extends Entity {\r\n    constructor(emitterOrConfig, life, opacity, beginColor, endColor, position, velocity, acceleration, startSize, endSize) {\r\n        super();\r\n        this.position = new Vector(0, 0);\r\n        this.velocity = new Vector(0, 0);\r\n        this.acceleration = new Vector(0, 0);\r\n        this.particleRotationalVelocity = 0;\r\n        this.currentRotation = 0;\r\n        this.focus = null;\r\n        this.focusAccel = 0;\r\n        this.opacity = 1;\r\n        this.beginColor = Color.White;\r\n        this.endColor = Color.White;\r\n        // Life is counted in ms\r\n        this.life = 300;\r\n        this.fadeFlag = false;\r\n        // Color transitions\r\n        this._rRate = 1;\r\n        this._gRate = 1;\r\n        this._bRate = 1;\r\n        this._aRate = 0;\r\n        this._currentColor = Color.White;\r\n        this.emitter = null;\r\n        this.particleSize = 5;\r\n        this.particleSprite = null;\r\n        this.sizeRate = 0;\r\n        this.elapsedMultiplier = 0;\r\n        this.visible = true;\r\n        this.isOffscreen = false;\r\n        let emitter = emitterOrConfig;\r\n        if (emitter && !(emitterOrConfig instanceof ParticleEmitter)) {\r\n            const config = emitterOrConfig;\r\n            emitter = config.emitter;\r\n            life = config.life;\r\n            opacity = config.opacity;\r\n            endColor = config.endColor;\r\n            beginColor = config.beginColor;\r\n            position = config.position;\r\n            velocity = config.velocity;\r\n            acceleration = config.acceleration;\r\n            startSize = config.startSize;\r\n            endSize = config.endSize;\r\n        }\r\n        this.emitter = emitter;\r\n        this.life = life || this.life;\r\n        this.opacity = opacity || this.opacity;\r\n        this.endColor = endColor || this.endColor.clone();\r\n        this.beginColor = beginColor || this.beginColor.clone();\r\n        this._currentColor = this.beginColor.clone();\r\n        this.position = (position || this.position).add(this.emitter.pos);\r\n        this.velocity = velocity || this.velocity;\r\n        this.acceleration = acceleration || this.acceleration;\r\n        this._rRate = (this.endColor.r - this.beginColor.r) / this.life;\r\n        this._gRate = (this.endColor.g - this.beginColor.g) / this.life;\r\n        this._bRate = (this.endColor.b - this.beginColor.b) / this.life;\r\n        this._aRate = this.opacity / this.life;\r\n        this.startSize = startSize || 0;\r\n        this.endSize = endSize || 0;\r\n        if (this.endSize > 0 && this.startSize > 0) {\r\n            this.sizeRate = (this.endSize - this.startSize) / this.life;\r\n            this.particleSize = this.startSize;\r\n        }\r\n        this.addComponent((this.transform = new TransformComponent()));\r\n        this.addComponent(new CanvasDrawComponent((ctx) => this.draw(ctx)));\r\n        this.addComponent((this.graphics = new GraphicsComponent()));\r\n        this.transform.pos = this.position;\r\n        this.transform.rotation = this.currentRotation;\r\n        this.transform.scale = vec(1, 1); // TODO wut\r\n        if (this.particleSprite) {\r\n            this.graphics.opacity = this.opacity;\r\n            this.graphics.use(Sprite.fromLegacySprite(this.particleSprite));\r\n        }\r\n        else {\r\n            this.graphics.onPostDraw = (ctx) => {\r\n                ctx.save();\r\n                this.graphics.opacity = this.opacity;\r\n                const tmpColor = this._currentColor.clone();\r\n                tmpColor.a = 1;\r\n                ctx.debug.drawPoint(vec(0, 0), { color: tmpColor, size: this.particleSize });\r\n                ctx.restore();\r\n            };\r\n        }\r\n    }\r\n    kill() {\r\n        this.emitter.removeParticle(this);\r\n    }\r\n    update(_engine, delta) {\r\n        this.life = this.life - delta;\r\n        this.elapsedMultiplier = this.elapsedMultiplier + delta;\r\n        if (this.life < 0) {\r\n            this.kill();\r\n        }\r\n        if (this.fadeFlag) {\r\n            this.opacity = clamp(this._aRate * this.life, 0.0001, 1);\r\n        }\r\n        if (this.startSize > 0 && this.endSize > 0) {\r\n            this.particleSize = clamp(this.sizeRate * delta + this.particleSize, Math.min(this.startSize, this.endSize), Math.max(this.startSize, this.endSize));\r\n        }\r\n        this._currentColor.r = clamp(this._currentColor.r + this._rRate * delta, 0, 255);\r\n        this._currentColor.g = clamp(this._currentColor.g + this._gRate * delta, 0, 255);\r\n        this._currentColor.b = clamp(this._currentColor.b + this._bRate * delta, 0, 255);\r\n        this._currentColor.a = clamp(this.opacity, 0.0001, 1);\r\n        if (this.focus) {\r\n            const accel = this.focus\r\n                .sub(this.position)\r\n                .normalize()\r\n                .scale(this.focusAccel)\r\n                .scale(delta / 1000);\r\n            this.velocity = this.velocity.add(accel);\r\n        }\r\n        else {\r\n            this.velocity = this.velocity.add(this.acceleration.scale(delta / 1000));\r\n        }\r\n        this.position = this.position.add(this.velocity.scale(delta / 1000));\r\n        if (this.particleRotationalVelocity) {\r\n            this.currentRotation = (this.currentRotation + (this.particleRotationalVelocity * delta) / 1000) % (2 * Math.PI);\r\n        }\r\n        this.transform.pos = this.position;\r\n        this.transform.rotation = this.currentRotation;\r\n        this.transform.scale = vec(1, 1); // todo wut\r\n        this.graphics.opacity = this.opacity;\r\n    }\r\n    /**\r\n     * @deprecated signature will change in v0.26.0\r\n     * @param ctx\r\n     */\r\n    draw(ctx) {\r\n        if (this.particleSprite) {\r\n            this.particleSprite.opacity(this.opacity);\r\n            this.particleSprite.draw(ctx, 0, 0);\r\n            return;\r\n        }\r\n        ctx.save();\r\n        this._currentColor.a = clamp(this.opacity, 0.0001, 1);\r\n        ctx.fillStyle = this._currentColor.toString();\r\n        ctx.beginPath();\r\n        ctx.arc(0, 0, this.particleSize, 0, Math.PI * 2);\r\n        ctx.fill();\r\n        ctx.closePath();\r\n        ctx.restore();\r\n    }\r\n}\r\n/**\r\n * Particle is used in a [[ParticleEmitter]]\r\n */\r\nclass Particle extends Configurable(ParticleImpl) {\r\n    constructor(emitterOrConfig, life, opacity, beginColor, endColor, position, velocity, acceleration, startSize, endSize) {\r\n        super(emitterOrConfig, life, opacity, beginColor, endColor, position, velocity, acceleration, startSize, endSize);\r\n    }\r\n}\r\n/**\r\n * Using a particle emitter is a great way to create interesting effects\r\n * in your game, like smoke, fire, water, explosions, etc. `ParticleEmitter`\r\n * extend [[Actor]] allowing you to use all of the features that come with.\r\n */\r\nclass ParticleEmitter extends Actor {\r\n    /**\r\n     * @param config particle emitter options bag\r\n     */\r\n    constructor(config) {\r\n        var _a, _b;\r\n        super({ width: (_a = config.width) !== null && _a !== void 0 ? _a : 0, height: (_b = config.height) !== null && _b !== void 0 ? _b : 0 });\r\n        this._particlesToEmit = 0;\r\n        this.numParticles = 0;\r\n        /**\r\n         * Gets or sets the isEmitting flag\r\n         */\r\n        this.isEmitting = true;\r\n        /**\r\n         * Gets or sets the backing particle collection\r\n         */\r\n        this.particles = [];\r\n        /**\r\n         * Gets or sets the backing deadParticle collection\r\n         */\r\n        this.deadParticles = [];\r\n        /**\r\n         * Gets or sets the minimum particle velocity\r\n         */\r\n        this.minVel = 0;\r\n        /**\r\n         * Gets or sets the maximum particle velocity\r\n         */\r\n        this.maxVel = 0;\r\n        /**\r\n         * Gets or sets the acceleration vector for all particles\r\n         */\r\n        this.acceleration = new Vector(0, 0);\r\n        /**\r\n         * Gets or sets the minimum angle in radians\r\n         */\r\n        this.minAngle = 0;\r\n        /**\r\n         * Gets or sets the maximum angle in radians\r\n         */\r\n        this.maxAngle = 0;\r\n        /**\r\n         * Gets or sets the emission rate for particles (particles/sec)\r\n         */\r\n        this.emitRate = 1; //particles/sec\r\n        /**\r\n         * Gets or sets the life of each particle in milliseconds\r\n         */\r\n        this.particleLife = 2000;\r\n        /**\r\n         * Gets or sets the fade flag which causes particles to gradually fade out over the course of their life.\r\n         */\r\n        this.fadeFlag = false;\r\n        /**\r\n         * Gets or sets the optional focus where all particles should accelerate towards\r\n         */\r\n        this.focus = null;\r\n        /**\r\n         * Gets or sets the acceleration for focusing particles if a focus has been specified\r\n         */\r\n        this.focusAccel = null;\r\n        /**\r\n         * Gets or sets the optional starting size for the particles\r\n         */\r\n        this.startSize = null;\r\n        /**\r\n         * Gets or sets the optional ending size for the particles\r\n         */\r\n        this.endSize = null;\r\n        /**\r\n         * Gets or sets the minimum size of all particles\r\n         */\r\n        this.minSize = 5;\r\n        /**\r\n         * Gets or sets the maximum size of all particles\r\n         */\r\n        this.maxSize = 5;\r\n        /**\r\n         * Gets or sets the beginning color of all particles\r\n         */\r\n        this.beginColor = Color.White;\r\n        /**\r\n         * Gets or sets the ending color of all particles\r\n         */\r\n        this.endColor = Color.White;\r\n        this._og = null;\r\n        this._sprite = null;\r\n        /**\r\n         * Gets or sets the emitter type for the particle emitter\r\n         */\r\n        this.emitterType = EmitterType.Rectangle;\r\n        /**\r\n         * Gets or sets the emitter radius, only takes effect when the [[emitterType]] is [[EmitterType.Circle]]\r\n         */\r\n        this.radius = 0;\r\n        /**\r\n         * Gets or sets the particle rotational speed velocity\r\n         */\r\n        this.particleRotationalVelocity = 0;\r\n        /**\r\n         * Indicates whether particles should start with a random rotation\r\n         */\r\n        this.randomRotation = false;\r\n        const { x, y, pos, isEmitting, minVel, maxVel, acceleration, minAngle, maxAngle, emitRate, particleLife, opacity, fadeFlag, focus, focusAccel, startSize, endSize, minSize, maxSize, beginColor, endColor, particleSprite, emitterType, radius, particleRotationalVelocity, randomRotation, random } = { ...config };\r\n        this.pos = pos !== null && pos !== void 0 ? pos : vec(x !== null && x !== void 0 ? x : 0, y !== null && y !== void 0 ? y : 0);\r\n        this.isEmitting = isEmitting !== null && isEmitting !== void 0 ? isEmitting : this.isEmitting;\r\n        this.minVel = minVel !== null && minVel !== void 0 ? minVel : this.minVel;\r\n        this.maxVel = maxVel !== null && maxVel !== void 0 ? maxVel : this.maxVel;\r\n        this.acceleration = acceleration !== null && acceleration !== void 0 ? acceleration : this.acceleration;\r\n        this.minAngle = minAngle !== null && minAngle !== void 0 ? minAngle : this.minAngle;\r\n        this.maxAngle = maxAngle !== null && maxAngle !== void 0 ? maxAngle : this.maxAngle;\r\n        this.emitRate = emitRate !== null && emitRate !== void 0 ? emitRate : this.emitRate;\r\n        this.particleLife = particleLife !== null && particleLife !== void 0 ? particleLife : this.particleLife;\r\n        this.opacity = opacity !== null && opacity !== void 0 ? opacity : this.opacity;\r\n        this.fadeFlag = fadeFlag !== null && fadeFlag !== void 0 ? fadeFlag : this.fadeFlag;\r\n        this.focus = focus !== null && focus !== void 0 ? focus : this.focus;\r\n        this.focusAccel = focusAccel !== null && focusAccel !== void 0 ? focusAccel : this.focusAccel;\r\n        this.startSize = startSize !== null && startSize !== void 0 ? startSize : this.startSize;\r\n        this.endSize = endSize !== null && endSize !== void 0 ? endSize : this.endSize;\r\n        this.minSize = minSize !== null && minSize !== void 0 ? minSize : this.minSize;\r\n        this.maxSize = maxSize !== null && maxSize !== void 0 ? maxSize : this.maxSize;\r\n        this.beginColor = beginColor !== null && beginColor !== void 0 ? beginColor : this.beginColor;\r\n        this.endColor = endColor !== null && endColor !== void 0 ? endColor : this.endColor;\r\n        this.particleSprite = particleSprite !== null && particleSprite !== void 0 ? particleSprite : this.particleSprite;\r\n        this.emitterType = emitterType !== null && emitterType !== void 0 ? emitterType : this.emitterType;\r\n        this.radius = radius !== null && radius !== void 0 ? radius : this.radius;\r\n        this.particleRotationalVelocity = particleRotationalVelocity !== null && particleRotationalVelocity !== void 0 ? particleRotationalVelocity : this.particleRotationalVelocity;\r\n        this.randomRotation = randomRotation !== null && randomRotation !== void 0 ? randomRotation : this.randomRotation;\r\n        this.body.collisionType = CollisionType.PreventCollision;\r\n        this.random = random !== null && random !== void 0 ? random : new Random();\r\n        // Remove offscreen culling from particle emitters\r\n        for (let i = 0; i < this.traits.length; i++) {\r\n            if (this.traits[i] instanceof OffscreenCulling) {\r\n                this.traits.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Gets the opacity of each particle from 0 to 1.0\r\n     */\r\n    get opacity() {\r\n        return super.graphics.opacity;\r\n    }\r\n    /**\r\n     * Gets the opacity of each particle from 0 to 1.0\r\n     */\r\n    set opacity(opacity) {\r\n        super.graphics.opacity = opacity;\r\n    }\r\n    /**\r\n     * Gets or sets the sprite that a particle should use\r\n     */\r\n    get particleSprite() {\r\n        return this._og;\r\n    }\r\n    set particleSprite(val) {\r\n        this._og = val;\r\n        if (val) {\r\n            this._sprite = Sprite.fromLegacySprite(val);\r\n        }\r\n    }\r\n    removeParticle(particle) {\r\n        this.deadParticles.push(particle);\r\n    }\r\n    /**\r\n     * Causes the emitter to emit particles\r\n     * @param particleCount  Number of particles to emit right now\r\n     */\r\n    emitParticles(particleCount) {\r\n        var _a;\r\n        for (let i = 0; i < particleCount; i++) {\r\n            const p = this._createParticle();\r\n            this.particles.push(p);\r\n            if ((_a = this === null || this === void 0 ? void 0 : this.scene) === null || _a === void 0 ? void 0 : _a.world) {\r\n                this.scene.world.add(p);\r\n            }\r\n        }\r\n    }\r\n    clearParticles() {\r\n        this.particles.length = 0;\r\n    }\r\n    // Creates a new particle given the constraints of the emitter\r\n    _createParticle() {\r\n        // todo implement emitter constraints;\r\n        let ranX = 0;\r\n        let ranY = 0;\r\n        const angle = randomInRange(this.minAngle, this.maxAngle, this.random);\r\n        const vel = randomInRange(this.minVel, this.maxVel, this.random);\r\n        const size = this.startSize || randomInRange(this.minSize, this.maxSize, this.random);\r\n        const dx = vel * Math.cos(angle);\r\n        const dy = vel * Math.sin(angle);\r\n        if (this.emitterType === EmitterType.Rectangle) {\r\n            ranX = randomInRange(0, this.width, this.random);\r\n            ranY = randomInRange(0, this.height, this.random);\r\n        }\r\n        else if (this.emitterType === EmitterType.Circle) {\r\n            const radius = randomInRange(0, this.radius, this.random);\r\n            ranX = radius * Math.cos(angle);\r\n            ranY = radius * Math.sin(angle);\r\n        }\r\n        const p = new Particle(this, this.particleLife, this.opacity, this.beginColor, this.endColor, new Vector(ranX, ranY), new Vector(dx, dy), this.acceleration, this.startSize, this.endSize);\r\n        p.fadeFlag = this.fadeFlag;\r\n        p.particleSize = size;\r\n        if (this.particleSprite) {\r\n            p.particleSprite = this.particleSprite;\r\n            p.graphics.opacity = this.opacity;\r\n            p.graphics.use(this._sprite);\r\n        }\r\n        p.particleRotationalVelocity = this.particleRotationalVelocity;\r\n        if (this.randomRotation) {\r\n            p.currentRotation = randomInRange(0, Math.PI * 2, this.random);\r\n        }\r\n        if (this.focus) {\r\n            p.focus = this.focus.add(new Vector(this.pos.x, this.pos.y));\r\n            p.focusAccel = this.focusAccel;\r\n        }\r\n        return p;\r\n    }\r\n    update(engine, delta) {\r\n        var _a;\r\n        super.update(engine, delta);\r\n        if (this.isEmitting) {\r\n            this._particlesToEmit += this.emitRate * (delta / 1000);\r\n            if (this._particlesToEmit > 1.0) {\r\n                this.emitParticles(Math.floor(this._particlesToEmit));\r\n                this._particlesToEmit = this._particlesToEmit - Math.floor(this._particlesToEmit);\r\n            }\r\n        }\r\n        // deferred removal\r\n        for (let i = 0; i < this.deadParticles.length; i++) {\r\n            removeItemFromArray(this.deadParticles[i], this.particles);\r\n            if ((_a = this === null || this === void 0 ? void 0 : this.scene) === null || _a === void 0 ? void 0 : _a.world) {\r\n                this.scene.world.remove(this.deadParticles[i], false);\r\n            }\r\n        }\r\n        this.deadParticles.length = 0;\r\n    }\r\n    /**\r\n     * @deprecated signature will change in v0.26.0\r\n     * @param ctx\r\n     */\r\n    draw(ctx) {\r\n        // todo is there a more efficient to draw\r\n        // possibly use a webgl offscreen canvas and shaders to do particles?\r\n        this.particles.forEach((p) => p.draw(ctx));\r\n    }\r\n    /**\r\n     * @deprecated signature will change in v0.26.0\r\n     * @param ctx\r\n     */\r\n    debugDraw(ctx) {\r\n        super.debugDraw(ctx);\r\n        ctx.fillStyle = Color.Black.toString();\r\n        ctx.fillText('Particles: ' + this.particles.length, this.pos.x, this.pos.y + 20);\r\n        if (this.focus) {\r\n            ctx.fillRect(this.focus.x + this.pos.x, this.focus.y + this.pos.y, 3, 3);\r\n            line(ctx, Color.Yellow, this.focus.x + this.pos.x, this.focus.y + this.pos.y, this.center.x, this.center.y);\r\n            ctx.fillText('Focus', this.focus.x + this.pos.x, this.focus.y + this.pos.y);\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/GraphicsSystem.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass GraphicsSystem extends System {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.types = ['ex.transform', 'ex.graphics'];\r\n        this.systemType = SystemType.Draw;\r\n        this.priority = 0;\r\n        this._token = 0;\r\n    }\r\n    initialize(scene) {\r\n        this._graphicsContext = scene.engine.graphicsContext;\r\n        this._camera = scene.camera;\r\n        this._engine = scene.engine;\r\n    }\r\n    sort(a, b) {\r\n        return a.get(TransformComponent).z - b.get(TransformComponent).z;\r\n    }\r\n    update(entities, delta) {\r\n        this._token++;\r\n        let transform;\r\n        let graphics;\r\n        for (const entity of entities) {\r\n            transform = entity.get(TransformComponent);\r\n            graphics = entity.get(GraphicsComponent);\r\n            // Figure out if entities are offscreen\r\n            const entityOffscreen = this._isOffscreen(transform, graphics);\r\n            if (entityOffscreen && !entity.hasTag('offscreen')) {\r\n                entity.eventDispatcher.emit('exitviewport', new ExitViewPortEvent(entity));\r\n                entity.addComponent(new TagComponent('offscreen'));\r\n            }\r\n            if (!entityOffscreen && entity.hasTag('offscreen')) {\r\n                entity.eventDispatcher.emit('enterviewport', new EnterViewPortEvent(entity));\r\n                entity.removeComponent('offscreen');\r\n            }\r\n            // Skip entities that have graphics offscreen\r\n            if (entityOffscreen) {\r\n                continue;\r\n            }\r\n            // This optionally sets our camera based on the entity coord plan (world vs. screen)\r\n            this._pushCameraTransform(transform);\r\n            this._graphicsContext.save();\r\n            // Tick any graphics state (but only once) for animations and graphics groups\r\n            graphics.update(delta, this._token);\r\n            // Position the entity\r\n            this._applyTransform(entity);\r\n            // Optionally run the onPreDraw graphics lifecycle draw\r\n            if (graphics.onPreDraw) {\r\n                graphics.onPreDraw(this._graphicsContext, delta);\r\n            }\r\n            // TODO remove this hack on the particle redo\r\n            const particleOpacity = (entity instanceof Particle) ? entity.opacity : 1;\r\n            this._graphicsContext.opacity = graphics.opacity * particleOpacity;\r\n            // Draw the graphics component\r\n            this._drawGraphicsComponent(graphics);\r\n            // Optionally run the onPostDraw graphics lifecycle draw\r\n            if (graphics.onPostDraw) {\r\n                graphics.onPostDraw(this._graphicsContext, delta);\r\n            }\r\n            this._graphicsContext.restore();\r\n            // Reset the transform back to the original\r\n            this._popCameraTransform(transform);\r\n        }\r\n    }\r\n    _isOffscreen(transform, graphics) {\r\n        if (transform.coordPlane === CoordPlane.World) {\r\n            const graphicsOffscreen = !this._camera.viewport.intersect(graphics.localBounds.transform(transform.getGlobalMatrix()));\r\n            return graphicsOffscreen;\r\n        }\r\n        else {\r\n            // TODO screen coordinates\r\n            return false;\r\n        }\r\n    }\r\n    _drawGraphicsComponent(graphicsComponent) {\r\n        var _a, _b;\r\n        if (graphicsComponent.visible) {\r\n            // this should be moved to the graphics system\r\n            for (const layer of graphicsComponent.layers.get()) {\r\n                for (const { graphic, options } of layer.graphics) {\r\n                    let anchor = graphicsComponent.anchor;\r\n                    let offset = graphicsComponent.offset;\r\n                    if (options === null || options === void 0 ? void 0 : options.anchor) {\r\n                        anchor = options.anchor;\r\n                    }\r\n                    if (options === null || options === void 0 ? void 0 : options.offset) {\r\n                        offset = options.offset;\r\n                    }\r\n                    // See https://github.com/excaliburjs/Excalibur/pull/619 for discussion on this formula\r\n                    const offsetX = -graphic.width * anchor.x + offset.x;\r\n                    const offsetY = -graphic.height * anchor.y + offset.y;\r\n                    graphic === null || graphic === void 0 ? void 0 : graphic.draw(this._graphicsContext, offsetX + layer.offset.x, offsetY + layer.offset.y);\r\n                    if (((_a = this._engine) === null || _a === void 0 ? void 0 : _a.isDebug) && this._engine.debug.graphics.showBounds) {\r\n                        const offset = vec(offsetX + layer.offset.x, offsetY + layer.offset.y);\r\n                        if (graphic instanceof GraphicsGroup) {\r\n                            for (const g of graphic.members) {\r\n                                (_b = g.graphic) === null || _b === void 0 ? void 0 : _b.localBounds.translate(offset.add(g.pos)).draw(this._graphicsContext, this._engine.debug.graphics.boundsColor);\r\n                            }\r\n                        }\r\n                        else {\r\n                            /* istanbul ignore next */\r\n                            graphic === null || graphic === void 0 ? void 0 : graphic.localBounds.translate(offset).draw(this._graphicsContext, this._engine.debug.graphics.boundsColor);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * This applies the current entity transform to the graphics context\r\n     * @param entity\r\n     */\r\n    _applyTransform(entity) {\r\n        const ancestors = entity.getAncestors();\r\n        for (const ancestor of ancestors) {\r\n            const transform = ancestor === null || ancestor === void 0 ? void 0 : ancestor.get(TransformComponent);\r\n            if (transform) {\r\n                this._graphicsContext.translate(transform.pos.x, transform.pos.y);\r\n                this._graphicsContext.scale(transform.scale.x, transform.scale.y);\r\n                this._graphicsContext.rotate(transform.rotation);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Applies the current camera transform if in world coordinates\r\n     * @param transform\r\n     */\r\n    _pushCameraTransform(transform) {\r\n        // Establish camera offset per entity\r\n        if (transform.coordPlane === CoordPlane.World) {\r\n            this._graphicsContext.save();\r\n            if (this._camera) {\r\n                this._camera.draw(this._graphicsContext);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Resets the current camera transform if in world coordinates\r\n     * @param transform\r\n     */\r\n    _popCameraTransform(transform) {\r\n        if (transform.coordPlane === CoordPlane.World) {\r\n            // Apply camera world offset\r\n            this._graphicsContext.restore();\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Drawing/CanvasDrawingSystem.ts\n\r\n\r\n\r\n\r\n/**\r\n * Draws anything with a transform and a \"draw\" method\r\n * @deprecated Shim for canvas drawing, will be removed v0.26.0\r\n */\r\nclass CanvasDrawingSystem extends System {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.types = ['ex.transform', 'ex.canvas'];\r\n        this.systemType = SystemType.Draw;\r\n        this.priority = -1;\r\n    }\r\n    initialize(scene) {\r\n        this._ctx = scene.engine.ctx;\r\n        this._engine = scene.engine;\r\n        this._camera = scene.camera;\r\n    }\r\n    sort(a, b) {\r\n        return a.get(TransformComponent).z - b.get(TransformComponent).z;\r\n    }\r\n    update(entities, delta) {\r\n        var _a, _b, _c;\r\n        this._clearScreen();\r\n        let transform;\r\n        let canvasdraw;\r\n        const length = entities.length;\r\n        for (let i = 0; i < length; i++) {\r\n            const visible = (_c = (_b = (_a = entities[i]) === null || _a === void 0 ? void 0 : _a.graphics) === null || _b === void 0 ? void 0 : _b.visible) !== null && _c !== void 0 ? _c : true;\r\n            const offscreen = entities[i].isOffScreen;\r\n            if (visible && !offscreen) {\r\n                transform = entities[i].get(TransformComponent);\r\n                canvasdraw = entities[i].get(CanvasDrawComponent);\r\n                this._ctx.save();\r\n                this._pushCameraTransform(transform);\r\n                this._ctx.save();\r\n                this._applyTransform(entities[i]);\r\n                canvasdraw.draw(this._ctx, delta);\r\n                this._ctx.restore();\r\n                this._popCameraTransform(transform);\r\n                this._ctx.restore();\r\n            }\r\n            if (this._engine.isDebug) {\r\n                this._ctx.save();\r\n                this._pushCameraTransform(transform);\r\n                this._ctx.strokeStyle = 'yellow';\r\n                entities[i].debugDraw(this._ctx);\r\n                this._popCameraTransform(transform);\r\n                this._ctx.restore();\r\n            }\r\n        }\r\n        if (this._engine.isDebug) {\r\n            this._ctx.save();\r\n            this._camera.draw(this._ctx);\r\n            this._camera.debugDraw(this._ctx);\r\n            this._ctx.restore();\r\n        }\r\n        this._engine.stats.currFrame.graphics.drawnImages = GraphicsDiagnostics.DrawnImagesCount;\r\n        this._engine.stats.currFrame.graphics.drawCalls = GraphicsDiagnostics.DrawCallCount;\r\n    }\r\n    _applyTransform(entity) {\r\n        const ancestors = entity.getAncestors();\r\n        for (const ancestor of ancestors) {\r\n            const transform = ancestor === null || ancestor === void 0 ? void 0 : ancestor.get(TransformComponent);\r\n            if (transform) {\r\n                this._ctx.translate(transform.pos.x, transform.pos.y);\r\n                this._ctx.rotate(transform.rotation);\r\n                this._ctx.scale(transform.scale.x, transform.scale.y);\r\n            }\r\n        }\r\n    }\r\n    _clearScreen() {\r\n        this._ctx.clearRect(0, 0, this._ctx.canvas.width, this._ctx.canvas.height);\r\n        this._ctx.fillStyle = this._engine.backgroundColor.toString();\r\n        this._ctx.fillRect(0, 0, this._ctx.canvas.width, this._ctx.canvas.height);\r\n    }\r\n    _pushCameraTransform(transform) {\r\n        if (transform.coordPlane === CoordPlane.World) {\r\n            // Apply camera transform to place entity in world space\r\n            this._ctx.save();\r\n            if (this._camera) {\r\n                this._camera.draw(this._ctx);\r\n            }\r\n        }\r\n    }\r\n    _popCameraTransform(transform) {\r\n        if (transform.coordPlane === CoordPlane.World) {\r\n            // Restore back to screen space from world space if we were drawing an entity there\r\n            this._ctx.restore();\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Debug/DebugSystem.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass DebugSystem extends System {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.types = ['ex.transform'];\r\n        this.systemType = SystemType.Draw;\r\n        this.priority = 999; // lowest priority\r\n    }\r\n    initialize(scene) {\r\n        this._graphicsContext = scene.engine.graphicsContext;\r\n        this._camera = scene.camera;\r\n        this._engine = scene.engine;\r\n        this._collisionSystem = scene.world.systemManager.get(CollisionSystem);\r\n    }\r\n    update(entities, _delta) {\r\n        var _a, _b;\r\n        if (!this._engine.isDebug) {\r\n            return;\r\n        }\r\n        const filterSettings = this._engine.debug.filter;\r\n        let id;\r\n        let name;\r\n        const entitySettings = this._engine.debug.entity;\r\n        let tx;\r\n        const txSettings = this._engine.debug.transform;\r\n        let motion;\r\n        const motionSettings = this._engine.debug.motion;\r\n        let colliderComp;\r\n        const colliderSettings = this._engine.debug.collider;\r\n        const physicsSettings = this._engine.debug.physics;\r\n        let graphics;\r\n        const graphicsSettings = this._engine.debug.graphics;\r\n        let debugDraw;\r\n        let body;\r\n        const bodySettings = this._engine.debug.body;\r\n        const cameraSettings = this._engine.debug.camera;\r\n        for (const entity of entities) {\r\n            if (entity.hasTag('offscreen')) {\r\n                // skip offscreen entities\r\n                continue;\r\n            }\r\n            if (entity instanceof Particle) {\r\n                // Particles crush the renderer :(\r\n                continue;\r\n            }\r\n            if (filterSettings.useFilter) {\r\n                const allIds = filterSettings.ids.length === 0;\r\n                const idMatch = allIds || filterSettings.ids.includes(entity.id);\r\n                if (!idMatch) {\r\n                    continue;\r\n                }\r\n                const allNames = filterSettings.nameQuery === '';\r\n                const nameMatch = allNames || entity.name.includes(filterSettings.nameQuery);\r\n                if (!nameMatch) {\r\n                    continue;\r\n                }\r\n            }\r\n            let cursor = Vector.Zero;\r\n            const lineHeight = vec(0, 16);\r\n            id = entity.id;\r\n            name = entity.name;\r\n            tx = entity.get(TransformComponent);\r\n            // This optionally sets our camera based on the entity coord plan (world vs. screen)\r\n            this._pushCameraTransform(tx);\r\n            this._graphicsContext.save();\r\n            this._applyTransform(entity);\r\n            if (tx) {\r\n                if (txSettings.showAll || txSettings.showPosition) {\r\n                    this._graphicsContext.debug.drawPoint(Vector.Zero, { size: 4, color: txSettings.positionColor });\r\n                }\r\n                if (txSettings.showAll || txSettings.showPositionLabel) {\r\n                    this._graphicsContext.debug.drawText(`pos${tx.pos.toString(2)}`, cursor);\r\n                    cursor = cursor.add(lineHeight);\r\n                }\r\n                if (entitySettings.showAll || entitySettings.showId) {\r\n                    this._graphicsContext.debug.drawText(`id(${id}) ${tx.parent ? 'child of id(' + ((_b = (_a = tx.parent) === null || _a === void 0 ? void 0 : _a.owner) === null || _b === void 0 ? void 0 : _b.id) + ')' : ''}`, cursor);\r\n                    cursor = cursor.add(lineHeight);\r\n                }\r\n                if (entitySettings.showAll || entitySettings.showName) {\r\n                    this._graphicsContext.debug.drawText(`name(${name})`, cursor);\r\n                    cursor = cursor.add(lineHeight);\r\n                }\r\n                if (txSettings.showAll || txSettings.showRotation) {\r\n                    this._graphicsContext.drawLine(Vector.Zero, Vector.fromAngle(tx.rotation).scale(50).add(Vector.Zero), txSettings.rotationColor, 2);\r\n                    this._graphicsContext.debug.drawText(`rot deg(${toDegrees(tx.rotation).toFixed(2)})`, cursor);\r\n                    cursor = cursor.add(lineHeight);\r\n                }\r\n                if (txSettings.showAll || txSettings.showScale) {\r\n                    this._graphicsContext.drawLine(Vector.Zero, tx.scale.add(Vector.Zero), txSettings.scaleColor, 2);\r\n                }\r\n            }\r\n            graphics = entity.get(GraphicsComponent);\r\n            if (graphics) {\r\n                if (graphicsSettings.showAll || graphicsSettings.showBounds) {\r\n                    const bounds = graphics.localBounds;\r\n                    bounds.draw(this._graphicsContext, graphicsSettings.boundsColor);\r\n                }\r\n            }\r\n            debugDraw = entity.get(DebugGraphicsComponent);\r\n            if (debugDraw) {\r\n                debugDraw.draw(this._graphicsContext);\r\n            }\r\n            body = entity.get(BodyComponent);\r\n            if (body) {\r\n                if (bodySettings.showAll || bodySettings.showCollisionGroup) {\r\n                    this._graphicsContext.debug.drawText(`collision group(${body.group.name})`, cursor);\r\n                    cursor = cursor.add(lineHeight);\r\n                }\r\n                if (bodySettings.showAll || bodySettings.showCollisionType) {\r\n                    this._graphicsContext.debug.drawText(`collision type(${body.collisionType})`, cursor);\r\n                    cursor = cursor.add(lineHeight);\r\n                }\r\n                if (bodySettings.showAll || bodySettings.showMass) {\r\n                    this._graphicsContext.debug.drawText(`mass(${body.mass})`, cursor);\r\n                    cursor = cursor.add(lineHeight);\r\n                }\r\n                if (bodySettings.showAll || bodySettings.showMotion) {\r\n                    this._graphicsContext.debug.drawText(`motion(${body.sleepMotion})`, cursor);\r\n                    cursor = cursor.add(lineHeight);\r\n                }\r\n                if (bodySettings.showAll || bodySettings.showSleeping) {\r\n                    this._graphicsContext.debug.drawText(`sleeping(${body.canSleep ? body.sleeping : 'cant sleep'})`, cursor);\r\n                    cursor = cursor.add(lineHeight);\r\n                }\r\n            }\r\n            this._graphicsContext.restore();\r\n            motion = entity.get(MotionComponent);\r\n            if (motion) {\r\n                if (motionSettings.showAll || motionSettings.showVelocity) {\r\n                    this._graphicsContext.debug.drawText(`vel${motion.vel.toString(2)}`, cursor.add(tx.globalPos));\r\n                    this._graphicsContext.drawLine(tx.globalPos, tx.globalPos.add(motion.vel), motionSettings.velocityColor, 2);\r\n                    cursor = cursor.add(lineHeight);\r\n                }\r\n                if (motionSettings.showAll || motionSettings.showAcceleration) {\r\n                    this._graphicsContext.drawLine(tx.globalPos, tx.globalPos.add(motion.acc), motionSettings.accelerationColor, 2);\r\n                }\r\n            }\r\n            // Colliders live in world space already so after the restore()\r\n            colliderComp = entity.get(ColliderComponent);\r\n            if (colliderComp) {\r\n                const collider = colliderComp.get();\r\n                if ((colliderSettings.showAll || colliderSettings.showGeometry) && collider) {\r\n                    collider.debug(this._graphicsContext, colliderSettings.geometryColor);\r\n                }\r\n                if (colliderSettings.showAll || colliderSettings.showBounds) {\r\n                    if (collider instanceof CompositeCollider) {\r\n                        const colliders = collider.getColliders();\r\n                        for (const collider of colliders) {\r\n                            const bounds = collider.bounds;\r\n                            const pos = vec(bounds.left, bounds.top);\r\n                            this._graphicsContext.debug.drawRect(pos.x, pos.y, bounds.width, bounds.height, { color: colliderSettings.boundsColor });\r\n                            if (colliderSettings.showAll || colliderSettings.showOwner) {\r\n                                this._graphicsContext.debug.drawText(`owner id(${collider.owner.id})`, pos);\r\n                            }\r\n                        }\r\n                        colliderComp.bounds.draw(this._graphicsContext, colliderSettings.boundsColor);\r\n                    }\r\n                    else if (collider) {\r\n                        const bounds = colliderComp.bounds;\r\n                        const pos = vec(bounds.left, bounds.top);\r\n                        this._graphicsContext.debug.drawRect(pos.x, pos.y, bounds.width, bounds.height, { color: colliderSettings.boundsColor });\r\n                        if (colliderSettings.showAll || colliderSettings.showOwner) {\r\n                            this._graphicsContext.debug.drawText(`owner id(${colliderComp.owner.id})`, pos);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            this._popCameraTransform(tx);\r\n        }\r\n        this._graphicsContext.save();\r\n        this._camera.draw(this._graphicsContext);\r\n        if (physicsSettings.showAll || physicsSettings.showBroadphaseSpacePartitionDebug) {\r\n            this._collisionSystem.debug(this._graphicsContext);\r\n        }\r\n        if (physicsSettings.showAll || physicsSettings.showCollisionContacts || physicsSettings.showCollisionNormals) {\r\n            for (const [_, contact] of this._engine.debug.stats.currFrame.physics.contacts) {\r\n                if (physicsSettings.showAll || physicsSettings.showCollisionContacts) {\r\n                    for (const point of contact.points) {\r\n                        this._graphicsContext.debug.drawPoint(point, { size: 5, color: physicsSettings.collisionContactColor });\r\n                    }\r\n                }\r\n                if (physicsSettings.showAll || physicsSettings.showCollisionNormals) {\r\n                    for (const point of contact.points) {\r\n                        this._graphicsContext.debug.drawLine(point, contact.normal.scale(30).add(point), {\r\n                            color: physicsSettings.collisionNormalColor\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this._graphicsContext.restore();\r\n        if (cameraSettings) {\r\n            this._graphicsContext.save();\r\n            this._camera.draw(this._graphicsContext);\r\n            if (cameraSettings.showAll || cameraSettings.showFocus) {\r\n                this._graphicsContext.drawCircle(this._camera.pos, 4, cameraSettings.focusColor);\r\n            }\r\n            if (cameraSettings.showAll || cameraSettings.showZoom) {\r\n                this._graphicsContext.debug.drawText(`zoom(${this._camera.zoom})`, this._camera.pos);\r\n            }\r\n            this._graphicsContext.restore();\r\n        }\r\n        this._graphicsContext.flush();\r\n    }\r\n    /**\r\n     * This applies the current entity transform to the graphics context\r\n     * @param entity\r\n     */\r\n    _applyTransform(entity) {\r\n        const ancestors = entity.getAncestors();\r\n        for (const ancestor of ancestors) {\r\n            const transform = ancestor === null || ancestor === void 0 ? void 0 : ancestor.get(TransformComponent);\r\n            if (transform) {\r\n                this._graphicsContext.translate(transform.pos.x, transform.pos.y);\r\n                this._graphicsContext.scale(transform.scale.x, transform.scale.y);\r\n                this._graphicsContext.rotate(transform.rotation);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Applies the current camera transform if in world coordinates\r\n     * @param transform\r\n     */\r\n    _pushCameraTransform(transform) {\r\n        // Establish camera offset per entity\r\n        if (transform.coordPlane === CoordPlane.World) {\r\n            this._graphicsContext.save();\r\n            if (this._camera) {\r\n                this._camera.draw(this._graphicsContext);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Resets the current camera transform if in world coordinates\r\n     * @param transform\r\n     */\r\n    _popCameraTransform(transform) {\r\n        if (transform.coordPlane === CoordPlane.World) {\r\n            // Apply camera world offset\r\n            this._graphicsContext.restore();\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Input/PointerSystem.ts\n\r\n\r\n\r\n\r\n/**\r\n * The PointerSystem is responsible for dispatching pointer events to entities\r\n * that need them.\r\n *\r\n * The PointerSystem can be optionally configured by the [[PointerComponent]], by default Entities use\r\n * the [[Collider]]'s shape for pointer events.\r\n */\r\nclass PointerSystem extends System {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.types = ['ex.transform', 'ex.pointer'];\r\n        this.systemType = SystemType.Update;\r\n        this.priority = -1;\r\n        /**\r\n         * Optionally override component configuration for all entities\r\n         */\r\n        this.overrideUseColliderShape = false;\r\n        /**\r\n         * Optionally override component configuration for all entities\r\n         */\r\n        this.overrideUseGraphicsBounds = false;\r\n        this.lastFrameEntityToPointers = new Map();\r\n        this.currentFrameEntityToPointers = new Map();\r\n    }\r\n    initialize(scene) {\r\n        this._engine = scene.engine;\r\n        this._receiver = this._engine.input.pointers;\r\n    }\r\n    sort(a, b) {\r\n        // Sort from high to low, because things on 'top' receive the pointer events first\r\n        return b.get(TransformComponent).z - a.get(TransformComponent).z;\r\n    }\r\n    entityCurrentlyUnderPointer(entity, pointerId) {\r\n        return this.currentFrameEntityToPointers.has(entity.id) &&\r\n            this.currentFrameEntityToPointers.get(entity.id).includes(pointerId);\r\n    }\r\n    entityWasUnderPointer(entity, pointerId) {\r\n        return this.lastFrameEntityToPointers.has(entity.id) &&\r\n            this.lastFrameEntityToPointers.get(entity.id).includes(pointerId);\r\n    }\r\n    entered(entity, pointerId) {\r\n        return this.entityCurrentlyUnderPointer(entity, pointerId) &&\r\n            !this.lastFrameEntityToPointers.has(entity.id);\r\n    }\r\n    left(entity, pointerId) {\r\n        return !this.currentFrameEntityToPointers.has(entity.id) &&\r\n            this.entityWasUnderPointer(entity, pointerId);\r\n    }\r\n    addPointerToEntity(entity, pointerId) {\r\n        if (!this.currentFrameEntityToPointers.has(entity.id)) {\r\n            this.currentFrameEntityToPointers.set(entity.id, [pointerId]);\r\n            return;\r\n        }\r\n        const pointers = this.currentFrameEntityToPointers.get(entity.id);\r\n        this.currentFrameEntityToPointers.set(entity.id, pointers.concat(pointerId));\r\n    }\r\n    update(entities) {\r\n        // Locate all the pointer/entity mappings\r\n        this._processPointerToEntity(entities);\r\n        // Dispatch pointer events on entities\r\n        this._dispatchEvents(entities);\r\n        // Clear last frame's events\r\n        this._receiver.update();\r\n        this.lastFrameEntityToPointers.clear();\r\n        this.lastFrameEntityToPointers = new Map(this.currentFrameEntityToPointers);\r\n        this.currentFrameEntityToPointers.clear();\r\n        this._receiver.clear();\r\n    }\r\n    _processPointerToEntity(entities) {\r\n        var _a;\r\n        let transform;\r\n        let collider;\r\n        let graphics;\r\n        let pointer;\r\n        // TODO probably a spatial partition optimization here to quickly query bounds for pointer\r\n        // doesn't seem to cause issues tho for perf\r\n        // Pre-process find entities under pointers\r\n        for (const entity of entities) {\r\n            transform = entity.get(TransformComponent);\r\n            pointer = (_a = entity.get(PointerComponent)) !== null && _a !== void 0 ? _a : new PointerComponent;\r\n            // Check collider contains pointer\r\n            collider = entity.get(ColliderComponent);\r\n            if (collider && (pointer.useColliderShape || this.overrideUseColliderShape)) {\r\n                const geom = collider.get();\r\n                if (geom) {\r\n                    for (const [pointerId, pos] of this._receiver.currentFramePointerCoords.entries()) {\r\n                        if (geom.contains(transform.coordPlane === CoordPlane.World ? pos.worldPos : pos.screenPos)) {\r\n                            this.addPointerToEntity(entity, pointerId);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            // Check graphics contains pointer\r\n            graphics = entity.get(GraphicsComponent);\r\n            if (graphics && (pointer.useGraphicsBounds || this.overrideUseGraphicsBounds)) {\r\n                const graphicBounds = graphics.localBounds.transform(transform.getGlobalMatrix());\r\n                for (const [pointerId, pos] of this._receiver.currentFramePointerCoords.entries()) {\r\n                    if (graphicBounds.contains(transform.coordPlane === CoordPlane.World ? pos.worldPos : pos.screenPos)) {\r\n                        this.addPointerToEntity(entity, pointerId);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _processDownAndEmit(entity) {\r\n        const lastDownPerPointer = new Map();\r\n        // Loop through down and dispatch to entities\r\n        for (const event of this._receiver.currentFrameDown) {\r\n            if (event.active && entity.active && this.entityCurrentlyUnderPointer(entity, event.pointerId)) {\r\n                entity.events.emit('pointerdown', event);\r\n                if (this._receiver.isDragStart(event.pointerId)) {\r\n                    entity.events.emit('pointerdragstart', event);\r\n                }\r\n            }\r\n            lastDownPerPointer.set(event.pointerId, event);\r\n        }\r\n        return lastDownPerPointer;\r\n    }\r\n    _processUpAndEmit(entity) {\r\n        const lastUpPerPointer = new Map();\r\n        // Loop through up and dispatch to entities\r\n        for (const event of this._receiver.currentFrameUp) {\r\n            if (event.active && entity.active && this.entityCurrentlyUnderPointer(entity, event.pointerId)) {\r\n                entity.events.emit('pointerup', event);\r\n                if (this._receiver.isDragEnd(event.pointerId)) {\r\n                    entity.events.emit('pointerdragend', event);\r\n                }\r\n            }\r\n            lastUpPerPointer.set(event.pointerId, event);\r\n        }\r\n        return lastUpPerPointer;\r\n    }\r\n    _processMoveAndEmit(entity) {\r\n        const lastMovePerPointer = new Map();\r\n        // Loop through move and dispatch to entities\r\n        for (const event of this._receiver.currentFrameMove) {\r\n            if (event.active && entity.active && this.entityCurrentlyUnderPointer(entity, event.pointerId)) {\r\n                // move\r\n                entity.events.emit('pointermove', event);\r\n                if (this._receiver.isDragging(event.pointerId)) {\r\n                    entity.events.emit('pointerdragmove', event);\r\n                }\r\n            }\r\n            lastMovePerPointer.set(event.pointerId, event);\r\n        }\r\n        return lastMovePerPointer;\r\n    }\r\n    _processEnterLeaveAndEmit(entity, lastUpDownMoveEvents) {\r\n        // up, down, and move are considered for enter and leave\r\n        for (const event of lastUpDownMoveEvents) {\r\n            // enter\r\n            if (event.active && entity.active && this.entered(entity, event.pointerId)) {\r\n                entity.events.emit('pointerenter', event);\r\n                if (this._receiver.isDragging(event.pointerId)) {\r\n                    entity.events.emit('pointerdragenter', event);\r\n                }\r\n                break;\r\n            }\r\n            if (event.active && entity.active &&\r\n                // leave can happen on move\r\n                (this.left(entity, event.pointerId) ||\r\n                    // or leave can happen on pointer up\r\n                    (this.entityCurrentlyUnderPointer(entity, event.pointerId) && event.type === 'up'))) {\r\n                entity.events.emit('pointerleave', event);\r\n                if (this._receiver.isDragging(event.pointerId)) {\r\n                    entity.events.emit('pointerdragleave', event);\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    _processCancelAndEmit(entity) {\r\n        // cancel\r\n        for (const event of this._receiver.currentFrameCancel) {\r\n            if (event.active && entity.active && this.entityCurrentlyUnderPointer(entity, event.pointerId)) {\r\n                entity.events.emit('pointercancel', event);\r\n            }\r\n        }\r\n    }\r\n    _processWheelAndEmit(entity) {\r\n        // wheel\r\n        for (const event of this._receiver.currentFrameWheel) {\r\n            // Currently the wheel only fires under the primary pointer '0'\r\n            if (event.active && entity.active && this.entityCurrentlyUnderPointer(entity, 0)) {\r\n                entity.events.emit('pointerwheel', event);\r\n            }\r\n        }\r\n    }\r\n    _dispatchEvents(entities) {\r\n        const lastFrameEntities = new Set(this.lastFrameEntityToPointers.keys());\r\n        const currentFrameEntities = new Set(this.currentFrameEntityToPointers.keys());\r\n        // Filter preserves z order\r\n        const entitiesWithEvents = entities.filter(e => lastFrameEntities.has(e.id) || currentFrameEntities.has(e.id));\r\n        let lastMovePerPointer;\r\n        let lastUpPerPointer;\r\n        let lastDownPerPointer;\r\n        // Dispatch events in entity z order\r\n        for (const entity of entitiesWithEvents) {\r\n            lastDownPerPointer = this._processDownAndEmit(entity);\r\n            lastUpPerPointer = this._processUpAndEmit(entity);\r\n            lastMovePerPointer = this._processMoveAndEmit(entity);\r\n            const lastUpDownMoveEvents = [\r\n                ...lastMovePerPointer.values(),\r\n                ...lastDownPerPointer.values(),\r\n                ...lastUpPerPointer.values()\r\n            ];\r\n            this._processEnterLeaveAndEmit(entity, lastUpDownMoveEvents);\r\n            this._processCancelAndEmit(entity);\r\n            this._processWheelAndEmit(entity);\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Actions/ActionsSystem.ts\n\r\n\r\nclass ActionsSystem extends System {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.types = ['ex.actions'];\r\n        this.systemType = SystemType.Update;\r\n        this.priority = -1;\r\n    }\r\n    update(entities, delta) {\r\n        let actions;\r\n        for (const entity of entities) {\r\n            actions = entity.get(ActionsComponent);\r\n            actions.update(delta);\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Scene.ts\nvar Scene_decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * [[Actor|Actors]] are composed together into groupings called Scenes in\r\n * Excalibur. The metaphor models the same idea behind real world\r\n * actors in a scene. Only actors in scenes will be updated and drawn.\r\n *\r\n * Typical usages of a scene include: levels, menus, loading screens, etc.\r\n */\r\nclass Scene extends Class {\r\n    constructor() {\r\n        super();\r\n        this._logger = Logger.getInstance();\r\n        /**\r\n         * Gets or sets the current camera for the scene\r\n         */\r\n        this.camera = new Camera();\r\n        /**\r\n         * The ECS world for the scene\r\n         */\r\n        this.world = new World(this);\r\n        this._isInitialized = false;\r\n        this._timers = [];\r\n        this._cancelQueue = [];\r\n        // Initialize systems\r\n        this.world.add(new ActionsSystem());\r\n        this.world.add(new MotionSystem());\r\n        this.world.add(new CollisionSystem());\r\n        this.world.add(new PointerSystem());\r\n        if (Flags.isEnabled(Legacy.LegacyDrawing)) {\r\n            this.world.add(new CanvasDrawingSystem());\r\n        }\r\n        else {\r\n            this.world.add(new GraphicsSystem());\r\n        }\r\n        this.world.add(new DebugSystem());\r\n    }\r\n    /**\r\n     * The actors in the current scene\r\n     */\r\n    get actors() {\r\n        return this.world.entityManager.entities.filter((e) => {\r\n            return e instanceof Actor;\r\n        });\r\n    }\r\n    /**\r\n     * The entities in the current scene\r\n     */\r\n    get entities() {\r\n        return this.world.entityManager.entities;\r\n    }\r\n    /**\r\n     * The triggers in the current scene\r\n     */\r\n    get triggers() {\r\n        return this.world.entityManager.entities.filter((e) => {\r\n            return e instanceof Trigger_Trigger;\r\n        });\r\n    }\r\n    /**\r\n     * The [[TileMap]]s in the scene, if any\r\n     */\r\n    get tileMaps() {\r\n        return this.world.entityManager.entities.filter((e) => {\r\n            return e instanceof TileMap;\r\n        });\r\n    }\r\n    /**\r\n     * The [[ScreenElement]]s in a scene, if any; these are drawn last\r\n     * @deprecated Use [[Scene.actors]]\r\n     */\r\n    get screenElements() {\r\n        return this.actors.filter((a) => a instanceof ScreenElement_ScreenElement);\r\n    }\r\n    get timers() {\r\n        return this._timers;\r\n    }\r\n    on(eventName, handler) {\r\n        super.on(eventName, handler);\r\n    }\r\n    once(eventName, handler) {\r\n        super.once(eventName, handler);\r\n    }\r\n    off(eventName, handler) {\r\n        super.off(eventName, handler);\r\n    }\r\n    /**\r\n     * This is called before the first update of the [[Scene]]. Initializes scene members like the camera. This method is meant to be\r\n     * overridden. This is where initialization of child actors should take place.\r\n     */\r\n    onInitialize(_engine) {\r\n        // will be overridden\r\n    }\r\n    /**\r\n     * This is called when the scene is made active and started. It is meant to be overridden,\r\n     * this is where you should setup any DOM UI or event handlers needed for the scene.\r\n     */\r\n    onActivate(_oldScene, _newScene) {\r\n        // will be overridden\r\n    }\r\n    /**\r\n     * This is called when the scene is made transitioned away from and stopped. It is meant to be overridden,\r\n     * this is where you should cleanup any DOM UI or event handlers needed for the scene.\r\n     */\r\n    onDeactivate(_oldScene, _newScene) {\r\n        // will be overridden\r\n    }\r\n    /**\r\n     * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPreUpdate` is called directly before a scene is updated.\r\n     */\r\n    onPreUpdate(_engine, _delta) {\r\n        // will be overridden\r\n    }\r\n    /**\r\n     * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPostUpdate` is called directly after a scene is updated.\r\n     */\r\n    onPostUpdate(_engine, _delta) {\r\n        // will be overridden\r\n    }\r\n    /**\r\n     * Safe to override onPreDraw lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPreDraw` is called directly before a scene is drawn.\r\n     *\r\n     * @deprecated Signature will change in v0.26.0\r\n     */\r\n    onPreDraw(_ctx, _delta) {\r\n        // will be overridden\r\n    }\r\n    /**\r\n     * Safe to override onPostDraw lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\r\n     *\r\n     * `onPostDraw` is called directly after a scene is drawn.\r\n     *\r\n     * @deprecated Signature will change in v0.26.0\r\n     */\r\n    onPostDraw(_ctx, _delta) {\r\n        // will be overridden\r\n    }\r\n    /**\r\n     * Initializes actors in the scene\r\n     */\r\n    _initializeChildren() {\r\n        for (const child of this.entities) {\r\n            child._initialize(this.engine);\r\n        }\r\n    }\r\n    /**\r\n     * Gets whether or not the [[Scene]] has been initialized\r\n     */\r\n    get isInitialized() {\r\n        return this._isInitialized;\r\n    }\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Initializes the scene before the first update, meant to be called by engine not by users of\r\n     * Excalibur\r\n     * @internal\r\n     */\r\n    _initialize(engine) {\r\n        if (!this.isInitialized) {\r\n            this.engine = engine;\r\n            // Initialize camera first\r\n            this.camera._initialize(engine);\r\n            this.world.systemManager.initialize();\r\n            // This order is important! we want to be sure any custom init that add actors\r\n            // fire before the actor init\r\n            this.onInitialize.call(this, engine);\r\n            this._initializeChildren();\r\n            this._logger.debug('Scene.onInitialize', this, engine);\r\n            this.eventDispatcher.emit('initialize', new InitializeEvent(engine, this));\r\n            this._isInitialized = true;\r\n        }\r\n    }\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Activates the scene with the base behavior, then calls the overridable `onActivate` implementation.\r\n     * @internal\r\n     */\r\n    _activate(oldScene, newScene) {\r\n        this._logger.debug('Scene.onActivate', this);\r\n        this.onActivate(oldScene, newScene);\r\n    }\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Deactivates the scene with the base behavior, then calls the overridable `onDeactivate` implementation.\r\n     * @internal\r\n     */\r\n    _deactivate(oldScene, newScene) {\r\n        this._logger.debug('Scene.onDeactivate', this);\r\n        this.onDeactivate(oldScene, newScene);\r\n    }\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Internal _preupdate handler for [[onPreUpdate]] lifecycle event\r\n     * @internal\r\n     */\r\n    _preupdate(_engine, delta) {\r\n        this.emit('preupdate', new PreUpdateEvent(_engine, delta, this));\r\n        this.onPreUpdate(_engine, delta);\r\n    }\r\n    /**\r\n     *  It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Internal _preupdate handler for [[onPostUpdate]] lifecycle event\r\n     * @internal\r\n     */\r\n    _postupdate(_engine, delta) {\r\n        this.emit('postupdate', new PostUpdateEvent(_engine, delta, this));\r\n        this.onPostUpdate(_engine, delta);\r\n    }\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Internal _predraw handler for [[onPreDraw]] lifecycle event\r\n     *\r\n     * @deprecated Signature will change in v0.26.0\r\n     * @internal\r\n     */\r\n    _predraw(_ctx, _delta) {\r\n        this.emit('predraw', new PreDrawEvent(_ctx, _delta, this));\r\n        this.onPreDraw(_ctx, _delta);\r\n    }\r\n    /**\r\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\r\n     *\r\n     * Internal _postdraw handler for [[onPostDraw]] lifecycle event\r\n     *\r\n     * @deprecated Signature will change in v0.26.0\r\n     * @internal\r\n     */\r\n    _postdraw(_ctx, _delta) {\r\n        this.emit('postdraw', new PostDrawEvent(_ctx, _delta, this));\r\n        this.onPostDraw(_ctx, _delta);\r\n    }\r\n    /**\r\n     * Updates all the actors and timers in the scene. Called by the [[Engine]].\r\n     * @param engine  Reference to the current Engine\r\n     * @param delta   The number of milliseconds since the last update\r\n     */\r\n    update(engine, delta) {\r\n        this._preupdate(engine, delta);\r\n        // TODO differed entity removal for timers\r\n        let i, len;\r\n        // Remove timers in the cancel queue before updating them\r\n        for (i = 0, len = this._cancelQueue.length; i < len; i++) {\r\n            this.removeTimer(this._cancelQueue[i]);\r\n        }\r\n        this._cancelQueue.length = 0;\r\n        // Cycle through timers updating timers\r\n        for (const timer of this._timers) {\r\n            timer.update(delta);\r\n        }\r\n        this.world.update(SystemType.Update, delta);\r\n        // Camera last keeps renders smooth that are based on entity/actor\r\n        if (this.camera) {\r\n            this.camera.update(engine, delta);\r\n        }\r\n        this._collectActorStats(engine);\r\n        this._postupdate(engine, delta);\r\n    }\r\n    /**\r\n     * Draws all the actors in the Scene. Called by the [[Engine]].\r\n     *\r\n     * @deprecated Signature will change in v0.26.0\r\n     * @param ctx    The current rendering context\r\n     * @param delta  The number of milliseconds since the last draw\r\n     */\r\n    draw(ctx, delta) {\r\n        var _a;\r\n        this._predraw(ctx, delta);\r\n        this.world.update(SystemType.Draw, delta);\r\n        if ((_a = this.engine) === null || _a === void 0 ? void 0 : _a.isDebug) {\r\n            this.debugDraw(ctx);\r\n        }\r\n        this._postdraw(ctx, delta);\r\n    }\r\n    /**\r\n     * Draws all the actors' debug information in the Scene. Called by the [[Engine]].\r\n     * @param ctx  The current rendering context\r\n     * @deprecated Signature will change in v0.26.0\r\n     */\r\n    /* istanbul ignore next */\r\n    debugDraw(ctx) {\r\n        this.emit('predebugdraw', new PreDebugDrawEvent(ctx, this));\r\n        // pass\r\n        this.emit('postdebugdraw', new PostDebugDrawEvent(ctx, this));\r\n    }\r\n    /**\r\n     * Checks whether an actor is contained in this scene or not\r\n     */\r\n    contains(actor) {\r\n        return this.actors.indexOf(actor) > -1;\r\n    }\r\n    add(entity) {\r\n        this.emit('entityadded', { target: entity });\r\n        this.world.add(entity);\r\n        entity.scene = this;\r\n        if (entity instanceof Timer) {\r\n            if (!contains(this._timers, entity)) {\r\n                this.addTimer(entity);\r\n            }\r\n            return;\r\n        }\r\n    }\r\n    remove(entity) {\r\n        if (entity instanceof Entity) {\r\n            this.emit('entityremoved', { target: entity });\r\n            this.world.remove(entity);\r\n        }\r\n        if (entity instanceof Timer) {\r\n            this.removeTimer(entity);\r\n        }\r\n    }\r\n    /**\r\n     * Adds (any) actor to act as a piece of UI, meaning it is always positioned\r\n     * in screen coordinates. UI actors do not participate in collisions.\r\n     * @todo Should this be `ScreenElement` only?\r\n     * @deprecated Use [[Scene.add]]\r\n     */\r\n    addScreenElement(actor) {\r\n        this.add(actor);\r\n    }\r\n    /**\r\n     * Removes an actor as a piece of UI\r\n     * @deprecated Use [[Scene.remove]]\r\n     */\r\n    removeScreenElement(actor) {\r\n        this.remove(actor);\r\n    }\r\n    /**\r\n     * Adds a [[TileMap]] to the scene, once this is done the TileMap will be drawn and updated.\r\n     * @deprecated Use [[Scene.add]]\r\n     */\r\n    addTileMap(tileMap) {\r\n        this.world.add(tileMap);\r\n    }\r\n    /**\r\n     * Removes a [[TileMap]] from the scene, it will no longer be drawn or updated.\r\n     * @deprecated Use [[Scene.remove]]\r\n     */\r\n    removeTileMap(tileMap) {\r\n        this.world.remove(tileMap);\r\n    }\r\n    /**\r\n     * Adds a [[Timer]] to the scene\r\n     * @param timer  The timer to add\r\n     */\r\n    addTimer(timer) {\r\n        this._timers.push(timer);\r\n        timer.scene = this;\r\n        return timer;\r\n    }\r\n    /**\r\n     * Removes a [[Timer]] from the scene.\r\n     * @warning Can be dangerous, use [[cancelTimer]] instead\r\n     * @param timer  The timer to remove\r\n     */\r\n    removeTimer(timer) {\r\n        const i = this._timers.indexOf(timer);\r\n        if (i !== -1) {\r\n            this._timers.splice(i, 1);\r\n        }\r\n        return timer;\r\n    }\r\n    /**\r\n     * Cancels a [[Timer]], removing it from the scene nicely\r\n     * @param timer  The timer to cancel\r\n     */\r\n    cancelTimer(timer) {\r\n        this._cancelQueue.push(timer);\r\n        return timer;\r\n    }\r\n    /**\r\n     * Tests whether a [[Timer]] is active in the scene\r\n     */\r\n    isTimerActive(timer) {\r\n        return this._timers.indexOf(timer) > -1 && !timer.complete;\r\n    }\r\n    isCurrentScene() {\r\n        if (this.engine) {\r\n            return this.engine.currentScene === this;\r\n        }\r\n        return false;\r\n    }\r\n    _collectActorStats(engine) {\r\n        const screenElements = this.actors.filter((a) => a instanceof ScreenElement_ScreenElement);\r\n        for (const _ui of screenElements) {\r\n            engine.stats.currFrame.actors.ui++;\r\n        }\r\n        for (const actor of this.actors) {\r\n            engine.stats.currFrame.actors.alive++;\r\n            for (const child of actor.children) {\r\n                if (isScreenElement(child)) {\r\n                    // TODO not true\r\n                    engine.stats.currFrame.actors.ui++;\r\n                }\r\n                else {\r\n                    engine.stats.currFrame.actors.alive++;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nScene_decorate([\r\n    obsolete({\r\n        message: 'Will be removed in excalibur v0.26.0',\r\n        alternateMethod: 'ScreenElements now are normal actors with a Transform Coordinate Plane of Screen'\r\n    })\r\n], Scene.prototype, \"screenElements\", null);\r\nScene_decorate([\r\n    obsolete({ message: 'Will be removed in excalibur v0.26.0', alternateMethod: 'Use Scene.add' })\r\n], Scene.prototype, \"addScreenElement\", null);\r\nScene_decorate([\r\n    obsolete({ message: 'Will be removed in excalibur v0.26.0', alternateMethod: 'Use Scene.remove' })\r\n], Scene.prototype, \"removeScreenElement\", null);\r\nScene_decorate([\r\n    obsolete({ message: 'Will be removed in excalibur v0.26.0', alternateMethod: 'Use Scene.add' })\r\n], Scene.prototype, \"addTileMap\", null);\r\nScene_decorate([\r\n    obsolete({ message: 'Will be removed in excalibur v0.26.0', alternateMethod: 'Use Scene.remove' })\r\n], Scene.prototype, \"removeTileMap\", null);\r\n\n;// CONCATENATED MODULE: ./Graphics/PostProcessor/ColorBlindnessMode.ts\nvar ColorBlindnessMode;\r\n(function (ColorBlindnessMode) {\r\n    ColorBlindnessMode[\"Protanope\"] = \"Protanope\";\r\n    ColorBlindnessMode[\"Deuteranope\"] = \"Deuteranope\";\r\n    ColorBlindnessMode[\"Tritanope\"] = \"Tritanope\";\r\n})(ColorBlindnessMode || (ColorBlindnessMode = {}));\r\n\n;// CONCATENATED MODULE: ./Graphics/PostProcessor/color-blind-fragment.glsl\n/* harmony default export */ const color_blind_fragment = (\"precision mediump float;\\r\\n// our texture\\r\\nuniform sampler2D u_image;\\r\\n// the texCoords passed in from the vertex shader.\\r\\nvarying vec2 v_texcoord;\\r\\n\\r\\n// color blind type\\r\\nuniform int u_type;\\r\\n\\r\\n// simulation?\\r\\nuniform bool u_simulate;\\r\\n\\r\\nvoid main() {\\r\\n  vec4 o =  texture2D(u_image, v_texcoord);\\r\\n  // RGB to LMS matrix conversion\\r\\n  float L = (17.8824 * o.r) + (43.5161 * o.g) + (4.11935 * o.b);\\r\\n  float M = (3.45565 * o.r) + (27.1554 * o.g) + (3.86714 * o.b);\\r\\n  float S = (0.0299566 * o.r) + (0.184309 * o.g) + (1.46709 * o.b);\\r\\n  // Simulate color blindness\\r\\n  float l;\\r\\n  float m;\\r\\n  float s;\\r\\n  //MODE CODE//\\r\\n  if (u_type == 0) {\\r\\n    // Protanope\\r\\n    l = 0.0 * L + 2.02344 * M + -2.52581 * S;\\r\\n    m = 0.0 * L + 1.0 * M + 0.0 * S;\\r\\n    s = 0.0 * L + 0.0 * M + 1.0 * S;;\\r\\n  } else if (u_type == 1) {\\r\\n    // Deuteranope\\r\\n    l = 1.0 * L + 0.0 * M + 0.0 * S;\\r\\n    m = 0.494207 * L + 0.0 * M + 1.24827 * S;\\r\\n    s = 0.0 * L + 0.0 * M + 1.0 * S;\\r\\n  } else if (u_type == 2) {\\r\\n    // Tritanope\\r\\n    l = 1.0 * L + 0.0 * M + 0.0 * S;\\r\\n    m = 0.0 * L + 1.0 * M + 0.0 * S;\\r\\n    s = -0.395913 * L + 0.801109 * M + 0.0 * S;\\r\\n  }\\r\\n\\r\\n  // LMS to RGB matrix conversion\\r\\n  vec4 error; // simulate the colors\\r\\n  error.r = (0.0809444479 * l) + (-0.130504409 * m) + (0.116721066 * s);\\r\\n  error.g = (-0.0102485335 * l) + (0.0540193266 * m) + (-0.113614708 * s);\\r\\n  error.b = (-0.000365296938 * l) + (-0.00412161469 * m) + (0.693511405 * s);\\r\\n  error.a = 1.0;\\r\\n  vec4 diff = o - error;\\r\\n  vec4 correction; // correct the colors\\r\\n  correction.r = 0.0;\\r\\n  correction.g =  (diff.r * 0.7) + (diff.g * 1.0);\\r\\n  correction.b =  (diff.r * 0.7) + (diff.b * 1.0);\\r\\n  correction = o + correction;\\r\\n  correction.a = o.a;\\r\\n  //SIMULATE//\\r\\n\\r\\n  // sim \\r\\n  if (u_simulate) {\\r\\n    gl_FragColor = error.rgba;\\r\\n  } else {\\r\\n    gl_FragColor = correction.rgba;\\r\\n  }\\r\\n}\");\n;// CONCATENATED MODULE: ./Graphics/PostProcessor/ScreenShader.ts\n\r\n\r\n\r\n/**\r\n * Helper that defines a whole screen renderer, just provide a fragment source!\r\n *\r\n * Currently supports 1 varying\r\n * - vec2 a_texcoord between 0-1 which corresponds to screen position\r\n */\r\nclass ScreenShader {\r\n    constructor(fragmentSource) {\r\n        this._shader = new Shader({\r\n            vertexSource: `\r\n      attribute vec2 a_position;\r\n      attribute vec2 a_texcoord;\r\n      varying vec2 v_texcoord;\r\n\r\n      void main() {\r\n        gl_Position = vec4(a_position, 0.0, 1.0);\r\n        // Pass the texcoord to the fragment shader.\r\n        v_texcoord = a_texcoord;\r\n      }`,\r\n            fragmentSource: fragmentSource\r\n        });\r\n        this._shader.compile();\r\n        // Setup memory layout\r\n        this._buffer = new VertexBuffer({\r\n            type: 'static',\r\n            // clip space quad + uv since we don't need a camera\r\n            data: new Float32Array([\r\n                -1, -1, 0, 0,\r\n                -1, 1, 0, 1,\r\n                1, -1, 1, 0,\r\n                1, -1, 1, 0,\r\n                -1, 1, 0, 1,\r\n                1, 1, 1, 1\r\n            ])\r\n        });\r\n        this._layout = new VertexLayout({\r\n            shader: this._shader,\r\n            vertexBuffer: this._buffer,\r\n            attributes: [\r\n                ['a_position', 2],\r\n                ['a_texcoord', 2]\r\n            ]\r\n        });\r\n        this._buffer.upload();\r\n    }\r\n    getShader() {\r\n        return this._shader;\r\n    }\r\n    getLayout() {\r\n        return this._layout;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/PostProcessor/ColorBlindnessPostProcessor.ts\n\r\n\r\n\r\nclass ColorBlindnessPostProcessor {\r\n    constructor(_colorBlindnessMode, simulate = false) {\r\n        this._colorBlindnessMode = _colorBlindnessMode;\r\n        this._simulate = false;\r\n        this._simulate = simulate;\r\n    }\r\n    initialize(_gl) {\r\n        this._shader = new ScreenShader(color_blind_fragment);\r\n        this.simulate = this._simulate;\r\n        this.colorBlindnessMode = this._colorBlindnessMode;\r\n    }\r\n    getShader() {\r\n        return this._shader.getShader();\r\n    }\r\n    getLayout() {\r\n        return this._shader.getLayout();\r\n    }\r\n    set colorBlindnessMode(colorBlindMode) {\r\n        this._colorBlindnessMode = colorBlindMode;\r\n        if (this._shader) {\r\n            const shader = this._shader.getShader();\r\n            shader.use();\r\n            if (this._colorBlindnessMode === ColorBlindnessMode.Protanope) {\r\n                shader.setUniformInt('u_type', 0);\r\n            }\r\n            else if (this._colorBlindnessMode === ColorBlindnessMode.Deuteranope) {\r\n                shader.setUniformInt('u_type', 1);\r\n            }\r\n            else if (this._colorBlindnessMode === ColorBlindnessMode.Tritanope) {\r\n                shader.setUniformInt('u_type', 2);\r\n            }\r\n        }\r\n    }\r\n    get colorBlindnessMode() {\r\n        return this._colorBlindnessMode;\r\n    }\r\n    set simulate(value) {\r\n        this._simulate = value;\r\n        if (this._shader) {\r\n            const shader = this._shader.getShader();\r\n            shader.use();\r\n            shader.setUniformBoolean('u_simulate', value);\r\n        }\r\n    }\r\n    get simulate() {\r\n        return this._simulate;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Debug/DebugFlags.ts\n\r\n\r\n\r\nclass ColorBlindFlags {\r\n    constructor(engine) {\r\n        this._engine = engine;\r\n        this._colorBlindPostProcessor = new ColorBlindnessPostProcessor(ColorBlindnessMode.Protanope);\r\n    }\r\n    /**\r\n     * Correct colors for a specified color blindness\r\n     * @param colorBlindness\r\n     */\r\n    correct(colorBlindness) {\r\n        if (this._engine.graphicsContext instanceof ExcaliburGraphicsContextWebGL) {\r\n            this.clear();\r\n            this._colorBlindPostProcessor.colorBlindnessMode = colorBlindness;\r\n            this._colorBlindPostProcessor.simulate = false;\r\n            this._engine.graphicsContext.addPostProcessor(this._colorBlindPostProcessor);\r\n        }\r\n    }\r\n    /**\r\n     * Simulate colors for a specified color blindness\r\n     * @param colorBlindness\r\n     */\r\n    simulate(colorBlindness) {\r\n        if (this._engine.graphicsContext instanceof ExcaliburGraphicsContextWebGL) {\r\n            this.clear();\r\n            this._colorBlindPostProcessor.colorBlindnessMode = colorBlindness;\r\n            this._colorBlindPostProcessor.simulate = true;\r\n            this._engine.graphicsContext.addPostProcessor(this._colorBlindPostProcessor);\r\n        }\r\n    }\r\n    /**\r\n     * Remove color blindness post processor\r\n     */\r\n    clear() {\r\n        this._engine.graphicsContext.removePostProcessor(this._colorBlindPostProcessor);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Debug/Debug.ts\n\r\n\r\n/**\r\n * Debug statistics and flags for Excalibur. If polling these values, it would be\r\n * best to do so on the `postupdate` event for [[Engine]], after all values have been\r\n * updated during a frame.\r\n */\r\nclass Debug {\r\n    constructor(engine) {\r\n        /**\r\n         * Performance statistics\r\n         */\r\n        this.stats = {\r\n            /**\r\n             * Current frame statistics. Engine reuses this instance, use [[FrameStats.clone]] to copy frame stats.\r\n             * Best accessed on [[postframe]] event. See [[FrameStats]]\r\n             */\r\n            currFrame: new FrameStats(),\r\n            /**\r\n             * Previous frame statistics. Engine reuses this instance, use [[FrameStats.clone]] to copy frame stats.\r\n             * Best accessed on [[preframe]] event. Best inspected on engine event `preframe`. See [[FrameStats]]\r\n             */\r\n            prevFrame: new FrameStats()\r\n        };\r\n        /**\r\n         * Filter debug context to named entities or entity ids\r\n         */\r\n        this.filter = {\r\n            /**\r\n             * Toggle filter on or off (default off) must be on for DebugDraw to use filters\r\n             */\r\n            useFilter: false,\r\n            /**\r\n             * Query for entities by name, if the entity name contains `nameQuery` it will be included\r\n             */\r\n            nameQuery: '',\r\n            /**\r\n             * Query for Entity ids, if the id matches it will be included\r\n             */\r\n            ids: []\r\n        };\r\n        /**\r\n         * Entity debug settings\r\n         */\r\n        this.entity = {\r\n            showAll: false,\r\n            showId: true,\r\n            showName: false\r\n        };\r\n        /**\r\n         * Transform component debug settings\r\n         */\r\n        this.transform = {\r\n            showAll: false,\r\n            showPosition: false,\r\n            showPositionLabel: false,\r\n            positionColor: Color.Yellow,\r\n            showScale: false,\r\n            scaleColor: Color.Green,\r\n            showRotation: false,\r\n            rotationColor: Color.Blue\r\n        };\r\n        /**\r\n         * Graphics component debug settings\r\n         */\r\n        this.graphics = {\r\n            showAll: false,\r\n            showBounds: true,\r\n            boundsColor: Color.Yellow\r\n        };\r\n        /**\r\n         * Collider component debug settings\r\n         */\r\n        this.collider = {\r\n            showAll: false,\r\n            showBounds: true,\r\n            boundsColor: Color.Blue,\r\n            showOwner: false,\r\n            showGeometry: true,\r\n            geometryColor: Color.Green\r\n        };\r\n        /**\r\n         * Physics simulation debug settings\r\n         */\r\n        this.physics = {\r\n            showAll: false,\r\n            showBroadphaseSpacePartitionDebug: false,\r\n            showCollisionNormals: false,\r\n            collisionNormalColor: Color.Cyan,\r\n            showCollisionContacts: true,\r\n            collisionContactColor: Color.Red\r\n        };\r\n        /**\r\n         * Motion component debug settings\r\n         */\r\n        this.motion = {\r\n            showAll: false,\r\n            showVelocity: false,\r\n            velocityColor: Color.Yellow,\r\n            showAcceleration: false,\r\n            accelerationColor: Color.Red\r\n        };\r\n        /**\r\n         * Body component debug settings\r\n         */\r\n        this.body = {\r\n            showAll: false,\r\n            showCollisionGroup: false,\r\n            showCollisionType: false,\r\n            showSleeping: false,\r\n            showMotion: false,\r\n            showMass: false\r\n        };\r\n        /**\r\n         * Camera debug settings\r\n         */\r\n        this.camera = {\r\n            showAll: false,\r\n            showFocus: false,\r\n            focusColor: Color.Red,\r\n            showZoom: false\r\n        };\r\n        this._engine = engine;\r\n        this.colorBlindMode = new ColorBlindFlags(this._engine);\r\n    }\r\n    /**\r\n     * Switch the current excalibur clock with the [[TestClock]] and return\r\n     * it in the same running state.\r\n     *\r\n     * This is useful when you need to debug frame by frame.\r\n     */\r\n    useTestClock() {\r\n        const clock = this._engine.clock;\r\n        const wasRunning = clock.isRunning();\r\n        clock.stop();\r\n        const testClock = clock.toTestClock();\r\n        if (wasRunning) {\r\n            testClock.start();\r\n        }\r\n        this._engine.clock = testClock;\r\n        return testClock;\r\n    }\r\n    /**\r\n     * Switch the current excalibur clock with the [[StandardClock]] and\r\n     * return it in the same running state.\r\n     *\r\n     * This is useful when you need to switch back to normal mode after\r\n     * debugging.\r\n     */\r\n    useStandardClock() {\r\n        const currentClock = this._engine.clock;\r\n        const wasRunning = currentClock.isRunning();\r\n        currentClock.stop();\r\n        const standardClock = currentClock.toStandardClock();\r\n        if (wasRunning) {\r\n            standardClock.start();\r\n        }\r\n        this._engine.clock = standardClock;\r\n        return standardClock;\r\n    }\r\n}\r\n/**\r\n * Implementation of a frame's stats. Meant to have values copied via [[FrameStats.reset]], avoid\r\n * creating instances of this every frame.\r\n */\r\nclass FrameStats {\r\n    constructor() {\r\n        this._id = 0;\r\n        this._delta = 0;\r\n        this._fps = 0;\r\n        this._actorStats = {\r\n            alive: 0,\r\n            killed: 0,\r\n            ui: 0,\r\n            get remaining() {\r\n                return this.alive - this.killed;\r\n            },\r\n            get total() {\r\n                return this.remaining + this.ui;\r\n            }\r\n        };\r\n        this._durationStats = {\r\n            update: 0,\r\n            draw: 0,\r\n            get total() {\r\n                return this.update + this.draw;\r\n            }\r\n        };\r\n        this._physicsStats = new PhysicsStats();\r\n        this._graphicsStats = {\r\n            drawCalls: 0,\r\n            drawnImages: 0\r\n        };\r\n    }\r\n    /**\r\n     * Zero out values or clone other IFrameStat stats. Allows instance reuse.\r\n     *\r\n     * @param [otherStats] Optional stats to clone\r\n     */\r\n    reset(otherStats) {\r\n        if (otherStats) {\r\n            this.id = otherStats.id;\r\n            this.delta = otherStats.delta;\r\n            this.fps = otherStats.fps;\r\n            this.actors.alive = otherStats.actors.alive;\r\n            this.actors.killed = otherStats.actors.killed;\r\n            this.actors.ui = otherStats.actors.ui;\r\n            this.duration.update = otherStats.duration.update;\r\n            this.duration.draw = otherStats.duration.draw;\r\n            this._physicsStats.reset(otherStats.physics);\r\n            this.graphics.drawCalls = otherStats.graphics.drawCalls;\r\n            this.graphics.drawnImages = otherStats.graphics.drawnImages;\r\n        }\r\n        else {\r\n            this.id = this.delta = this.fps = 0;\r\n            this.actors.alive = this.actors.killed = this.actors.ui = 0;\r\n            this.duration.update = this.duration.draw = 0;\r\n            this._physicsStats.reset();\r\n            this.graphics.drawnImages = this.graphics.drawCalls = 0;\r\n        }\r\n    }\r\n    /**\r\n     * Provides a clone of this instance.\r\n     */\r\n    clone() {\r\n        const fs = new FrameStats();\r\n        fs.reset(this);\r\n        return fs;\r\n    }\r\n    /**\r\n     * Gets the frame's id\r\n     */\r\n    get id() {\r\n        return this._id;\r\n    }\r\n    /**\r\n     * Sets the frame's id\r\n     */\r\n    set id(value) {\r\n        this._id = value;\r\n    }\r\n    /**\r\n     * Gets the frame's delta (time since last frame)\r\n     */\r\n    get delta() {\r\n        return this._delta;\r\n    }\r\n    /**\r\n     * Sets the frame's delta (time since last frame). Internal use only.\r\n     * @internal\r\n     */\r\n    set delta(value) {\r\n        this._delta = value;\r\n    }\r\n    /**\r\n     * Gets the frame's frames-per-second (FPS)\r\n     */\r\n    get fps() {\r\n        return this._fps;\r\n    }\r\n    /**\r\n     * Sets the frame's frames-per-second (FPS). Internal use only.\r\n     * @internal\r\n     */\r\n    set fps(value) {\r\n        this._fps = value;\r\n    }\r\n    /**\r\n     * Gets the frame's actor statistics\r\n     */\r\n    get actors() {\r\n        return this._actorStats;\r\n    }\r\n    /**\r\n     * Gets the frame's duration statistics\r\n     */\r\n    get duration() {\r\n        return this._durationStats;\r\n    }\r\n    /**\r\n     * Gets the frame's physics statistics\r\n     */\r\n    get physics() {\r\n        return this._physicsStats;\r\n    }\r\n    /**\r\n     * Gets the frame's graphics statistics\r\n     */\r\n    get graphics() {\r\n        return this._graphicsStats;\r\n    }\r\n}\r\nclass PhysicsStats {\r\n    constructor() {\r\n        this._pairs = 0;\r\n        this._collisions = 0;\r\n        this._contacts = new Map();\r\n        this._fastBodies = 0;\r\n        this._fastBodyCollisions = 0;\r\n        this._broadphase = 0;\r\n        this._narrowphase = 0;\r\n    }\r\n    /**\r\n     * Zero out values or clone other IPhysicsStats stats. Allows instance reuse.\r\n     *\r\n     * @param [otherStats] Optional stats to clone\r\n     */\r\n    reset(otherStats) {\r\n        if (otherStats) {\r\n            this.pairs = otherStats.pairs;\r\n            this.collisions = otherStats.collisions;\r\n            this.contacts = otherStats.contacts;\r\n            this.fastBodies = otherStats.fastBodies;\r\n            this.fastBodyCollisions = otherStats.fastBodyCollisions;\r\n            this.broadphase = otherStats.broadphase;\r\n            this.narrowphase = otherStats.narrowphase;\r\n        }\r\n        else {\r\n            this.pairs = this.collisions = this.fastBodies = 0;\r\n            this.fastBodyCollisions = this.broadphase = this.narrowphase = 0;\r\n            this.contacts.clear();\r\n        }\r\n    }\r\n    /**\r\n     * Provides a clone of this instance.\r\n     */\r\n    clone() {\r\n        const ps = new PhysicsStats();\r\n        ps.reset(this);\r\n        return ps;\r\n    }\r\n    get pairs() {\r\n        return this._pairs;\r\n    }\r\n    set pairs(value) {\r\n        this._pairs = value;\r\n    }\r\n    get collisions() {\r\n        return this._collisions;\r\n    }\r\n    set collisions(value) {\r\n        this._collisions = value;\r\n    }\r\n    get contacts() {\r\n        return this._contacts;\r\n    }\r\n    set contacts(contacts) {\r\n        this._contacts = contacts;\r\n    }\r\n    get fastBodies() {\r\n        return this._fastBodies;\r\n    }\r\n    set fastBodies(value) {\r\n        this._fastBodies = value;\r\n    }\r\n    get fastBodyCollisions() {\r\n        return this._fastBodyCollisions;\r\n    }\r\n    set fastBodyCollisions(value) {\r\n        this._fastBodyCollisions = value;\r\n    }\r\n    get broadphase() {\r\n        return this._broadphase;\r\n    }\r\n    set broadphase(value) {\r\n        this._broadphase = value;\r\n    }\r\n    get narrowphase() {\r\n        return this._narrowphase;\r\n    }\r\n    set narrowphase(value) {\r\n        this._narrowphase = value;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Input/PointerScope.ts\n/**\r\n * Determines the scope of handling mouse/touch events.\r\n */\r\nvar PointerScope;\r\n(function (PointerScope) {\r\n    /**\r\n     * Handle events on the `canvas` element only. Events originating outside the\r\n     * `canvas` will not be handled.\r\n     */\r\n    PointerScope[\"Canvas\"] = \"Canvas\";\r\n    /**\r\n     * Handles events on the entire document. All events will be handled by Excalibur.\r\n     */\r\n    PointerScope[\"Document\"] = \"Document\";\r\n})(PointerScope || (PointerScope = {}));\r\n\n;// CONCATENATED MODULE: ./Input/Keyboard.ts\n\r\n\r\n\r\n/**\r\n * Enum representing physical input key codes\r\n */\r\nvar Keys;\r\n(function (Keys) {\r\n    // NUMPAD\r\n    Keys[\"Num0\"] = \"Numpad0\";\r\n    Keys[\"Num1\"] = \"Numpad1\";\r\n    Keys[\"Num2\"] = \"Numpad2\";\r\n    Keys[\"Num3\"] = \"Numpad3\";\r\n    Keys[\"Num4\"] = \"Numpad4\";\r\n    Keys[\"Num5\"] = \"Numpad5\";\r\n    Keys[\"Num6\"] = \"Numpad6\";\r\n    Keys[\"Num7\"] = \"Numpad7\";\r\n    Keys[\"Num8\"] = \"Numpad8\";\r\n    Keys[\"Num9\"] = \"Numpad9\";\r\n    Keys[\"NumAdd\"] = \"NumpadAdd\";\r\n    Keys[\"NumSubtract\"] = \"NumpadSubtract\";\r\n    Keys[\"NumMultiply\"] = \"NumpadMultiply\";\r\n    Keys[\"NumDivide\"] = \"NumpadDivide\";\r\n    // NumComma = 'NumpadComma', // not x-browser\r\n    Keys[\"NumDecimal\"] = \"NumpadDecimal\";\r\n    Keys[\"Numpad0\"] = \"Numpad0\";\r\n    Keys[\"Numpad1\"] = \"Numpad1\";\r\n    Keys[\"Numpad2\"] = \"Numpad2\";\r\n    Keys[\"Numpad3\"] = \"Numpad3\";\r\n    Keys[\"Numpad4\"] = \"Numpad4\";\r\n    Keys[\"Numpad5\"] = \"Numpad5\";\r\n    Keys[\"Numpad6\"] = \"Numpad6\";\r\n    Keys[\"Numpad7\"] = \"Numpad7\";\r\n    Keys[\"Numpad8\"] = \"Numpad8\";\r\n    Keys[\"Numpad9\"] = \"Numpad9\";\r\n    Keys[\"NumpadAdd\"] = \"NumpadAdd\";\r\n    Keys[\"NumpadSubtract\"] = \"NumpadSubtract\";\r\n    Keys[\"NumpadMultiply\"] = \"NumpadMultiply\";\r\n    Keys[\"NumpadDivide\"] = \"NumpadDivide\";\r\n    // NumpadComma = 'NumpadComma', // not x-browser\r\n    Keys[\"NumpadDecimal\"] = \"NumpadDecimal\";\r\n    // MODIFIERS\r\n    Keys[\"NumLock\"] = \"NumLock\";\r\n    Keys[\"ShiftLeft\"] = \"ShiftLeft\";\r\n    Keys[\"ShiftRight\"] = \"ShiftRight\";\r\n    Keys[\"AltLeft\"] = \"AltLeft\";\r\n    Keys[\"AltRight\"] = \"AltRight\";\r\n    // NUMBERS\r\n    Keys[\"Key0\"] = \"Digit0\";\r\n    Keys[\"Key1\"] = \"Digit1\";\r\n    Keys[\"Key2\"] = \"Digit2\";\r\n    Keys[\"Key3\"] = \"Digit3\";\r\n    Keys[\"Key4\"] = \"Digit4\";\r\n    Keys[\"Key5\"] = \"Digit5\";\r\n    Keys[\"Key6\"] = \"Digit6\";\r\n    Keys[\"Key7\"] = \"Digit7\";\r\n    Keys[\"Key8\"] = \"Digit8\";\r\n    Keys[\"Key9\"] = \"Digit9\";\r\n    Keys[\"Digit0\"] = \"Digit0\";\r\n    Keys[\"Digit1\"] = \"Digit1\";\r\n    Keys[\"Digit2\"] = \"Digit2\";\r\n    Keys[\"Digit3\"] = \"Digit3\";\r\n    Keys[\"Digit4\"] = \"Digit4\";\r\n    Keys[\"Digit5\"] = \"Digit5\";\r\n    Keys[\"Digit6\"] = \"Digit6\";\r\n    Keys[\"Digit7\"] = \"Digit7\";\r\n    Keys[\"Digit8\"] = \"Digit8\";\r\n    Keys[\"Digit9\"] = \"Digit9\";\r\n    // LETTERS\r\n    Keys[\"A\"] = \"KeyA\";\r\n    Keys[\"B\"] = \"KeyB\";\r\n    Keys[\"C\"] = \"KeyC\";\r\n    Keys[\"D\"] = \"KeyD\";\r\n    Keys[\"E\"] = \"KeyE\";\r\n    Keys[\"F\"] = \"KeyF\";\r\n    Keys[\"G\"] = \"KeyG\";\r\n    Keys[\"H\"] = \"KeyH\";\r\n    Keys[\"I\"] = \"KeyI\";\r\n    Keys[\"J\"] = \"KeyJ\";\r\n    Keys[\"K\"] = \"KeyK\";\r\n    Keys[\"L\"] = \"KeyL\";\r\n    Keys[\"M\"] = \"KeyM\";\r\n    Keys[\"N\"] = \"KeyN\";\r\n    Keys[\"O\"] = \"KeyO\";\r\n    Keys[\"P\"] = \"KeyP\";\r\n    Keys[\"Q\"] = \"KeyQ\";\r\n    Keys[\"R\"] = \"KeyR\";\r\n    Keys[\"S\"] = \"KeyS\";\r\n    Keys[\"T\"] = \"KeyT\";\r\n    Keys[\"U\"] = \"KeyU\";\r\n    Keys[\"V\"] = \"KeyV\";\r\n    Keys[\"W\"] = \"KeyW\";\r\n    Keys[\"X\"] = \"KeyX\";\r\n    Keys[\"Y\"] = \"KeyY\";\r\n    Keys[\"Z\"] = \"KeyZ\";\r\n    Keys[\"KeyA\"] = \"KeyA\";\r\n    Keys[\"KeyB\"] = \"KeyB\";\r\n    Keys[\"KeyC\"] = \"KeyC\";\r\n    Keys[\"KeyD\"] = \"KeyD\";\r\n    Keys[\"KeyE\"] = \"KeyE\";\r\n    Keys[\"KeyF\"] = \"KeyF\";\r\n    Keys[\"KeyG\"] = \"KeyG\";\r\n    Keys[\"KeyH\"] = \"KeyH\";\r\n    Keys[\"KeyI\"] = \"KeyI\";\r\n    Keys[\"KeyJ\"] = \"KeyJ\";\r\n    Keys[\"KeyK\"] = \"KeyK\";\r\n    Keys[\"KeyL\"] = \"KeyL\";\r\n    Keys[\"KeyM\"] = \"KeyM\";\r\n    Keys[\"KeyN\"] = \"KeyN\";\r\n    Keys[\"KeyO\"] = \"KeyO\";\r\n    Keys[\"KeyP\"] = \"KeyP\";\r\n    Keys[\"KeyQ\"] = \"KeyQ\";\r\n    Keys[\"KeyR\"] = \"KeyR\";\r\n    Keys[\"KeyS\"] = \"KeyS\";\r\n    Keys[\"KeyT\"] = \"KeyT\";\r\n    Keys[\"KeyU\"] = \"KeyU\";\r\n    Keys[\"KeyV\"] = \"KeyV\";\r\n    Keys[\"KeyW\"] = \"KeyW\";\r\n    Keys[\"KeyX\"] = \"KeyX\";\r\n    Keys[\"KeyY\"] = \"KeyY\";\r\n    Keys[\"KeyZ\"] = \"KeyZ\";\r\n    // SYMBOLS\r\n    Keys[\"Semicolon\"] = \"Semicolon\";\r\n    Keys[\"Quote\"] = \"Quote\";\r\n    Keys[\"Comma\"] = \"Comma\";\r\n    Keys[\"Minus\"] = \"Minus\";\r\n    Keys[\"Period\"] = \"Period\";\r\n    Keys[\"Slash\"] = \"Slash\";\r\n    Keys[\"Equal\"] = \"Equal\";\r\n    Keys[\"BracketLeft\"] = \"BracketLeft\";\r\n    Keys[\"Backslash\"] = \"Backslash\";\r\n    Keys[\"BracketRight\"] = \"BracketRight\";\r\n    Keys[\"Backquote\"] = \"Backquote\";\r\n    // DIRECTIONS\r\n    Keys[\"Up\"] = \"ArrowUp\";\r\n    Keys[\"Down\"] = \"ArrowDown\";\r\n    Keys[\"Left\"] = \"ArrowLeft\";\r\n    Keys[\"Right\"] = \"ArrowRight\";\r\n    Keys[\"ArrowUp\"] = \"ArrowUp\";\r\n    Keys[\"ArrowDown\"] = \"ArrowDown\";\r\n    Keys[\"ArrowLeft\"] = \"ArrowLeft\";\r\n    Keys[\"ArrowRight\"] = \"ArrowRight\";\r\n    // OTHER\r\n    Keys[\"Space\"] = \"Space\";\r\n    Keys[\"Esc\"] = \"Escape\";\r\n    Keys[\"Escape\"] = \"Escape\";\r\n})(Keys || (Keys = {}));\r\n/**\r\n * Event thrown on a game object for a key event\r\n */\r\nclass KeyEvent extends GameEvent {\r\n    /**\r\n     * @param key  The key responsible for throwing the event\r\n     * @param value The key's typed value the browser detected\r\n     * @param originalEvent The original keyboard event that Excalibur handled\r\n     */\r\n    constructor(key, value, originalEvent) {\r\n        super();\r\n        this.key = key;\r\n        this.value = value;\r\n        this.originalEvent = originalEvent;\r\n    }\r\n}\r\n/**\r\n * Provides keyboard support for Excalibur.\r\n */\r\nclass Keyboard extends Class {\r\n    constructor() {\r\n        super();\r\n        this._keys = [];\r\n        this._keysUp = [];\r\n        this._keysDown = [];\r\n    }\r\n    on(eventName, handler) {\r\n        super.on(eventName, handler);\r\n    }\r\n    /**\r\n     * Initialize Keyboard event listeners\r\n     */\r\n    init(global) {\r\n        if (!global) {\r\n            try {\r\n                // Try and listen to events on top window frame if within an iframe.\r\n                //\r\n                // See https://github.com/excaliburjs/Excalibur/issues/1294\r\n                //\r\n                // Attempt to add an event listener, which triggers a DOMException on\r\n                // cross-origin iframes\r\n                const noop = () => {\r\n                    return;\r\n                };\r\n                window.top.addEventListener('blur', noop);\r\n                window.top.removeEventListener('blur', noop);\r\n                // this will be the same as window if not embedded within an iframe\r\n                global = window.top;\r\n            }\r\n            catch (_a) {\r\n                // fallback to current frame\r\n                global = window;\r\n                Logger.getInstance().warn('Failed to bind to keyboard events to top frame. ' +\r\n                    'If you are trying to embed Excalibur in a cross-origin iframe, keyboard events will not fire.');\r\n            }\r\n        }\r\n        global.addEventListener('blur', () => {\r\n            this._keys.length = 0; // empties array efficiently\r\n        });\r\n        // key up is on window because canvas cannot have focus\r\n        global.addEventListener('keyup', (ev) => {\r\n            const code = ev.code;\r\n            const key = this._keys.indexOf(code);\r\n            this._keys.splice(key, 1);\r\n            this._keysUp.push(code);\r\n            const keyEvent = new KeyEvent(code, ev.key, ev);\r\n            // alias the old api, we may want to deprecate this in the future\r\n            this.eventDispatcher.emit('up', keyEvent);\r\n            this.eventDispatcher.emit('release', keyEvent);\r\n        });\r\n        // key down is on window because canvas cannot have focus\r\n        global.addEventListener('keydown', (ev) => {\r\n            const code = ev.code;\r\n            if (this._keys.indexOf(code) === -1) {\r\n                this._keys.push(code);\r\n                this._keysDown.push(code);\r\n                const keyEvent = new KeyEvent(code, ev.key, ev);\r\n                this.eventDispatcher.emit('down', keyEvent);\r\n                this.eventDispatcher.emit('press', keyEvent);\r\n            }\r\n        });\r\n    }\r\n    update() {\r\n        // Reset keysDown and keysUp after update is complete\r\n        this._keysDown.length = 0;\r\n        this._keysUp.length = 0;\r\n        // Emit synthetic \"hold\" event\r\n        for (let i = 0; i < this._keys.length; i++) {\r\n            this.eventDispatcher.emit('hold', new KeyEvent(this._keys[i]));\r\n        }\r\n    }\r\n    /**\r\n     * Gets list of keys being pressed down\r\n     */\r\n    getKeys() {\r\n        return this._keys;\r\n    }\r\n    /**\r\n     * Tests if a certain key was just pressed this frame. This is cleared at the end of the update frame.\r\n     * @param key Test whether a key was just pressed\r\n     */\r\n    wasPressed(key) {\r\n        return this._keysDown.indexOf(key) > -1;\r\n    }\r\n    /**\r\n     * Tests if a certain key is held down. This is persisted between frames.\r\n     * @param key  Test whether a key is held down\r\n     */\r\n    isHeld(key) {\r\n        return this._keys.indexOf(key) > -1;\r\n    }\r\n    /**\r\n     * Tests if a certain key was just released this frame. This is cleared at the end of the update frame.\r\n     * @param key  Test whether a key was just released\r\n     */\r\n    wasReleased(key) {\r\n        return this._keysUp.indexOf(key) > -1;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Input/Gamepad.ts\n\r\n\r\n/**\r\n * Excalibur leverages the HTML5 Gamepad API [where it is supported](http://caniuse.com/#feat=gamepad)\r\n * to provide controller support for your games.\r\n */\r\nclass Gamepads extends Class {\r\n    constructor() {\r\n        super();\r\n        /**\r\n         * Whether or not to poll for Gamepad input (default: `false`)\r\n         */\r\n        this.enabled = false;\r\n        /**\r\n         * Whether or not Gamepad API is supported\r\n         */\r\n        this.supported = !!navigator.getGamepads;\r\n        this._gamePadTimeStamps = [0, 0, 0, 0];\r\n        this._oldPads = [];\r\n        this._pads = [];\r\n        this._initSuccess = false;\r\n        this._navigator = navigator;\r\n        this._minimumConfiguration = null;\r\n    }\r\n    init() {\r\n        if (!this.supported) {\r\n            return;\r\n        }\r\n        if (this._initSuccess) {\r\n            return;\r\n        }\r\n        // In Chrome, this will return 4 undefined items until a button is pressed\r\n        // In FF, this will not return any items until a button is pressed\r\n        this._oldPads = this._clonePads(this._navigator.getGamepads());\r\n        if (this._oldPads.length && this._oldPads[0]) {\r\n            this._initSuccess = true;\r\n        }\r\n    }\r\n    /**\r\n     * Sets the minimum gamepad configuration, for example {axis: 4, buttons: 4} means\r\n     * this game requires at minimum 4 axis inputs and 4 buttons, this is not restrictive\r\n     * all other controllers with more axis or buttons are valid as well. If no minimum\r\n     * configuration is set all pads are valid.\r\n     */\r\n    setMinimumGamepadConfiguration(config) {\r\n        this._enableAndUpdate(); // if config is used, implicitly enable\r\n        this._minimumConfiguration = config;\r\n    }\r\n    /**\r\n     * When implicitly enabled, set the enabled flag and run an update so information is updated\r\n     */\r\n    _enableAndUpdate() {\r\n        if (!this.enabled) {\r\n            this.enabled = true;\r\n            this.update();\r\n        }\r\n    }\r\n    /**\r\n     * Checks a navigator gamepad against the minimum configuration if present.\r\n     */\r\n    _isGamepadValid(pad) {\r\n        if (!this._minimumConfiguration) {\r\n            return true;\r\n        }\r\n        if (!pad) {\r\n            return false;\r\n        }\r\n        const axesLength = pad.axes.filter((value) => {\r\n            return typeof value !== undefined;\r\n        }).length;\r\n        const buttonLength = pad.buttons.filter((value) => {\r\n            return typeof value !== undefined;\r\n        }).length;\r\n        return axesLength >= this._minimumConfiguration.axis && buttonLength >= this._minimumConfiguration.buttons && pad.connected;\r\n    }\r\n    on(eventName, handler) {\r\n        this._enableAndUpdate(); // implicitly enable\r\n        super.on(eventName, handler);\r\n    }\r\n    off(eventName, handler) {\r\n        this._enableAndUpdate(); // implicitly enable\r\n        super.off(eventName, handler);\r\n    }\r\n    /**\r\n     * Updates Gamepad state and publishes Gamepad events\r\n     */\r\n    update() {\r\n        if (!this.enabled || !this.supported) {\r\n            return;\r\n        }\r\n        this.init();\r\n        const gamepads = this._navigator.getGamepads();\r\n        for (let i = 0; i < gamepads.length; i++) {\r\n            if (!gamepads[i]) {\r\n                const gamepad = this.at(i);\r\n                // If was connected, but now isn't emit the disconnect event\r\n                if (gamepad.connected) {\r\n                    this.eventDispatcher.emit('disconnect', new GamepadDisconnectEvent(i, gamepad));\r\n                }\r\n                // Reset connection status\r\n                gamepad.connected = false;\r\n                continue;\r\n            }\r\n            else {\r\n                if (!this.at(i).connected && this._isGamepadValid(gamepads[i])) {\r\n                    this.eventDispatcher.emit('connect', new GamepadConnectEvent(i, this.at(i)));\r\n                }\r\n                // Set connection status\r\n                this.at(i).connected = true;\r\n            }\r\n            // Only supported in Chrome\r\n            if (gamepads[i].timestamp && gamepads[i].timestamp === this._gamePadTimeStamps[i]) {\r\n                continue;\r\n            }\r\n            this._gamePadTimeStamps[i] = gamepads[i].timestamp;\r\n            // Add reference to navigator gamepad\r\n            this.at(i).navigatorGamepad = gamepads[i];\r\n            // Buttons\r\n            let b, bi, a, ai, value;\r\n            for (b in Buttons) {\r\n                bi = Buttons[b];\r\n                if (typeof bi === 'number') {\r\n                    if (gamepads[i].buttons[bi]) {\r\n                        value = gamepads[i].buttons[bi].value;\r\n                        if (value !== this._oldPads[i].getButton(bi)) {\r\n                            if (gamepads[i].buttons[bi].pressed) {\r\n                                this.at(i).updateButton(bi, value);\r\n                                this.at(i).eventDispatcher.emit('button', new GamepadButtonEvent(bi, value, this.at(i)));\r\n                            }\r\n                            else {\r\n                                this.at(i).updateButton(bi, 0);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            // Axes\r\n            for (a in Axes) {\r\n                ai = Axes[a];\r\n                if (typeof ai === 'number') {\r\n                    value = gamepads[i].axes[ai];\r\n                    if (value !== this._oldPads[i].getAxes(ai)) {\r\n                        this.at(i).updateAxes(ai, value);\r\n                        this.at(i).eventDispatcher.emit('axis', new GamepadAxisEvent(ai, value, this.at(i)));\r\n                    }\r\n                }\r\n            }\r\n            this._oldPads[i] = this._clonePad(gamepads[i]);\r\n        }\r\n    }\r\n    /**\r\n     * Safely retrieves a Gamepad at a specific index and creates one if it doesn't yet exist\r\n     */\r\n    at(index) {\r\n        this._enableAndUpdate(); // implicitly enable gamepads when at() is called\r\n        if (index >= this._pads.length) {\r\n            // Ensure there is a pad to retrieve\r\n            for (let i = this._pads.length - 1, max = index; i < max; i++) {\r\n                this._pads.push(new Gamepad());\r\n                this._oldPads.push(new Gamepad());\r\n            }\r\n        }\r\n        return this._pads[index];\r\n    }\r\n    /**\r\n     * Returns a list of all valid gamepads that meet the minimum configuration requirement.\r\n     */\r\n    getValidGamepads() {\r\n        this._enableAndUpdate();\r\n        const result = [];\r\n        for (let i = 0; i < this._pads.length; i++) {\r\n            if (this._isGamepadValid(this.at(i).navigatorGamepad) && this.at(i).connected) {\r\n                result.push(this.at(i));\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * Gets the number of connected gamepads\r\n     */\r\n    count() {\r\n        return this._pads.filter((p) => p.connected).length;\r\n    }\r\n    _clonePads(pads) {\r\n        const arr = [];\r\n        for (let i = 0, len = pads.length; i < len; i++) {\r\n            arr.push(this._clonePad(pads[i]));\r\n        }\r\n        return arr;\r\n    }\r\n    /**\r\n     * Fastest way to clone a known object is to do it yourself\r\n     */\r\n    _clonePad(pad) {\r\n        let i, len;\r\n        const clonedPad = new Gamepad();\r\n        if (!pad) {\r\n            return clonedPad;\r\n        }\r\n        for (i = 0, len = pad.buttons.length; i < len; i++) {\r\n            if (pad.buttons[i]) {\r\n                clonedPad.updateButton(i, pad.buttons[i].value);\r\n            }\r\n        }\r\n        for (i = 0, len = pad.axes.length; i < len; i++) {\r\n            clonedPad.updateAxes(i, pad.axes[i]);\r\n        }\r\n        return clonedPad;\r\n    }\r\n}\r\n/**\r\n * The minimum value an axis has to move before considering it a change\r\n */\r\nGamepads.MinAxisMoveThreshold = 0.05;\r\n/**\r\n * Gamepad holds state information for a connected controller. See [[Gamepads]]\r\n * for more information on handling controller input.\r\n */\r\nclass Gamepad extends Class {\r\n    constructor() {\r\n        super();\r\n        this.connected = false;\r\n        this._buttons = new Array(16);\r\n        this._axes = new Array(4);\r\n        for (let i = 0; i < this._buttons.length; i++) {\r\n            this._buttons[i] = 0;\r\n        }\r\n        for (let i = 0; i < this._axes.length; i++) {\r\n            this._axes[i] = 0;\r\n        }\r\n    }\r\n    /**\r\n     * Whether or not the given button is pressed\r\n     * @param button     The button to query\r\n     * @param threshold  The threshold over which the button is considered to be pressed\r\n     */\r\n    isButtonPressed(button, threshold = 1) {\r\n        return this._buttons[button] >= threshold;\r\n    }\r\n    /**\r\n     * Gets the given button value between 0 and 1\r\n     */\r\n    getButton(button) {\r\n        return this._buttons[button];\r\n    }\r\n    /**\r\n     * Gets the given axis value between -1 and 1. Values below\r\n     * [[MinAxisMoveThreshold]] are considered 0.\r\n     */\r\n    getAxes(axes) {\r\n        const value = this._axes[axes];\r\n        if (Math.abs(value) < Gamepads.MinAxisMoveThreshold) {\r\n            return 0;\r\n        }\r\n        else {\r\n            return value;\r\n        }\r\n    }\r\n    updateButton(buttonIndex, value) {\r\n        this._buttons[buttonIndex] = value;\r\n    }\r\n    updateAxes(axesIndex, value) {\r\n        this._axes[axesIndex] = value;\r\n    }\r\n}\r\n/**\r\n * Gamepad Buttons enumeration\r\n */\r\nvar Buttons;\r\n(function (Buttons) {\r\n    /**\r\n     * Face 1 button (e.g. A)\r\n     */\r\n    Buttons[Buttons[\"Face1\"] = 0] = \"Face1\";\r\n    /**\r\n     * Face 2 button (e.g. B)\r\n     */\r\n    Buttons[Buttons[\"Face2\"] = 1] = \"Face2\";\r\n    /**\r\n     * Face 3 button (e.g. X)\r\n     */\r\n    Buttons[Buttons[\"Face3\"] = 2] = \"Face3\";\r\n    /**\r\n     * Face 4 button (e.g. Y)\r\n     */\r\n    Buttons[Buttons[\"Face4\"] = 3] = \"Face4\";\r\n    /**\r\n     * Left bumper button\r\n     */\r\n    Buttons[Buttons[\"LeftBumper\"] = 4] = \"LeftBumper\";\r\n    /**\r\n     * Right bumper button\r\n     */\r\n    Buttons[Buttons[\"RightBumper\"] = 5] = \"RightBumper\";\r\n    /**\r\n     * Left trigger button\r\n     */\r\n    Buttons[Buttons[\"LeftTrigger\"] = 6] = \"LeftTrigger\";\r\n    /**\r\n     * Right trigger button\r\n     */\r\n    Buttons[Buttons[\"RightTrigger\"] = 7] = \"RightTrigger\";\r\n    /**\r\n     * Select button\r\n     */\r\n    Buttons[Buttons[\"Select\"] = 8] = \"Select\";\r\n    /**\r\n     * Start button\r\n     */\r\n    Buttons[Buttons[\"Start\"] = 9] = \"Start\";\r\n    /**\r\n     * Left analog stick press (e.g. L3)\r\n     */\r\n    Buttons[Buttons[\"LeftStick\"] = 10] = \"LeftStick\";\r\n    /**\r\n     * Right analog stick press (e.g. R3)\r\n     */\r\n    Buttons[Buttons[\"RightStick\"] = 11] = \"RightStick\";\r\n    /**\r\n     * D-pad up\r\n     */\r\n    Buttons[Buttons[\"DpadUp\"] = 12] = \"DpadUp\";\r\n    /**\r\n     * D-pad down\r\n     */\r\n    Buttons[Buttons[\"DpadDown\"] = 13] = \"DpadDown\";\r\n    /**\r\n     * D-pad left\r\n     */\r\n    Buttons[Buttons[\"DpadLeft\"] = 14] = \"DpadLeft\";\r\n    /**\r\n     * D-pad right\r\n     */\r\n    Buttons[Buttons[\"DpadRight\"] = 15] = \"DpadRight\";\r\n})(Buttons || (Buttons = {}));\r\n/**\r\n * Gamepad Axes enumeration\r\n */\r\nvar Axes;\r\n(function (Axes) {\r\n    /**\r\n     * Left analogue stick X direction\r\n     */\r\n    Axes[Axes[\"LeftStickX\"] = 0] = \"LeftStickX\";\r\n    /**\r\n     * Left analogue stick Y direction\r\n     */\r\n    Axes[Axes[\"LeftStickY\"] = 1] = \"LeftStickY\";\r\n    /**\r\n     * Right analogue stick X direction\r\n     */\r\n    Axes[Axes[\"RightStickX\"] = 2] = \"RightStickX\";\r\n    /**\r\n     * Right analogue stick Y direction\r\n     */\r\n    Axes[Axes[\"RightStickY\"] = 3] = \"RightStickY\";\r\n})(Axes || (Axes = {}));\r\n\n;// CONCATENATED MODULE: ./Util/Browser.ts\nclass BrowserComponent {\r\n    constructor(nativeComponent) {\r\n        this.nativeComponent = nativeComponent;\r\n        this._paused = false;\r\n        this._nativeHandlers = {};\r\n    }\r\n    on(eventName, handler) {\r\n        if (this._nativeHandlers[eventName]) {\r\n            this.off(eventName, this._nativeHandlers[eventName]);\r\n        }\r\n        this._nativeHandlers[eventName] = this._decorate(handler);\r\n        this.nativeComponent.addEventListener(eventName, this._nativeHandlers[eventName]);\r\n    }\r\n    off(eventName, handler) {\r\n        if (!handler) {\r\n            handler = this._nativeHandlers[eventName];\r\n        }\r\n        this.nativeComponent.removeEventListener(eventName, handler);\r\n        this._nativeHandlers[eventName] = null;\r\n    }\r\n    _decorate(handler) {\r\n        return (evt) => {\r\n            if (!this._paused) {\r\n                handler(evt);\r\n            }\r\n        };\r\n    }\r\n    pause() {\r\n        this._paused = true;\r\n    }\r\n    resume() {\r\n        this._paused = false;\r\n    }\r\n    clear() {\r\n        for (const event in this._nativeHandlers) {\r\n            this.off(event);\r\n        }\r\n    }\r\n}\r\nclass BrowserEvents {\r\n    constructor(_windowGlobal, _documentGlobal) {\r\n        this._windowGlobal = _windowGlobal;\r\n        this._documentGlobal = _documentGlobal;\r\n        this._windowComponent = new BrowserComponent(this._windowGlobal);\r\n        this._documentComponent = new BrowserComponent(this._documentGlobal);\r\n    }\r\n    get window() {\r\n        return this._windowComponent;\r\n    }\r\n    get document() {\r\n        return this._documentComponent;\r\n    }\r\n    pause() {\r\n        this.window.pause();\r\n        this.document.pause();\r\n    }\r\n    resume() {\r\n        this.window.resume();\r\n        this.document.resume();\r\n    }\r\n    clear() {\r\n        this.window.clear();\r\n        this.document.clear();\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/Context/ExcaliburGraphicsContext2DCanvas.ts\n\r\n\r\n\r\n\r\nclass ExcaliburGraphicsContext2DCanvasDebug {\r\n    constructor(_ex) {\r\n        this._ex = _ex;\r\n        this._debugText = new DebugText();\r\n    }\r\n    /**\r\n     * Draw a debug rectangle to the context\r\n     * @param x\r\n     * @param y\r\n     * @param width\r\n     * @param height\r\n     */\r\n    drawRect(x, y, width, height) {\r\n        this._ex.__ctx.save();\r\n        this._ex.__ctx.strokeStyle = 'red';\r\n        this._ex.__ctx.strokeRect(this._ex.snapToPixel ? ~~x : x, this._ex.snapToPixel ? ~~y : y, this._ex.snapToPixel ? ~~width : width, this._ex.snapToPixel ? ~~height : height);\r\n        this._ex.__ctx.restore();\r\n    }\r\n    drawLine(start, end, lineOptions = { color: Color.Black }) {\r\n        this._ex.__ctx.save();\r\n        this._ex.__ctx.beginPath();\r\n        this._ex.__ctx.strokeStyle = lineOptions.color.toString();\r\n        this._ex.__ctx.moveTo(this._ex.snapToPixel ? ~~start.x : start.x, this._ex.snapToPixel ? ~~start.y : start.y);\r\n        this._ex.__ctx.lineTo(this._ex.snapToPixel ? ~~end.x : end.x, this._ex.snapToPixel ? ~~end.y : end.y);\r\n        this._ex.__ctx.lineWidth = 2;\r\n        this._ex.__ctx.stroke();\r\n        this._ex.__ctx.closePath();\r\n        this._ex.__ctx.restore();\r\n    }\r\n    drawPoint(point, pointOptions = { color: Color.Black, size: 5 }) {\r\n        this._ex.__ctx.save();\r\n        this._ex.__ctx.beginPath();\r\n        this._ex.__ctx.fillStyle = pointOptions.color.toString();\r\n        this._ex.__ctx.arc(this._ex.snapToPixel ? ~~point.x : point.x, this._ex.snapToPixel ? ~~point.y : point.y, pointOptions.size, 0, Math.PI * 2);\r\n        this._ex.__ctx.fill();\r\n        this._ex.__ctx.closePath();\r\n        this._ex.__ctx.restore();\r\n    }\r\n    drawText(text, pos) {\r\n        this._debugText.write(this._ex, text, pos);\r\n    }\r\n}\r\nclass ExcaliburGraphicsContext2DCanvas {\r\n    constructor(options) {\r\n        this.backgroundColor = Color.ExcaliburBlue;\r\n        this._state = new StateStack();\r\n        this.snapToPixel = true;\r\n        this.debug = new ExcaliburGraphicsContext2DCanvasDebug(this);\r\n        const { canvasElement, enableTransparency, snapToPixel, smoothing, backgroundColor } = options;\r\n        this.__ctx = canvasElement.getContext('2d', {\r\n            alpha: enableTransparency !== null && enableTransparency !== void 0 ? enableTransparency : true\r\n        });\r\n        this.backgroundColor = backgroundColor !== null && backgroundColor !== void 0 ? backgroundColor : this.backgroundColor;\r\n        this.snapToPixel = snapToPixel !== null && snapToPixel !== void 0 ? snapToPixel : this.snapToPixel;\r\n        this.smoothing = smoothing !== null && smoothing !== void 0 ? smoothing : this.smoothing;\r\n    }\r\n    get width() {\r\n        return this.__ctx.canvas.width;\r\n    }\r\n    get height() {\r\n        return this.__ctx.canvas.height;\r\n    }\r\n    get opacity() {\r\n        return this._state.current.opacity;\r\n    }\r\n    set opacity(value) {\r\n        this._state.current.opacity = value;\r\n    }\r\n    get smoothing() {\r\n        return this.__ctx.imageSmoothingEnabled;\r\n    }\r\n    set smoothing(value) {\r\n        this.__ctx.imageSmoothingEnabled = value;\r\n    }\r\n    resetTransform() {\r\n        this.__ctx.resetTransform();\r\n    }\r\n    updateViewport(_resolution) {\r\n        // pass\r\n    }\r\n    drawImage(image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight) {\r\n        if (swidth === 0 || sheight === 0) {\r\n            return; // zero dimension dest exit early\r\n        }\r\n        else if (dwidth === 0 || dheight === 0) {\r\n            return; // zero dimension dest exit early\r\n        }\r\n        else if (image.width === 0 || image.height === 0) {\r\n            return; // zero dimension source exit early\r\n        }\r\n        this.__ctx.globalAlpha = this.opacity;\r\n        const args = [image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight]\r\n            .filter((a) => a !== undefined)\r\n            .map((a) => (typeof a === 'number' && this.snapToPixel ? ~~a : a));\r\n        this.__ctx.drawImage.apply(this.__ctx, args);\r\n        GraphicsDiagnostics.DrawCallCount++;\r\n        GraphicsDiagnostics.DrawnImagesCount = 1;\r\n    }\r\n    drawLine(start, end, color, thickness = 1) {\r\n        this.__ctx.save();\r\n        this.__ctx.beginPath();\r\n        this.__ctx.strokeStyle = color.toString();\r\n        this.__ctx.moveTo(this.snapToPixel ? ~~start.x : start.x, this.snapToPixel ? ~~start.y : start.y);\r\n        this.__ctx.lineTo(this.snapToPixel ? ~~end.x : end.x, this.snapToPixel ? ~~end.y : end.y);\r\n        this.__ctx.lineWidth = thickness;\r\n        this.__ctx.stroke();\r\n        this.__ctx.closePath();\r\n        this.__ctx.restore();\r\n    }\r\n    drawRectangle(pos, width, height, color) {\r\n        this.__ctx.save();\r\n        this.__ctx.fillStyle = color.toString();\r\n        this.__ctx.fillRect(this.snapToPixel ? ~~pos.x : pos.x, this.snapToPixel ? ~~pos.y : pos.y, this.snapToPixel ? ~~width : width, this.snapToPixel ? ~~height : height);\r\n        this.__ctx.restore();\r\n    }\r\n    drawCircle(pos, radius, color, stroke, thickness) {\r\n        this.__ctx.save();\r\n        this.__ctx.beginPath();\r\n        if (stroke) {\r\n            this.__ctx.strokeStyle = stroke.toString();\r\n        }\r\n        if (thickness) {\r\n            this.__ctx.lineWidth = thickness;\r\n        }\r\n        this.__ctx.fillStyle = color.toString();\r\n        this.__ctx.arc(this.snapToPixel ? ~~pos.x : pos.x, this.snapToPixel ? ~~pos.y : pos.y, radius, 0, Math.PI * 2);\r\n        this.__ctx.fill();\r\n        if (stroke) {\r\n            this.__ctx.stroke();\r\n        }\r\n        this.__ctx.closePath();\r\n        this.__ctx.restore();\r\n    }\r\n    /**\r\n     * Save the current state of the canvas to the stack (transforms and opacity)\r\n     */\r\n    save() {\r\n        this.__ctx.save();\r\n    }\r\n    /**\r\n     * Restore the state of the canvas from the stack\r\n     */\r\n    restore() {\r\n        this.__ctx.restore();\r\n    }\r\n    /**\r\n     * Translate the origin of the context by an x and y\r\n     * @param x\r\n     * @param y\r\n     */\r\n    translate(x, y) {\r\n        this.__ctx.translate(this.snapToPixel ? ~~x : x, this.snapToPixel ? ~~y : y);\r\n    }\r\n    /**\r\n     * Rotate the context about the current origin\r\n     */\r\n    rotate(angle) {\r\n        this.__ctx.rotate(angle);\r\n    }\r\n    /**\r\n     * Scale the context by an x and y factor\r\n     * @param x\r\n     * @param y\r\n     */\r\n    scale(x, y) {\r\n        this.__ctx.scale(x, y);\r\n    }\r\n    getTransform() {\r\n        throw new Error('Not implemented');\r\n    }\r\n    multiply(_m) {\r\n        this.__ctx.setTransform(this.__ctx.getTransform().multiply(_m.toDOMMatrix()));\r\n    }\r\n    addPostProcessor(_postprocessor) {\r\n        throw Error('Not implemented');\r\n    }\r\n    removePostProcessor(_postprocessor) {\r\n        throw Error('Not implemented');\r\n    }\r\n    clearPostProcessors() {\r\n        throw Error('Not implemented');\r\n    }\r\n    beginDrawLifecycle() {\r\n        // pass\r\n    }\r\n    endDrawLifecycle() {\r\n        // pass\r\n    }\r\n    clear() {\r\n        // Clear frame\r\n        this.__ctx.clearRect(0, 0, this.width, this.height);\r\n        this.__ctx.fillStyle = this.backgroundColor.toString();\r\n        this.__ctx.fillRect(0, 0, this.width, this.height);\r\n        GraphicsDiagnostics.clear();\r\n    }\r\n    /**\r\n     * Flushes the batched draw calls to the screen\r\n     */\r\n    flush() {\r\n        // pass\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Math/global-coordinates.ts\n\r\nclass GlobalCoordinates {\r\n    constructor(worldPos, pagePos, screenPos) {\r\n        this.worldPos = worldPos;\r\n        this.pagePos = pagePos;\r\n        this.screenPos = screenPos;\r\n    }\r\n    static fromPagePosition(xOrPos, yOrEngine, engineOrUndefined) {\r\n        let pageX;\r\n        let pageY;\r\n        let pagePos;\r\n        let engine;\r\n        if (arguments.length === 3) {\r\n            pageX = xOrPos;\r\n            pageY = yOrEngine;\r\n            pagePos = new Vector(pageX, pageY);\r\n            engine = engineOrUndefined;\r\n        }\r\n        else {\r\n            pagePos = xOrPos;\r\n            pageX = pagePos.x;\r\n            pageY = pagePos.y;\r\n            engine = yOrEngine;\r\n        }\r\n        const screenPos = engine.screen.pageToScreenCoordinates(pagePos);\r\n        const worldPos = engine.screen.screenToWorldCoordinates(screenPos);\r\n        return new GlobalCoordinates(worldPos, pagePos, screenPos);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Input/PointerEvent.ts\nclass PointerEvent {\r\n    constructor(type, pointerId, button, pointerType, coordinates, nativeEvent) {\r\n        this.type = type;\r\n        this.pointerId = pointerId;\r\n        this.button = button;\r\n        this.pointerType = pointerType;\r\n        this.coordinates = coordinates;\r\n        this.nativeEvent = nativeEvent;\r\n        this.active = true;\r\n    }\r\n    cancel() {\r\n        this.active = false;\r\n    }\r\n    get pagePos() {\r\n        return this.coordinates.pagePos;\r\n    }\r\n    get screenPos() {\r\n        return this.coordinates.screenPos;\r\n    }\r\n    get worldPos() {\r\n        return this.coordinates.worldPos;\r\n    }\r\n    ;\r\n}\r\n\n;// CONCATENATED MODULE: ./Input/WheelEvent.ts\nclass WheelEvent {\r\n    constructor(x, y, pageX, pageY, screenX, screenY, index, deltaX, deltaY, deltaZ, deltaMode, ev) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.pageX = pageX;\r\n        this.pageY = pageY;\r\n        this.screenX = screenX;\r\n        this.screenY = screenY;\r\n        this.index = index;\r\n        this.deltaX = deltaX;\r\n        this.deltaY = deltaY;\r\n        this.deltaZ = deltaZ;\r\n        this.deltaMode = deltaMode;\r\n        this.ev = ev;\r\n        this.active = true;\r\n    }\r\n    cancel() {\r\n        this.active = false;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Input/PointerAbstraction.ts\n\r\n\r\nclass PointerAbstraction extends Class {\r\n    constructor() {\r\n        super();\r\n        /**\r\n         * The last position on the document this pointer was at. Can be `null` if pointer was never active.\r\n         */\r\n        this.lastPagePos = Vector.Zero;\r\n        /**\r\n         * The last position on the screen this pointer was at. Can be `null` if pointer was never active.\r\n         */\r\n        this.lastScreenPos = Vector.Zero;\r\n        /**\r\n         * The last position in the game world coordinates this pointer was at. Can be `null` if pointer was never active.\r\n         */\r\n        this.lastWorldPos = Vector.Zero;\r\n        this._onPointerMove = (ev) => {\r\n            this.lastPagePos = new Vector(ev.pagePos.x, ev.pagePos.y);\r\n            this.lastScreenPos = new Vector(ev.screenPos.x, ev.screenPos.y);\r\n            this.lastWorldPos = new Vector(ev.worldPos.x, ev.worldPos.y);\r\n        };\r\n        this._onPointerDown = (ev) => {\r\n            this.lastPagePos = new Vector(ev.pagePos.x, ev.pagePos.y);\r\n            this.lastScreenPos = new Vector(ev.screenPos.x, ev.screenPos.y);\r\n            this.lastWorldPos = new Vector(ev.worldPos.x, ev.worldPos.y);\r\n        };\r\n        this.on('move', this._onPointerMove);\r\n        this.on('down', this._onPointerDown);\r\n    }\r\n    on(event, handler) {\r\n        super.on(event, handler);\r\n    }\r\n    once(event, handler) {\r\n        super.once(event, handler);\r\n    }\r\n    off(event, handler) {\r\n        super.off(event, handler);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Input/WheelDeltaMode.ts\nvar WheelDeltaMode;\r\n(function (WheelDeltaMode) {\r\n    WheelDeltaMode[\"Pixel\"] = \"Pixel\";\r\n    WheelDeltaMode[\"Line\"] = \"Line\";\r\n    WheelDeltaMode[\"Page\"] = \"Page\";\r\n})(WheelDeltaMode || (WheelDeltaMode = {}));\r\n\n;// CONCATENATED MODULE: ./Input/NativePointerButton.ts\n/**\r\n * Native browser button enumeration\r\n */\r\nvar NativePointerButton;\r\n(function (NativePointerButton) {\r\n    NativePointerButton[NativePointerButton[\"NoButton\"] = -1] = \"NoButton\";\r\n    NativePointerButton[NativePointerButton[\"Left\"] = 0] = \"Left\";\r\n    NativePointerButton[NativePointerButton[\"Middle\"] = 1] = \"Middle\";\r\n    NativePointerButton[NativePointerButton[\"Right\"] = 2] = \"Right\";\r\n    NativePointerButton[NativePointerButton[\"Unknown\"] = 3] = \"Unknown\";\r\n})(NativePointerButton || (NativePointerButton = {}));\r\n\n;// CONCATENATED MODULE: ./Input/PointerButton.ts\n/**\r\n * The mouse button being pressed.\r\n */\r\nvar PointerButton;\r\n(function (PointerButton) {\r\n    PointerButton[\"Left\"] = \"Left\";\r\n    PointerButton[\"Middle\"] = \"Middle\";\r\n    PointerButton[\"Right\"] = \"Right\";\r\n    PointerButton[\"Unknown\"] = \"Unknown\";\r\n    PointerButton[\"NoButton\"] = \"NoButton\";\r\n})(PointerButton || (PointerButton = {}));\r\n\n;// CONCATENATED MODULE: ./Input/PointerType.ts\n/**\r\n * The type of pointer for a [[PointerEvent]].\r\n */\r\nvar PointerType;\r\n(function (PointerType) {\r\n    PointerType[\"Touch\"] = \"Touch\";\r\n    PointerType[\"Mouse\"] = \"Mouse\";\r\n    PointerType[\"Pen\"] = \"Pen\";\r\n    PointerType[\"Unknown\"] = \"Unknown\";\r\n})(PointerType || (PointerType = {}));\r\n\n;// CONCATENATED MODULE: ./Input/PointerEventReceiver.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Is this event a native touch event?\r\n */\r\nfunction isTouchEvent(value) {\r\n    // Guard for Safari <= 13.1\r\n    return globalThis.TouchEvent && value instanceof globalThis.TouchEvent;\r\n}\r\n/**\r\n * Is this event a native pointer event\r\n */\r\nfunction isPointerEvent(value) {\r\n    // Guard for Safari <= 13.1\r\n    return globalThis.PointerEvent && value instanceof globalThis.PointerEvent;\r\n}\r\n/**\r\n * The PointerEventProcessor is responsible for collecting all the events from the canvas and transforming them into GlobalCoordinates\r\n */\r\nclass PointerEventReceiver extends Class {\r\n    constructor(target, engine) {\r\n        super();\r\n        this.target = target;\r\n        this.engine = engine;\r\n        this.primary = new PointerAbstraction();\r\n        this._activeNativePointerIdsToNormalized = new Map();\r\n        this.lastFramePointerCoords = new Map();\r\n        this.currentFramePointerCoords = new Map();\r\n        this.currentFramePointerDown = new Map();\r\n        this.lastFramePointerDown = new Map();\r\n        this.currentFrameDown = [];\r\n        this.currentFrameUp = [];\r\n        this.currentFrameMove = [];\r\n        this.currentFrameCancel = [];\r\n        this.currentFrameWheel = [];\r\n        this._pointers = [this.primary];\r\n        this._boundHandle = this._handle.bind(this);\r\n        this._boundWheel = this._handleWheel.bind(this);\r\n    }\r\n    /**\r\n     * Locates a specific pointer by id, creates it if it doesn't exist\r\n     * @param index\r\n     */\r\n    at(index) {\r\n        if (index >= this._pointers.length) {\r\n            // Ensure there is a pointer to retrieve\r\n            for (let i = this._pointers.length - 1, max = index; i < max; i++) {\r\n                this._pointers.push(new PointerAbstraction());\r\n            }\r\n        }\r\n        return this._pointers[index];\r\n    }\r\n    /**\r\n     * The number of pointers currently being tracked by excalibur\r\n     */\r\n    count() {\r\n        return this._pointers.length;\r\n    }\r\n    /**\r\n     * Is the specified pointer id down this frame\r\n     * @param pointerId\r\n     */\r\n    isDown(pointerId) {\r\n        var _a;\r\n        return (_a = this.currentFramePointerDown.get(pointerId)) !== null && _a !== void 0 ? _a : false;\r\n    }\r\n    /**\r\n     * Was the specified pointer id down last frame\r\n     * @param pointerId\r\n     */\r\n    wasDown(pointerId) {\r\n        var _a;\r\n        return (_a = this.lastFramePointerDown.get(pointerId)) !== null && _a !== void 0 ? _a : false;\r\n    }\r\n    /**\r\n     * Whether the Pointer is currently dragging.\r\n     */\r\n    isDragging(pointerId) {\r\n        return this.isDown(pointerId);\r\n    }\r\n    /**\r\n     * Whether the Pointer just started dragging.\r\n     */\r\n    isDragStart(pointerId) {\r\n        return this.isDown(pointerId) && !this.wasDown(pointerId);\r\n    }\r\n    /**\r\n     * Whether the Pointer just ended dragging.\r\n     */\r\n    isDragEnd(pointerId) {\r\n        return !this.isDown(pointerId) && this.wasDown(pointerId);\r\n    }\r\n    on(event, handler) {\r\n        super.on(event, handler);\r\n    }\r\n    once(event, handler) {\r\n        super.once(event, handler);\r\n    }\r\n    off(event, handler) {\r\n        super.off(event, handler);\r\n    }\r\n    /**\r\n     * Called internally by excalibur\r\n     *\r\n     * Updates the current frame pointer info and emits raw pointer events\r\n     *\r\n     * This does not emit events to entities, see PointerSystem\r\n     */\r\n    update() {\r\n        this.lastFramePointerDown = new Map(this.currentFramePointerDown);\r\n        this.lastFramePointerCoords = new Map(this.currentFramePointerCoords);\r\n        for (const event of this.currentFrameDown) {\r\n            this.emit('down', event);\r\n            const pointer = this.at(event.pointerId);\r\n            pointer.emit('down', event);\r\n            this.primary.emit('pointerdown', event);\r\n        }\r\n        for (const event of this.currentFrameUp) {\r\n            this.emit('up', event);\r\n            const pointer = this.at(event.pointerId);\r\n            pointer.emit('up', event);\r\n        }\r\n        for (const event of this.currentFrameMove) {\r\n            this.emit('move', event);\r\n            const pointer = this.at(event.pointerId);\r\n            pointer.emit('move', event);\r\n        }\r\n        for (const event of this.currentFrameCancel) {\r\n            this.emit('cancel', event);\r\n            const pointer = this.at(event.pointerId);\r\n            pointer.emit('cancel', event);\r\n        }\r\n        for (const event of this.currentFrameWheel) {\r\n            this.emit('wheel', event);\r\n            this.primary.emit('pointerwheel', event);\r\n        }\r\n    }\r\n    /**\r\n     * Clears the current frame event and pointer data\r\n     */\r\n    clear() {\r\n        for (const event of this.currentFrameUp) {\r\n            this.currentFramePointerCoords.delete(event.pointerId);\r\n            const ids = this._activeNativePointerIdsToNormalized.entries();\r\n            for (const [native, normalized] of ids) {\r\n                if (normalized === event.pointerId) {\r\n                    this._activeNativePointerIdsToNormalized.delete(native);\r\n                }\r\n            }\r\n        }\r\n        this.currentFrameDown.length = 0;\r\n        this.currentFrameUp.length = 0;\r\n        this.currentFrameMove.length = 0;\r\n        this.currentFrameCancel.length = 0;\r\n        this.currentFrameWheel.length = 0;\r\n    }\r\n    /**\r\n     * Initializes the pointer event receiver so that it can start listening to native\r\n     * browser events.\r\n     */\r\n    init() {\r\n        // Disabling the touch action avoids browser/platform gestures from firing on the canvas\r\n        // It is important on mobile to have touch action 'none'\r\n        // https://stackoverflow.com/questions/48124372/pointermove-event-not-working-with-touch-why-not\r\n        if (this.target === this.engine.canvas) {\r\n            this.engine.canvas.style.touchAction = 'none';\r\n        }\r\n        else {\r\n            document.body.style.touchAction = 'none';\r\n        }\r\n        // Preferred pointer events\r\n        if (window.PointerEvent) {\r\n            this.target.addEventListener('pointerdown', this._boundHandle);\r\n            this.target.addEventListener('pointerup', this._boundHandle);\r\n            this.target.addEventListener('pointermove', this._boundHandle);\r\n            this.target.addEventListener('pointercancel', this._boundHandle);\r\n        }\r\n        else {\r\n            // Touch Events\r\n            this.target.addEventListener('touchstart', this._boundHandle);\r\n            this.target.addEventListener('touchend', this._boundHandle);\r\n            this.target.addEventListener('touchmove', this._boundHandle);\r\n            this.target.addEventListener('touchcancel', this._boundHandle);\r\n            // Mouse Events\r\n            this.target.addEventListener('mousedown', this._boundHandle);\r\n            this.target.addEventListener('mouseup', this._boundHandle);\r\n            this.target.addEventListener('mousemove', this._boundHandle);\r\n        }\r\n        // MDN MouseWheelEvent\r\n        const wheelOptions = {\r\n            passive: !(this.engine.pageScrollPreventionMode === ScrollPreventionMode.All ||\r\n                this.engine.pageScrollPreventionMode === ScrollPreventionMode.Canvas)\r\n        };\r\n        if ('onwheel' in document.createElement('div')) {\r\n            // Modern Browsers\r\n            this.target.addEventListener('wheel', this._boundWheel, wheelOptions);\r\n        }\r\n        else if (document.onmousewheel !== undefined) {\r\n            // Webkit and IE\r\n            this.target.addEventListener('mousewheel', this._boundWheel, wheelOptions);\r\n        }\r\n        else {\r\n            // Remaining browser and older Firefox\r\n            this.target.addEventListener('MozMousePixelScroll', this._boundWheel, wheelOptions);\r\n        }\r\n    }\r\n    detach() {\r\n        // Preferred pointer events\r\n        if (window.PointerEvent) {\r\n            this.target.removeEventListener('pointerdown', this._boundHandle);\r\n            this.target.removeEventListener('pointerup', this._boundHandle);\r\n            this.target.removeEventListener('pointermove', this._boundHandle);\r\n            this.target.removeEventListener('pointercancel', this._boundHandle);\r\n        }\r\n        else {\r\n            // Touch Events\r\n            this.target.removeEventListener('touchstart', this._boundHandle);\r\n            this.target.removeEventListener('touchend', this._boundHandle);\r\n            this.target.removeEventListener('touchmove', this._boundHandle);\r\n            this.target.removeEventListener('touchcancel', this._boundHandle);\r\n            // Mouse Events\r\n            this.target.removeEventListener('mousedown', this._boundHandle);\r\n            this.target.removeEventListener('mouseup', this._boundHandle);\r\n            this.target.removeEventListener('mousemove', this._boundHandle);\r\n        }\r\n        if ('onwheel' in document.createElement('div')) {\r\n            // Modern Browsers\r\n            this.target.removeEventListener('wheel', this._boundWheel);\r\n        }\r\n        else if (document.onmousewheel !== undefined) {\r\n            // Webkit and IE\r\n            this.target.addEventListener('mousewheel', this._boundWheel);\r\n        }\r\n        else {\r\n            // Remaining browser and older Firefox\r\n            this.target.addEventListener('MozMousePixelScroll', this._boundWheel);\r\n        }\r\n    }\r\n    /**\r\n     * Take native pointer id and map it to index in active pointers\r\n     * @param nativePointerId\r\n     */\r\n    _normalizePointerId(nativePointerId) {\r\n        // Add to the the native pointer set id\r\n        this._activeNativePointerIdsToNormalized.set(nativePointerId, -1);\r\n        // Native pointer ids in ascending order\r\n        const currentPointerIds = Array.from(this._activeNativePointerIdsToNormalized.keys()).sort((a, b) => a - b);\r\n        // The index into sorted ids will be the new id, will always have an id\r\n        const id = currentPointerIds.findIndex(p => p === nativePointerId);\r\n        // Save the mapping so we can reverse it later\r\n        this._activeNativePointerIdsToNormalized.set(nativePointerId, id);\r\n        // ignore pointer because game isn't watching\r\n        return id;\r\n    }\r\n    /**\r\n     * Responsible for handling and parsing pointer events\r\n     */\r\n    _handle(ev) {\r\n        ev.preventDefault();\r\n        const eventCoords = new Map();\r\n        let button;\r\n        let pointerType;\r\n        if (isTouchEvent(ev)) {\r\n            button = PointerButton.Unknown;\r\n            pointerType = PointerType.Touch;\r\n            // https://developer.mozilla.org/en-US/docs/Web/API/TouchEvent\r\n            for (let i = 0; i < ev.changedTouches.length; i++) {\r\n                const touch = ev.changedTouches[i];\r\n                const coordinates = GlobalCoordinates.fromPagePosition(touch.pageX, touch.pageY, this.engine);\r\n                const nativePointerId = i + 1;\r\n                const pointerId = this._normalizePointerId(nativePointerId);\r\n                this.currentFramePointerCoords.set(pointerId, coordinates);\r\n                eventCoords.set(pointerId, coordinates);\r\n            }\r\n        }\r\n        else {\r\n            button = this._nativeButtonToPointerButton(ev.button);\r\n            pointerType = PointerType.Mouse;\r\n            const coordinates = GlobalCoordinates.fromPagePosition(ev.pageX, ev.pageY, this.engine);\r\n            let nativePointerId = 1;\r\n            if (isPointerEvent(ev)) {\r\n                nativePointerId = ev.pointerId;\r\n                pointerType = this._stringToPointerType(ev.pointerType);\r\n            }\r\n            const pointerId = this._normalizePointerId(nativePointerId);\r\n            this.currentFramePointerCoords.set(pointerId, coordinates);\r\n            eventCoords.set(pointerId, coordinates);\r\n        }\r\n        for (const [pointerId, coord] of eventCoords.entries()) {\r\n            switch (ev.type) {\r\n                case 'mousedown':\r\n                case 'pointerdown':\r\n                case 'touchstart':\r\n                    this.currentFrameDown.push(new PointerEvent('down', pointerId, button, pointerType, coord, ev));\r\n                    this.currentFramePointerDown.set(pointerId, true);\r\n                    break;\r\n                case 'mouseup':\r\n                case 'pointerup':\r\n                case 'touchend':\r\n                    this.currentFrameUp.push(new PointerEvent('up', pointerId, button, pointerType, coord, ev));\r\n                    this.currentFramePointerDown.set(pointerId, false);\r\n                    break;\r\n                case 'mousemove':\r\n                case 'pointermove':\r\n                case 'touchmove':\r\n                    this.currentFrameMove.push(new PointerEvent('move', pointerId, button, pointerType, coord, ev));\r\n                    break;\r\n                case 'touchcancel':\r\n                case 'pointercancel':\r\n                    this.currentFrameCancel.push(new PointerEvent('cancel', pointerId, button, pointerType, coord, ev));\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n    _handleWheel(ev) {\r\n        // Should we prevent page scroll because of this event\r\n        if (this.engine.pageScrollPreventionMode === ScrollPreventionMode.All ||\r\n            (this.engine.pageScrollPreventionMode === ScrollPreventionMode.Canvas && ev.target === this.engine.canvas)) {\r\n            ev.preventDefault();\r\n        }\r\n        const screen = this.engine.screen.pageToScreenCoordinates(vec(ev.pageX, ev.pageY));\r\n        const world = this.engine.screen.screenToWorldCoordinates(screen);\r\n        /**\r\n         * A constant used to normalize wheel events across different browsers\r\n         *\r\n         * This normalization factor is pulled from\r\n         * https://developer.mozilla.org/en-US/docs/Web/Events/wheel#Listening_to_this_event_across_browser\r\n         */\r\n        const ScrollWheelNormalizationFactor = -1 / 40;\r\n        const deltaX = ev.deltaX || ev.wheelDeltaX * ScrollWheelNormalizationFactor || 0;\r\n        const deltaY = ev.deltaY || ev.wheelDeltaY * ScrollWheelNormalizationFactor || ev.wheelDelta * ScrollWheelNormalizationFactor || ev.detail || 0;\r\n        const deltaZ = ev.deltaZ || 0;\r\n        let deltaMode = WheelDeltaMode.Pixel;\r\n        if (ev.deltaMode) {\r\n            if (ev.deltaMode === 1) {\r\n                deltaMode = WheelDeltaMode.Line;\r\n            }\r\n            else if (ev.deltaMode === 2) {\r\n                deltaMode = WheelDeltaMode.Page;\r\n            }\r\n        }\r\n        const we = new WheelEvent(world.x, world.y, ev.pageX, ev.pageY, screen.x, screen.y, 0, deltaX, deltaY, deltaZ, deltaMode, ev);\r\n        this.currentFrameWheel.push(we);\r\n    }\r\n    /**\r\n     * Triggers an excalibur pointer event in a world space pos\r\n     *\r\n     * Useful for testing pointers in excalibur\r\n     * @param type\r\n     * @param pos\r\n     */\r\n    triggerEvent(type, pos) {\r\n        const page = this.engine.screen.worldToPageCoordinates(pos);\r\n        // Send an event to the event receiver\r\n        if (window.PointerEvent) {\r\n            this._handle(new window.PointerEvent('pointer' + type, {\r\n                pointerId: 0,\r\n                clientX: page.x,\r\n                clientY: page.y\r\n            }));\r\n        }\r\n        else {\r\n            // Safari hack\r\n            this._handle(new window.MouseEvent('mouse' + type, {\r\n                clientX: page.x,\r\n                clientY: page.y\r\n            }));\r\n        }\r\n        // Force update pointer system\r\n        const pointerSystem = this.engine.currentScene.world.systemManager.get(PointerSystem);\r\n        const transformEntities = this.engine.currentScene.world.queryManager.createQuery(pointerSystem.types);\r\n        pointerSystem.update(transformEntities.getEntities());\r\n    }\r\n    _nativeButtonToPointerButton(s) {\r\n        switch (s) {\r\n            case NativePointerButton.NoButton:\r\n                return PointerButton.NoButton;\r\n            case NativePointerButton.Left:\r\n                return PointerButton.Left;\r\n            case NativePointerButton.Middle:\r\n                return PointerButton.Middle;\r\n            case NativePointerButton.Right:\r\n                return PointerButton.Right;\r\n            case NativePointerButton.Unknown:\r\n                return PointerButton.Unknown;\r\n            default:\r\n                return fail(s);\r\n        }\r\n    }\r\n    _stringToPointerType(s) {\r\n        switch (s) {\r\n            case 'touch':\r\n                return PointerType.Touch;\r\n            case 'mouse':\r\n                return PointerType.Mouse;\r\n            case 'pen':\r\n                return PointerType.Pen;\r\n            default:\r\n                return PointerType.Unknown;\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Util/Fps.ts\nclass FpsSampler {\r\n    constructor(options) {\r\n        var _a;\r\n        this._samplePeriod = 100;\r\n        this._currentFrameTime = 0;\r\n        this._frames = 0;\r\n        this._previousSampleTime = 0;\r\n        this._beginFrameTime = 0;\r\n        this._fps = options.initialFps;\r\n        this._samplePeriod = (_a = options.samplePeriod) !== null && _a !== void 0 ? _a : this._samplePeriod;\r\n        this._currentFrameTime = 1000 / options.initialFps;\r\n        this._nowFn = options.nowFn;\r\n        this._previousSampleTime = this._nowFn();\r\n    }\r\n    /**\r\n     * Start of code block to sample FPS for\r\n     */\r\n    start() {\r\n        this._beginFrameTime = this._nowFn();\r\n    }\r\n    /**\r\n     * End of code block to sample FPS for\r\n     */\r\n    end() {\r\n        this._frames++;\r\n        const time = this._nowFn();\r\n        this._currentFrameTime = time - this._beginFrameTime;\r\n        if (time >= this._previousSampleTime + this._samplePeriod) {\r\n            this._fps = (this._frames * 1000) / (time - this._previousSampleTime);\r\n            this._previousSampleTime = time;\r\n            this._frames = 0;\r\n        }\r\n    }\r\n    /**\r\n     * Return the currently sampled fps over the last sample period, by default every 100ms\r\n     */\r\n    get fps() {\r\n        return this._fps;\r\n    }\r\n    /**\r\n     * Return the instantaneous fps, this can be less useful because it will fluctuate given the current frames time\r\n     */\r\n    get instant() {\r\n        return 1000 / this._currentFrameTime;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Util/Clock.ts\n\r\n\r\n/**\r\n * Abstract Clock is the base type of all Clocks\r\n *\r\n * It has a few opinions\r\n * 1. It manages the calculation of what \"elapsed\" time means and thus maximum fps\r\n * 2. The default timing api is implemented in now()\r\n *\r\n * To implement your own clock, extend Clock and override start/stop to start and stop the clock, then call update() with whatever\r\n * method is unique to your clock implementation.\r\n */\r\nclass Clock {\r\n    constructor(options) {\r\n        var _a, _b, _c;\r\n        this._onFatalException = () => { };\r\n        this._maxFps = Infinity;\r\n        this._lastTime = 0;\r\n        this._elapsed = 1;\r\n        this._scheduledCbs = [];\r\n        this._totalElapsed = 0;\r\n        this._options = options;\r\n        this.tick = options.tick;\r\n        this._lastTime = (_a = this.now()) !== null && _a !== void 0 ? _a : 0;\r\n        this._maxFps = (_b = options.maxFps) !== null && _b !== void 0 ? _b : this._maxFps;\r\n        this._onFatalException = (_c = options.onFatalException) !== null && _c !== void 0 ? _c : this._onFatalException;\r\n        this.fpsSampler = new FpsSampler({\r\n            initialFps: 60,\r\n            nowFn: () => this.now()\r\n        });\r\n    }\r\n    /**\r\n     * Get the elapsed time for the last completed frame\r\n     */\r\n    elapsed() {\r\n        return this._elapsed;\r\n    }\r\n    /**\r\n     * Get the current time in milliseconds\r\n     */\r\n    now() {\r\n        return performance.now();\r\n    }\r\n    toTestClock() {\r\n        const testClock = new TestClock({\r\n            ...this._options,\r\n            defaultUpdateMs: 16.6\r\n        });\r\n        return testClock;\r\n    }\r\n    toStandardClock() {\r\n        const clock = new StandardClock({\r\n            ...this._options\r\n        });\r\n        return clock;\r\n    }\r\n    setFatalExceptionHandler(handler) {\r\n        this._onFatalException = handler;\r\n    }\r\n    /**\r\n     * Schedule a callback to fire given a timeout in milliseconds using the excalibur [[Clock]]\r\n     *\r\n     * This is useful to use over the built in browser `setTimeout` because callbacks will be tied to the\r\n     * excalibur update clock, instead of browser time, this means that callbacks wont fire if the game is\r\n     * stopped or paused.\r\n     *\r\n     * @param cb callback to fire\r\n     * @param timeoutMs Optionally specify a timeout in milliseconds from now, default is 0ms which means the next possible tick\r\n     */\r\n    schedule(cb, timeoutMs = 0) {\r\n        const scheduledTime = this.now() + timeoutMs;\r\n        this._scheduledCbs.push([cb, scheduledTime]);\r\n    }\r\n    _runScheduledCbs() {\r\n        // walk backwards to delete items as we loop\r\n        for (let i = this._scheduledCbs.length - 1; i > -1; i--) {\r\n            if (this._scheduledCbs[i][1] <= this._totalElapsed) {\r\n                this._scheduledCbs[i][0]();\r\n                this._scheduledCbs.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n    update(overrideUpdateMs) {\r\n        try {\r\n            this.fpsSampler.start();\r\n            // Get the time to calculate time-elapsed\r\n            const now = this.now();\r\n            let elapsed = now - this._lastTime || 1; // first frame\r\n            // Constrain fps\r\n            const fpsInterval = (1000 / this._maxFps);\r\n            // only run frame if enough time has elapsed\r\n            if (elapsed >= fpsInterval) {\r\n                let leftover = 0;\r\n                if (fpsInterval !== 0) {\r\n                    leftover = (elapsed % fpsInterval);\r\n                    elapsed = elapsed - leftover; // shift elapsed to be \"in phase\" with the current loop fps\r\n                }\r\n                // Resolves issue #138 if the game has been paused, or blurred for\r\n                // more than a 200 milliseconds, reset elapsed time to 1. This improves reliability\r\n                // and provides more expected behavior when the engine comes back\r\n                // into focus\r\n                if (elapsed > 200) {\r\n                    elapsed = 1;\r\n                }\r\n                // tick the mainloop and run scheduled callbacks\r\n                this._elapsed = overrideUpdateMs || elapsed;\r\n                this._totalElapsed += this._elapsed;\r\n                this._runScheduledCbs();\r\n                this.tick(overrideUpdateMs || elapsed);\r\n                if (fpsInterval !== 0) {\r\n                    this._lastTime = now - leftover;\r\n                }\r\n                else {\r\n                    this._lastTime = now;\r\n                }\r\n                this.fpsSampler.end();\r\n            }\r\n        }\r\n        catch (e) {\r\n            this._onFatalException(e);\r\n            this.stop();\r\n        }\r\n    }\r\n}\r\n/**\r\n * The [[StandardClock]] implements the requestAnimationFrame browser api to run the tick()\r\n */\r\nclass StandardClock extends Clock {\r\n    constructor(options) {\r\n        super(options);\r\n        this._running = false;\r\n    }\r\n    isRunning() {\r\n        return this._running;\r\n    }\r\n    start() {\r\n        if (this._running) {\r\n            return;\r\n        }\r\n        this._running = true;\r\n        const mainloop = () => {\r\n            // stop the loop\r\n            if (!this._running) {\r\n                return;\r\n            }\r\n            try {\r\n                // request next loop\r\n                this._requestId = window.requestAnimationFrame(mainloop);\r\n                this.update();\r\n            }\r\n            catch (e) {\r\n                window.cancelAnimationFrame(this._requestId);\r\n                throw e;\r\n            }\r\n        };\r\n        // begin the first frame\r\n        mainloop();\r\n    }\r\n    stop() {\r\n        this._running = false;\r\n    }\r\n}\r\n/**\r\n * The TestClock is meant for debugging interactions in excalibur that require precise timing to replicate or test\r\n */\r\nclass TestClock extends Clock {\r\n    constructor(options) {\r\n        super({\r\n            ...options\r\n        });\r\n        this._logger = Logger.getInstance();\r\n        this._running = false;\r\n        this._currentTime = 0;\r\n        this._updateMs = options.defaultUpdateMs;\r\n    }\r\n    /**\r\n     * Get the current time in milliseconds\r\n     */\r\n    now() {\r\n        var _a;\r\n        return (_a = this._currentTime) !== null && _a !== void 0 ? _a : 0;\r\n    }\r\n    isRunning() {\r\n        return this._running;\r\n    }\r\n    start() {\r\n        this._running = true;\r\n    }\r\n    stop() {\r\n        this._running = false;\r\n    }\r\n    /**\r\n     * Manually step the clock forward 1 tick, optionally specify an elapsed time in milliseconds\r\n     * @param overrideUpdateMs\r\n     */\r\n    step(overrideUpdateMs) {\r\n        const time = overrideUpdateMs !== null && overrideUpdateMs !== void 0 ? overrideUpdateMs : this._updateMs;\r\n        if (this._running) {\r\n            // to be comparable to RAF this needs to be a full blown Task\r\n            // For example, images cannot decode synchronously in a single step\r\n            this.update(time);\r\n            this._currentTime += time;\r\n        }\r\n        else {\r\n            this._logger.warn('The clock is not running, no step will be performed');\r\n        }\r\n    }\r\n    /**\r\n     * Run a number of steps that tick the clock, optionally specify an elapsed time in milliseconds\r\n     * @param numberOfSteps\r\n     * @param overrideUpdateMs\r\n     */\r\n    run(numberOfSteps, overrideUpdateMs) {\r\n        for (let i = 0; i < numberOfSteps; i++) {\r\n            this.step(overrideUpdateMs !== null && overrideUpdateMs !== void 0 ? overrideUpdateMs : this._updateMs);\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Engine.ts\nvar Engine_decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\n\r\n\r\n\r\npolyfill();\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Enum representing the different mousewheel event bubble prevention\r\n */\r\nvar ScrollPreventionMode;\r\n(function (ScrollPreventionMode) {\r\n    /**\r\n     * Do not prevent any page scrolling\r\n     */\r\n    ScrollPreventionMode[ScrollPreventionMode[\"None\"] = 0] = \"None\";\r\n    /**\r\n     * Prevent page scroll if mouse is over the game canvas\r\n     */\r\n    ScrollPreventionMode[ScrollPreventionMode[\"Canvas\"] = 1] = \"Canvas\";\r\n    /**\r\n     * Prevent all page scrolling via mouse wheel\r\n     */\r\n    ScrollPreventionMode[ScrollPreventionMode[\"All\"] = 2] = \"All\";\r\n})(ScrollPreventionMode || (ScrollPreventionMode = {}));\r\n/**\r\n * The Excalibur Engine\r\n *\r\n * The [[Engine]] is the main driver for a game. It is responsible for\r\n * starting/stopping the game, maintaining state, transmitting events,\r\n * loading resources, and managing the scene.\r\n */\r\nclass Engine extends Class {\r\n    /**\r\n     * Creates a new game using the given [[EngineOptions]]. By default, if no options are provided,\r\n     * the game will be rendered full screen (taking up all available browser window space).\r\n     * You can customize the game rendering through [[EngineOptions]].\r\n     *\r\n     * Example:\r\n     *\r\n     * ```js\r\n     * var game = new ex.Engine({\r\n     *   width: 0, // the width of the canvas\r\n     *   height: 0, // the height of the canvas\r\n     *   enableCanvasTransparency: true, // the transparencySection of the canvas\r\n     *   canvasElementId: '', // the DOM canvas element ID, if you are providing your own\r\n     *   displayMode: ex.DisplayMode.FullScreen, // the display mode\r\n     *   pointerScope: ex.Input.PointerScope.Document, // the scope of capturing pointer (mouse/touch) events\r\n     *   backgroundColor: ex.Color.fromHex('#2185d0') // background color of the engine\r\n     * });\r\n     *\r\n     * // call game.start, which is a Promise\r\n     * game.start().then(function () {\r\n     *   // ready, set, go!\r\n     * });\r\n     * ```\r\n     */\r\n    constructor(options) {\r\n        var _a, _b, _c, _d;\r\n        super();\r\n        /**\r\n         * Optionally set the maximum fps if not set Excalibur will go as fast as the device allows.\r\n         *\r\n         * You may want to constrain max fps if your game cannot maintain fps consistently, it can look and feel better to have a 30fps game than\r\n         * one that bounces between 30fps and 60fps\r\n         */\r\n        this.maxFps = Number.POSITIVE_INFINITY;\r\n        this._hasStarted = false;\r\n        /**\r\n         * Contains all the scenes currently registered with Excalibur\r\n         */\r\n        this.scenes = {};\r\n        /**\r\n         * @hidden\r\n         * @deprecated will be removed in v0.26.0\r\n         */\r\n        this._animations = [];\r\n        this._suppressPlayButton = false;\r\n        /**\r\n         * Indicates whether audio should be paused when the game is no longer visible.\r\n         */\r\n        this.pauseAudioWhenHidden = true;\r\n        /**\r\n         * Indicates whether the engine should draw with debug information\r\n         */\r\n        this._isDebug = false;\r\n        /**\r\n         * No longer used\r\n         * @deprecated will be removed in v0.26.0\r\n         */\r\n        this.debugColor = new Color(255, 255, 255);\r\n        /**\r\n         * Sets the Transparency for the engine.\r\n         */\r\n        this.enableCanvasTransparency = true;\r\n        /**\r\n         * The action to take when a fatal exception is thrown\r\n         */\r\n        this.onFatalException = (e) => {\r\n            Logger.getInstance().fatal(e);\r\n        };\r\n        this._timescale = 1.0;\r\n        this._isInitialized = false;\r\n        this._deferredGoTo = null;\r\n        this._loadingComplete = false;\r\n        this._isReady = false;\r\n        this._isReadyPromise = new Promise(resolve => {\r\n            this._isReadyResolve = resolve;\r\n        });\r\n        this._screenShotRequests = [];\r\n        options = { ...Engine._DEFAULT_ENGINE_OPTIONS, ...options };\r\n        Flags.freeze();\r\n        // Initialize browser events facade\r\n        this.browser = new BrowserEvents(window, document);\r\n        // Check compatibility\r\n        const detector = new Detector();\r\n        if (!options.suppressMinimumBrowserFeatureDetection && !(this._compatible = detector.test())) {\r\n            const message = document.createElement('div');\r\n            message.innerText = 'Sorry, your browser does not support all the features needed for Excalibur';\r\n            document.body.appendChild(message);\r\n            detector.failedTests.forEach(function (test) {\r\n                const testMessage = document.createElement('div');\r\n                testMessage.innerText = 'Browser feature missing ' + test;\r\n                document.body.appendChild(testMessage);\r\n            });\r\n            if (options.canvasElementId) {\r\n                const canvas = document.getElementById(options.canvasElementId);\r\n                if (canvas) {\r\n                    canvas.parentElement.removeChild(canvas);\r\n                }\r\n            }\r\n            return;\r\n        }\r\n        else {\r\n            this._compatible = true;\r\n        }\r\n        // Use native console API for color fun\r\n        // eslint-disable-next-line no-console\r\n        if (console.log && !options.suppressConsoleBootMessage) {\r\n            // eslint-disable-next-line no-console\r\n            console.log(`%cPowered by Excalibur.js (v${EX_VERSION})`, 'background: #176BAA; color: white; border-radius: 5px; padding: 15px; font-size: 1.5em; line-height: 80px;');\r\n            // eslint-disable-next-line no-console\r\n            console.log('\\n\\\r\n      /| ________________\\n\\\r\nO|===|* >________________>\\n\\\r\n      \\\\|');\r\n            // eslint-disable-next-line no-console\r\n            console.log('Visit', 'http://excaliburjs.com', 'for more information');\r\n        }\r\n        // Suppress play button\r\n        if (options.suppressPlayButton) {\r\n            this._suppressPlayButton = true;\r\n        }\r\n        this._logger = Logger.getInstance();\r\n        // If debug is enabled, let's log browser features to the console.\r\n        if (this._logger.defaultLevel === LogLevel.Debug) {\r\n            detector.logBrowserFeatures();\r\n        }\r\n        this._logger.debug('Building engine...');\r\n        this.canvasElementId = options.canvasElementId;\r\n        if (options.canvasElementId) {\r\n            this._logger.debug('Using Canvas element specified: ' + options.canvasElementId);\r\n            this.canvas = document.getElementById(options.canvasElementId);\r\n        }\r\n        else if (options.canvasElement) {\r\n            this._logger.debug('Using Canvas element specified:', options.canvasElement);\r\n            this.canvas = options.canvasElement;\r\n        }\r\n        else {\r\n            this._logger.debug('Using generated canvas element');\r\n            this.canvas = document.createElement('canvas');\r\n        }\r\n        let displayMode = (_a = options.displayMode) !== null && _a !== void 0 ? _a : DisplayMode.Fixed;\r\n        if ((options.width && options.height) || options.viewport) {\r\n            if (options.displayMode === undefined) {\r\n                displayMode = DisplayMode.Fixed;\r\n            }\r\n            this._logger.debug('Engine viewport is size ' + options.width + ' x ' + options.height);\r\n        }\r\n        else if (!options.displayMode) {\r\n            this._logger.debug('Engine viewport is fit');\r\n            displayMode = DisplayMode.FitScreen;\r\n        }\r\n        if (Flags.isEnabled(Legacy.Canvas)) {\r\n            const ex2dCtx = new ExcaliburGraphicsContext2DCanvas({\r\n                canvasElement: this.canvas,\r\n                enableTransparency: this.enableCanvasTransparency,\r\n                smoothing: options.antialiasing,\r\n                backgroundColor: options.backgroundColor,\r\n                snapToPixel: options.snapToPixel\r\n            });\r\n            this.graphicsContext = ex2dCtx;\r\n            this.ctx = ex2dCtx.__ctx;\r\n        }\r\n        else {\r\n            const exWebglCtx = new ExcaliburGraphicsContextWebGL({\r\n                canvasElement: this.canvas,\r\n                enableTransparency: this.enableCanvasTransparency,\r\n                smoothing: options.antialiasing,\r\n                backgroundColor: options.backgroundColor,\r\n                snapToPixel: options.snapToPixel\r\n            });\r\n            this.graphicsContext = exWebglCtx;\r\n            this.ctx = exWebglCtx.__ctx;\r\n        }\r\n        this.screen = new Screen({\r\n            canvas: this.canvas,\r\n            context: this.graphicsContext,\r\n            antialiasing: (_b = options.antialiasing) !== null && _b !== void 0 ? _b : true,\r\n            browser: this.browser,\r\n            viewport: (_c = options.viewport) !== null && _c !== void 0 ? _c : (options.width && options.height ? { width: options.width, height: options.height } : Resolution.SVGA),\r\n            resolution: options.resolution,\r\n            displayMode,\r\n            position: options.position,\r\n            pixelRatio: options.suppressHiDPIScaling ? 1 : null\r\n        });\r\n        TextureLoader.filtering = options.antialiasing ? ImageFiltering.Blended : ImageFiltering.Pixel;\r\n        if (options.backgroundColor) {\r\n            this.backgroundColor = options.backgroundColor.clone();\r\n        }\r\n        this.maxFps = (_d = options.maxFps) !== null && _d !== void 0 ? _d : this.maxFps;\r\n        this.clock = new StandardClock({\r\n            maxFps: this.maxFps,\r\n            tick: this._mainloop.bind(this),\r\n            onFatalException: (e) => this.onFatalException(e)\r\n        });\r\n        this.enableCanvasTransparency = options.enableCanvasTransparency;\r\n        this._loader = new Loader();\r\n        this._loader.wireEngine(this);\r\n        this.debug = new Debug(this);\r\n        this._initialize(options);\r\n        this.rootScene = this.currentScene = new Scene();\r\n        this.addScene('root', this.rootScene);\r\n        window.___EXCALIBUR_DEVTOOL = this;\r\n    }\r\n    /**\r\n     * The width of the game canvas in pixels (physical width component of the\r\n     * resolution of the canvas element)\r\n     */\r\n    get canvasWidth() {\r\n        return this.screen.canvasWidth;\r\n    }\r\n    /**\r\n     * Returns half width of the game canvas in pixels (half physical width component)\r\n     */\r\n    get halfCanvasWidth() {\r\n        return this.screen.halfCanvasWidth;\r\n    }\r\n    /**\r\n     * The height of the game canvas in pixels, (physical height component of\r\n     * the resolution of the canvas element)\r\n     */\r\n    get canvasHeight() {\r\n        return this.screen.canvasHeight;\r\n    }\r\n    /**\r\n     * Returns half height of the game canvas in pixels (half physical height component)\r\n     */\r\n    get halfCanvasHeight() {\r\n        return this.screen.halfCanvasHeight;\r\n    }\r\n    /**\r\n     * Returns the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\r\n     */\r\n    get drawWidth() {\r\n        return this.screen.drawWidth;\r\n    }\r\n    /**\r\n     * Returns half the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\r\n     */\r\n    get halfDrawWidth() {\r\n        return this.screen.halfDrawWidth;\r\n    }\r\n    /**\r\n     * Returns the height of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\r\n     */\r\n    get drawHeight() {\r\n        return this.screen.drawHeight;\r\n    }\r\n    /**\r\n     * Returns half the height of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\r\n     */\r\n    get halfDrawHeight() {\r\n        return this.screen.halfDrawHeight;\r\n    }\r\n    /**\r\n     * Returns whether excalibur detects the current screen to be HiDPI\r\n     */\r\n    get isHiDpi() {\r\n        return this.screen.isHiDpi;\r\n    }\r\n    /**\r\n     * Access [[stats]] that holds frame statistics.\r\n     */\r\n    get stats() {\r\n        return this.debug.stats;\r\n    }\r\n    /**\r\n     * Indicates whether the engine is set to fullscreen or not\r\n     */\r\n    get isFullscreen() {\r\n        return this.screen.isFullScreen;\r\n    }\r\n    /**\r\n     * Indicates the current [[DisplayMode]] of the engine.\r\n     */\r\n    get displayMode() {\r\n        return this.screen.displayMode;\r\n    }\r\n    /**\r\n     * Returns the calculated pixel ration for use in rendering\r\n     */\r\n    get pixelRatio() {\r\n        return this.screen.pixelRatio;\r\n    }\r\n    get isDebug() {\r\n        return this._isDebug;\r\n    }\r\n    /**\r\n     * Hints the graphics context to truncate fractional world space coordinates\r\n     */\r\n    get snapToPixel() {\r\n        return this.graphicsContext.snapToPixel;\r\n    }\r\n    ;\r\n    set snapToPixel(shouldSnapToPixel) {\r\n        this.graphicsContext.snapToPixel = shouldSnapToPixel;\r\n    }\r\n    ;\r\n    on(eventName, handler) {\r\n        super.on(eventName, handler);\r\n    }\r\n    once(eventName, handler) {\r\n        super.once(eventName, handler);\r\n    }\r\n    off(eventName, handler) {\r\n        super.off(eventName, handler);\r\n    }\r\n    /**\r\n     * Returns a BoundingBox of the top left corner of the screen\r\n     * and the bottom right corner of the screen.\r\n     */\r\n    getWorldBounds() {\r\n        return this.screen.getWorldBounds();\r\n    }\r\n    /**\r\n     * Gets the current engine timescale factor (default is 1.0 which is 1:1 time)\r\n     */\r\n    get timescale() {\r\n        return this._timescale;\r\n    }\r\n    /**\r\n     * Sets the current engine timescale factor. Useful for creating slow-motion effects or fast-forward effects\r\n     * when using time-based movement.\r\n     */\r\n    set timescale(value) {\r\n        if (value <= 0) {\r\n            Logger.getInstance().error('Cannot set engine.timescale to a value of 0 or less than 0.');\r\n            return;\r\n        }\r\n        this._timescale = value;\r\n    }\r\n    /**\r\n     * Plays a sprite animation on the screen at the specified `x` and `y`\r\n     * (in game coordinates, not screen pixels). These animations play\r\n     * independent of actors, and will be cleaned up internally as soon\r\n     * as they are complete. Note animations that loop will never be\r\n     * cleaned up.\r\n     *\r\n     * @param animation  Animation to play\r\n     * @param x          x game coordinate to play the animation\r\n     * @param y          y game coordinate to play the animation\r\n     * @deprecated\r\n     */\r\n    playAnimation(animation, x, y) {\r\n        this._animations.push(new AnimationNode(animation, x, y));\r\n    }\r\n    /**\r\n     * Adds a [[TileMap]] to the [[currentScene]], once this is done the TileMap\r\n     * will be drawn and updated.\r\n     */\r\n    addTileMap(tileMap) {\r\n        this.currentScene.addTileMap(tileMap);\r\n    }\r\n    /**\r\n     * Removes a [[TileMap]] from the [[currentScene]], it will no longer be drawn or updated.\r\n     */\r\n    removeTileMap(tileMap) {\r\n        this.currentScene.removeTileMap(tileMap);\r\n    }\r\n    /**\r\n     * Adds a [[Timer]] to the [[currentScene]].\r\n     * @param timer  The timer to add to the [[currentScene]].\r\n     */\r\n    addTimer(timer) {\r\n        return this.currentScene.addTimer(timer);\r\n    }\r\n    /**\r\n     * Removes a [[Timer]] from the [[currentScene]].\r\n     * @param timer  The timer to remove to the [[currentScene]].\r\n     */\r\n    removeTimer(timer) {\r\n        return this.currentScene.removeTimer(timer);\r\n    }\r\n    /**\r\n     * Adds a [[Scene]] to the engine, think of scenes in Excalibur as you\r\n     * would levels or menus.\r\n     *\r\n     * @param key  The name of the scene, must be unique\r\n     * @param scene The scene to add to the engine\r\n     */\r\n    addScene(key, scene) {\r\n        if (this.scenes[key]) {\r\n            this._logger.warn('Scene', key, 'already exists overwriting');\r\n        }\r\n        this.scenes[key] = scene;\r\n    }\r\n    /**\r\n     * @internal\r\n     */\r\n    removeScene(entity) {\r\n        if (entity instanceof Scene) {\r\n            // remove scene\r\n            for (const key in this.scenes) {\r\n                if (this.scenes.hasOwnProperty(key)) {\r\n                    if (this.scenes[key] === entity) {\r\n                        delete this.scenes[key];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (typeof entity === 'string') {\r\n            // remove scene\r\n            delete this.scenes[entity];\r\n        }\r\n    }\r\n    add(entity) {\r\n        if (arguments.length === 2) {\r\n            this.addScene(arguments[0], arguments[1]);\r\n            return;\r\n        }\r\n        if (this._deferredGoTo && this.scenes[this._deferredGoTo]) {\r\n            this.scenes[this._deferredGoTo].add(entity);\r\n        }\r\n        else {\r\n            this.currentScene.add(entity);\r\n        }\r\n    }\r\n    remove(entity) {\r\n        if (entity instanceof Entity) {\r\n            this.currentScene.remove(entity);\r\n        }\r\n        if (entity instanceof Scene) {\r\n            this.removeScene(entity);\r\n        }\r\n        if (typeof entity === 'string') {\r\n            this.removeScene(entity);\r\n        }\r\n    }\r\n    /**\r\n     * Changes the currently updating and drawing scene to a different,\r\n     * named scene. Calls the [[Scene]] lifecycle events.\r\n     * @param key  The key of the scene to transition to.\r\n     */\r\n    goToScene(key) {\r\n        // if not yet initialized defer goToScene\r\n        if (!this.isInitialized) {\r\n            this._deferredGoTo = key;\r\n            return;\r\n        }\r\n        if (this.scenes[key]) {\r\n            const oldScene = this.currentScene;\r\n            const newScene = this.scenes[key];\r\n            this._logger.debug('Going to scene:', key);\r\n            // only deactivate when initialized\r\n            if (this.currentScene.isInitialized) {\r\n                this.currentScene._deactivate.apply(this.currentScene, [oldScene, newScene]);\r\n                this.currentScene.eventDispatcher.emit('deactivate', new DeactivateEvent(newScene, this.currentScene));\r\n            }\r\n            // set current scene to new one\r\n            this.currentScene = newScene;\r\n            this.screen.setCurrentCamera(newScene.camera);\r\n            // initialize the current scene if has not been already\r\n            this.currentScene._initialize(this);\r\n            this.currentScene._activate.apply(this.currentScene, [oldScene, newScene]);\r\n            this.currentScene.eventDispatcher.emit('activate', new ActivateEvent(oldScene, this.currentScene));\r\n        }\r\n        else {\r\n            this._logger.error('Scene', key, 'does not exist!');\r\n        }\r\n    }\r\n    /**\r\n     * Transforms the current x, y from screen coordinates to world coordinates\r\n     * @param point  Screen coordinate to convert\r\n     */\r\n    screenToWorldCoordinates(point) {\r\n        return this.screen.screenToWorldCoordinates(point);\r\n    }\r\n    /**\r\n     * Transforms a world coordinate, to a screen coordinate\r\n     * @param point  World coordinate to convert\r\n     */\r\n    worldToScreenCoordinates(point) {\r\n        return this.screen.worldToScreenCoordinates(point);\r\n    }\r\n    /**\r\n     * Initializes the internal canvas, rendering context, display mode, and native event listeners\r\n     */\r\n    _initialize(options) {\r\n        this.pageScrollPreventionMode = options.scrollPreventionMode;\r\n        // initialize inputs\r\n        const pointerTarget = options && options.pointerScope === PointerScope.Document ? document : this.canvas;\r\n        this.input = {\r\n            keyboard: new Keyboard(),\r\n            pointers: new PointerEventReceiver(pointerTarget, this),\r\n            gamepads: new Gamepads()\r\n        };\r\n        this.input.keyboard.init();\r\n        this.input.pointers.init();\r\n        this.input.gamepads.init();\r\n        // Issue #385 make use of the visibility api\r\n        // https://developer.mozilla.org/en-US/docs/Web/Guide/User_experience/Using_the_Page_Visibility_API\r\n        let hidden, visibilityChange;\r\n        if (typeof document.hidden !== 'undefined') {\r\n            // Opera 12.10 and Firefox 18 and later support\r\n            hidden = 'hidden';\r\n            visibilityChange = 'visibilitychange';\r\n        }\r\n        else if ('msHidden' in document) {\r\n            hidden = 'msHidden';\r\n            visibilityChange = 'msvisibilitychange';\r\n        }\r\n        else if ('webkitHidden' in document) {\r\n            hidden = 'webkitHidden';\r\n            visibilityChange = 'webkitvisibilitychange';\r\n        }\r\n        this.browser.document.on(visibilityChange, () => {\r\n            if (document[hidden]) {\r\n                this.eventDispatcher.emit('hidden', new HiddenEvent(this));\r\n                this._logger.debug('Window hidden');\r\n            }\r\n            else {\r\n                this.eventDispatcher.emit('visible', new VisibleEvent(this));\r\n                this._logger.debug('Window visible');\r\n            }\r\n        });\r\n        if (!this.canvasElementId && !options.canvasElement) {\r\n            document.body.appendChild(this.canvas);\r\n        }\r\n    }\r\n    onInitialize(_engine) {\r\n        // Override me\r\n    }\r\n    /**\r\n     * If supported by the browser, this will set the antialiasing flag on the\r\n     * canvas. Set this to `false` if you want a 'jagged' pixel art look to your\r\n     * image resources.\r\n     * @param isSmooth  Set smoothing to true or false\r\n     */\r\n    setAntialiasing(isSmooth) {\r\n        this.screen.antialiasing = isSmooth;\r\n    }\r\n    /**\r\n     * Return the current smoothing status of the canvas\r\n     */\r\n    getAntialiasing() {\r\n        return this.screen.antialiasing;\r\n    }\r\n    /**\r\n     * Gets whether the actor is Initialized\r\n     */\r\n    get isInitialized() {\r\n        return this._isInitialized;\r\n    }\r\n    _overrideInitialize(engine) {\r\n        if (!this.isInitialized) {\r\n            this.onInitialize(engine);\r\n            super.emit('initialize', new InitializeEvent(engine, this));\r\n            this._isInitialized = true;\r\n            if (this._deferredGoTo) {\r\n                this.goToScene(this._deferredGoTo);\r\n            }\r\n            else {\r\n                this.goToScene('root');\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Updates the entire state of the game\r\n     * @param delta  Number of milliseconds elapsed since the last update.\r\n     */\r\n    _update(delta) {\r\n        if (!this.ready) {\r\n            // suspend updates until loading is finished\r\n            this._loader.update(this, delta);\r\n            // Update input listeners\r\n            this.input.keyboard.update();\r\n            this.input.gamepads.update();\r\n            return;\r\n        }\r\n        // Publish preupdate events\r\n        this._preupdate(delta);\r\n        // process engine level events\r\n        this.currentScene.update(this, delta);\r\n        // update animations\r\n        // TODO remove\r\n        this._animations = this._animations.filter(function (a) {\r\n            return !a.animation.isDone();\r\n        });\r\n        // Update input listeners\r\n        this.input.keyboard.update();\r\n        this.input.gamepads.update();\r\n        // Publish update event\r\n        this._postupdate(delta);\r\n    }\r\n    /**\r\n     * @internal\r\n     */\r\n    _preupdate(delta) {\r\n        this.emit('preupdate', new PreUpdateEvent(this, delta, this));\r\n        this.onPreUpdate(this, delta);\r\n    }\r\n    onPreUpdate(_engine, _delta) {\r\n        // Override me\r\n    }\r\n    /**\r\n     * @internal\r\n     */\r\n    _postupdate(delta) {\r\n        this.emit('postupdate', new PostUpdateEvent(this, delta, this));\r\n        this.onPostUpdate(this, delta);\r\n    }\r\n    onPostUpdate(_engine, _delta) {\r\n        // Override me\r\n    }\r\n    /**\r\n     * Draws the entire game\r\n     * @param delta  Number of milliseconds elapsed since the last draw.\r\n     */\r\n    _draw(delta) {\r\n        const ctx = this.ctx;\r\n        this.graphicsContext.beginDrawLifecycle();\r\n        this.graphicsContext.clear();\r\n        this._predraw(ctx, delta);\r\n        // Drawing nothing else while loading\r\n        if (!this._isReady) {\r\n            this._loader.canvas.draw(this.graphicsContext, 0, 0);\r\n            this.graphicsContext.flush();\r\n            return;\r\n        }\r\n        // TODO move to graphics systems?\r\n        this.graphicsContext.backgroundColor = this.backgroundColor;\r\n        this.currentScene.draw(this.ctx, delta);\r\n        // todo needs to be a better way of doing this\r\n        let a = 0;\r\n        const len = this._animations.length;\r\n        for (a; a < len; a++) {\r\n            this._animations[a].animation.draw(ctx, this._animations[a].x, this._animations[a].y);\r\n        }\r\n        // Draw debug information\r\n        // TODO don't access ctx directly\r\n        if (this.isDebug) {\r\n            this.ctx.font = 'Consolas';\r\n            this.ctx.fillStyle = this.debugColor.toString();\r\n            const keys = this.input.keyboard.getKeys();\r\n            for (let j = 0; j < keys.length; j++) {\r\n                this.ctx.fillText(keys[j].toString() + ' : ' + (Keys[keys[j]] ? Keys[keys[j]] : 'Not Mapped'), 100, 10 * j + 10);\r\n            }\r\n            this.ctx.fillText('FPS:' + this.stats.currFrame.fps.toFixed(2).toString(), 10, 10);\r\n        }\r\n        this._postdraw(ctx, delta);\r\n        // Flush any pending drawings\r\n        this.graphicsContext.flush();\r\n        this.graphicsContext.endDrawLifecycle();\r\n        this._checkForScreenShots();\r\n    }\r\n    /**\r\n     * @internal\r\n     */\r\n    _predraw(_ctx, delta) {\r\n        this.emit('predraw', new PreDrawEvent(_ctx, delta, this));\r\n        this.onPreDraw(_ctx, delta);\r\n    }\r\n    onPreDraw(_ctx, _delta) {\r\n        // Override me\r\n    }\r\n    /**\r\n     * @internal\r\n     */\r\n    _postdraw(_ctx, delta) {\r\n        this.emit('postdraw', new PostDrawEvent(_ctx, delta, this));\r\n        this.onPostDraw(_ctx, delta);\r\n    }\r\n    onPostDraw(_ctx, _delta) {\r\n        // Override me\r\n    }\r\n    /**\r\n     * Enable or disable Excalibur debugging functionality.\r\n     * @param toggle a value that debug drawing will be changed to\r\n     */\r\n    showDebug(toggle) {\r\n        this._isDebug = toggle;\r\n    }\r\n    /**\r\n     * Toggle Excalibur debugging functionality.\r\n     */\r\n    toggleDebug() {\r\n        this._isDebug = !this._isDebug;\r\n        return this._isDebug;\r\n    }\r\n    /**\r\n     * Returns true when loading is totally complete and the player has clicked start\r\n     */\r\n    get loadingComplete() {\r\n        return this._loadingComplete;\r\n    }\r\n    get ready() {\r\n        return this._isReady;\r\n    }\r\n    isReady() {\r\n        return this._isReadyPromise;\r\n    }\r\n    /**\r\n     * Starts the internal game loop for Excalibur after loading\r\n     * any provided assets.\r\n     * @param loader  Optional [[Loader]] to use to load resources. The default loader is [[Loader]], override to provide your own\r\n     * custom loader.\r\n     *\r\n     * Note: start() only resolves AFTER the user has clicked the play button\r\n     */\r\n    async start(loader) {\r\n        if (!this._compatible) {\r\n            throw new Error('Excalibur is incompatible with your browser');\r\n        }\r\n        // Wire loader if we have it\r\n        if (loader) {\r\n            // Push the current user entered resolution/viewport\r\n            this.screen.pushResolutionAndViewport();\r\n            // Configure resolution for loader, it expects resolution === viewport\r\n            this.screen.resolution = this.screen.viewport;\r\n            this.screen.applyResolutionAndViewport();\r\n            this._loader = loader;\r\n            this._loader.suppressPlayButton = this._suppressPlayButton || this._loader.suppressPlayButton;\r\n            this._loader.wireEngine(this);\r\n        }\r\n        // Start the excalibur clock which drives the mainloop\r\n        // has started is a slight misnomer, it's really mainloop started\r\n        this._logger.debug('Starting game clock...');\r\n        this.browser.resume();\r\n        this.clock.start();\r\n        this._logger.debug('Game clock started');\r\n        if (loader) {\r\n            await this.load(this._loader);\r\n            this._loadingComplete = true;\r\n            // reset back to previous user resolution/viewport\r\n            this.screen.popResolutionAndViewport();\r\n            this.screen.applyResolutionAndViewport();\r\n        }\r\n        this._loadingComplete = true;\r\n        // Initialize before ready\r\n        this._overrideInitialize(this);\r\n        this._isReady = true;\r\n        this._isReadyResolve();\r\n        this.emit('start', new GameStartEvent(this));\r\n        return this._isReadyPromise;\r\n    }\r\n    _mainloop(elapsed) {\r\n        this.emit('preframe', new PreFrameEvent(this, this.stats.prevFrame));\r\n        const delta = elapsed * this.timescale;\r\n        // reset frame stats (reuse existing instances)\r\n        const frameId = this.stats.prevFrame.id + 1;\r\n        this.stats.currFrame.reset();\r\n        this.stats.currFrame.id = frameId;\r\n        this.stats.currFrame.delta = delta;\r\n        this.stats.currFrame.fps = this.clock.fpsSampler.fps;\r\n        GraphicsDiagnostics.clear();\r\n        const beforeUpdate = this.clock.now();\r\n        this._update(delta);\r\n        const afterUpdate = this.clock.now();\r\n        this._draw(delta);\r\n        const afterDraw = this.clock.now();\r\n        this.stats.currFrame.duration.update = afterUpdate - beforeUpdate;\r\n        this.stats.currFrame.duration.draw = afterDraw - afterUpdate;\r\n        this.stats.currFrame.graphics.drawnImages = GraphicsDiagnostics.DrawnImagesCount;\r\n        this.stats.currFrame.graphics.drawCalls = GraphicsDiagnostics.DrawCallCount;\r\n        this.emit('postframe', new PostFrameEvent(this, this.stats.currFrame));\r\n        this.stats.prevFrame.reset(this.stats.currFrame);\r\n    }\r\n    /**\r\n     *\r\n     * @param game\r\n     * @param raf\r\n     * @param nowFn\r\n     * @deprecated Use [[Clock]] to run the mainloop, will be removed in v0.26.0\r\n     */\r\n    static createMainLoop(game, raf, nowFn) {\r\n        let lastTime = nowFn();\r\n        const fpsSampler = new FpsSampler({\r\n            nowFn,\r\n            initialFps: game.maxFps === Infinity ? 60 : game.maxFps\r\n        });\r\n        return function mainloop() {\r\n            if (!game._hasStarted) {\r\n                return;\r\n            }\r\n            try {\r\n                game._requestId = raf(mainloop);\r\n                fpsSampler.start();\r\n                game.emit('preframe', new PreFrameEvent(game, game.stats.prevFrame));\r\n                // Get the time to calculate time-elapsed\r\n                const now = nowFn();\r\n                let elapsed = now - lastTime || 1; // first frame\r\n                // Constrain fps\r\n                const fpsInterval = game.maxFps === Number.POSITIVE_INFINITY ? 0 : 1000 / game.maxFps;\r\n                if (elapsed <= fpsInterval) {\r\n                    return; // too fast 😎 skip this frame\r\n                }\r\n                // Resolves issue #138 if the game has been paused, or blurred for\r\n                // more than a 200 milliseconds, reset elapsed time to 1. This improves reliability\r\n                // and provides more expected behavior when the engine comes back\r\n                // into focus\r\n                if (elapsed > 200) {\r\n                    elapsed = 1;\r\n                }\r\n                const delta = elapsed * game.timescale;\r\n                // reset frame stats (reuse existing instances)\r\n                const frameId = game.stats.prevFrame.id + 1;\r\n                game.stats.currFrame.reset();\r\n                game.stats.currFrame.id = frameId;\r\n                game.stats.currFrame.delta = delta;\r\n                game.stats.currFrame.fps = fpsSampler.fps;\r\n                const beforeUpdate = nowFn();\r\n                game._update(delta);\r\n                const afterUpdate = nowFn();\r\n                game._draw(delta);\r\n                const afterDraw = nowFn();\r\n                game.stats.currFrame.duration.update = afterUpdate - beforeUpdate;\r\n                game.stats.currFrame.duration.draw = afterDraw - afterUpdate;\r\n                // if fps interval is not a multiple\r\n                if (fpsInterval > 0) {\r\n                    lastTime = now - (elapsed % fpsInterval);\r\n                }\r\n                else {\r\n                    lastTime = now;\r\n                }\r\n                game.emit('postframe', new PostFrameEvent(game, game.stats.currFrame));\r\n                fpsSampler.end();\r\n                game.stats.prevFrame.reset(game.stats.currFrame);\r\n            }\r\n            catch (e) {\r\n                window.cancelAnimationFrame(game._requestId);\r\n                game.stop();\r\n                game.onFatalException(e);\r\n            }\r\n        };\r\n    }\r\n    /**\r\n     * Stops Excalibur's main loop, useful for pausing the game.\r\n     */\r\n    stop() {\r\n        if (this.clock.isRunning()) {\r\n            this.emit('stop', new GameStopEvent(this));\r\n            this.browser.pause();\r\n            this.clock.stop();\r\n            this._logger.debug('Game stopped');\r\n        }\r\n    }\r\n    /**\r\n     * Returns the Engine's Running status, Useful for checking whether engine is running or paused.\r\n     * @deprecated will be removed in v0.26.0, use isRunning()\r\n     */\r\n    isPaused() {\r\n        return !this.clock.isRunning();\r\n    }\r\n    /**\r\n     * Returns the Engine's running status, Useful for checking whether engine is running or paused.\r\n     */\r\n    isRunning() {\r\n        return this.clock.isRunning();\r\n    }\r\n    /**\r\n     * Takes a screen shot of the current viewport and returns it as an\r\n     * HTML Image Element.\r\n     * @param preserveHiDPIResolution in the case of HiDPI return the full scaled backing image, by default false\r\n     */\r\n    screenshot(preserveHiDPIResolution = false) {\r\n        const screenShotPromise = new Promise((resolve) => {\r\n            this._screenShotRequests.push({ preserveHiDPIResolution, resolve });\r\n        });\r\n        return screenShotPromise;\r\n    }\r\n    _checkForScreenShots() {\r\n        // We must grab the draw buffer before we yield to the browser\r\n        // the draw buffer is cleared after compositing\r\n        // the reason for the asynchrony is setting `preserveDrawingBuffer: true`\r\n        // forces the browser to copy buffers which can have a mass perf impact on mobile\r\n        for (const request of this._screenShotRequests) {\r\n            const finalWidth = request.preserveHiDPIResolution ? this.canvas.width : this.screen.resolution.width;\r\n            const finalHeight = request.preserveHiDPIResolution ? this.canvas.height : this.screen.resolution.height;\r\n            const screenshot = document.createElement('canvas');\r\n            screenshot.width = finalWidth;\r\n            screenshot.height = finalHeight;\r\n            const ctx = screenshot.getContext('2d');\r\n            ctx.drawImage(this.canvas, 0, 0, finalWidth, finalHeight);\r\n            const result = new Image();\r\n            const raw = screenshot.toDataURL('image/png');\r\n            result.src = raw;\r\n            request.resolve(result);\r\n        }\r\n        // Reset state\r\n        this._screenShotRequests.length = 0;\r\n    }\r\n    /**\r\n     * Another option available to you to load resources into the game.\r\n     * Immediately after calling this the game will pause and the loading screen\r\n     * will appear.\r\n     * @param loader  Some [[Loadable]] such as a [[Loader]] collection, [[Sound]], or [[Texture]].\r\n     */\r\n    async load(loader) {\r\n        try {\r\n            await loader.load();\r\n        }\r\n        catch (_a) {\r\n            await Promise.resolve();\r\n        }\r\n    }\r\n}\r\n/**\r\n * Default [[EngineOptions]]\r\n */\r\nEngine._DEFAULT_ENGINE_OPTIONS = {\r\n    width: 0,\r\n    height: 0,\r\n    enableCanvasTransparency: true,\r\n    canvasElementId: '',\r\n    canvasElement: undefined,\r\n    snapToPixel: false,\r\n    pointerScope: PointerScope.Canvas,\r\n    suppressConsoleBootMessage: null,\r\n    suppressMinimumBrowserFeatureDetection: null,\r\n    suppressHiDPIScaling: null,\r\n    suppressPlayButton: null,\r\n    scrollPreventionMode: ScrollPreventionMode.Canvas,\r\n    backgroundColor: Color.fromHex('#2185d0') // Excalibur blue\r\n};\r\nEngine_decorate([\r\n    obsolete({ message: 'Will be removed in excalibur v0.26.0', alternateMethod: 'Use Actor.graphics' })\r\n], Engine.prototype, \"playAnimation\", null);\r\n/**\r\n * @internal\r\n * @deprecated\r\n */\r\nlet AnimationNode = class AnimationNode {\r\n    constructor(animation, x, y) {\r\n        this.animation = animation;\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n};\r\nAnimationNode = Engine_decorate([\r\n    obsolete({ message: 'Will be removed in excalibur v0.26.0' })\r\n], AnimationNode);\r\n\n;// CONCATENATED MODULE: ./Math/Index.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n;// CONCATENATED MODULE: ./Debug/index.ts\n\r\n\r\n\r\n\n;// CONCATENATED MODULE: ./Events/MediaEvents.ts\n\r\nclass MediaEvent extends GameEvent {\r\n    constructor(target, _name = 'MediaEvent') {\r\n        super();\r\n        this.target = target;\r\n        this._name = _name;\r\n    }\r\n    /**\r\n     * Media event cannot bubble\r\n     */\r\n    set bubbles(_value) {\r\n        // stubbed\r\n    }\r\n    /**\r\n     * Media event cannot bubble\r\n     */\r\n    get bubbles() {\r\n        return false;\r\n    }\r\n    /**\r\n     * Media event cannot bubble, so they have no path\r\n     */\r\n    get _path() {\r\n        return null;\r\n    }\r\n    /**\r\n     * Media event cannot bubble, so they have no path\r\n     */\r\n    set _path(_val) {\r\n        // stubbed\r\n    }\r\n    /**\r\n     * Prevents event from bubbling\r\n     */\r\n    stopPropagation() {\r\n        /**\r\n         * Stub\r\n         */\r\n    }\r\n    /**\r\n     * Action, that calls when event happens\r\n     */\r\n    action() {\r\n        /**\r\n         * Stub\r\n         */\r\n    }\r\n    /**\r\n     * Propagate event further through event path\r\n     */\r\n    propagate() {\r\n        /**\r\n         * Stub\r\n         */\r\n    }\r\n    layPath(_actor) {\r\n        /**\r\n         * Stub\r\n         */\r\n    }\r\n}\r\nclass NativeSoundEvent extends MediaEvent {\r\n    constructor(target, track) {\r\n        super(target, 'NativeSoundEvent');\r\n        this.track = track;\r\n    }\r\n}\r\nclass NativeSoundProcessedEvent extends MediaEvent {\r\n    constructor(target, _processedData) {\r\n        super(target, 'NativeSoundProcessedEvent');\r\n        this._processedData = _processedData;\r\n        this.data = this._processedData;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Label.ts\nvar Label_decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Labels are the way to draw small amounts of text to the screen. They are\r\n * actors and inherit all of the benefits and capabilities.\r\n */\r\nclass Label_Label extends Actor {\r\n    /**\r\n     * Build a new label\r\n     * @param options\r\n     */\r\n    constructor(options) {\r\n        super(options);\r\n        this._font = new Font();\r\n        this._text = new Text({ text: '', font: this._font });\r\n        /**\r\n         * Gets or sets the letter spacing on a Label. Only supported with Sprite Fonts.\r\n         * @deprecated Use [[SpriteFont.spacing]]\r\n         */\r\n        this.letterSpacing = 0; //px\r\n        /**\r\n         * Whether or not the [[SpriteFont]] will be case-sensitive when matching characters.\r\n         * @deprecated Use Graphics.SpriteFont.caseInsensitive\r\n         */\r\n        this.caseInsensitive = true;\r\n        const { text, pos, x, y, spriteFont, font, color } = options;\r\n        this.pos = pos !== null && pos !== void 0 ? pos : (x && y ? vec(x, y) : this.pos);\r\n        this.text = text !== null && text !== void 0 ? text : this.text;\r\n        this.font = font !== null && font !== void 0 ? font : this.font;\r\n        this.spriteFont = spriteFont !== null && spriteFont !== void 0 ? spriteFont : this.spriteFont;\r\n        this._text.color = color !== null && color !== void 0 ? color : this.color;\r\n        const gfx = this.get(GraphicsComponent);\r\n        gfx.anchor = Vector.Zero;\r\n        gfx.use(this._text);\r\n    }\r\n    get font() {\r\n        return this._font;\r\n    }\r\n    set font(newFont) {\r\n        this._font = newFont;\r\n        this._text.font = newFont;\r\n    }\r\n    /**\r\n     * The text to draw.\r\n     */\r\n    get text() {\r\n        return this._text.text;\r\n    }\r\n    set text(text) {\r\n        this._text.text = text;\r\n    }\r\n    get color() {\r\n        return this._text.color;\r\n    }\r\n    set color(color) {\r\n        if (this._text) {\r\n            this._text.color = color;\r\n        }\r\n    }\r\n    get opacity() {\r\n        return this._text.opacity;\r\n    }\r\n    set opacity(opacity) {\r\n        this._text.opacity = opacity;\r\n    }\r\n    /**\r\n     * Sets or gets the bold property of the label's text, by default it's false\r\n     * @deprecated Use [[Font.bold|Label.font.bold]]\r\n     */\r\n    get bold() {\r\n        return this.font.bold;\r\n    }\r\n    set bold(isBold) {\r\n        this.font.bold = isBold;\r\n    }\r\n    /**\r\n     * The CSS font family string (e.g. `sans-serif`, `Droid Sans Pro`). Web fonts\r\n     * are supported, same as in CSS.\r\n     * @deprecated Use [[Font.family|Label.font.family]]\r\n     */\r\n    get fontFamily() {\r\n        return this.font.family;\r\n    }\r\n    set fontFamily(family) {\r\n        this.font.family = family;\r\n    }\r\n    /**\r\n     * The font size in the selected units, default is 10 (default units is pixel)\r\n     * @deprecated Use [[Font.size|Label.font.size]]\r\n     */\r\n    get fontSize() {\r\n        return this.font.size;\r\n    }\r\n    set fontSize(sizeInUnit) {\r\n        this.font.size = sizeInUnit;\r\n    }\r\n    /**\r\n     * The font style for this label, the default is [[FontStyle.Normal]]\r\n     * @deprecated Use [[Font.style|Label.font.style]]\r\n     */\r\n    get fontStyle() {\r\n        return this.font.style;\r\n    }\r\n    set fontStyle(style) {\r\n        this.font.style = style;\r\n    }\r\n    /**\r\n     * The css units for a font size such as px, pt, em (SpriteFont only support px), by default is 'px';\r\n     * @deprecated Use [[Font.unit|Label.font.unit]]\r\n     */\r\n    get fontUnit() {\r\n        return this.font.unit;\r\n    }\r\n    set fontUnit(unit) {\r\n        this.font.unit = unit;\r\n    }\r\n    /**\r\n     * Gets or sets the horizontal text alignment property for the label.\r\n     * @deprecated Use [[Font.textAlign|Label.font.textAlign]]\r\n     */\r\n    get textAlign() {\r\n        return this.font.textAlign;\r\n    }\r\n    set textAlign(align) {\r\n        this.font.textAlign = align;\r\n    }\r\n    /**\r\n     * Gets or sets the baseline alignment property for the label.\r\n     * @deprecated Use [[Font.baseAlign|Label.font.baseAlign]]\r\n     */\r\n    get baseAlign() {\r\n        return this.font.baseAlign;\r\n    }\r\n    set baseAlign(align) {\r\n        this.font.baseAlign = align;\r\n    }\r\n    /**\r\n     * The [[LegacyDrawing.SpriteFont]] to use, if any. Overrides [[fontFamily]] if present.\r\n     * @deprecated Use [[SpriteFont]]\r\n     */\r\n    get spriteFont() {\r\n        return this._legacySpriteFont;\r\n    }\r\n    set spriteFont(sf) {\r\n        if (sf) {\r\n            if (sf instanceof SpriteFont) {\r\n                this._legacySpriteFont = sf;\r\n                this._spriteFont = SpriteFont_SpriteFont.fromLegacySpriteFont(sf);\r\n                this._text.font = this._spriteFont;\r\n                return;\r\n            }\r\n            this._spriteFont = sf;\r\n            this._text.font = this._spriteFont;\r\n        }\r\n    }\r\n    _initialize(engine) {\r\n        super._initialize(engine);\r\n        this._graphicsContext = engine.graphicsContext;\r\n    }\r\n    /**\r\n     * Returns the width of the text in the label (in pixels);\r\n     */\r\n    getTextWidth() {\r\n        return this._text.width;\r\n    }\r\n    /**\r\n     * Sets the text shadow for sprite fonts\r\n     * @param offsetX      The x offset in pixels to place the shadow\r\n     * @param offsetY      The y offset in pixels to place the shadow\r\n     * @param shadowColor  The color of the text shadow\r\n     * @deprecated Use [[Font.shadow|Label.font.shadow]]\r\n     */\r\n    setTextShadow(offsetX, offsetY, shadowColor) {\r\n        this.font.shadow = { offset: vec(offsetX, offsetY), blur: 2, color: shadowColor };\r\n    }\r\n    /**\r\n     * Toggles text shadows on or off, only applies when using sprite fonts\r\n     * @deprecated Use [[Font.shadow|Label.font.shadow]]\r\n     */\r\n    useTextShadow(on) {\r\n        if (this.spriteFont) {\r\n            this.spriteFont.useTextShadow(on);\r\n        }\r\n    }\r\n    /**\r\n     * Clears the current text shadow\r\n     * @deprecated Use [[Font.shadow|Label.font.shadow]]\r\n     */\r\n    clearTextShadow() {\r\n        this.font.shadow = null;\r\n    }\r\n    /**\r\n     * @deprecated signature will change in v0.26.0\r\n     * @param _ctx\r\n     * @param _delta\r\n     */\r\n    draw(_ctx, _delta) {\r\n        const exctx = this._graphicsContext;\r\n        this._text.draw(exctx, 0, 0);\r\n    }\r\n}\r\nLabel_decorate([\r\n    obsolete({\r\n        message: 'Label.bold will be removed in v0.26.0',\r\n        alternateMethod: 'Use Label.font.bold'\r\n    })\r\n], Label_Label.prototype, \"bold\", null);\r\nLabel_decorate([\r\n    obsolete({\r\n        message: 'Label.fontFamily will be removed in v0.26.0',\r\n        alternateMethod: 'Use Label.font.family'\r\n    })\r\n], Label_Label.prototype, \"fontFamily\", null);\r\nLabel_decorate([\r\n    obsolete({\r\n        message: 'Label.fontSize will be removed in v0.26.0',\r\n        alternateMethod: 'Use Label.font.size'\r\n    })\r\n], Label_Label.prototype, \"fontSize\", null);\r\nLabel_decorate([\r\n    obsolete({\r\n        message: 'Label.fontStyle will be removed in v0.26.0',\r\n        alternateMethod: 'Use Label.font.style'\r\n    })\r\n], Label_Label.prototype, \"fontStyle\", null);\r\nLabel_decorate([\r\n    obsolete({\r\n        message: 'Label.fontUnit will be removed in v0.26.0',\r\n        alternateMethod: 'Use Label.font.unit'\r\n    })\r\n], Label_Label.prototype, \"fontUnit\", null);\r\nLabel_decorate([\r\n    obsolete({\r\n        message: 'Label.textAlign will be removed in v0.26.0',\r\n        alternateMethod: 'Use Label.font.textAlign'\r\n    })\r\n], Label_Label.prototype, \"textAlign\", null);\r\nLabel_decorate([\r\n    obsolete({\r\n        message: 'Label.baseAlign will be removed in v0.26.0',\r\n        alternateMethod: 'Use Label.font.baseAlign'\r\n    })\r\n], Label_Label.prototype, \"baseAlign\", null);\r\nLabel_decorate([\r\n    obsolete({\r\n        message: 'Label.setTextShadow will be removed in v0.26.0',\r\n        alternateMethod: 'Use Label.font.shadow'\r\n    })\r\n], Label_Label.prototype, \"setTextShadow\", null);\r\nLabel_decorate([\r\n    obsolete({\r\n        message: 'Label.useTextShadow will be removed in v0.26.0',\r\n        alternateMethod: 'Use Label.font.shadow'\r\n    })\r\n], Label_Label.prototype, \"useTextShadow\", null);\r\nLabel_decorate([\r\n    obsolete({\r\n        message: 'Label.clearTextShadow will be removed in v0.26.0',\r\n        alternateMethod: 'Use Label.font.shadow'\r\n    })\r\n], Label_Label.prototype, \"clearTextShadow\", null);\r\n\n;// CONCATENATED MODULE: ./Actions/Index.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n;// CONCATENATED MODULE: ./Collision/Group/CollisionGroupManager.ts\n\r\n/**\r\n * Static class for managing collision groups in excalibur, there is a maximum of 32 collision groups possible in excalibur\r\n */\r\nclass CollisionGroupManager {\r\n    /**\r\n     * Create a new named collision group up to a max of 32.\r\n     * @param name Name for the collision group\r\n     * @param mask Optionally provide your own 32-bit mask, if none is provide the manager will generate one\r\n     */\r\n    static create(name, mask) {\r\n        if (this._CURRENT_GROUP > this._MAX_GROUPS) {\r\n            throw new Error(`Cannot have more than ${this._MAX_GROUPS} collision groups`);\r\n        }\r\n        if (this._GROUPS.get(name)) {\r\n            throw new Error(`Collision group ${name} already exists`);\r\n        }\r\n        const group = new CollisionGroup(name, this._CURRENT_BIT, mask !== undefined ? mask : ~this._CURRENT_BIT);\r\n        this._CURRENT_BIT = (this._CURRENT_BIT << 1) | 0;\r\n        this._CURRENT_GROUP++;\r\n        this._GROUPS.set(name, group);\r\n        return group;\r\n    }\r\n    /**\r\n     * Get all collision groups currently tracked by excalibur\r\n     */\r\n    static get groups() {\r\n        return Array.from(this._GROUPS.values());\r\n    }\r\n    /**\r\n     * Get a collision group by it's name\r\n     * @param name\r\n     */\r\n    static groupByName(name) {\r\n        return this._GROUPS.get(name);\r\n    }\r\n    /**\r\n     * Resets the managers internal group management state\r\n     */\r\n    static reset() {\r\n        this._GROUPS = new Map();\r\n        this._CURRENT_BIT = this._STARTING_BIT;\r\n        this._CURRENT_GROUP = 1;\r\n    }\r\n}\r\n// using bitmasking the maximum number of groups is 32, because that is the highest 32bit integer that JS can present.\r\nCollisionGroupManager._STARTING_BIT = 0b1 | 0;\r\nCollisionGroupManager._MAX_GROUPS = 32;\r\nCollisionGroupManager._CURRENT_GROUP = 1;\r\nCollisionGroupManager._CURRENT_BIT = CollisionGroupManager._STARTING_BIT;\r\nCollisionGroupManager._GROUPS = new Map();\r\n\n;// CONCATENATED MODULE: ./Collision/Index.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n;// CONCATENATED MODULE: ./Drawing/Polygon.ts\nvar Polygon_decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\n\r\n\r\n/**\r\n * Creates a closed polygon drawing given a list of [[Vector]]s.\r\n *\r\n * @deprecated Use [[Polygon]]\r\n * @warning Use sparingly as Polygons are performance intensive\r\n */\r\nlet Polygon = class Polygon {\r\n    /**\r\n     * @param points  The vectors to use to build the polygon in order\r\n     */\r\n    constructor(points) {\r\n        /**\r\n         * The width of the lines of the polygon\r\n         */\r\n        this.lineWidth = 5;\r\n        /**\r\n         * Indicates whether the polygon is filled or not.\r\n         */\r\n        this.filled = false;\r\n        this._points = [];\r\n        this.anchor = Vector.Zero;\r\n        this.offset = Vector.Zero;\r\n        this.rotation = 0;\r\n        this.scale = Vector.One;\r\n        this.opacity = 1;\r\n        this._points = points;\r\n        const minX = this._points.reduce((prev, curr) => {\r\n            return Math.min(prev, curr.x);\r\n        }, 0);\r\n        const maxX = this._points.reduce((prev, curr) => {\r\n            return Math.max(prev, curr.x);\r\n        }, 0);\r\n        this.drawWidth = maxX - minX;\r\n        const minY = this._points.reduce((prev, curr) => {\r\n            return Math.min(prev, curr.y);\r\n        }, 0);\r\n        const maxY = this._points.reduce((prev, curr) => {\r\n            return Math.max(prev, curr.y);\r\n        }, 0);\r\n        this.drawHeight = maxY - minY;\r\n        this.height = this.drawHeight;\r\n        this.width = this.drawWidth;\r\n    }\r\n    /**\r\n     * @notimplemented Effects are not supported on `Polygon`\r\n     */\r\n    addEffect() {\r\n        // not supported on polygons\r\n    }\r\n    /**\r\n     * @notimplemented Effects are not supported on `Polygon`\r\n     */\r\n    removeEffect() {\r\n        // not supported on polygons\r\n    }\r\n    /**\r\n     * @notimplemented Effects are not supported on `Polygon`\r\n     */\r\n    clearEffects() {\r\n        // not supported on polygons\r\n    }\r\n    reset() {\r\n        //pass\r\n    }\r\n    draw(ctxOrOptions, x, y) {\r\n        if (ctxOrOptions instanceof CanvasRenderingContext2D) {\r\n            this._drawWithOptions({ ctx: ctxOrOptions, x, y });\r\n        }\r\n        else {\r\n            this._drawWithOptions(ctxOrOptions);\r\n        }\r\n    }\r\n    _drawWithOptions(options) {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\r\n        const { ctx, x, y, rotation, drawWidth, drawHeight, anchor, offset, opacity, flipHorizontal, flipVertical } = {\r\n            ...options,\r\n            rotation: (_a = options.rotation) !== null && _a !== void 0 ? _a : this.rotation,\r\n            drawWidth: (_b = options.drawWidth) !== null && _b !== void 0 ? _b : this.drawWidth,\r\n            drawHeight: (_c = options.drawHeight) !== null && _c !== void 0 ? _c : this.drawHeight,\r\n            flipHorizontal: (_d = options.flipHorizontal) !== null && _d !== void 0 ? _d : this.flipHorizontal,\r\n            flipVertical: (_e = options.flipVertical) !== null && _e !== void 0 ? _e : this.flipVertical,\r\n            anchor: (_f = options.anchor) !== null && _f !== void 0 ? _f : this.anchor,\r\n            offset: (_g = options.offset) !== null && _g !== void 0 ? _g : this.offset,\r\n            opacity: ((_h = options.opacity) !== null && _h !== void 0 ? _h : 1) * ((_j = this.opacity) !== null && _j !== void 0 ? _j : 1)\r\n        };\r\n        const xpoint = drawWidth * anchor.x + offset.x + x;\r\n        const ypoint = drawHeight * anchor.y + offset.y + y;\r\n        ctx.save();\r\n        ctx.translate(xpoint, ypoint);\r\n        ctx.scale(this.scale.x, this.scale.y);\r\n        ctx.rotate(rotation);\r\n        ctx.beginPath();\r\n        ctx.lineWidth = this.lineWidth;\r\n        // Iterate through the supplied points and construct a 'polygon'\r\n        const firstPoint = this._points[0];\r\n        ctx.moveTo(firstPoint.x, firstPoint.y);\r\n        let i = 0;\r\n        const len = this._points.length;\r\n        for (i; i < len; i++) {\r\n            ctx.lineTo(this._points[i].x, this._points[i].y);\r\n        }\r\n        ctx.lineTo(firstPoint.x, firstPoint.y);\r\n        ctx.closePath();\r\n        if (this.filled) {\r\n            ctx.fillStyle = this.fillColor.toString();\r\n            ctx.fill();\r\n        }\r\n        ctx.strokeStyle = this.lineColor.toString();\r\n        if (flipHorizontal) {\r\n            ctx.translate(drawWidth, 0);\r\n            ctx.scale(-1, 1);\r\n        }\r\n        if (flipVertical) {\r\n            ctx.translate(0, drawHeight);\r\n            ctx.scale(1, -1);\r\n        }\r\n        const oldAlpha = ctx.globalAlpha;\r\n        ctx.globalAlpha = opacity;\r\n        ctx.stroke();\r\n        ctx.globalAlpha = oldAlpha;\r\n        ctx.restore();\r\n    }\r\n};\r\nPolygon = Polygon_decorate([\r\n    obsolete({\r\n        message: 'Polygon will be removed in v0.26.0',\r\n        alternateMethod: 'Use Graphics.Polygon'\r\n    })\r\n], Polygon);\r\n\r\n\n;// CONCATENATED MODULE: ./Drawing/Index.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n;// CONCATENATED MODULE: ./Interfaces/AudioImplementation.ts\nclass ExResponse {\r\n}\r\nExResponse.type = {\r\n    any: '',\r\n    blob: 'blob',\r\n    json: 'json',\r\n    text: 'text',\r\n    document: 'document',\r\n    arraybuffer: 'arraybuffer'\r\n};\r\n\n;// CONCATENATED MODULE: ./Interfaces/LifecycleEvents.ts\n/**\r\n * Type guard checking for internal initialize method\r\n * @internal\r\n * @param a\r\n */\r\nfunction has_initialize(a) {\r\n    return !!a._initialize;\r\n}\r\n/**\r\n *\r\n */\r\nfunction hasOnInitialize(a) {\r\n    return !!a.onInitialize;\r\n}\r\n/**\r\n *\r\n */\r\nfunction has_preupdate(a) {\r\n    return !!a._preupdate;\r\n}\r\n/**\r\n *\r\n */\r\nfunction hasOnPreUpdate(a) {\r\n    return !!a.onPreUpdate;\r\n}\r\n/**\r\n *\r\n */\r\nfunction has_postupdate(a) {\r\n    return !!a.onPostUpdate;\r\n}\r\n/**\r\n *\r\n */\r\nfunction hasOnPostUpdate(a) {\r\n    return !!a.onPostUpdate;\r\n}\r\n/**\r\n *\r\n */\r\nfunction hasPreDraw(a) {\r\n    return !!a.onPreDraw;\r\n}\r\n/**\r\n *\r\n */\r\nfunction hasPostDraw(a) {\r\n    return !!a.onPostDraw;\r\n}\r\n\n;// CONCATENATED MODULE: ./Interfaces/Index.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n;// CONCATENATED MODULE: ./Resources/Sound/WebAudioInstance.ts\n\r\n\r\n/**\r\n * Internal class representing a Web Audio AudioBufferSourceNode instance\r\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API\r\n */\r\nclass WebAudioInstance {\r\n    constructor(_src) {\r\n        this._src = _src;\r\n        this._volume = 1;\r\n        this._duration = undefined;\r\n        this._loop = false;\r\n        this._isPlaying = false;\r\n        this._isPaused = false;\r\n        this._audioContext = AudioContextFactory.create();\r\n        this._volumeNode = this._audioContext.createGain();\r\n        /**\r\n         * Current playback offset (in seconds)\r\n         */\r\n        this._currentOffset = 0;\r\n        this._createNewBufferSource();\r\n    }\r\n    set loop(value) {\r\n        this._loop = value;\r\n        if (this._instance) {\r\n            this._instance.loop = value;\r\n            this._wireUpOnEnded();\r\n        }\r\n    }\r\n    get loop() {\r\n        return this._loop;\r\n    }\r\n    set volume(value) {\r\n        value = clamp(value, 0, 1.0);\r\n        this._volume = value;\r\n        if (this._isPlaying && this._volumeNode.gain.setTargetAtTime) {\r\n            // https://developer.mozilla.org/en-US/docs/Web/API/AudioParam/setTargetAtTime\r\n            // After each .1 seconds timestep, the target value will ~63.2% closer to the target value.\r\n            // This exponential ramp provides a more pleasant transition in gain\r\n            this._volumeNode.gain.setTargetAtTime(value, this._audioContext.currentTime, 0.1);\r\n        }\r\n        else {\r\n            this._volumeNode.gain.value = value;\r\n        }\r\n    }\r\n    get volume() {\r\n        return this._volume;\r\n    }\r\n    set duration(value) {\r\n        this._duration = value;\r\n    }\r\n    /**\r\n     * Duration of the sound, in seconds.\r\n     */\r\n    get duration() {\r\n        return this._duration;\r\n    }\r\n    get _playbackRate() {\r\n        return this._instance ? 1 / (this._instance.playbackRate.value || 1.0) : null;\r\n    }\r\n    isPlaying() {\r\n        return this._isPlaying;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\r\n    play(playStarted = () => { }) {\r\n        if (this._isPaused) {\r\n            this._resumePlayBack();\r\n            playStarted();\r\n        }\r\n        if (!this._isPlaying) {\r\n            this._startPlayBack();\r\n            playStarted();\r\n        }\r\n        return this._playingPromise;\r\n    }\r\n    pause() {\r\n        if (!this._isPlaying) {\r\n            return;\r\n        }\r\n        this._isPaused = true;\r\n        this._isPlaying = false;\r\n        this._instance.stop(0);\r\n        // Playback rate will be a scale factor of how fast/slow the audio is being played\r\n        // default is 1.0\r\n        // we need to invert it to get the time scale\r\n        this._setPauseOffset();\r\n    }\r\n    stop() {\r\n        if (!this._isPlaying) {\r\n            return;\r\n        }\r\n        this._isPlaying = false;\r\n        this._isPaused = false;\r\n        this._currentOffset = 0;\r\n        this._instance.stop(0);\r\n        // handler will not be wired up if we were looping\r\n        if (!this._instance.onended) {\r\n            this._handleOnEnded();\r\n        }\r\n    }\r\n    _startPlayBack() {\r\n        this._isPlaying = true;\r\n        this._isPaused = false;\r\n        this._playingPromise = new Promise((resolve) => {\r\n            this._playingResolve = resolve;\r\n        });\r\n        if (!this._instance) {\r\n            this._createNewBufferSource();\r\n        }\r\n        this._rememberStartTime();\r\n        this._volumeNode.connect(this._audioContext.destination);\r\n        this._instance.start(0, 0);\r\n        this._currentOffset = 0;\r\n        this._wireUpOnEnded();\r\n    }\r\n    _resumePlayBack() {\r\n        if (!this._isPaused) {\r\n            return;\r\n        }\r\n        this._isPaused = false;\r\n        this._isPlaying = true;\r\n        // a buffer source can only be started once\r\n        // so we need to dispose of the previous instance before\r\n        // \"resuming\" the next one\r\n        this._instance.onended = null; // dispose of any previous event handler\r\n        this._createNewBufferSource();\r\n        const duration = this._playbackRate * this._src.duration;\r\n        const restartTime = this._currentOffset % duration;\r\n        this._rememberStartTime(restartTime * -1000);\r\n        this._instance.start(0, restartTime);\r\n        this._wireUpOnEnded();\r\n    }\r\n    _wireUpOnEnded() {\r\n        if (!this.loop) {\r\n            this._instance.onended = () => this._handleOnEnded();\r\n        }\r\n    }\r\n    _handleOnEnded() {\r\n        // pausing calls stop(0) which triggers onended event\r\n        // so we don't \"resolve\" yet (when we resume we'll try again)\r\n        if (!this._isPaused) {\r\n            this._isPlaying = false;\r\n            this._playingResolve(true);\r\n        }\r\n    }\r\n    _rememberStartTime(amend) {\r\n        this._startTime = new Date().getTime() + (amend | 0);\r\n    }\r\n    _setPauseOffset() {\r\n        this._currentOffset = ((new Date().getTime() - this._startTime) * this._playbackRate) / 1000; // in seconds\r\n    }\r\n    _createNewBufferSource() {\r\n        this._instance = this._audioContext.createBufferSource();\r\n        this._instance.buffer = this._src;\r\n        this._instance.loop = this.loop;\r\n        this._instance.playbackRate.setValueAtTime(1.0, 0);\r\n        this._instance.connect(this._volumeNode);\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Util/Sound.ts\n\r\n/**\r\n * Whether or not the browser can play this file as HTML5 Audio\r\n */\r\nfunction canPlayFile(file) {\r\n    try {\r\n        const a = new Audio();\r\n        const filetype = /.*\\.([A-Za-z0-9]+)$/;\r\n        const type = file.match(filetype)[1];\r\n        if (a.canPlayType('audio/' + type)) {\r\n            return true;\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    }\r\n    catch (e) {\r\n        Logger.getInstance().warn('Cannot determine audio support, assuming no support for the Audio Tag', e);\r\n        return false;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Resources/Sound/Sound.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * The [[Sound]] object allows games built in Excalibur to load audio\r\n * components, from soundtracks to sound effects. [[Sound]] is an [[Loadable]]\r\n * which means it can be passed to a [[Loader]] to pre-load before a game or level.\r\n */\r\nclass Sound extends Class {\r\n    /**\r\n     * @param paths A list of audio sources (clip.wav, clip.mp3, clip.ogg) for this audio clip. This is done for browser compatibility.\r\n     */\r\n    constructor(...paths) {\r\n        super();\r\n        this.logger = Logger.getInstance();\r\n        this._loop = false;\r\n        this._volume = 1;\r\n        this._duration = undefined;\r\n        this._isStopped = false;\r\n        this._isPaused = false;\r\n        this._tracks = [];\r\n        this._wasPlayingOnHidden = false;\r\n        this._audioContext = AudioContextFactory.create();\r\n        this._resource = new Resource('', ExResponse.type.arraybuffer);\r\n        /**\r\n         * Chrome : MP3, WAV, Ogg\r\n         * Firefox : WAV, Ogg,\r\n         * IE : MP3, WAV coming soon\r\n         * Safari MP3, WAV, Ogg\r\n         */\r\n        for (const path of paths) {\r\n            if (canPlayFile(path)) {\r\n                this.path = path;\r\n                break;\r\n            }\r\n        }\r\n        if (!this.path) {\r\n            this.logger.warn('This browser does not support any of the audio files specified:', paths.join(', '));\r\n            this.logger.warn('Attempting to use', paths[0]);\r\n            this.path = paths[0]; // select the first specified\r\n        }\r\n    }\r\n    /**\r\n     * Indicates whether the clip should loop when complete\r\n     * @param value  Set the looping flag\r\n     */\r\n    set loop(value) {\r\n        this._loop = value;\r\n        for (const track of this._tracks) {\r\n            track.loop = this._loop;\r\n        }\r\n        this.logger.debug('Set loop for all instances of sound', this.path, 'to', this._loop);\r\n    }\r\n    get loop() {\r\n        return this._loop;\r\n    }\r\n    set volume(value) {\r\n        this._volume = value;\r\n        for (const track of this._tracks) {\r\n            track.volume = this._volume;\r\n        }\r\n        this.emit('volumechange', new NativeSoundEvent(this));\r\n        this.logger.debug('Set loop for all instances of sound', this.path, 'to', this._volume);\r\n    }\r\n    get volume() {\r\n        return this._volume;\r\n    }\r\n    get duration() {\r\n        return this._duration;\r\n    }\r\n    /**\r\n     * Return array of Current AudioInstances playing or being paused\r\n     */\r\n    get instances() {\r\n        return this._tracks;\r\n    }\r\n    get path() {\r\n        return this._resource.path;\r\n    }\r\n    set path(val) {\r\n        this._resource.path = val;\r\n    }\r\n    isLoaded() {\r\n        return !!this.data;\r\n    }\r\n    async load() {\r\n        if (this.data) {\r\n            return this.data;\r\n        }\r\n        const arraybuffer = await this._resource.load();\r\n        const audiobuffer = await this.decodeAudio(arraybuffer.slice(0));\r\n        this._duration = typeof audiobuffer === 'object' ? audiobuffer.duration : undefined;\r\n        this.emit('processed', new NativeSoundProcessedEvent(this, audiobuffer));\r\n        return this.data = audiobuffer;\r\n    }\r\n    async decodeAudio(data) {\r\n        try {\r\n            return await this._audioContext.decodeAudioData(data.slice(0));\r\n        }\r\n        catch (e) {\r\n            this.logger.error('Unable to decode ' +\r\n                ' this browser may not fully support this format, or the file may be corrupt, ' +\r\n                'if this is an mp3 try removing id3 tags and album art from the file.');\r\n            return await Promise.reject();\r\n        }\r\n    }\r\n    wireEngine(engine) {\r\n        if (engine) {\r\n            this._engine = engine;\r\n            this._engine.on('hidden', () => {\r\n                if (engine.pauseAudioWhenHidden && this.isPlaying()) {\r\n                    this._wasPlayingOnHidden = true;\r\n                    this.pause();\r\n                }\r\n            });\r\n            this._engine.on('visible', () => {\r\n                if (engine.pauseAudioWhenHidden && this._wasPlayingOnHidden) {\r\n                    this.play();\r\n                    this._wasPlayingOnHidden = false;\r\n                }\r\n            });\r\n            this._engine.on('start', () => {\r\n                this._isStopped = false;\r\n            });\r\n            this._engine.on('stop', () => {\r\n                this.stop();\r\n                this._isStopped = true;\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * Returns how many instances of the sound are currently playing\r\n     */\r\n    instanceCount() {\r\n        return this._tracks.length;\r\n    }\r\n    /**\r\n     * Whether or not the sound is playing right now\r\n     */\r\n    isPlaying() {\r\n        return this._tracks.some((t) => t.isPlaying());\r\n    }\r\n    /**\r\n     * Play the sound, returns a promise that resolves when the sound is done playing\r\n     * An optional volume argument can be passed in to play the sound. Max volume is 1.0\r\n     */\r\n    play(volume) {\r\n        if (!this.isLoaded()) {\r\n            this.logger.warn('Cannot start playing. Resource', this.path, 'is not loaded yet');\r\n            return Promise.resolve(true);\r\n        }\r\n        if (this._isStopped) {\r\n            this.logger.warn('Cannot start playing. Engine is in a stopped state.');\r\n            return Promise.resolve(false);\r\n        }\r\n        this.volume = volume || this.volume;\r\n        if (this._isPaused) {\r\n            return this._resumePlayback();\r\n        }\r\n        else {\r\n            return this._startPlayback();\r\n        }\r\n    }\r\n    /**\r\n     * Stop the sound, and do not rewind\r\n     */\r\n    pause() {\r\n        if (!this.isPlaying()) {\r\n            return;\r\n        }\r\n        for (const track of this._tracks) {\r\n            track.pause();\r\n        }\r\n        this._isPaused = true;\r\n        this.emit('pause', new NativeSoundEvent(this));\r\n        this.logger.debug('Paused all instances of sound', this.path);\r\n    }\r\n    /**\r\n     * Stop the sound if it is currently playing and rewind the track. If the sound is not playing, rewinds the track.\r\n     */\r\n    stop() {\r\n        for (const track of this._tracks) {\r\n            track.stop();\r\n        }\r\n        this.emit('stop', new NativeSoundEvent(this));\r\n        this._isPaused = false;\r\n        this._tracks.length = 0;\r\n        this.logger.debug('Stopped all instances of sound', this.path);\r\n    }\r\n    /**\r\n     * Get Id of provided AudioInstance in current trackList\r\n     * @param track [[Audio]] which Id is to be given\r\n     */\r\n    getTrackId(track) {\r\n        return this._tracks.indexOf(track);\r\n    }\r\n    async _resumePlayback() {\r\n        if (this._isPaused) {\r\n            const resumed = [];\r\n            // ensure we resume *current* tracks (if paused)\r\n            for (const track of this._tracks) {\r\n                resumed.push(track.play());\r\n            }\r\n            this._isPaused = false;\r\n            this.emit('resume', new NativeSoundEvent(this));\r\n            this.logger.debug('Resuming paused instances for sound', this.path, this._tracks);\r\n            // resolve when resumed tracks are done\r\n            await Promise.all(resumed);\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * Starts playback, returns a promise that resolves when playback is complete\r\n     */\r\n    async _startPlayback() {\r\n        const track = await this._getTrackInstance(this.data);\r\n        const complete = await track.play(() => {\r\n            this.emit('playbackstart', new NativeSoundEvent(this, track));\r\n            this.logger.debug('Playing new instance for sound', this.path);\r\n        });\r\n        // when done, remove track\r\n        this.emit('playbackend', new NativeSoundEvent(this, track));\r\n        this._tracks.splice(this.getTrackId(track), 1);\r\n        return complete;\r\n    }\r\n    _getTrackInstance(data) {\r\n        const newTrack = new WebAudioInstance(data);\r\n        newTrack.loop = this.loop;\r\n        newTrack.volume = this.volume;\r\n        newTrack.duration = this.duration;\r\n        this._tracks.push(newTrack);\r\n        return newTrack;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Resources/Sound/Index.ts\n\r\n\r\n\r\n\n;// CONCATENATED MODULE: ./Resources/Gif.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * The [[Texture]] object allows games built in Excalibur to load image resources.\r\n * [[Texture]] is an [[Loadable]] which means it can be passed to a [[Loader]]\r\n * to pre-load before starting a level or game.\r\n */\r\nclass Gif {\r\n    /**\r\n     * @param path       Path to the image resource\r\n     * @param color      Optionally set the color to treat as transparent the gif, by default [[Color.Magenta]]\r\n     * @param bustCache  Optionally load texture with cache busting\r\n     */\r\n    constructor(path, color = Color.Magenta, bustCache = true) {\r\n        this.path = path;\r\n        this.color = color;\r\n        this.bustCache = bustCache;\r\n        this._stream = null;\r\n        this._gif = null;\r\n        this._textures = [];\r\n        this._animation = null;\r\n        this._transparentColor = null;\r\n        this._resource = new Resource(path, 'arraybuffer', bustCache);\r\n        this._transparentColor = color;\r\n    }\r\n    /**\r\n     * Begins loading the texture and returns a promise to be resolved on completion\r\n     */\r\n    async load() {\r\n        const arraybuffer = await this._resource.load();\r\n        this._stream = new Stream(arraybuffer);\r\n        this._gif = new ParseGif(this._stream, this._transparentColor);\r\n        const images = this._gif.images.map(i => new ImageSource(i.src, false));\r\n        // Load all textures\r\n        await Promise.all(images.map(t => t.load()));\r\n        return this.data = this._textures = images;\r\n    }\r\n    isLoaded() {\r\n        return !!this.data;\r\n    }\r\n    /**\r\n     * Return a frame of the gif as a legacy sprite by index\r\n     * @deprecated\r\n     */\r\n    toLegacySprite(id = 0) {\r\n        return Sprite.toLegacySprite(this.toSprite(id));\r\n    }\r\n    /**\r\n     * Return the gif as a legacy spritesheet\r\n     * @deprecated\r\n     */\r\n    toLegacySpriteSheet() {\r\n        return SpriteSheet.toLegacySpriteSheet(this.toSpriteSheet());\r\n    }\r\n    /**\r\n     * Return the gif as a legacy animation\r\n     * @deprecated\r\n     * @param engine\r\n     * @param speed\r\n     */\r\n    toLegacyAnimation(engine, speed) {\r\n        return Animation.toLegacyAnimation(engine, this.toAnimation(speed));\r\n    }\r\n    /**\r\n     * Return a frame of the gif as a sprite by id\r\n     * @param id\r\n     */\r\n    toSprite(id = 0) {\r\n        const sprite = this._textures[id].toSprite();\r\n        return sprite;\r\n    }\r\n    /**\r\n     * Return the gif as a spritesheet\r\n     */\r\n    toSpriteSheet() {\r\n        const sprites = this._textures.map((image) => {\r\n            return image.toSprite();\r\n        });\r\n        return new SpriteSheet({ sprites });\r\n    }\r\n    /**\r\n     * Transform the GIF into an animation with duration per frame\r\n     */\r\n    toAnimation(durationPerFrameMs) {\r\n        const spriteSheet = this.toSpriteSheet();\r\n        const length = spriteSheet.sprites.length;\r\n        this._animation = Animation.fromSpriteSheet(spriteSheet, range(0, length), durationPerFrameMs);\r\n        return this._animation;\r\n    }\r\n    get readCheckBytes() {\r\n        return this._gif.checkBytes;\r\n    }\r\n}\r\nconst bitsToNum = (ba) => {\r\n    return ba.reduce(function (s, n) {\r\n        return s * 2 + n;\r\n    }, 0);\r\n};\r\nconst byteToBitArr = (bite) => {\r\n    const a = [];\r\n    for (let i = 7; i >= 0; i--) {\r\n        a.push(!!(bite & (1 << i)));\r\n    }\r\n    return a;\r\n};\r\nclass Stream {\r\n    constructor(dataArray) {\r\n        this.data = null;\r\n        this.len = 0;\r\n        this.position = 0;\r\n        this.readByte = () => {\r\n            if (this.position >= this.data.byteLength) {\r\n                throw new Error('Attempted to read past end of stream.');\r\n            }\r\n            return this.data[this.position++];\r\n        };\r\n        this.readBytes = (n) => {\r\n            const bytes = [];\r\n            for (let i = 0; i < n; i++) {\r\n                bytes.push(this.readByte());\r\n            }\r\n            return bytes;\r\n        };\r\n        this.read = (n) => {\r\n            let s = '';\r\n            for (let i = 0; i < n; i++) {\r\n                s += String.fromCharCode(this.readByte());\r\n            }\r\n            return s;\r\n        };\r\n        this.readUnsigned = () => {\r\n            // Little-endian.\r\n            const a = this.readBytes(2);\r\n            return (a[1] << 8) + a[0];\r\n        };\r\n        this.data = new Uint8Array(dataArray);\r\n        this.len = this.data.byteLength;\r\n        if (this.len === 0) {\r\n            throw new Error('No data loaded from file');\r\n        }\r\n    }\r\n}\r\nconst lzwDecode = function (minCodeSize, data) {\r\n    // TODO: Now that the GIF parser is a bit different, maybe this should get an array of bytes instead of a String?\r\n    let pos = 0; // Maybe this streaming thing should be merged with the Stream?\r\n    const readCode = function (size) {\r\n        let code = 0;\r\n        for (let i = 0; i < size; i++) {\r\n            if (data.charCodeAt(pos >> 3) & (1 << (pos & 7))) {\r\n                code |= 1 << i;\r\n            }\r\n            pos++;\r\n        }\r\n        return code;\r\n    };\r\n    const output = [];\r\n    const clearCode = 1 << minCodeSize;\r\n    const eoiCode = clearCode + 1;\r\n    let codeSize = minCodeSize + 1;\r\n    let dict = [];\r\n    const clear = function () {\r\n        dict = [];\r\n        codeSize = minCodeSize + 1;\r\n        for (let i = 0; i < clearCode; i++) {\r\n            dict[i] = [i];\r\n        }\r\n        dict[clearCode] = [];\r\n        dict[eoiCode] = null;\r\n    };\r\n    let code;\r\n    let last;\r\n    while (true) {\r\n        last = code;\r\n        code = readCode(codeSize);\r\n        if (code === clearCode) {\r\n            clear();\r\n            continue;\r\n        }\r\n        if (code === eoiCode) {\r\n            break;\r\n        }\r\n        if (code < dict.length) {\r\n            if (last !== clearCode) {\r\n                dict.push(dict[last].concat(dict[code][0]));\r\n            }\r\n        }\r\n        else {\r\n            if (code !== dict.length) {\r\n                throw new Error('Invalid LZW code.');\r\n            }\r\n            dict.push(dict[last].concat(dict[last][0]));\r\n        }\r\n        output.push.apply(output, dict[code]);\r\n        if (dict.length === 1 << codeSize && codeSize < 12) {\r\n            // If we're at the last code and codeSize is 12, the next code will be a clearCode, and it'll be 12 bits long.\r\n            codeSize++;\r\n        }\r\n    }\r\n    // I don't know if this is technically an error, but some GIFs do it.\r\n    //if (Math.ceil(pos / 8) !== data.length) throw new Error('Extraneous LZW bytes.');\r\n    return output;\r\n};\r\n// The actual parsing; returns an object with properties.\r\nclass ParseGif {\r\n    constructor(stream, color = Color.Magenta) {\r\n        this._st = null;\r\n        this._handler = {};\r\n        this._transparentColor = null;\r\n        this.frames = [];\r\n        this.images = [];\r\n        this.globalColorTable = [];\r\n        this.checkBytes = [];\r\n        // LZW (GIF-specific)\r\n        this.parseColorTable = (entries) => {\r\n            // Each entry is 3 bytes, for RGB.\r\n            const ct = [];\r\n            for (let i = 0; i < entries; i++) {\r\n                const rgb = this._st.readBytes(3);\r\n                const rgba = '#' +\r\n                    rgb\r\n                        .map((x) => {\r\n                        const hex = x.toString(16);\r\n                        return hex.length === 1 ? '0' + hex : hex;\r\n                    })\r\n                        .join('');\r\n                ct.push(rgba);\r\n            }\r\n            return ct;\r\n        };\r\n        this.readSubBlocks = () => {\r\n            let size, data;\r\n            data = '';\r\n            do {\r\n                size = this._st.readByte();\r\n                data += this._st.read(size);\r\n            } while (size !== 0);\r\n            return data;\r\n        };\r\n        this.parseHeader = () => {\r\n            const hdr = {\r\n                sig: null,\r\n                ver: null,\r\n                width: null,\r\n                height: null,\r\n                colorRes: null,\r\n                globalColorTableSize: null,\r\n                gctFlag: null,\r\n                sorted: null,\r\n                globalColorTable: [],\r\n                bgColor: null,\r\n                pixelAspectRatio: null // if not 0, aspectRatio = (pixelAspectRatio + 15) / 64\r\n            };\r\n            hdr.sig = this._st.read(3);\r\n            hdr.ver = this._st.read(3);\r\n            if (hdr.sig !== 'GIF') {\r\n                throw new Error('Not a GIF file.'); // XXX: This should probably be handled more nicely.\r\n            }\r\n            hdr.width = this._st.readUnsigned();\r\n            hdr.height = this._st.readUnsigned();\r\n            const bits = byteToBitArr(this._st.readByte());\r\n            hdr.gctFlag = bits.shift();\r\n            hdr.colorRes = bitsToNum(bits.splice(0, 3));\r\n            hdr.sorted = bits.shift();\r\n            hdr.globalColorTableSize = bitsToNum(bits.splice(0, 3));\r\n            hdr.bgColor = this._st.readByte();\r\n            hdr.pixelAspectRatio = this._st.readByte(); // if not 0, aspectRatio = (pixelAspectRatio + 15) / 64\r\n            if (hdr.gctFlag) {\r\n                hdr.globalColorTable = this.parseColorTable(1 << (hdr.globalColorTableSize + 1));\r\n                this.globalColorTable = hdr.globalColorTable;\r\n            }\r\n            if (this._handler.hdr && this._handler.hdr(hdr)) {\r\n                this.checkBytes.push(this._handler.hdr);\r\n            }\r\n        };\r\n        this.parseExt = (block) => {\r\n            const parseGCExt = (block) => {\r\n                this.checkBytes.push(this._st.readByte()); // Always 4\r\n                const bits = byteToBitArr(this._st.readByte());\r\n                block.reserved = bits.splice(0, 3); // Reserved; should be 000.\r\n                block.disposalMethod = bitsToNum(bits.splice(0, 3));\r\n                block.userInput = bits.shift();\r\n                block.transparencyGiven = bits.shift();\r\n                block.delayTime = this._st.readUnsigned();\r\n                block.transparencyIndex = this._st.readByte();\r\n                block.terminator = this._st.readByte();\r\n                if (this._handler.gce && this._handler.gce(block)) {\r\n                    this.checkBytes.push(this._handler.gce);\r\n                }\r\n            };\r\n            const parseComExt = (block) => {\r\n                block.comment = this.readSubBlocks();\r\n                if (this._handler.com && this._handler.com(block)) {\r\n                    this.checkBytes.push(this._handler.com);\r\n                }\r\n            };\r\n            const parsePTExt = (block) => {\r\n                this.checkBytes.push(this._st.readByte()); // Always 12\r\n                block.ptHeader = this._st.readBytes(12);\r\n                block.ptData = this.readSubBlocks();\r\n                if (this._handler.pte && this._handler.pte(block)) {\r\n                    this.checkBytes.push(this._handler.pte);\r\n                }\r\n            };\r\n            const parseAppExt = (block) => {\r\n                const parseNetscapeExt = (block) => {\r\n                    this.checkBytes.push(this._st.readByte()); // Always 3\r\n                    block.unknown = this._st.readByte(); // Q: Always 1? What is this?\r\n                    block.iterations = this._st.readUnsigned();\r\n                    block.terminator = this._st.readByte();\r\n                    if (this._handler.app && this._handler.app.NETSCAPE && this._handler.app.NETSCAPE(block)) {\r\n                        this.checkBytes.push(this._handler.app);\r\n                    }\r\n                };\r\n                const parseUnknownAppExt = (block) => {\r\n                    block.appData = this.readSubBlocks();\r\n                    // FIXME: This won't work if a handler wants to match on any identifier.\r\n                    if (this._handler.app && this._handler.app[block.identifier] && this._handler.app[block.identifier](block)) {\r\n                        this.checkBytes.push(this._handler.app[block.identifier]);\r\n                    }\r\n                };\r\n                this.checkBytes.push(this._st.readByte()); // Always 11\r\n                block.identifier = this._st.read(8);\r\n                block.authCode = this._st.read(3);\r\n                switch (block.identifier) {\r\n                    case 'NETSCAPE':\r\n                        parseNetscapeExt(block);\r\n                        break;\r\n                    default:\r\n                        parseUnknownAppExt(block);\r\n                        break;\r\n                }\r\n            };\r\n            const parseUnknownExt = (block) => {\r\n                block.data = this.readSubBlocks();\r\n                if (this._handler.unknown && this._handler.unknown(block)) {\r\n                    this.checkBytes.push(this._handler.unknown);\r\n                }\r\n            };\r\n            block.label = this._st.readByte();\r\n            switch (block.label) {\r\n                case 0xf9:\r\n                    block.extType = 'gce';\r\n                    parseGCExt(block);\r\n                    break;\r\n                case 0xfe:\r\n                    block.extType = 'com';\r\n                    parseComExt(block);\r\n                    break;\r\n                case 0x01:\r\n                    block.extType = 'pte';\r\n                    parsePTExt(block);\r\n                    break;\r\n                case 0xff:\r\n                    block.extType = 'app';\r\n                    parseAppExt(block);\r\n                    break;\r\n                default:\r\n                    block.extType = 'unknown';\r\n                    parseUnknownExt(block);\r\n                    break;\r\n            }\r\n        };\r\n        this.parseImg = (img) => {\r\n            const deinterlace = (pixels, width) => {\r\n                // Of course this defeats the purpose of interlacing. And it's *probably*\r\n                // the least efficient way it's ever been implemented. But nevertheless...\r\n                const newPixels = new Array(pixels.length);\r\n                const rows = pixels.length / width;\r\n                const cpRow = (toRow, fromRow) => {\r\n                    const fromPixels = pixels.slice(fromRow * width, (fromRow + 1) * width);\r\n                    newPixels.splice.apply(newPixels, [toRow * width, width].concat(fromPixels));\r\n                };\r\n                const offsets = [0, 4, 2, 1];\r\n                const steps = [8, 8, 4, 2];\r\n                let fromRow = 0;\r\n                for (let pass = 0; pass < 4; pass++) {\r\n                    for (let toRow = offsets[pass]; toRow < rows; toRow += steps[pass]) {\r\n                        cpRow(toRow, fromRow);\r\n                        fromRow++;\r\n                    }\r\n                }\r\n                return newPixels;\r\n            };\r\n            img.leftPos = this._st.readUnsigned();\r\n            img.topPos = this._st.readUnsigned();\r\n            img.width = this._st.readUnsigned();\r\n            img.height = this._st.readUnsigned();\r\n            const bits = byteToBitArr(this._st.readByte());\r\n            img.lctFlag = bits.shift();\r\n            img.interlaced = bits.shift();\r\n            img.sorted = bits.shift();\r\n            img.reserved = bits.splice(0, 2);\r\n            img.lctSize = bitsToNum(bits.splice(0, 3));\r\n            if (img.lctFlag) {\r\n                img.lct = this.parseColorTable(1 << (img.lctSize + 1));\r\n            }\r\n            img.lzwMinCodeSize = this._st.readByte();\r\n            const lzwData = this.readSubBlocks();\r\n            img.pixels = lzwDecode(img.lzwMinCodeSize, lzwData);\r\n            if (img.interlaced) {\r\n                // Move\r\n                img.pixels = deinterlace(img.pixels, img.width);\r\n            }\r\n            this.frames.push(img);\r\n            this.arrayToImage(img);\r\n            if (this._handler.img && this._handler.img(img)) {\r\n                this.checkBytes.push(this._handler);\r\n            }\r\n        };\r\n        this.parseBlock = () => {\r\n            const block = {\r\n                sentinel: this._st.readByte(),\r\n                type: ''\r\n            };\r\n            const blockChar = String.fromCharCode(block.sentinel);\r\n            switch (blockChar) {\r\n                case '!':\r\n                    block.type = 'ext';\r\n                    this.parseExt(block);\r\n                    break;\r\n                case ',':\r\n                    block.type = 'img';\r\n                    this.parseImg(block);\r\n                    break;\r\n                case ';':\r\n                    block.type = 'eof';\r\n                    if (this._handler.eof && this._handler.eof(block)) {\r\n                        this.checkBytes.push(this._handler.eof);\r\n                    }\r\n                    break;\r\n                default:\r\n                    throw new Error('Unknown block: 0x' + block.sentinel.toString(16));\r\n            }\r\n            if (block.type !== 'eof') {\r\n                this.parseBlock();\r\n            }\r\n        };\r\n        this.arrayToImage = (frame) => {\r\n            let count = 0;\r\n            const c = document.createElement('canvas');\r\n            c.id = count.toString();\r\n            c.width = frame.width;\r\n            c.height = frame.height;\r\n            count++;\r\n            const context = c.getContext('2d');\r\n            const pixSize = 1;\r\n            let y = 0;\r\n            let x = 0;\r\n            for (let i = 0; i < frame.pixels.length; i++) {\r\n                if (x % frame.width === 0) {\r\n                    y++;\r\n                    x = 0;\r\n                }\r\n                if (this.globalColorTable[frame.pixels[i]] === this._transparentColor.toHex()) {\r\n                    context.fillStyle = `rgba(0, 0, 0, 0)`;\r\n                }\r\n                else {\r\n                    context.fillStyle = this.globalColorTable[frame.pixels[i]];\r\n                }\r\n                context.fillRect(x, y, pixSize, pixSize);\r\n                x++;\r\n            }\r\n            const img = new Image();\r\n            img.src = c.toDataURL();\r\n            this.images.push(img);\r\n        };\r\n        this._st = stream;\r\n        this._handler = {};\r\n        this._transparentColor = color;\r\n        this.parseHeader();\r\n        this.parseBlock();\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Resources/Index.ts\n\r\n\r\n\r\n\n;// CONCATENATED MODULE: ./EntityComponentSystem/index.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n;// CONCATENATED MODULE: ./Graphics/Polygon.ts\n\r\n\r\n\r\n/**\r\n * A polygon [[Graphic]] for drawing arbitrary polygons to the [[ExcaliburGraphicsContext]]\r\n *\r\n * Polygons default to [[ImageFiltering.Blended]]\r\n */\r\nclass Polygon_Polygon extends Raster {\r\n    constructor(options) {\r\n        super(options);\r\n        this.points = options.points;\r\n        this.filtering = ImageFiltering.Blended;\r\n        this.rasterize();\r\n    }\r\n    get points() {\r\n        return this._points;\r\n    }\r\n    set points(points) {\r\n        this._points = points;\r\n        const min = this.minPoint;\r\n        this.width = this._points.reduce((max, p) => Math.max(p.x, max), 0) - min.x;\r\n        this.height = this._points.reduce((max, p) => Math.max(p.y, max), 0) - min.y;\r\n        this.flagDirty();\r\n    }\r\n    get minPoint() {\r\n        const minX = this._points.reduce((min, p) => Math.min(p.x, min), Infinity);\r\n        const minY = this._points.reduce((min, p) => Math.min(p.y, min), Infinity);\r\n        return vec(minX, minY);\r\n    }\r\n    clone() {\r\n        return new Polygon_Polygon({\r\n            points: this.points.map((p) => p.clone()),\r\n            ...this.cloneGraphicOptions(),\r\n            ...this.cloneRasterOptions()\r\n        });\r\n    }\r\n    execute(ctx) {\r\n        if (this.points && this.points.length) {\r\n            ctx.beginPath();\r\n            // Iterate through the supplied points and construct a 'polygon'\r\n            const min = this.minPoint.negate();\r\n            const firstPoint = this.points[0].add(min);\r\n            ctx.moveTo(firstPoint.x, firstPoint.y);\r\n            this.points.forEach((point) => {\r\n                ctx.lineTo(point.x + min.x, point.y + min.y);\r\n            });\r\n            ctx.lineTo(firstPoint.x, firstPoint.y);\r\n            ctx.closePath();\r\n            if (this.color) {\r\n                ctx.fill();\r\n            }\r\n            if (this.strokeColor) {\r\n                ctx.stroke();\r\n            }\r\n        }\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Graphics/index.ts\n// Graphics\r\n\r\n\r\n\r\n\r\n\r\n\r\n// Graphics ECS\r\n\r\n\r\n\r\n// Raster graphics\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// Post Processor\r\n\r\n\r\n\r\n\r\n\r\n\r\n// Rendering\r\n\r\n\r\n\r\n\r\n\r\n// Util\r\n\r\n\r\n\n;// CONCATENATED MODULE: ./Input/Index.ts\n/**\r\n * @module\r\n * Provides support for mice, keyboards, and controllers.\r\n */\r\n/**\r\n * @typedoc\r\n */\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\n;// CONCATENATED MODULE: ./Traits/Index.ts\n/**\r\n * @module\r\n */\r\n\r\n\n;// CONCATENATED MODULE: ./Util/Index.ts\n\r\n\r\n\r\n\r\n\r\n\r\n\n;// CONCATENATED MODULE: ./Util/SortedList.ts\nvar SortedList_decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\n\r\n/**\r\n * A sorted list implementation. NOTE: this implementation is not self-balancing\r\n * @deprecated WIll be removed in v0.26.0 Use built in JS array.sort\r\n */\r\nlet SortedList = class SortedList {\r\n    constructor(getComparable) {\r\n        this._getComparable = getComparable;\r\n    }\r\n    find(element) {\r\n        return this._find(this._root, element);\r\n    }\r\n    _find(node, element) {\r\n        if (node == null) {\r\n            return false;\r\n        }\r\n        else if (this._getComparable(element) === node.getKey()) {\r\n            if (node.getData().indexOf(element) > -1) {\r\n                return true;\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        }\r\n        else if (this._getComparable(element) < node.getKey()) {\r\n            return this._find(node.getLeft(), element);\r\n        }\r\n        else {\r\n            return this._find(node.getRight(), element);\r\n        }\r\n    }\r\n    // returns the array of elements at a specific key value\r\n    get(key) {\r\n        return this._get(this._root, key);\r\n    }\r\n    _get(node, key) {\r\n        if (node == null) {\r\n            return [];\r\n        }\r\n        else if (key === node.getKey()) {\r\n            return node.getData();\r\n        }\r\n        else if (key < node.getKey()) {\r\n            return this._get(node.getLeft(), key);\r\n        }\r\n        else {\r\n            return this._get(node.getRight(), key);\r\n        }\r\n    }\r\n    add(element) {\r\n        if (this._root == null) {\r\n            this._root = new BinaryTreeNode(this._getComparable(element), [element], null, null);\r\n            return true;\r\n        }\r\n        else {\r\n            return this._insert(this._root, element);\r\n        }\r\n    }\r\n    _insert(node, element) {\r\n        if (node != null) {\r\n            if (this._getComparable(element) === node.getKey()) {\r\n                if (node.getData().indexOf(element) > -1) {\r\n                    return false; // the element we're trying to insert already exists\r\n                }\r\n                else {\r\n                    node.getData().push(element);\r\n                    return true;\r\n                }\r\n            }\r\n            else if (this._getComparable(element) < node.getKey()) {\r\n                if (node.getLeft() == null) {\r\n                    node.setLeft(new BinaryTreeNode(this._getComparable(element), [element], null, null));\r\n                    return true;\r\n                }\r\n                else {\r\n                    return this._insert(node.getLeft(), element);\r\n                }\r\n            }\r\n            else {\r\n                if (node.getRight() == null) {\r\n                    node.setRight(new BinaryTreeNode(this._getComparable(element), [element], null, null));\r\n                    return true;\r\n                }\r\n                else {\r\n                    return this._insert(node.getRight(), element);\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    removeByComparable(element) {\r\n        this._root = this._remove(this._root, element);\r\n    }\r\n    _remove(node, element) {\r\n        if (node == null) {\r\n            return null;\r\n        }\r\n        else if (this._getComparable(element) === node.getKey()) {\r\n            const elementIndex = node.getData().indexOf(element);\r\n            // if the node contains the element, remove the element\r\n            if (elementIndex > -1) {\r\n                node.getData().splice(elementIndex, 1);\r\n                // if we have removed the last element at this node, remove the node\r\n                if (node.getData().length === 0) {\r\n                    // if the node is a leaf\r\n                    if (node.getLeft() == null && node.getRight() == null) {\r\n                        return null;\r\n                    }\r\n                    else if (node.getLeft() == null) {\r\n                        return node.getRight();\r\n                    }\r\n                    else if (node.getRight() == null) {\r\n                        return node.getLeft();\r\n                    }\r\n                    // if node has 2 children\r\n                    const temp = this._findMinNode(node.getRight());\r\n                    node.setKey(temp.getKey());\r\n                    node.setData(temp.getData());\r\n                    node.setRight(this._cleanup(node.getRight(), temp)); //\"cleanup nodes\" (move them up recursively)\r\n                    return node;\r\n                }\r\n                else {\r\n                    // this prevents the node from being removed since it still contains elements\r\n                    return node;\r\n                }\r\n            }\r\n        }\r\n        else if (this._getComparable(element) < node.getKey()) {\r\n            node.setLeft(this._remove(node.getLeft(), element));\r\n            return node;\r\n        }\r\n        else {\r\n            node.setRight(this._remove(node.getRight(), element));\r\n            return node;\r\n        }\r\n        return null;\r\n    }\r\n    // called once we have successfully removed the element we wanted, recursively corrects the part of the tree below the removed node\r\n    _cleanup(node, element) {\r\n        const comparable = element.getKey();\r\n        if (node == null) {\r\n            return null;\r\n        }\r\n        else if (comparable === node.getKey()) {\r\n            // if the node is a leaf\r\n            if (node.getLeft() == null && node.getRight() == null) {\r\n                return null;\r\n            }\r\n            else if (node.getLeft() == null) {\r\n                return node.getRight();\r\n            }\r\n            else if (node.getRight() == null) {\r\n                return node.getLeft();\r\n            }\r\n            // if node has 2 children\r\n            const temp = this._findMinNode(node.getRight());\r\n            node.setKey(temp.getKey());\r\n            node.setData(temp.getData());\r\n            node.setRight(this._cleanup(node.getRight(), temp));\r\n            return node;\r\n        }\r\n        else if (element.getKey() < node.getKey()) {\r\n            node.setLeft(this._cleanup(node.getLeft(), element));\r\n            return node;\r\n        }\r\n        else {\r\n            node.setRight(this._cleanup(node.getRight(), element));\r\n            return node;\r\n        }\r\n    }\r\n    _findMinNode(node) {\r\n        let current = node;\r\n        while (current.getLeft() != null) {\r\n            current = current.getLeft();\r\n        }\r\n        return current;\r\n    }\r\n    list() {\r\n        const results = new Array();\r\n        this._list(this._root, results);\r\n        return results;\r\n    }\r\n    _list(treeNode, results) {\r\n        if (treeNode != null) {\r\n            this._list(treeNode.getLeft(), results);\r\n            treeNode.getData().forEach((element) => {\r\n                results.push(element);\r\n            });\r\n            this._list(treeNode.getRight(), results);\r\n        }\r\n    }\r\n};\r\nSortedList = SortedList_decorate([\r\n    obsolete({ message: 'Will be removed in excalibur v0.26.0', alternateMethod: 'Use built in JS array.sort' })\r\n], SortedList);\r\n\r\n/**\r\n * A tree node part of [[SortedList]]\r\n * @deprecated Will be removed in v0.26.0\r\n */\r\nlet BinaryTreeNode = class BinaryTreeNode {\r\n    constructor(key, data, left, right) {\r\n        this._key = key;\r\n        this._data = data;\r\n        this._left = left;\r\n        this._right = right;\r\n    }\r\n    getKey() {\r\n        return this._key;\r\n    }\r\n    setKey(key) {\r\n        this._key = key;\r\n    }\r\n    getData() {\r\n        return this._data;\r\n    }\r\n    setData(data) {\r\n        this._data = data;\r\n    }\r\n    getLeft() {\r\n        return this._left;\r\n    }\r\n    setLeft(left) {\r\n        this._left = left;\r\n    }\r\n    getRight() {\r\n        return this._right;\r\n    }\r\n    setRight(right) {\r\n        this._right = right;\r\n    }\r\n};\r\nBinaryTreeNode = SortedList_decorate([\r\n    obsolete({ message: 'Will be removed in excalibur v0.26.0' })\r\n], BinaryTreeNode);\r\n\r\n/**\r\n * Mock element for testing\r\n *\r\n * @internal\r\n * @deprecated Will be removed in v0.26.0\r\n */\r\nclass MockedElement {\r\n    constructor(key) {\r\n        this._key = 0;\r\n        this._key = key;\r\n    }\r\n    getTheKey() {\r\n        return this._key;\r\n    }\r\n    setKey(key) {\r\n        this._key = key;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Util/Pool.ts\n\r\nclass Pool {\r\n    constructor(builder, recycler, maxObjects = 100) {\r\n        this.builder = builder;\r\n        this.recycler = recycler;\r\n        this.maxObjects = maxObjects;\r\n        this.totalAllocations = 0;\r\n        this.index = 0;\r\n        this.objects = [];\r\n        this._logger = Logger.getInstance();\r\n    }\r\n    /**\r\n     * Use many instances out of the in the context and return all to the pool.\r\n     *\r\n     * By returning values out of the context they will be un-hooked from the pool and are free to be passed to consumers\r\n     * @param context\r\n     */\r\n    using(context) {\r\n        const result = context(this);\r\n        if (result) {\r\n            return this.done(...result);\r\n        }\r\n        return this.done();\r\n    }\r\n    /**\r\n     * Use a single instance out of th pool and immediately return it to the pool\r\n     * @param context\r\n     */\r\n    borrow(context) {\r\n        const object = this.get();\r\n        context(object);\r\n        this.index--;\r\n    }\r\n    /**\r\n     * Retrieve a value from the pool, will allocate a new instance if necessary or recycle from the pool\r\n     * @param args\r\n     */\r\n    get(...args) {\r\n        if (this.index === this.maxObjects) {\r\n            this._logger.warn('Max pooled objects reached, possible memory leak? Doubling');\r\n            this.maxObjects = this.maxObjects * 2;\r\n        }\r\n        if (this.objects[this.index]) {\r\n            // Pool has an available object already constructed\r\n            return this.recycler(this.objects[this.index++], ...args);\r\n        }\r\n        else {\r\n            // New allocation\r\n            this.totalAllocations++;\r\n            const object = (this.objects[this.index++] = this.builder(...args));\r\n            return object;\r\n        }\r\n    }\r\n    done(...objects) {\r\n        // All objects in pool now considered \"free\"\r\n        this.index = 0;\r\n        for (const object of objects) {\r\n            const poolIndex = this.objects.indexOf(object);\r\n            // Build a new object to take the pool place\r\n            this.objects[poolIndex] = this.builder(); // TODO problematic 0-arg only support\r\n            this.totalAllocations++;\r\n        }\r\n        return objects;\r\n    }\r\n}\r\n\n;// CONCATENATED MODULE: ./Promises.ts\n// Promises/A+ Spec http://promises-aplus.github.io/promises-spec/\r\nvar Promises_decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar Promise_1;\r\n\r\n/**\r\n * Valid states for a promise to be in\r\n * @deprecated Will be removed in v0.26.0\r\n */\r\nvar PromiseState;\r\n(function (PromiseState) {\r\n    PromiseState[PromiseState[\"Resolved\"] = 0] = \"Resolved\";\r\n    PromiseState[PromiseState[\"Rejected\"] = 1] = \"Rejected\";\r\n    PromiseState[PromiseState[\"Pending\"] = 2] = \"Pending\";\r\n})(PromiseState || (PromiseState = {}));\r\n/**\r\n * Promises are used to do asynchronous work and they are useful for\r\n * creating a chain of actions. In Excalibur they are used for loading,\r\n * sounds, animation, actions, and more.\r\n * @deprecated Will be removed in v0.26.0\r\n */\r\nlet Promises_Promise = Promise_1 = class Promise {\r\n    constructor() {\r\n        this._state = PromiseState.Pending;\r\n        this._successCallbacks = [];\r\n        this._rejectCallback = () => {\r\n            return;\r\n        };\r\n    }\r\n    /**\r\n     * Create and resolve a Promise with an optional value\r\n     * @param value  An optional value to wrap in a resolved promise\r\n     * @deprecated Use browser native promises\r\n     */\r\n    static resolve(value) {\r\n        const promise = new Promise_1().resolve(value);\r\n        return promise;\r\n    }\r\n    /**\r\n     * Create and reject a Promise with an optional value\r\n     * @param value  An optional value to wrap in a rejected promise\r\n     * @deprecated Use browser native promises\r\n     */\r\n    static reject(value) {\r\n        const promise = new Promise_1().reject(value);\r\n        return promise;\r\n    }\r\n    static join() {\r\n        let promises = [];\r\n        if (arguments.length > 0 && !Array.isArray(arguments[0])) {\r\n            for (let _i = 0; _i < arguments.length; _i++) {\r\n                promises[_i - 0] = arguments[_i];\r\n            }\r\n        }\r\n        else if (arguments.length === 1 && Array.isArray(arguments[0])) {\r\n            promises = arguments[0];\r\n        }\r\n        const joinedPromise = new Promise_1();\r\n        if (!promises || !promises.length) {\r\n            return joinedPromise.resolve();\r\n        }\r\n        const total = promises.length;\r\n        let successes = 0;\r\n        let rejects = 0;\r\n        const errors = [];\r\n        promises.forEach((p) => {\r\n            p.then(() => {\r\n                successes += 1;\r\n                if (successes === total) {\r\n                    joinedPromise.resolve();\r\n                }\r\n                else if (successes + rejects + errors.length === total) {\r\n                    joinedPromise.reject(errors);\r\n                }\r\n            }, () => {\r\n                rejects += 1;\r\n                if (successes + rejects + errors.length === total) {\r\n                    joinedPromise.reject(errors);\r\n                }\r\n            }).error((e) => {\r\n                errors.push(e);\r\n                if (errors.length + successes + rejects === total) {\r\n                    joinedPromise.reject(errors);\r\n                }\r\n            });\r\n        });\r\n        return joinedPromise;\r\n    }\r\n    /**\r\n     * Chain success and reject callbacks after the promise is resolved\r\n     * @param successCallback  Call on resolution of promise\r\n     * @param rejectCallback   Call on rejection of promise\r\n     * @deprecated Use browser native promises\r\n     */\r\n    then(successCallback, rejectCallback) {\r\n        if (successCallback) {\r\n            this._successCallbacks.push(successCallback);\r\n            // If the promise is already resolved call immediately\r\n            if (this.state() === PromiseState.Resolved) {\r\n                try {\r\n                    successCallback.call(this, this._value);\r\n                }\r\n                catch (e) {\r\n                    this._handleError(e);\r\n                }\r\n            }\r\n        }\r\n        if (rejectCallback) {\r\n            this._rejectCallback = rejectCallback;\r\n            // If the promise is already rejected call immediately\r\n            if (this.state() === PromiseState.Rejected) {\r\n                try {\r\n                    rejectCallback.call(this, this._value);\r\n                }\r\n                catch (e) {\r\n                    this._handleError(e);\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Add an error callback to the promise\r\n     * @param errorCallback  Call if there was an error in a callback\r\n     * @deprecated Use browser native promises\r\n     */\r\n    error(errorCallback) {\r\n        if (errorCallback) {\r\n            this._errorCallback = errorCallback;\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Resolve the promise and pass an option value to the success callbacks\r\n     * @param value  Value to pass to the success callbacks\r\n     * @deprecated Use browser native promises\r\n     */\r\n    resolve(value) {\r\n        if (this._state === PromiseState.Pending) {\r\n            this._value = value;\r\n            try {\r\n                this._state = PromiseState.Resolved;\r\n                this._successCallbacks.forEach((cb) => {\r\n                    cb.call(this, this._value);\r\n                });\r\n            }\r\n            catch (e) {\r\n                this._handleError(e);\r\n            }\r\n        }\r\n        else {\r\n            throw new Error('Cannot resolve a promise that is not in a pending state!');\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Reject the promise and pass an option value to the reject callbacks\r\n     * @param value  Value to pass to the reject callbacks\r\n     * @deprecated Use browser native promises\r\n     */\r\n    reject(value) {\r\n        if (this._state === PromiseState.Pending) {\r\n            this._value = value;\r\n            try {\r\n                this._state = PromiseState.Rejected;\r\n                this._rejectCallback.call(this, this._value);\r\n            }\r\n            catch (e) {\r\n                this._handleError(e);\r\n            }\r\n        }\r\n        else {\r\n            throw new Error('Cannot reject a promise that is not in a pending state!');\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Inspect the current state of a promise\r\n     * @deprecated Use browser native promises\r\n     */\r\n    state() {\r\n        return this._state;\r\n    }\r\n    _handleError(e) {\r\n        if (this._errorCallback) {\r\n            this._errorCallback.call(this, e);\r\n        }\r\n        else {\r\n            // rethrow error\r\n            throw e;\r\n        }\r\n    }\r\n};\r\nPromises_Promise = Promise_1 = Promises_decorate([\r\n    obsolete({\r\n        message: 'ex.Promises are being replaced by native browser promises in v0.26.0',\r\n        alternateMethod: 'Use browser native promises'\r\n    })\r\n], Promises_Promise);\r\n\r\n\n;// CONCATENATED MODULE: ./index.ts\n/**\r\n * The current Excalibur version string\r\n * @description `process.env.__EX_VERSION` gets replaced by Webpack on build\r\n */\r\nconst EX_VERSION = \"0.25.3\";\r\n\r\npolyfill();\r\n// This file is used as the bundle entry point and exports everything\r\n// that will be exposed as the `ex` global variable.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// ex.LegacyDrawing namespace\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// ex.Events namespace\r\n\r\n\r\n// ex.Input namespace\r\n\r\n\r\n\r\n\r\n// ex.Traits namespace\r\n\r\n\r\n// ex.Util namespaces\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// ex.Deprecated\r\n\r\n// import * as deprecated from './Deprecated';\r\n// export { deprecated as Deprecated };\r\n// export * from './Deprecated';\r\n\n})();\n\nvar __webpack_exports__ActionContext = __webpack_exports__.fWn;\nvar __webpack_exports__ActionQueue = __webpack_exports__.Ia8;\nvar __webpack_exports__ActionsComponent = __webpack_exports__.hLI;\nvar __webpack_exports__ActionsSystem = __webpack_exports__.yyv;\nvar __webpack_exports__ActivateEvent = __webpack_exports__.tX5;\nvar __webpack_exports__Actor = __webpack_exports__.vtX;\nvar __webpack_exports__AddedComponent = __webpack_exports__.r7K;\nvar __webpack_exports__AddedEntity = __webpack_exports__.lCh;\nvar __webpack_exports__Animation = __webpack_exports__.fwF;\nvar __webpack_exports__AnimationDirection = __webpack_exports__.sce;\nvar __webpack_exports__AnimationStrategy = __webpack_exports__._c7;\nvar __webpack_exports__ArcadeSolver = __webpack_exports__.KUs;\nvar __webpack_exports__AudioContextFactory = __webpack_exports__.Ajp;\nvar __webpack_exports__Axis = __webpack_exports__.RDh;\nvar __webpack_exports__BaseAlign = __webpack_exports__._H9;\nvar __webpack_exports__BinaryTreeNode = __webpack_exports__.Ulf;\nvar __webpack_exports__Blink = __webpack_exports__.mxs;\nvar __webpack_exports__BodyComponent = __webpack_exports__.OmD;\nvar __webpack_exports__BoundingBox = __webpack_exports__.kBf;\nvar __webpack_exports__BroadphaseStrategy = __webpack_exports__.C4F;\nvar __webpack_exports__BrowserComponent = __webpack_exports__.NQt;\nvar __webpack_exports__BrowserEvents = __webpack_exports__.JjN;\nvar __webpack_exports__Camera = __webpack_exports__.V1s;\nvar __webpack_exports__Canvas = __webpack_exports__.Xz7;\nvar __webpack_exports__Cell = __webpack_exports__.bLd;\nvar __webpack_exports__Circle = __webpack_exports__.Cdc;\nvar __webpack_exports__CircleCollider = __webpack_exports__.FKn;\nvar __webpack_exports__Class = __webpack_exports__.wTW;\nvar __webpack_exports__Clock = __webpack_exports__.SUY;\nvar __webpack_exports__ClosestLine = __webpack_exports__.ab2;\nvar __webpack_exports__ClosestLineJumpTable = __webpack_exports__.GfZ;\nvar __webpack_exports__Collider = __webpack_exports__.YMS;\nvar __webpack_exports__ColliderComponent = __webpack_exports__.oyv;\nvar __webpack_exports__CollisionContact = __webpack_exports__.aUb;\nvar __webpack_exports__CollisionEndEvent = __webpack_exports__.SdD;\nvar __webpack_exports__CollisionGroup = __webpack_exports__.JUv;\nvar __webpack_exports__CollisionGroupManager = __webpack_exports__.jEj;\nvar __webpack_exports__CollisionJumpTable = __webpack_exports__.TFq;\nvar __webpack_exports__CollisionPostSolveEvent = __webpack_exports__.HDU;\nvar __webpack_exports__CollisionPreSolveEvent = __webpack_exports__.R_y;\nvar __webpack_exports__CollisionResolutionStrategy = __webpack_exports__.ydN;\nvar __webpack_exports__CollisionSolver = __webpack_exports__._N2;\nvar __webpack_exports__CollisionStartEvent = __webpack_exports__.t50;\nvar __webpack_exports__CollisionSystem = __webpack_exports__.s$$;\nvar __webpack_exports__CollisionType = __webpack_exports__.v2G;\nvar __webpack_exports__Color = __webpack_exports__.Ilk;\nvar __webpack_exports__ColorBlindFlags = __webpack_exports__.s9i;\nvar __webpack_exports__ColorBlindnessMode = __webpack_exports__.dxL;\nvar __webpack_exports__ColorBlindnessPostProcessor = __webpack_exports__.LLX;\nvar __webpack_exports__Component = __webpack_exports__.wA2;\nvar __webpack_exports__CompositeCollider = __webpack_exports__.R_p;\nvar __webpack_exports__Configurable = __webpack_exports__.IQ$;\nvar __webpack_exports__ConsoleAppender = __webpack_exports__.I5F;\nvar __webpack_exports__ContactConstraintPoint = __webpack_exports__.X8$;\nvar __webpack_exports__ContactEndEvent = __webpack_exports__.FR6;\nvar __webpack_exports__ContactStartEvent = __webpack_exports__.U8o;\nvar __webpack_exports__CoordPlane = __webpack_exports__.kbG;\nvar __webpack_exports__CullingBox = __webpack_exports__.oeJ;\nvar __webpack_exports__DeactivateEvent = __webpack_exports__.iS_;\nvar __webpack_exports__Debug = __webpack_exports__.cGG;\nvar __webpack_exports__DebugGraphicsComponent = __webpack_exports__.RPN;\nvar __webpack_exports__DebugSystem = __webpack_exports__.skb;\nvar __webpack_exports__DebugText = __webpack_exports__.SLU;\nvar __webpack_exports__DegreeOfFreedom = __webpack_exports__.RdJ;\nvar __webpack_exports__Detector = __webpack_exports__.gU7;\nvar __webpack_exports__Die = __webpack_exports__.LSk;\nvar __webpack_exports__Direction = __webpack_exports__.Nmp;\nvar __webpack_exports__DisplayMode = __webpack_exports__.d1Y;\nvar __webpack_exports__DynamicTree = __webpack_exports__.xrL;\nvar __webpack_exports__DynamicTreeCollisionProcessor = __webpack_exports__.sRW;\nvar __webpack_exports__EX_VERSION = __webpack_exports__.cmV;\nvar __webpack_exports__EaseTo = __webpack_exports__.N0Q;\nvar __webpack_exports__EasingFunctions = __webpack_exports__.q8b;\nvar __webpack_exports__EdgeCollider = __webpack_exports__.ynB;\nvar __webpack_exports__ElasticToActorStrategy = __webpack_exports__.jT9;\nvar __webpack_exports__EmitterType = __webpack_exports__.wAz;\nvar __webpack_exports__Engine = __webpack_exports__.D4V;\nvar __webpack_exports__EnterTriggerEvent = __webpack_exports__.N6H;\nvar __webpack_exports__EnterViewPortEvent = __webpack_exports__.W1A;\nvar __webpack_exports__Entity = __webpack_exports__.JHW;\nvar __webpack_exports__EntityManager = __webpack_exports__.v2K;\nvar __webpack_exports__EventDispatcher = __webpack_exports__.pBf;\nvar __webpack_exports__EventTypes = __webpack_exports__.GMl;\nvar __webpack_exports__Events = __webpack_exports__.zW2;\nvar __webpack_exports__ExResponse = __webpack_exports__.B0K;\nvar __webpack_exports__ExcaliburGraphicsContext2DCanvas = __webpack_exports__.Nv7;\nvar __webpack_exports__ExcaliburGraphicsContextWebGL = __webpack_exports__.C_p;\nvar __webpack_exports__ExcaliburWebGLContextAccessor = __webpack_exports__.iqw;\nvar __webpack_exports__ExitTriggerEvent = __webpack_exports__.MUA;\nvar __webpack_exports__ExitViewPortEvent = __webpack_exports__.xqU;\nvar __webpack_exports__Experiments = __webpack_exports__.peG;\nvar __webpack_exports__Fade = __webpack_exports__.pTp;\nvar __webpack_exports__Flags = __webpack_exports__.vUK;\nvar __webpack_exports__Follow = __webpack_exports__.j9l;\nvar __webpack_exports__Font = __webpack_exports__.Zxw;\nvar __webpack_exports__FontStyle = __webpack_exports__.Hdx;\nvar __webpack_exports__FontUnit = __webpack_exports__.Z$d;\nvar __webpack_exports__FpsSampler = __webpack_exports__.iqV;\nvar __webpack_exports__FrameStats = __webpack_exports__.o$7;\nvar __webpack_exports__GameEvent = __webpack_exports__.Zm$;\nvar __webpack_exports__GameStartEvent = __webpack_exports__.$QH;\nvar __webpack_exports__GameStopEvent = __webpack_exports__.i78;\nvar __webpack_exports__GamepadAxisEvent = __webpack_exports__.h6u;\nvar __webpack_exports__GamepadButtonEvent = __webpack_exports__.hts;\nvar __webpack_exports__GamepadConnectEvent = __webpack_exports__.j88;\nvar __webpack_exports__GamepadDisconnectEvent = __webpack_exports__.VME;\nvar __webpack_exports__Gif = __webpack_exports__.nt;\nvar __webpack_exports__GlobalCoordinates = __webpack_exports__.Ukr;\nvar __webpack_exports__Graphic = __webpack_exports__.zsu;\nvar __webpack_exports__GraphicsComponent = __webpack_exports__.oA6;\nvar __webpack_exports__GraphicsGroup = __webpack_exports__.TVh;\nvar __webpack_exports__GraphicsLayer = __webpack_exports__.TwZ;\nvar __webpack_exports__GraphicsLayers = __webpack_exports__.GTT;\nvar __webpack_exports__GraphicsSystem = __webpack_exports__.xxj;\nvar __webpack_exports__HiddenEvent = __webpack_exports__.XdK;\nvar __webpack_exports__ImageFiltering = __webpack_exports__.Jmb;\nvar __webpack_exports__ImageSource = __webpack_exports__.cXo;\nvar __webpack_exports__InitializeEvent = __webpack_exports__.Dm5;\nvar __webpack_exports__Input = __webpack_exports__.IIB;\nvar __webpack_exports__Integrator = __webpack_exports__.zI0;\nvar __webpack_exports__KillEvent = __webpack_exports__.SKZ;\nvar __webpack_exports__Label = __webpack_exports__.__J;\nvar __webpack_exports__Legacy = __webpack_exports__.Dvr;\nvar __webpack_exports__LegacyDrawing = __webpack_exports__.Tf9;\nvar __webpack_exports__LimitCameraBoundsStrategy = __webpack_exports__.RI$;\nvar __webpack_exports__Line = __webpack_exports__.x12;\nvar __webpack_exports__Loader = __webpack_exports__.aNw;\nvar __webpack_exports__LockCameraToActorAxisStrategy = __webpack_exports__.xwn;\nvar __webpack_exports__LockCameraToActorStrategy = __webpack_exports__.dNK;\nvar __webpack_exports__LogLevel = __webpack_exports__.ini;\nvar __webpack_exports__Logger = __webpack_exports__.YdH;\nvar __webpack_exports__Matrix = __webpack_exports__.y3G;\nvar __webpack_exports__MatrixLocations = __webpack_exports__.l57;\nvar __webpack_exports__MediaEvent = __webpack_exports__.xn0;\nvar __webpack_exports__Meet = __webpack_exports__.t2V;\nvar __webpack_exports__MockedElement = __webpack_exports__.ZyS;\nvar __webpack_exports__MotionComponent = __webpack_exports__.uxB;\nvar __webpack_exports__MotionSystem = __webpack_exports__.cpd;\nvar __webpack_exports__MoveBy = __webpack_exports__.fiy;\nvar __webpack_exports__MoveTo = __webpack_exports__.$XZ;\nvar __webpack_exports__NativeSoundEvent = __webpack_exports__.uqK;\nvar __webpack_exports__NativeSoundProcessedEvent = __webpack_exports__.STE;\nvar __webpack_exports__Observable = __webpack_exports__.y$z;\nvar __webpack_exports__Pair = __webpack_exports__.sOq;\nvar __webpack_exports__ParseGif = __webpack_exports__.Sqs;\nvar __webpack_exports__Particle = __webpack_exports__.hpZ;\nvar __webpack_exports__ParticleEmitter = __webpack_exports__.Vol;\nvar __webpack_exports__Physics = __webpack_exports__.wIZ;\nvar __webpack_exports__PhysicsStats = __webpack_exports__.cBi;\nvar __webpack_exports__PointerComponent = __webpack_exports__.RFv;\nvar __webpack_exports__PointerSystem = __webpack_exports__.kfC;\nvar __webpack_exports__Polygon = __webpack_exports__.mgq;\nvar __webpack_exports__PolygonCollider = __webpack_exports__.YVA;\nvar __webpack_exports__Pool = __webpack_exports__.Kgp;\nvar __webpack_exports__PostCollisionEvent = __webpack_exports__.HH$;\nvar __webpack_exports__PostDebugDrawEvent = __webpack_exports__.M_d;\nvar __webpack_exports__PostDrawEvent = __webpack_exports__.rgh;\nvar __webpack_exports__PostFrameEvent = __webpack_exports__.Ra6;\nvar __webpack_exports__PostKillEvent = __webpack_exports__.KhR;\nvar __webpack_exports__PostUpdateEvent = __webpack_exports__.BS5;\nvar __webpack_exports__PreCollisionEvent = __webpack_exports__.xhz;\nvar __webpack_exports__PreDebugDrawEvent = __webpack_exports__.xOq;\nvar __webpack_exports__PreDrawEvent = __webpack_exports__.a9j;\nvar __webpack_exports__PreFrameEvent = __webpack_exports__.bHk;\nvar __webpack_exports__PreKillEvent = __webpack_exports__.CgK;\nvar __webpack_exports__PreUpdateEvent = __webpack_exports__.cuY;\nvar __webpack_exports__Projection = __webpack_exports__.kvE;\nvar __webpack_exports__Promise = __webpack_exports__.JDb;\nvar __webpack_exports__PromiseState = __webpack_exports__.Cbi;\nvar __webpack_exports__QuadIndexBuffer = __webpack_exports__.SBu;\nvar __webpack_exports__Query = __webpack_exports__.AE_;\nvar __webpack_exports__QueryManager = __webpack_exports__.ctO;\nvar __webpack_exports__RadiusAroundActorStrategy = __webpack_exports__.OLH;\nvar __webpack_exports__Random = __webpack_exports__.kky;\nvar __webpack_exports__Raster = __webpack_exports__.nSF;\nvar __webpack_exports__Ray = __webpack_exports__.zHn;\nvar __webpack_exports__RealisticSolver = __webpack_exports__.zwx;\nvar __webpack_exports__Rectangle = __webpack_exports__.AeJ;\nvar __webpack_exports__RemovedComponent = __webpack_exports__.hLz;\nvar __webpack_exports__RemovedEntity = __webpack_exports__.D9g;\nvar __webpack_exports__Repeat = __webpack_exports__.wA;\nvar __webpack_exports__RepeatForever = __webpack_exports__.jhr;\nvar __webpack_exports__Resolution = __webpack_exports__.GVs;\nvar __webpack_exports__Resource = __webpack_exports__._zO;\nvar __webpack_exports__RotateBy = __webpack_exports__.w6$;\nvar __webpack_exports__RotateTo = __webpack_exports__.mhV;\nvar __webpack_exports__RotationType = __webpack_exports__.MOD;\nvar __webpack_exports__ScaleBy = __webpack_exports__.kwd;\nvar __webpack_exports__ScaleTo = __webpack_exports__.Lmr;\nvar __webpack_exports__Scene = __webpack_exports__.xsS;\nvar __webpack_exports__Screen = __webpack_exports__.lLr;\nvar __webpack_exports__ScreenAppender = __webpack_exports__.Z$r;\nvar __webpack_exports__ScreenElement = __webpack_exports__.IXb;\nvar __webpack_exports__ScreenShader = __webpack_exports__.SGH;\nvar __webpack_exports__ScrollPreventionMode = __webpack_exports__.SMj;\nvar __webpack_exports__Shader = __webpack_exports__.exe;\nvar __webpack_exports__Shape = __webpack_exports__.bnF;\nvar __webpack_exports__Side = __webpack_exports__.MFA;\nvar __webpack_exports__SortedList = __webpack_exports__.$XC;\nvar __webpack_exports__Sound = __webpack_exports__.$uU;\nvar __webpack_exports__Sprite = __webpack_exports__.jyi;\nvar __webpack_exports__SpriteFont = __webpack_exports__.E03;\nvar __webpack_exports__SpriteSheet = __webpack_exports__.V6q;\nvar __webpack_exports__StandardClock = __webpack_exports__.rg2;\nvar __webpack_exports__StrategyContainer = __webpack_exports__.nVo;\nvar __webpack_exports__Stream = __webpack_exports__.F6N;\nvar __webpack_exports__SubscribeEvent = __webpack_exports__.ad3;\nvar __webpack_exports__System = __webpack_exports__.xP7;\nvar __webpack_exports__SystemManager = __webpack_exports__.Odq;\nvar __webpack_exports__SystemType = __webpack_exports__.Zif;\nvar __webpack_exports__TagComponent = __webpack_exports__.ZGJ;\nvar __webpack_exports__TestClock = __webpack_exports__.MJk;\nvar __webpack_exports__Text = __webpack_exports__.xvT;\nvar __webpack_exports__TextAlign = __webpack_exports__.PHM;\nvar __webpack_exports__TextureLoader = __webpack_exports__.dpR;\nvar __webpack_exports__TileMap = __webpack_exports__.KwO;\nvar __webpack_exports__Timer = __webpack_exports__.B7y;\nvar __webpack_exports__Traits = __webpack_exports__.SFp;\nvar __webpack_exports__TransformComponent = __webpack_exports__.Uvn;\nvar __webpack_exports__TreeNode = __webpack_exports__.OFT;\nvar __webpack_exports__Trigger = __webpack_exports__.xzN;\nvar __webpack_exports__TwoPI = __webpack_exports__.M5Z;\nvar __webpack_exports__UnsubscribeEvent = __webpack_exports__.H6j;\nvar __webpack_exports__Util = __webpack_exports__.ZrN;\nvar __webpack_exports__Vector = __webpack_exports__.OWs;\nvar __webpack_exports__VectorView = __webpack_exports__.dF9;\nvar __webpack_exports__VertexBuffer = __webpack_exports__.oZy;\nvar __webpack_exports__VertexLayout = __webpack_exports__.rD2;\nvar __webpack_exports__VisibleEvent = __webpack_exports__.VHo;\nvar __webpack_exports__WebAudio = __webpack_exports__.ohE;\nvar __webpack_exports__WebAudioInstance = __webpack_exports__.R$E;\nvar __webpack_exports__World = __webpack_exports__.q3I;\nvar __webpack_exports__canonicalizeAngle = __webpack_exports__.Pab;\nvar __webpack_exports__clamp = __webpack_exports__.uZ5;\nvar __webpack_exports__createId = __webpack_exports__.McK;\nvar __webpack_exports__frac = __webpack_exports__.F9c;\nvar __webpack_exports__hasGraphicsTick = __webpack_exports__.k0b;\nvar __webpack_exports__hasOnInitialize = __webpack_exports__.hnT;\nvar __webpack_exports__hasOnPostUpdate = __webpack_exports__.RSJ;\nvar __webpack_exports__hasOnPreUpdate = __webpack_exports__.Mku;\nvar __webpack_exports__hasPostDraw = __webpack_exports__.h90;\nvar __webpack_exports__hasPreDraw = __webpack_exports__.rms;\nvar __webpack_exports__has_initialize = __webpack_exports__.ErP;\nvar __webpack_exports__has_postupdate = __webpack_exports__.aVg;\nvar __webpack_exports__has_preupdate = __webpack_exports__.lPc;\nvar __webpack_exports__isAddedComponent = __webpack_exports__.Z8E;\nvar __webpack_exports__isAddedSystemEntity = __webpack_exports__.NNA;\nvar __webpack_exports__isRemoveSystemEntity = __webpack_exports__.yFn;\nvar __webpack_exports__isRemovedComponent = __webpack_exports__.lNv;\nvar __webpack_exports__maxMessages = __webpack_exports__.MZQ;\nvar __webpack_exports__obsolete = __webpack_exports__.FUM;\nvar __webpack_exports__randomInRange = __webpack_exports__.vdf;\nvar __webpack_exports__randomIntInRange = __webpack_exports__.iaL;\nvar __webpack_exports__range = __webpack_exports__.w6H;\nvar __webpack_exports__resetObsoleteCounter = __webpack_exports__.Q4c;\nvar __webpack_exports__sign = __webpack_exports__.Xxe;\nvar __webpack_exports__toDegrees = __webpack_exports__.Uxb;\nvar __webpack_exports__toRadians = __webpack_exports__.Yr5;\nvar __webpack_exports__vec = __webpack_exports__.Bhw;\nvar __webpack_exports__webgl = __webpack_exports__.yOA;\nexport { __webpack_exports__ActionContext as ActionContext, __webpack_exports__ActionQueue as ActionQueue, __webpack_exports__ActionsComponent as ActionsComponent, __webpack_exports__ActionsSystem as ActionsSystem, __webpack_exports__ActivateEvent as ActivateEvent, __webpack_exports__Actor as Actor, __webpack_exports__AddedComponent as AddedComponent, __webpack_exports__AddedEntity as AddedEntity, __webpack_exports__Animation as Animation, __webpack_exports__AnimationDirection as AnimationDirection, __webpack_exports__AnimationStrategy as AnimationStrategy, __webpack_exports__ArcadeSolver as ArcadeSolver, __webpack_exports__AudioContextFactory as AudioContextFactory, __webpack_exports__Axis as Axis, __webpack_exports__BaseAlign as BaseAlign, __webpack_exports__BinaryTreeNode as BinaryTreeNode, __webpack_exports__Blink as Blink, __webpack_exports__BodyComponent as BodyComponent, __webpack_exports__BoundingBox as BoundingBox, __webpack_exports__BroadphaseStrategy as BroadphaseStrategy, __webpack_exports__BrowserComponent as BrowserComponent, __webpack_exports__BrowserEvents as BrowserEvents, __webpack_exports__Camera as Camera, __webpack_exports__Canvas as Canvas, __webpack_exports__Cell as Cell, __webpack_exports__Circle as Circle, __webpack_exports__CircleCollider as CircleCollider, __webpack_exports__Class as Class, __webpack_exports__Clock as Clock, __webpack_exports__ClosestLine as ClosestLine, __webpack_exports__ClosestLineJumpTable as ClosestLineJumpTable, __webpack_exports__Collider as Collider, __webpack_exports__ColliderComponent as ColliderComponent, __webpack_exports__CollisionContact as CollisionContact, __webpack_exports__CollisionEndEvent as CollisionEndEvent, __webpack_exports__CollisionGroup as CollisionGroup, __webpack_exports__CollisionGroupManager as CollisionGroupManager, __webpack_exports__CollisionJumpTable as CollisionJumpTable, __webpack_exports__CollisionPostSolveEvent as CollisionPostSolveEvent, __webpack_exports__CollisionPreSolveEvent as CollisionPreSolveEvent, __webpack_exports__CollisionResolutionStrategy as CollisionResolutionStrategy, __webpack_exports__CollisionSolver as CollisionSolver, __webpack_exports__CollisionStartEvent as CollisionStartEvent, __webpack_exports__CollisionSystem as CollisionSystem, __webpack_exports__CollisionType as CollisionType, __webpack_exports__Color as Color, __webpack_exports__ColorBlindFlags as ColorBlindFlags, __webpack_exports__ColorBlindnessMode as ColorBlindnessMode, __webpack_exports__ColorBlindnessPostProcessor as ColorBlindnessPostProcessor, __webpack_exports__Component as Component, __webpack_exports__CompositeCollider as CompositeCollider, __webpack_exports__Configurable as Configurable, __webpack_exports__ConsoleAppender as ConsoleAppender, __webpack_exports__ContactConstraintPoint as ContactConstraintPoint, __webpack_exports__ContactEndEvent as ContactEndEvent, __webpack_exports__ContactStartEvent as ContactStartEvent, __webpack_exports__CoordPlane as CoordPlane, __webpack_exports__CullingBox as CullingBox, __webpack_exports__DeactivateEvent as DeactivateEvent, __webpack_exports__Debug as Debug, __webpack_exports__DebugGraphicsComponent as DebugGraphicsComponent, __webpack_exports__DebugSystem as DebugSystem, __webpack_exports__DebugText as DebugText, __webpack_exports__DegreeOfFreedom as DegreeOfFreedom, __webpack_exports__Detector as Detector, __webpack_exports__Die as Die, __webpack_exports__Direction as Direction, __webpack_exports__DisplayMode as DisplayMode, __webpack_exports__DynamicTree as DynamicTree, __webpack_exports__DynamicTreeCollisionProcessor as DynamicTreeCollisionProcessor, __webpack_exports__EX_VERSION as EX_VERSION, __webpack_exports__EaseTo as EaseTo, __webpack_exports__EasingFunctions as EasingFunctions, __webpack_exports__EdgeCollider as EdgeCollider, __webpack_exports__ElasticToActorStrategy as ElasticToActorStrategy, __webpack_exports__EmitterType as EmitterType, __webpack_exports__Engine as Engine, __webpack_exports__EnterTriggerEvent as EnterTriggerEvent, __webpack_exports__EnterViewPortEvent as EnterViewPortEvent, __webpack_exports__Entity as Entity, __webpack_exports__EntityManager as EntityManager, __webpack_exports__EventDispatcher as EventDispatcher, __webpack_exports__EventTypes as EventTypes, __webpack_exports__Events as Events, __webpack_exports__ExResponse as ExResponse, __webpack_exports__ExcaliburGraphicsContext2DCanvas as ExcaliburGraphicsContext2DCanvas, __webpack_exports__ExcaliburGraphicsContextWebGL as ExcaliburGraphicsContextWebGL, __webpack_exports__ExcaliburWebGLContextAccessor as ExcaliburWebGLContextAccessor, __webpack_exports__ExitTriggerEvent as ExitTriggerEvent, __webpack_exports__ExitViewPortEvent as ExitViewPortEvent, __webpack_exports__Experiments as Experiments, __webpack_exports__Fade as Fade, __webpack_exports__Flags as Flags, __webpack_exports__Follow as Follow, __webpack_exports__Font as Font, __webpack_exports__FontStyle as FontStyle, __webpack_exports__FontUnit as FontUnit, __webpack_exports__FpsSampler as FpsSampler, __webpack_exports__FrameStats as FrameStats, __webpack_exports__GameEvent as GameEvent, __webpack_exports__GameStartEvent as GameStartEvent, __webpack_exports__GameStopEvent as GameStopEvent, __webpack_exports__GamepadAxisEvent as GamepadAxisEvent, __webpack_exports__GamepadButtonEvent as GamepadButtonEvent, __webpack_exports__GamepadConnectEvent as GamepadConnectEvent, __webpack_exports__GamepadDisconnectEvent as GamepadDisconnectEvent, __webpack_exports__Gif as Gif, __webpack_exports__GlobalCoordinates as GlobalCoordinates, __webpack_exports__Graphic as Graphic, __webpack_exports__GraphicsComponent as GraphicsComponent, __webpack_exports__GraphicsGroup as GraphicsGroup, __webpack_exports__GraphicsLayer as GraphicsLayer, __webpack_exports__GraphicsLayers as GraphicsLayers, __webpack_exports__GraphicsSystem as GraphicsSystem, __webpack_exports__HiddenEvent as HiddenEvent, __webpack_exports__ImageFiltering as ImageFiltering, __webpack_exports__ImageSource as ImageSource, __webpack_exports__InitializeEvent as InitializeEvent, __webpack_exports__Input as Input, __webpack_exports__Integrator as Integrator, __webpack_exports__KillEvent as KillEvent, __webpack_exports__Label as Label, __webpack_exports__Legacy as Legacy, __webpack_exports__LegacyDrawing as LegacyDrawing, __webpack_exports__LimitCameraBoundsStrategy as LimitCameraBoundsStrategy, __webpack_exports__Line as Line, __webpack_exports__Loader as Loader, __webpack_exports__LockCameraToActorAxisStrategy as LockCameraToActorAxisStrategy, __webpack_exports__LockCameraToActorStrategy as LockCameraToActorStrategy, __webpack_exports__LogLevel as LogLevel, __webpack_exports__Logger as Logger, __webpack_exports__Matrix as Matrix, __webpack_exports__MatrixLocations as MatrixLocations, __webpack_exports__MediaEvent as MediaEvent, __webpack_exports__Meet as Meet, __webpack_exports__MockedElement as MockedElement, __webpack_exports__MotionComponent as MotionComponent, __webpack_exports__MotionSystem as MotionSystem, __webpack_exports__MoveBy as MoveBy, __webpack_exports__MoveTo as MoveTo, __webpack_exports__NativeSoundEvent as NativeSoundEvent, __webpack_exports__NativeSoundProcessedEvent as NativeSoundProcessedEvent, __webpack_exports__Observable as Observable, __webpack_exports__Pair as Pair, __webpack_exports__ParseGif as ParseGif, __webpack_exports__Particle as Particle, __webpack_exports__ParticleEmitter as ParticleEmitter, __webpack_exports__Physics as Physics, __webpack_exports__PhysicsStats as PhysicsStats, __webpack_exports__PointerComponent as PointerComponent, __webpack_exports__PointerSystem as PointerSystem, __webpack_exports__Polygon as Polygon, __webpack_exports__PolygonCollider as PolygonCollider, __webpack_exports__Pool as Pool, __webpack_exports__PostCollisionEvent as PostCollisionEvent, __webpack_exports__PostDebugDrawEvent as PostDebugDrawEvent, __webpack_exports__PostDrawEvent as PostDrawEvent, __webpack_exports__PostFrameEvent as PostFrameEvent, __webpack_exports__PostKillEvent as PostKillEvent, __webpack_exports__PostUpdateEvent as PostUpdateEvent, __webpack_exports__PreCollisionEvent as PreCollisionEvent, __webpack_exports__PreDebugDrawEvent as PreDebugDrawEvent, __webpack_exports__PreDrawEvent as PreDrawEvent, __webpack_exports__PreFrameEvent as PreFrameEvent, __webpack_exports__PreKillEvent as PreKillEvent, __webpack_exports__PreUpdateEvent as PreUpdateEvent, __webpack_exports__Projection as Projection, __webpack_exports__Promise as Promise, __webpack_exports__PromiseState as PromiseState, __webpack_exports__QuadIndexBuffer as QuadIndexBuffer, __webpack_exports__Query as Query, __webpack_exports__QueryManager as QueryManager, __webpack_exports__RadiusAroundActorStrategy as RadiusAroundActorStrategy, __webpack_exports__Random as Random, __webpack_exports__Raster as Raster, __webpack_exports__Ray as Ray, __webpack_exports__RealisticSolver as RealisticSolver, __webpack_exports__Rectangle as Rectangle, __webpack_exports__RemovedComponent as RemovedComponent, __webpack_exports__RemovedEntity as RemovedEntity, __webpack_exports__Repeat as Repeat, __webpack_exports__RepeatForever as RepeatForever, __webpack_exports__Resolution as Resolution, __webpack_exports__Resource as Resource, __webpack_exports__RotateBy as RotateBy, __webpack_exports__RotateTo as RotateTo, __webpack_exports__RotationType as RotationType, __webpack_exports__ScaleBy as ScaleBy, __webpack_exports__ScaleTo as ScaleTo, __webpack_exports__Scene as Scene, __webpack_exports__Screen as Screen, __webpack_exports__ScreenAppender as ScreenAppender, __webpack_exports__ScreenElement as ScreenElement, __webpack_exports__ScreenShader as ScreenShader, __webpack_exports__ScrollPreventionMode as ScrollPreventionMode, __webpack_exports__Shader as Shader, __webpack_exports__Shape as Shape, __webpack_exports__Side as Side, __webpack_exports__SortedList as SortedList, __webpack_exports__Sound as Sound, __webpack_exports__Sprite as Sprite, __webpack_exports__SpriteFont as SpriteFont, __webpack_exports__SpriteSheet as SpriteSheet, __webpack_exports__StandardClock as StandardClock, __webpack_exports__StrategyContainer as StrategyContainer, __webpack_exports__Stream as Stream, __webpack_exports__SubscribeEvent as SubscribeEvent, __webpack_exports__System as System, __webpack_exports__SystemManager as SystemManager, __webpack_exports__SystemType as SystemType, __webpack_exports__TagComponent as TagComponent, __webpack_exports__TestClock as TestClock, __webpack_exports__Text as Text, __webpack_exports__TextAlign as TextAlign, __webpack_exports__TextureLoader as TextureLoader, __webpack_exports__TileMap as TileMap, __webpack_exports__Timer as Timer, __webpack_exports__Traits as Traits, __webpack_exports__TransformComponent as TransformComponent, __webpack_exports__TreeNode as TreeNode, __webpack_exports__Trigger as Trigger, __webpack_exports__TwoPI as TwoPI, __webpack_exports__UnsubscribeEvent as UnsubscribeEvent, __webpack_exports__Util as Util, __webpack_exports__Vector as Vector, __webpack_exports__VectorView as VectorView, __webpack_exports__VertexBuffer as VertexBuffer, __webpack_exports__VertexLayout as VertexLayout, __webpack_exports__VisibleEvent as VisibleEvent, __webpack_exports__WebAudio as WebAudio, __webpack_exports__WebAudioInstance as WebAudioInstance, __webpack_exports__World as World, __webpack_exports__canonicalizeAngle as canonicalizeAngle, __webpack_exports__clamp as clamp, __webpack_exports__createId as createId, __webpack_exports__frac as frac, __webpack_exports__hasGraphicsTick as hasGraphicsTick, __webpack_exports__hasOnInitialize as hasOnInitialize, __webpack_exports__hasOnPostUpdate as hasOnPostUpdate, __webpack_exports__hasOnPreUpdate as hasOnPreUpdate, __webpack_exports__hasPostDraw as hasPostDraw, __webpack_exports__hasPreDraw as hasPreDraw, __webpack_exports__has_initialize as has_initialize, __webpack_exports__has_postupdate as has_postupdate, __webpack_exports__has_preupdate as has_preupdate, __webpack_exports__isAddedComponent as isAddedComponent, __webpack_exports__isAddedSystemEntity as isAddedSystemEntity, __webpack_exports__isRemoveSystemEntity as isRemoveSystemEntity, __webpack_exports__isRemovedComponent as isRemovedComponent, __webpack_exports__maxMessages as maxMessages, __webpack_exports__obsolete as obsolete, __webpack_exports__randomInRange as randomInRange, __webpack_exports__randomIntInRange as randomIntInRange, __webpack_exports__range as range, __webpack_exports__resetObsoleteCounter as resetObsoleteCounter, __webpack_exports__sign as sign, __webpack_exports__toDegrees as toDegrees, __webpack_exports__toRadians as toRadians, __webpack_exports__vec as vec, __webpack_exports__webgl as webgl };\n\n//# sourceMappingURL=excalibur.js.map","import * as ex from 'excalibur';\nimport { ExcaliburGraphicsContext } from 'excalibur';\nimport { blockSprite } from './resources';\n\nexport class Floor extends ex.Actor {\n    constructor(x: number, y: number, public cols: number, public rows: number) {\n        super({\n            name: 'Floor',\n            pos: new ex.Vector(x, y),\n            scale: new ex.Vector(2, 2),\n            anchor: ex.Vector.Zero,\n            collider: ex.Shape.Box(20 * cols, 15 * rows, ex.Vector.Zero),\n            collisionType: ex.CollisionType.Fixed,\n            collisionGroup: ex.CollisionGroupManager.groupByName(\"floor\"),\n        });\n\n        for (let i = 0; i < this.cols; i++) {\n            for (let j = 0; j < this.rows; j++) {\n                this.graphics.show(blockSprite, { \n                    anchor: ex.Vector.Zero,\n                    offset: ex.vec(i * blockSprite.width, j * blockSprite.height)\n                })\n            }\n        }\n    }\n}\n","import {Engine, Scene} from 'excalibur'\nimport * as ex from 'excalibur'\nimport { Samurai } from './Samurai';\nimport { Floor } from './Floor';\n\nexport default class Level1 extends Scene{\n\n    constructor(){\n        super()\n    }\n\n    onInitialize(engine: Engine): void {\n\n        // create collision groups\n        ex.CollisionGroupManager.create(\"Samurai\");\n\n\n        // create actors\n        let a = new Samurai(engine.halfDrawWidth + 100, engine.halfDrawHeight - 100)\n\n        // add actors to the scene\n        engine.add(a)\n\n        const floor = new Floor(0, 300, 15, 1);\n        engine.add(floor)\n\n      \n        this.camera.clearAllStrategies();\n        this.camera.strategy.elasticToActor(a, 0.05, 0.1);\n\n    }\n\n\n}","import * as ex from 'excalibur';\nimport { Graphic, PostCollisionEvent } from 'excalibur';\nimport { samuraiRunSpriteSheet, Resources, samuraiIdleSpriteSheet, samuraiJumpSpriteSheet, samuraiFallSpriteSheet, samuraiAttack1SpriteSheet, spriteSheetToAnimation } from './resources';\n\nexport class Samurai extends ex.Actor {\n\n    public isOnGround = false;\n    public isJumping = false;\n    public isAttacking1 = false\n    public isFacingRight = true; // sprite image in file has to satisfy this\n\n    constructor(x: number, y: number) {\n        super({\n            name: 'Samurai',\n            pos: new ex.Vector(x, y),\n            collisionType: ex.CollisionType.Active,\n            collisionGroup: ex.CollisionGroupManager.groupByName(\"Samurai\"),\n            collider: ex.Shape.Box(32, 50, ex.Vector.Half, ex.vec(0, 3)),\n            color: ex.Color.Black\n        });\n    }\n\n\n    onInitialize(engine: ex.Engine) {\n\n        const run = spriteSheetToAnimation(samuraiRunSpriteSheet, 150)\n        const idle = spriteSheetToAnimation(samuraiIdleSpriteSheet, 150)\n        const jump = spriteSheetToAnimation(samuraiJumpSpriteSheet, 150)\n        const fall = spriteSheetToAnimation(samuraiFallSpriteSheet, 150)\n        const attack1 = spriteSheetToAnimation(samuraiAttack1SpriteSheet, 50)\n\n        this.graphics.add(\"run\", run)\n        this.graphics.add(\"idle\", idle)\n        this.graphics.add(\"jump\", jump)\n        this.graphics.add(\"fall\", fall)\n        this.graphics.add(\"attack1\", attack1)\n\n        this.on(\"postcollision\", ev => this.onPostCollision(ev))\n    }\n\n\n    onPostCollision(ev: PostCollisionEvent) {\n\n        if (ev.side === ex.Side.Bottom) {\n            this.isOnGround = true\n        }\n\n    }\n\n\n    onPreUpdate(engine: ex.Engine, delta: number) {\n\n        // Reset x velocity\n        this.vel.x = 0;\n        this.isAttacking1 = false;\n\n        /**\n         * Player input and set flags\n         */\n        {\n            if (engine.input.keyboard.isHeld(ex.Input.Keys.Left)) {\n                this.vel.x = -150;\n                this.isFacingRight = false\n            }\n\n            if (engine.input.keyboard.isHeld(ex.Input.Keys.Right)) {\n                this.vel.x = 150;\n                this.isFacingRight = true\n            }\n\n            if(engine.input.keyboard.isHeld(ex.Input.Keys.Up) && this.isOnGround ){\n                this.isJumping = true\n                this.vel.y -=500\n            }\n\n            if(engine.input.keyboard.isHeld(ex.Input.Keys.Space)){\n                this.isAttacking1 = true\n            }\n\n        }\n\n        /**\n         * Set flags\n         */\n        if (Math.abs(this.vel.y) > 0) {\n            this.isOnGround = false\n        }\n\n\n        /**\n         * change animation \n         */\n        let newGraphic = this.graphics.use(\"idle\");\n\n        if (this.vel.x === 0) {\n            newGraphic = this.graphics.use(\"idle\")\n        }\n\n        if (Math.abs(this.vel.x) > 0) {\n            newGraphic = this.graphics.use(\"run\")\n        }\n\n        if (this.vel.y < 0) {\n            newGraphic = this.graphics.use(\"jump\")\n        }\n\n        if (this.vel.y > 0) {\n            newGraphic = this.graphics.use(\"fall\")\n            this.isJumping = false\n        }\n\n        if(this.isAttacking1){\n            newGraphic = this.graphics.use(\"attack1\")\n        }\n\n        newGraphic.flipHorizontal = !this.isFacingRight\n\n    }\n\n\n}\n\n\n\n","// import {Engine, Color, Physics, Vector} from 'excalibur'\nimport *  as ex from 'excalibur' \nimport Level1 from './Level1'\nimport { loader } from './resources'\n\nconst engine = new ex.Engine({\n    backgroundColor: ex.Color.fromRGB(0,0, 100, 0.5),\n    width : 600,\n    height :400,\n    antialiasing: false,\n    suppressConsoleBootMessage:true,\n    suppressPlayButton:true\n})\n\n// Gravity\nex.Physics.acc = new ex.Vector(0, 800) // 800 pixels/s^2\n\n// add a Scene \nengine.addScene(\"level1\", new Level1())\nengine.goToScene(\"level1\")\n\n\nengine.start(loader).then(e=>{\n    console.log(\"game started!\")\n});\n\n// For test hook\n// (window as any).engine = engine;\n// (window as any).level = level;\n\n\n\n","import * as ex from 'excalibur';\nimport { ImageSource, Vector } from 'excalibur';\n\n// import files\nconst blockFile = require(\"../res/block.png\")\nconst samuraiRunFile = require(\"../res/samurai/run.png\")\nconst samuraiIdleFile = require(\"../res/samurai/idle.png\")\nconst samuraiJumpFile = require(\"../res/samurai/jump.png\")\nconst samuraiAttack1File = require(\"../res/samurai/attack1.png\")\nconst samuraiFallFile = require(\"../res/samurai/fall.png\")\nconst samuraiDieFile = require(\"../res/samurai/die.png\")\nconst samuraiTakeHitFile = require(\"../res/samurai/take-hit.png\")\n\n\n// put in Resources\nconst Resources = {\n    block: new ex.ImageSource(blockFile.default),\n    samuraiRun: new ex.ImageSource(samuraiRunFile.default),\n    samuraiIdle: new ex.ImageSource(samuraiIdleFile.default),\n    samuraiJump: new ex.ImageSource(samuraiJumpFile.default),\n    samuraiAttack1: new ex.ImageSource(samuraiAttack1File.default),\n    samuraiFall: new ex.ImageSource(samuraiFallFile.default),\n    samuraiDie: new ex.ImageSource(samuraiDieFile.default),\n    samuraiTakeHit: new ex.ImageSource(samuraiTakeHitFile.default)\n}\n\n\n/**\n * \n * @param imgSrc \n * @param cols \n * @param rows \n * @param spriteWidth \n * @param spriteHeight \n * @returns \n */\nconst imgToSpriteSheet = (imgSrc: ImageSource, cols: number, rows: number, spriteWidth: number, spriteHeight: number) => {\n    return ex.SpriteSheet.fromImageSource({\n        image: imgSrc,\n        grid: {\n            columns: cols,\n            rows: rows,\n            spriteWidth: spriteWidth,\n            spriteHeight: spriteHeight\n        }\n    });\n}\n\nconst spriteSheetToAnimation = (spriteSheet: ex.SpriteSheet, durationPerFrameMs: number, strategy?: ex.AnimationStrategy | undefined, scale?:ex.Vector | undefined) => {\n    let anim = ex.Animation.fromSpriteSheet(spriteSheet, [... new Array(spriteSheet.columns).keys()]  , durationPerFrameMs, strategy)\n    anim.scale = scale??new Vector(2,2)\n    return anim\n}\n\n\n\n\n\n\n// create sprites/sprite-sheets from images\nconst blockSprite = Resources.block.toSprite();\nconst samuraiRunSpriteSheet = imgToSpriteSheet(Resources.samuraiRun, 8, 1, 200, 200)\nconst samuraiIdleSpriteSheet = imgToSpriteSheet(Resources.samuraiIdle, 8, 1, 200, 200)\nconst samuraiJumpSpriteSheet = imgToSpriteSheet(Resources.samuraiJump, 2, 1, 200, 200)\nconst samuraiFallSpriteSheet = imgToSpriteSheet(Resources.samuraiFall, 2, 1, 200, 200)\nconst samuraiAttack1SpriteSheet = imgToSpriteSheet(Resources.samuraiAttack1, 6, 1, 200, 200)\nconst samuraiDieSpriteSheet = imgToSpriteSheet(Resources.samuraiDie, 6, 1, 200, 200)\nconst samuraiTakeHitSpriteSheet = imgToSpriteSheet(Resources.samuraiTakeHit, 4, 1, 200, 200)\n\n\n\n// create loader\nconst loader = new ex.Loader();\n\n// add all resources to loader\nfor (const res in Resources) {\n    loader.addResource((Resources as any)[res]);\n}\n\nexport { Resources, loader, samuraiRunSpriteSheet, blockSprite, samuraiIdleSpriteSheet, samuraiJumpSpriteSheet, samuraiAttack1SpriteSheet, samuraiFallSpriteSheet, samuraiDieSpriteSheet, samuraiTakeHitSpriteSheet, spriteSheetToAnimation }\n\n\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAAdklEQVQ4jWNkYGD4z0BFwMLAwMCQZmmIITHr+Hms4vjkZh0/DzGQgYGBQUXPAFX2+HlMMTxydy5dYGBgYGBgwuN6ssDgN5CRgVaxjDMCGBgYymbOZ+hKT8Rr0J1LFxhmHT8/BMJwBBoIz3qwrIMLEJKHAaqnQwAiayFN6+XTWwAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(195);\n"],"names":["__webpack_modules__","module","__unused_webpack_exports","entryUnbind","exports","path","Object","keys","global","isCallable","tryToString","TypeError","argument","isObject","String","toIndexedObject","toAbsoluteIndex","lengthOfArrayLike","createMethod","IS_INCLUDES","$this","el","fromIndex","value","O","length","index","includes","indexOf","fails","METHOD_NAME","method","call","createProperty","Array","max","Math","start","end","k","fin","undefined","result","n","arraySlice","floor","mergeSort","array","comparefn","middle","insertionSort","merge","element","j","i","left","right","llength","rlength","lindex","rindex","uncurryThis","toString","stringSlice","slice","it","TO_STRING_TAG_SUPPORT","classofRaw","TO_STRING_TAG","wellKnownSymbol","CORRECT_ARGUMENTS","arguments","tag","key","error","tryGet","callee","hasOwn","ownKeys","getOwnPropertyDescriptorModule","definePropertyModule","target","source","exceptions","defineProperty","f","getOwnPropertyDescriptor","DESCRIPTORS","createPropertyDescriptor","object","bitmap","enumerable","configurable","writable","toPropertyKey","propertyKey","get","document","EXISTS","createElement","firefox","match","UA","test","getBuiltIn","version","userAgent","process","Deno","versions","v8","split","webkit","CONSTRUCTOR","METHOD","prototype","createNonEnumerableProperty","redefine","setGlobal","copyConstructorProperties","isForced","options","targetProperty","sourceProperty","descriptor","TARGET","GLOBAL","STATIC","stat","noTargetGet","forced","sham","exec","bind","hasOwnProperty","NATIVE_BIND","Function","apply","FunctionPrototype","getDescriptor","PROPER","name","CONFIGURABLE","fn","aFunction","namespace","aCallable","V","P","func","check","globalThis","window","self","g","this","toObject","a","classof","propertyIsEnumerable","store","functionToString","inspectSource","set","has","NATIVE_WEAK_MAP","shared","sharedKey","hiddenKeys","OBJECT_ALREADY_INITIALIZED","WeakMap","state","wmget","wmhas","wmset","metadata","facade","STATE","enforce","getterFor","TYPE","type","replacement","feature","detection","data","normalize","POLYFILL","NATIVE","string","replace","toLowerCase","isPrototypeOf","USE_SYMBOL_AS_UID","$Symbol","toLength","obj","V8_VERSION","getOwnPropertySymbols","symbol","Symbol","__unused_webpack_module","IE8_DOM_DEFINE","V8_PROTOTYPE_DEFINE_BUG","anObject","$defineProperty","$getOwnPropertyDescriptor","Attributes","current","propertyIsEnumerableModule","internalObjectKeys","concat","getOwnPropertyNames","push","names","enumBugKeys","$propertyIsEnumerable","NASHORN_BUG","input","pref","val","valueOf","getOwnPropertyNamesModule","getOwnPropertySymbolsModule","InternalStateModule","CONFIGURABLE_FUNCTION_NAME","getInternalState","enforceInternalState","TEMPLATE","unsafe","simple","join","uid","SHARED","IS_PURE","mode","copyright","license","toIntegerOrInfinity","min","integer","IndexedObject","requireObjectCoercible","ceil","number","isSymbol","getMethod","ordinaryToPrimitive","TO_PRIMITIVE","exoticToPrim","toPrimitive","id","postfix","random","NATIVE_SYMBOL","iterator","WellKnownSymbolsStore","symbolFor","createWellKnownSymbol","withoutSetter","description","$","internalSort","arrayMethodIsStrict","FF","IE_OR_EDGE","V8","WEBKIT","un$Sort","sort","FAILS_ON_UNDEFINED","FAILS_ON_NULL","STRICT_METHOD","STABLE_SORT","code","chr","fromCharCode","v","b","charAt","proto","itemsLength","items","arrayLength","x","y","getSortCompare","nativeKeys","__webpack_exports__","d","_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__","_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default","_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__","___CSS_LOADER_EXPORT___","_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default","__WEBPACK_DEFAULT_EXPORT__","cssWithMappingToString","list","map","item","content","needLayer","modules","media","dedupe","supports","layer","alreadyImportedModules","_k","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","sourceMapping","sourceURLs","sources","sourceRoot","__webpack_module_cache__","moduleId","cachedModule","getter","__esModule","definition","o","e","prop","r","toStringTag","webgl_util_namespaceObject","Events_namespaceObject","SpriteEffects_namespaceObject","DrawUtil_namespaceObject","Drawing_Index_namespaceObject","Input_Index_namespaceObject","Traits_Index_namespaceObject","Experiments","Legacy","LogLevel","Util_Index_namespaceObject","polyfill","audioContext","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","callback","setInterval","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","AudioContext","webkitAudioContext","replaceMe","decodeAudioData","arrayBuffer","Promise","resolve","reject","mozAudioContext","msAudioContext","oAudioContext","devicePixelRatio","Flags","static","_FROZEN","_FLAGS","enable","WebGL","Canvas","LegacyDrawing","flagName","Error","createId","Logger","constructor","_appenders","defaultLevel","Info","_INSTANCE","addAppender","ConsoleAppender","appender","clearAppenders","_log","level","args","len","log","debug","Debug","info","warn","Warn","fatal","Fatal","console","consoleArgs","unshift","ScreenAppender","width","height","_messages","_canvas","innerWidth","innerHeight","style","position","_ctx","getContext","body","appendChild","message","clearRect","pos","opacity","fillStyle","toFixed","fillText","maxMessages","obsoleteMessage","resetObsoleteCounter","logMessage","suppressObsoleteMessages","isEnabled","getInstance","trace","showStackTrace","obsolete","alternateMethod","property","SyntaxError","DecoratedClass","super","Vector","_x","_y","Zero","One","Half","Up","Down","Left","Right","angle","cos","sin","vec","isNaN","Infinity","vec1","vec2","sqrt","pow","setTo","equals","vector","tolerance","abs","distance","squareDistance","magnitude","size","newLength","scale","average","add","sizeOrScale","sub","addEqual","subEqual","scaleEqual","dot","cross","num","perpendicular","normal","negate","toAngle","atan2","rotate","anchor","sinAngle","cosAngle","clone","fixed","decorators","desc","c","Reflect","decorate","__decorate","Side","Color_decorate","Color","parseInt","parseFloat","hex","h","s","l","HSLColor","toRGBA","lighten","factor","temp","fromRGBA","darken","saturate","desaturate","multiply","color","newR","newG","newB","newA","mulitiply","screen","color1","invert","color2","equal","format","toHSLA","toHex","_componentToHex","Black","fromHex","White","Gray","LightGray","DarkGray","Yellow","Orange","Red","Vermilion","Vermillion","Rose","Magenta","Violet","Blue","Azure","Cyan","Viridian","Green","Chartreuse","Transparent","ExcaliburBlue","p","q","t","hue2rgb","getOpposite","side","Top","Bottom","None","fromDirection","direction","directions","directionEnum","Number","MAX_VALUE","maxIndex","BoundingBox","leftOrOptions","top","bottom","intersection","points","minX","minY","maxX","maxY","hasZeroDimensions","center","translate","point","getPoints","fromPoints","shifted","transform","matrix","multv","getPerimeter","results","rayCast","ray","farClipDistance","tmin","tmax","xinv","dir","yinv","tx1","tx2","ty1","ty2","rayCastTime","contains","combine","other","dimensions","intersect","totalBoundingBox","overlapX","overlapY","intersectWithSide","bb","getSideFromIntersection","debugDraw","ctx","strokeStyle","strokeRect","draw","ex","drawRect","BITMASK32","Random","seed","_lowerMask","_upperMask","_w","_n","_m","_a","_u","_s","_b","_t","_c","_l","_f","_mt","Date","now","_index","_twist","mag01","nextInt","next","floating","bool","likelihood","pickOne","pickSet","numPicks","allowDuplicates","_pickSetWithDuplicates","_pickSetWithoutDuplicates","currentPick","tempArray","splice","shuffle","swap","randomIndex","range","d4","d6","d8","d10","d12","d20","TwoPI","PI","frac","sign","clamp","canonicalizeAngle","tmpAngle","toDegrees","radians","toRadians","degrees","from","to","randomInRange","randomIntInRange","round","Util_TwoPI","Util_clamp","Util_randomInRange","Util_randomIntInRange","Util_canonicalizeAngle","Util_toDegrees","Util_toRadians","Util_range","getPosition","oLeft","oTop","calcOffsetLeft","parent","offsetLeft","offsetParent","calcOffsetTop","offsetTop","addItemToArray","removeItemFromArray","getOppositeSide","getSideFromDirection","Collection","initialSize","DefaultSize","_internalArray","_endPointer","_resize","newSize","newArray","count","pop","clear","internalSize","elementAt","insert","remove","removed","removeElement","toArray","forEach","fail","delay","milliseconds","clock","schedule","setTimeout","MatrixLocations","ImageFiltering","EventTypes","Matrix","Float32Array","_scaleSignX","_scaleSignY","near","far","mat","toDOMMatrix","DOMMatrix","reset","identity","sx","sy","angleRadians","multm","dest","a11","a21","a31","a41","a12","a22","a32","a42","a13","a23","a33","a43","a14","a24","a34","a44","b11","b21","b31","b41","b12","b22","b32","b42","b13","b23","b33","b43","b14","b24","b34","b44","getScale","setPosition","sine","cosine","setRotation","currentScale","getRotation","getScaleY","getScaleX","xscale","yscale","setScaleX","setScaleY","setScale","getBasisDeterminant","getAffineInverse","inverseDet","m","tx","ty","isIdentity","TransformStack","_transforms","_currentTransform","save","restore","StateStack","_states","_currentState","_getDefaultState","_cloneState","watch","change","__isProxy","Proxy","watchAny","Graphic","_d","_e","_ID","_transformStale","showDebug","_flipHorizontal","_flipVertical","_rotation","_scale","_origin","_width","_height","origin","flipHorizontal","flipVertical","rotation","isStale","cloneGraphicOptions","localBounds","fromDimension","_preDraw","_drawImage","_postDraw","_rotate","_flip","scaleDirX","scaleDirY","isPowerOfTwo","nextHighestPowerOfTwo","ensurePowerOfTwo","getGlTypeSizeBytes","gl","FLOAT","SHORT","UNSIGNED_SHORT","BYTE","UNSIGNED_BYTE","getAttributeComponentSize","LOW_FLOAT","HIGH_FLOAT","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","getAttributePointerType","TextureLoader","context","_GL","_MAX_TEXTURE_SIZE","getParameter","MAX_TEXTURE_SIZE","image","_TEXTURE_MAP","filtering","forceUpdate","tex","bindTexture","TEXTURE_2D","toPowerOfTwoImage","texImage2D","RGBA","createTexture","checkImageSizeSupportedAndLog","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","filterMode","TEXTURE_MIN_FILTER","Pixel","NEAREST","LINEAR","TEXTURE_MAG_FILTER","potCanvas","_POT_CANVAS","potCtx","_POT_CTX","imageSmoothingEnabled","drawImage","originalSrc","dataset","_LOGGER","Blended","Map","Raster","_g","_h","_dirty","_smoothing","_color","flagDirty","_lineWidth","_lineDash","_padding","strokeColor","smoothing","lineWidth","lineDash","padding","_bitmap","bitmapWidth","bitmapHeight","maybeCtx","cloneRasterOptions","dirty","_getTotalWidth","_originalWidth","_getTotalHeight","_originalHeight","_strokeColor","rasterize","_applyRasterProperties","execute","load","setLineDash","getLineDash","_options","cache","GameEvent","_bubbles","bubbles","stopPropagation","KillEvent","PreKillEvent","PostKillEvent","GameStartEvent","GameStopEvent","PreDrawEvent","delta","PostDrawEvent","PreDebugDrawEvent","PostDebugDrawEvent","PreUpdateEvent","engine","PostUpdateEvent","PreFrameEvent","prevStats","PostFrameEvent","stats","GamepadConnectEvent","gamepad","GamepadDisconnectEvent","GamepadButtonEvent","button","GamepadAxisEvent","axis","SubscribeEvent","topic","handler","UnsubscribeEvent","VisibleEvent","HiddenEvent","PreCollisionEvent","actor","PostCollisionEvent","ContactStartEvent","contact","ContactEndEvent","CollisionPreSolveEvent","CollisionPostSolveEvent","CollisionStartEvent","CollisionEndEvent","InitializeEvent","ActivateEvent","oldScene","DeactivateEvent","newScene","ExitViewPortEvent","EnterViewPortEvent","EnterTriggerEvent","ExitTriggerEvent","EventDispatcher","_handlers","_wiredEventDispatchers","emit","eventName","event","on","off","eventHandlers","once","ev","wire","eventDispatcher","unwire","Resource","responseType","bustCache","logger","events","isLoaded","_cacheBust","uri","request","XMLHttpRequest","open","addEventListener","status","response","statusText","send","SpriteEffects_decorate","Grayscale","updatePixel","imageData","firstPixel","pixel","avg","Invert","Opacity","Colorize","Lighten","fromRGB","Darken","Saturate","Desaturate","Fill","Texture","_sprite","loaded","_loadedResolve","_resource","Sprite_Sprite","async","url","blob","URL","createObjectURL","Image","src","decode","naturalWidth","naturalHeight","asSprite","Configurable","base","assign","props","filter","SpriteImpl","imageOrConfig","offset","drawAroundAnchor","effects","_spriteCanvas","_spriteCtx","_pixelData","_pixelsLoaded","_dirtyEffect","_opacity","texture","_initPixelsFromTexture","drawWidth","drawHeight","_loadPixels","_flushTexture","grayscale","addEffect","fill","colorize","effect","_applyEffects","removeEffect","param","indexToRemove","getImageData","putImageData","clearEffects","xpoint","ypoint","ctxOrOptions","CanvasRenderingContext2D","_drawWithOptions","_j","anchorX","anchorY","oldAlpha","globalAlpha","Sprite_decorate","Sprite","sourceView","destSize","_updateSpriteDimensions","ready","then","newWidth","newHeight","nativeWidth","nativeHeight","sprite","ImageSource","fromLegacyTexture","_logger","_filtering","endsWith","_src","setAttribute","toSprite","unload","AnimationImpl","engineOrConfig","sprites","speed","loop","currentFrame","_timeLeftInFrame","_idempotencyToken","freezeFrame","Engine","config","_engine","_setAnchor","_setRotation","_setScale","isDone","tick","elapsed","idempotencyToken","_updateValues","skip","frames","animOptions","currSprite","play","playAnimation","Animation_Animation","images","FontUnit","TextAlign","BaseAlign","FontStyle","Direction","Animation_decorate","SpriteSheet_SpriteSheet","imageOrConfigOrSprites","columns","rows","spWidth","spHeight","spacing","_sprites","_image","_columns","_rows","_spWidth","_spHeight","_spacing","loadFromImage","isWidthError","isHeightError","RangeError","getSpacingDimensions","row","col","margin","getAnimationByIndices","indices","getAnimationBetween","beginIndex","endIndex","getAnimationForAll","getSprite","getAnimationByCoords","spriteCoordinates","maxWidth","maxHeight","coord","anim","SpriteFont","alphabet","caseInsensitive","_currentColor","_currentOpacity","_spriteRecord","_textShadowOn","_textShadowDirty","_textShadowColor","_textShadowSprites","_shadowOffsetX","_shadowOffsetY","getTextSprites","lookup","char","setTextShadow","offsetX","offsetY","shadowColor","character","useTextShadow","text","_parseOptions","characterShadow","fontSize","letterSpacing","currX","textAlign","Start","End","Center","currY","baseAlign","Hanging","Ideographic","Alphabetic","Middle","charSprite","SpriteSheet_decorate","SpriteSheet","spriteIndex","legacySpriteSheet","oldSprite","fromLegacySprite","spriteSheet","toLegacySprite","grid","cols","spriteWidth","spriteHeight","originOffset","offsetDefaults","marginDefaults","SpriteFont_SpriteFont","_text","shadow","_alreadyWarnedAlphabet","_alreadyWarnedSpriteSheet","spriteFont","_getCharacterSprites","textToRender","toLocaleLowerCase","letterIndex","letter","letterSprite","measureText","lines","maxWidthLine","reduce","xCursor","yCursor","line","render","bounds","DebugText","fontSheet","_imageSource","_spriteSheet","fromImageSource","_spriteFont","write","RenderSource","_gl","_texture","use","activeTexture","TEXTURE0","disable","RenderTarget","_setupFramebuffer","setResolution","_frameTexture","frameBuffer","_frameBuffer","frameTexture","attachmentPoint","COLOR_ATTACHMENT0","createFramebuffer","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","toRenderSource","viewport","ExcaliburWebGLContextAccessor","Shader","uniforms","attributes","_compiled","vertexSource","fragmentSource","compiled","useProgram","program","_ACTIVE_SHADER_INSTANCE","isCurrentlyBound","compile","vertexShader","_compileShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","_createProgram","getAttributes","attribute","getUniforms","uniform","uniformCount","getProgramParameter","ACTIVE_UNIFORMS","getActiveUniform","uniformLocation","getUniformLocation","glType","location","attributeCount","ACTIVE_ATTRIBUTES","getActiveAttrib","attributeLocation","getAttribLocation","normalized","setTexture","slotNumber","setUniformInt","setUniform","setUniformIntArray","setUniformBoolean","setUniformFloat","setUniformFloatArray","setUniformFloatVector","setUniformMatrix","uniformType","createProgram","attachShader","linkProgram","LINK_STATUS","getProgramInfoLog","typeName","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","errorInfo","getShaderInfoLog","_processSourceForError","errorLineStart","search","errorLineEnd","_","error2","VertexBuffer","buffer","createBuffer","bufferData","bindBuffer","ARRAY_BUFFER","upload","STATIC_DRAW","DYNAMIC_DRAW","VertexLayout","_layout","_attributes","_vertexTotalSizeBytes","vertexBuffer","_vertexBuffer","_shader","initialize","totalVertexSizeBytes","shaderAttributes","attrib","componentsPerVertex","vertAttribute","typeSize","uploadBuffer","vert","vertexAttribPointer","enableVertexAttribArray","GraphicsDiagnostics","DrawCallCount","DrawnImagesCount","LineRenderer","priority","_maxLines","_vertexIndex","_lineCount","_context","ortho","_isFull","flush","getTransform","finalStart","finalEnd","hasPendingDraws","drawArrays","LINES","PointRenderer","_maxPoints","_pointCount","_buffer","finalPoint","POINTS","ScreenPassPainter","renderWithPostProcessor","postprocessor","getShader","getLayout","TRIANGLES","renderToScreen","QuadIndexBuffer","numberOfQuads","useUint16","ELEMENT_ARRAY_BUFFER","totalVertices","getExtension","Uint32Array","maxUint16","maxUint16Index","bufferGlType","Uint16Array","currentQuad","ImageRenderer","_maxImages","_maxTextures","_imageCount","_textures","MAX_TEXTURE_IMAGE_UNITS","transformedFrag","_transformFragmentSource","_quads","maxTextures","newSource","texturePickerBuilder","_addImageAsTexture","_bindTextures","_getTextureIdForImage","swidth","sheight","dx","dy","dwidth","dheight","view","sw","sh","snapToPixel","topleft","topRight","bottomLeft","bottomRight","textureId","potWidth","potHeight","uvx0","uvy0","uvx1","uvy1","drawElements","RectangleRenderer","_maxRectangles","_rectangleCount","drawLine","thickness","halfThick","startTop","startBottom","endTop","endBottom","stroke","strokeThickness","topLeft","CircleRenderer","_maxCircles","_circleCount","radius","ExcaliburGraphicsContextWebGLDebug","_webglCtx","_debugText","rectOptions","lineOptions","drawPoint","pointOptions","drawText","ExcaliburGraphicsContextWebGL","_renderers","_isDrawLifecycle","_postProcessTargets","_postprocessors","_transform","_state","backgroundColor","_alreadyWarnedDrawLifecycle","canvasElement","enableTransparency","__gl","antialias","premultipliedAlpha","alpha","depth","powerPreference","register","_init","canvas","_ortho","checkIfResolutionSupported","dim","supported","clearColor","COLOR_BUFFER_BIT","BLEND","blendEquation","FUNC_ADD","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","blendEquationSeparate","blendFuncSeparate","_screenRenderer","_renderTarget","__ctx","renderer","rendererName","_isCurrentRenderer","_currentRenderer","beginDrawLifecycle","endDrawLifecycle","resetTransform","updateViewport","resolution","drawRectangle","drawCircle","addPostProcessor","removePostProcessor","clearPostProcessors","values","DisplayMode","Resolution","SVGA","Standard","Atari2600","GameBoy","GameBoyAdvance","NintendoDS","NES","SNES","Screen","_antialiasing","_resolutionStack","_viewportStack","_pixelRatioOverride","_isFullScreen","_isDisposed","_fullscreenChangeHandler","_pixelRatioChangeHandler","_listenForPixelRatio","_devicePixelRatio","_calculateDevicePixelRatio","applyResolutionAndViewport","_resizeHandler","_setResolutionAndViewportByDisplayMode","_alreadyWarned","_displayMode","displayMode","Fixed","graphicsContext","antialiasing","_browser","browser","_position","pixelRatio","_applyDisplayMode","_mediaQueryList","removeListener","nativeComponent","matchMedia","addListener","dispose","_resizeObserver","disconnect","removeEventListener","isHiDpi","FillContainer","FitContainer","parentElement","_resolution","_viewport","aspectRatio","scaledWidth","scaledHeight","setCurrentCamera","camera","_camera","pushResolutionAndViewport","peekViewport","peekResolution","popResolutionAndViewport","imageRendering","isSmooth","isFullScreen","goFullScreen","requestFullscreen","exitFullScreen","exitFullscreen","pageToScreenCoordinates","newX","newY","screenHeight","screenWidth","screenToPageCoordinates","screenMarginY","screenMarginX","screenToWorldCoordinates","inverse","worldToScreenCoordinates","pageToWorldCoordinates","worldToPageCoordinates","getWorldBounds","canvasWidth","halfCanvasWidth","canvasHeight","halfCanvasHeight","zoom","halfDrawWidth","halfDrawHeight","_computeFit","overflow","aspect","adjustedWidth","adjustedHeight","_computeFitContainer","clientWidth","clientHeight","Position","_initializeDisplayModePosition","Window","ResizeObserver","observe","FillScreen","FitScreen","display","specifiedPosition","marginTop","marginLeft","AudioContextFactory","WebAudio","_UNLOCKED","create","unlockTimeoutTimer","resume","createBufferSource","ended","connect","destination","onended","playbackState","isLegacyWebAudioSource","currentTime","PLAYING_STATE","FINISHED_STATE","clearTimeout","Class","eventObject","x1","y1","x2","y2","cap","beginPath","lineCap","moveTo","lineTo","closePath","arc","roundRect","br","tl","tr","bl","defaultRadius","quadraticCurveTo","circle","Loader_0","Loader","loadables","_resourceList","_playButtonShown","_resourceCount","_numLoaded","_progressCounts","_totalCounts","logo","logoWidth","logoHeight","loadingBarColor","suppressPlayButton","_playButtonStyles","Z","playButtonText","startButtonFactory","buttonElement","getElementById","textContent","_isLoadedPromise","_isLoadedResolve","addResources","_imageElement","playButtonRootElement","_playButtonRootElement","playButtonElement","_playButtonElement","_playButton","existingRoot","_styleBlock","head","wireEngine","addResource","loadable","resizeHandler","_positionPlayButton","evt","click","playButtonClicked","startButtonHandler","hidePlayButton","removeChild","update","_delta","areResourcesLoaded","all","finally","showPlayButton","unlock","markResourceComplete","progress","buttonWidth","buttonHeight","playButtonPosition","fillRect","logoY","logoX","logoPosition","imageHeight","oldAntialias","getAntialiasing","setAntialiasing","loadingX","loadingY","loadingBarPosition","progressWidth","REPORTED_FEATURES","webgl","webaudio","gamepadapi","Detector","_features","failedTests","_criticalTests","canvasSupport","elem","arrayBufferSupport","xhr","dataUrlSupport","toDataURL","objectUrlSupport","rgbaSupport","cssText","_warningTest","webAudioSupport","webglSupport","_loadBrowserFeatures","getBrowserFeatures","logBrowserFeatures","msg","arraybuffer","dataurl","objecturl","rgba","navigator","getGamepads","failedCritical","warning","CollisionType","CollisionResolutionStrategy","BroadphaseStrategy","Integrator","CoordPlane","Physics","gravity","acc","collisionResolutionStrategy","Arcade","Realistic","dynamicTreeVelocityMultiplyer","dynamicTreeVelocityMultiplier","enabled","broadphaseStrategy","DynamicAABBTree","defaultMass","integrator","Euler","boundsPadding","positionIterations","velocityIterations","slop","steeringFactor","warmStart","bodiesCanSleepByDefault","surfaceEpsilon","sleepEpsilon","wakeThreshold","sleepBias","checkForFastBodies","disableMinimumSpeedForFastBody","Physics_decorate","VectorView","_getX","getX","_getY","getY","_setX","setX","_setY","setY","Component","owner","newComponent","TagComponent","TransformComponent","X","Y","createPosView","createScaleView","coordPlane","World","z","_recalculate","getGlobalMatrix","getGlobalTransform","globalPos","globalScale","globalRotation","parentTransform","globalScaleX","globalScaleY","applyInverse","MotionComponent","vel","scaleFactor","angularVelocity","torque","inertia","CollisionGroup","category","mask","_name","_category","_mask","canCollide","collisionGroups","combinedName","combinedCategory","All","Observable","observers","subscriptions","observer","subscribe","unregister","unsubscribe","notifyAll","notify","cb","Pair","colliderA","colliderB","calculatePairHash","bodyA","BodyComponent","bodyB","group","collisionType","PreventCollision","active","collide","hasCollider","collider","idA","idB","Projection","overlaps","projection","getOverlap","TreeNode","isLeaf","DynamicTree","worldBounds","root","nodes","_insert","leaf","leafAABB","currentRoot","area","combinedArea","cost","inheritanceCost","leftCost","leftCombined","newArea","oldArea","rightCost","rightCombined","oldParent","newParent","currentNode","_balance","_remove","grandParent","sibling","trackCollider","node","updateCollider","untrackCollider","multdx","multdy","balance","getHeight","query","helper","rayCastQuery","getNodes","Ray","numerator","begin","getSlope","divisor","u","getLength","intersectPoint","time","getPoint","DynamicTreeCollisionProcessor","_dynamicCollisionTree","_pairs","Set","_collisionPairCache","_colliders","getColliders","track","CompositeCollider","colliders","untrack","_pairExists","hash","broadphase","targets","seconds","potentialColliders","pair","physics","pairs","Active","updateDistance","minDimension","fastBodies","updateVec","oldPos","centerPoint","furthestPoint","getFurthestPoint","minCollider","minTranslate","hitPoint","isValid","shift","fastBodyCollisions","narrowphase","contacts","newContacts","collisions","updated","Collider","touching","_collisionProcessor","_dynamicAABBTree","addCollider","clearColliders","removeCollider","worldPos","axes","furthestPoints","bestPoint","maxDistance","getInertia","mass","totalInertia","otherColliders","potentialCollider","getClosestLineBetween","maybeLine","minLength","minLine","minPoint","minDistance","project","projs","proj","newProjection","Line","slope","intercept","getEdge","midpoint","flip","below","clip","sideVector","clipTime","distanceToPoint","signed","x0","y0","findVectorToPoint","aMinusP","findPoint","hasPoint","currPoint","threshold","dxc","dyc","dx1","dy1","ClosestLine","p0","q0","w0","denom","sDenom","tDenom","tClosestParallel","sClosest","tClosest","ClosestLineJumpTable","PolygonPolygonClosestLine","polygonA","polygonB","otherWorldPos","otherDirection","thisDirection","rayTowardsOther","rayTowardsThis","thisPoint","otherPoint","thisFace","getClosestFace","otherFace","face","PolygonEdgeClosestLine","polygon","edge","edgeLine","asLine","PolygonCircleClosestLine","circlex","circley","CircleCircleClosestLine","circleA","circleB","CircleEdgeClosestLine","circleWorlPos","EdgeEdgeClosestLine","edgeA","edgeB","edgeLineA","edgeLineB","CircleCollider","_naturalRadius","orig","discriminant","toi","toi1","toi2","positiveToi","mintoi","shape","PolygonCollider","EdgeCollider","CollisionJumpTable","CollideCircleCircle","CollideCirclePolygon","CollideCircleEdge","getFurthestLocalPoint","scalars","dotProduct","newPos","CollisionContact","mtv","tangent","localPoints","_canceled","matchAwake","sleeping","sleepMotion","setSleeping","isCanceled","cancel","SeparatingAxis","polyA","polyB","bestSeparation","bestSide","bestAxis","bestSideIndex","bestOtherPoint","sides","getSides","localSides","getLocalSides","vertB","vertSeparation","separation","localSide","sideId","localPoint","polyDir","closestPointOnPoly","minOverlap","minAxis","minIndex","proj1","proj2","overlap","circleAPos","circleBPos","combinedRadius","mvt","local","findCirclePolygonSeparation","samedir","findSide","findLocalSide","cc","edgeWorld","asLocalLine","da","dda","db","ddb","den","pointOnEdge","dd","CollideEdgeEdge","CollidePolygonEdge","pc","linePoly","CollidePolygonPolygon","separationA","findPolygonPolygonSeparation","separationB","incident","reference","refDir","clipRight","clipLeft","xf","FindContactSeparation","shapeA","txA","shapeB","txB","worldPoint","circlePoint","dist","_getBodyPos","_getTransformedBegin","_getTransformedEnd","transformedBegin","transformedEnd","_boundsFromBeginEnd","edgeNormal","_transformedPoints","_axes","_sides","_localSides","winding","clockwiseWinding","reverse","_calculateTransformation","getTransformedPoints","currentSide","mostDirection","testRay","accum","pts","POSITIVE_INFINITY","faceIndex","denominator","iplusone","crossTerm","minContactTime","contactIndex","contactTime","scalar","effectiveOffset","firstPoint","Shape","Circle","Box","ColliderComponent","$colliderAdded","$colliderRemoved","_collider","flipped","onAdd","entity","precollision","postcollision","onRemove","useBoxCollider","usePolygonCollider","poly","Polygon","useCircleCollider","useEdgeCollider","Edge","useCompositeCollider","DegreeOfFreedom","dependencies","canSleep","_sleeping","bounciness","friction","useGravity","limitDegreeOfFreedom","oldVel","oldAcc","oldRotation","oldScale","inverseMass","updateMotion","currentMotion","bias","inverseInertia","motion","xFactor","yFactor","rx","applyImpulse","impulse","finalImpulse","Rotation","distanceFromCenter","applyLinearImpulse","applyAngularImpulse","captureOldTransform","CullingBox","_topLeft","_topRight","_bottomLeft","_bottomRight","isSpriteOffScreen","drawingWidth","currentDrawing","drawingHeight","getGlobalPos","topLeftScreen","topRightScreen","bottomLeftScreen","bottomRightScreen","_xCoords","_yCoords","_xMin","_yMin","_xMax","_yMax","minWorld","maxWorld","_xMinWorld","_yMinWorld","_xMaxWorld","_yMaxWorld","boundingPoints","rect","OffscreenCulling","cullingBox","actorBoundsOffscreen","currentScene","isOffScreen","removeComponent","addComponent","AddedComponent","isAddedComponent","RemovedComponent","isRemovedComponent","Entity","components","_componentsToRemove","_componentTypeToInstance","_componentStringToInstance","_tagsMemo","_typesMemo","componentAdded$","componentRemoved$","_parent","childrenAdded$","childrenRemoved$","_children","_isInitialized","_setName","component","kill","isKilled","tags","hasTag","addTag","removeTag","force","types","_rebuildMemos","getComponents","_notifyAddComponent","added","_notifyRemoveComponent","children","unparent","addChild","getAncestors","removeAllChildren","getDescendants","queue","curr","newEntity","child","addTemplate","templateEntity","ctor","constuctorType","componentOrType","_removeComponentByType","delete","processComponentRemoval","isInitialized","_initialize","onInitialize","_preupdate","onPreUpdate","_postupdate","onPostUpdate","CanvasDrawComponent","hasGraphicsTick","graphic","GraphicsLayer","_graphics","graphics","hide","nameOrGraphic","gfx","getGraphic","show","copyGraphics","getNames","order","currentKeys","GraphicsLayers","_component","_layers","_layerMap","default","_maybeAddLayer","_getLayer","graphicsLayerKeys","GraphicsComponent","visible","_bounds","onPreDraw","onPostDraw","layers","graphicToSet","Rectangle","_radius","PointerComponent","useColliderShape","useGraphicsBounds","RotationType","EasingFunctions","easing","duration","CreateReversibleEasingFunction","Linear","startValue","endValue","EaseInQuad","EaseOutQuad","EaseInOutQuad","EaseInCubic","EaseOutCubic","EaseInOutCubic","EasingFunctions_decorate","ActionQueue","_actions","_completedActions","_entity","action","clearActions","_currentAction","stop","getActions","hasNext","isComplete","elapsedMs","Repeat","repeatBuilder","repeat","_stopped","_repeatBuilder","_repeatContext","ActionContext","_actionQueue","getQueue","_repeat","_originalRepeat","RepeatForever","MoveBy","_started","_tx","_motion","_speed","_offset","_start","_end","_distance","_dir","MoveTo","destx","desty","RotateTo","rotationType","_rotationType","ShortestPath","_currentNonCannonAngle","distance1","distance2","_shortDistance","_longDistance","_shortestPathIsPositive","_direction","LongestPath","Clockwise","CounterClockwise","distanceTravelled","RotateBy","angleRadiansOffset","ScaleTo","scaleX","scaleY","speedX","speedY","_endX","_endY","_speedX","_speedY","_startX","_startY","_distanceX","_distanceY","directionX","directionY","ScaleBy","scaleOffsetX","scaleOffsetY","_startScale","_endScale","_directionX","_directionY","CallMethod","_method","_hasBeenCalled","EaseTo","easingFcn","_currentLerpTime","_lerpDuration","_lerpStart","_lerpEnd","_initialized","Blink","timeVisible","timeNotVisible","numBlinks","_timeVisible","_timeNotVisible","_elapsedTime","_totalTime","_duration","Fade","endOpacity","_multiplier","_endOpacity","Delay","_delay","Die","ActionsComponent","Follow","entityToFollow","followDistance","_followTx","_followMotion","_current","_maximumDistance","_distanceBetween","actorToFollowSpeed","Meet","actorToMeet","_speedWasSpecified","_meetTx","_meetMotion","actorToMeetSpeed","_queue","easeTo","xOrPos","yOrSpeed","speedOrUndefined","moveBy","xOffsetOrVector","yOffsetOrSpeed","xOffset","yOffset","rotateTo","rotateBy","scaleTo","sizeXOrVector","sizeYOrSpeed","speedXOrUndefined","speedYOrUndefined","sizeX","sizeY","scaleBy","sizeOffsetXOrVector","sizeOffsetYOrSpeed","sizeOffsetX","sizeOffsetY","blink","fade","die","callMethod","times","repeatForever","follow","meet","asPromise","toPromise","Font","_o","_p","_q","_r","quality","family","Normal","bold","unit","Px","LeftToRight","_textBounds","_textToBitmap","_bitmapUsage","blur","fontString","_ex","_getTextBitmap","_applyFont","metrics","textHeight","actualBoundingBoxAscent","actualBoundingBoxDescent","lineAdjustedHeight","bottomBounds","actualBoundingBoxLeft","actualBoundingBoxRight","_setDimension","textBounds","_getRasterPropertiesHash","textBaseline","font","shadowBlur","shadowOffsetX","shadowOffsetY","_drawText","colorOverride","lineHeight","strokeText","textAndHash","clearCache","checkAndClearCache","isNewBitmap","rasterWidth","rasterHeight","performance","cacheSize","entries","Text","_textWidth","_textHeight","_font","_calculateDimension","Actor_decorate","Actor","_anchor","_handleAnchorChange","scene","_draggable","_dragging","_pointerDragStartHandler","_pointerDragEndHandler","_pointerDragMoveHandler","pe","_pointerDragLeaveHandler","traits","collisionGroup","defaults","Passive","pointer","actions","thePos","theVel","theAcc","theAngle","isVisible","draggable","isDraggable","currentGraphic","_prekill","_scene","onPreKill","_postkill","onPostKill","unkill","setDrawing","addDrawing","getZIndex","newZ","setZIndex","newIndex","localCenter","getGlobalScale","getGlobalRotation","recurse","geom","containment","some","within","otherCollider","me","drawing","currFrame","trait","_predraw","_postdraw","ScreenElement_ScreenElement","useWorld","coords","Timer","fcn","interval","repeats","numberOfRepeats","_totalTimeAlive","_running","_numberOfTicks","maxNumberOfRepeats","_complete","_MAX_ID","_callbacks","complete","newInterval","newNumberOfRepeats","timesRepeated","getTimeRunning","timeToNextAction","timeElapsedTowardNextAction","isRunning","pause","unpause","cancelTimer","Timer_decorate","DebugGraphicsComponent","Axis","TileMap_decorate","TileMapImpl","xOrConfig","cellWidth","cellHeight","_token","_onScreenXStart","_onScreenXEnd","_onScreenYStart","_onScreenYEnd","_spriteSheets","_legacySpriteMap","_cols","isOffscreen","_composite","currentCol","cd","Cell","registerSpriteSheet","fromLegacySpriteSheet","_updateColliders","tile","solid","prev","getCellByIndex","getCell","getCellByPoint","cell","getRows","getColumns","worldCoordsUpperLeft","worldCoordsLowerRight","xEnd","yEnd","graphicsIndex","graphicsLen","grayish","TileMap","CellImpl","_solid","pushSprite","addGraphic","removeGraphic","clearGraphics","StrategyContainer","lockToActor","addStrategy","LockCameraToActorStrategy","lockToActorAxis","LockCameraToActorAxisStrategy","elasticToActor","cameraElasticity","cameraFriction","ElasticToActorStrategy","radiusAroundActor","RadiusAroundActorStrategy","limitCameraBounds","box","LimitCameraBoundsStrategy","_cam","_eng","cam","currentFocus","getFocus","focus","cameraVel","stretch","boundSizeChecked","focusX","focusY","Camera","_cameraStrategies","strategy","_z","dz","az","_posChanged","_pos","_cameraMoving","_isShaking","_shakeMagnitudeX","_shakeMagnitudeY","_shakeDuration","_elapsedShakeTime","_xShake","_yShake","_isZooming","_zoomStart","_zoomEnd","_currentZoomTime","_zoomDuration","_zoomEasing","_easing","_halfWidth","_halfHeight","_follow","ax","ay","move","easingFn","_lerpPromise","_lerpResolve","shake","magnitudeX","magnitudeY","zoomOverTime","_zoomPromise","_zoomResolve","cameraStrategy","removeStrategy","clearAllStrategies","_screen","currentRes","loadingComplete","res","updateTransform","runStrategies","newZoom","zoomEasing","lerpPoint","CreateVectorEasingFunction","moveEasing","_isDoneShaking","newCanvasWidth","newCanvasHeight","cameraPos","isScreenElement","triggerDefaults","Trigger_Trigger","opts","_dispatchAction","_target","wp","SystemType","System","_entityAddedOrRemoved","AddedEntity","isAddedSystemEntity","RemovedEntity","isRemoveSystemEntity","EntityManager","_world","entities","_entityIndex","_entitiesToRemove","updateEntities","removeEntity","findEntitiesForRemoval","queryManager","addEntity","idOrEntity","deferred","actors","killed","processEntityRemovals","processComponentRemovals","getById","getByName","buildTypeKey","localeCompare","Query","_entities","T","_key","getEntities","matches","typesOrEntity","contain","QueryManager","_queries","_addQuery","entityManager","maybeRemoveQuery","queryType","createQuery","maybeExistingQuery","getQuery","SystemManager","systems","initialized","systemType","find","addSystem","system","removeSystem","updateSystems","preupdate","Scene","postupdate","systemManager","Update","entityOrSystem","clearEntities","clearSystems","EulerIntegrator","totalAcc","MotionSystem","optionalBody","integrate","CollisionSolver","solve","preSolve","solveVelocity","solvePosition","postSolve","ArcadeSolver","opposite","velAdj","ContactConstraintPoint","normalImpulse","tangentImpulse","normalMass","tangentMass","aToContact","bToContact","aToContactNormal","bToContactNormal","aToContactTangent","bToContactTangent","getRelativeVelocity","velA","RealisticSolver","lastFrameContacts","idToContactConstraint","getContactConstraints","finishedContactIds","contactPoints","pointIndex","constraints","maxCorrection","steeringForce","restitution","impulseDelta","maxFriction","newImpulse","CollisionSystem","_realisticSolver","_arcadeSolver","_processor","_lastFrameContacts","_currentFrameContacts","_trackCollider","_untrackCollider","colliderComponent","colliderComp","getSolver","runContactStartEnd","AnimationDirection","AnimationStrategy","EmitterType","Animation","Loop","frameDuration","timeScale","_firstTick","_currentFrame","_done","_playing","_reversed","totalDuration","goToFrame","maybeFrame","frameIndices","durationPerFrameMs","invalidIndices","animation","legacySprites","Freeze","currentFrameIndex","isPlaying","Backward","Forward","canFinish","done","frameNumber","_nextFrame","PingPong","elapsedMilliseconds","GraphicsGroup","members","_updateDimensions","_isAnimationOrGroup","member","maybeAnimation","ParticleImpl","emitterOrConfig","life","beginColor","endColor","velocity","acceleration","startSize","endSize","particleRotationalVelocity","currentRotation","focusAccel","fadeFlag","_rRate","_gRate","_bRate","_aRate","emitter","particleSize","particleSprite","sizeRate","elapsedMultiplier","ParticleEmitter","tmpColor","removeParticle","accel","Particle","_particlesToEmit","numParticles","isEmitting","particles","deadParticles","minVel","maxVel","minAngle","maxAngle","emitRate","particleLife","minSize","maxSize","_og","emitterType","randomRotation","particle","emitParticles","particleCount","_createParticle","world","clearParticles","ranX","ranY","GraphicsSystem","Draw","_graphicsContext","entityOffscreen","_isOffscreen","_pushCameraTransform","_applyTransform","particleOpacity","_drawGraphicsComponent","_popCameraTransform","graphicsComponent","isDebug","showBounds","boundsColor","ancestors","ancestor","CanvasDrawingSystem","canvasdraw","_clearScreen","offscreen","drawnImages","drawCalls","DebugSystem","_collisionSystem","filterSettings","entitySettings","txSettings","motionSettings","colliderSettings","physicsSettings","graphicsSettings","bodySettings","cameraSettings","useFilter","ids","nameQuery","cursor","showAll","showPosition","positionColor","showPositionLabel","showId","showName","showRotation","fromAngle","rotationColor","showScale","scaleColor","showCollisionGroup","showCollisionType","showMass","showMotion","showSleeping","showVelocity","velocityColor","showAcceleration","accelerationColor","showGeometry","geometryColor","showOwner","showBroadphaseSpacePartitionDebug","showCollisionContacts","showCollisionNormals","collisionContactColor","collisionNormalColor","showFocus","focusColor","showZoom","PointerSystem","overrideUseColliderShape","overrideUseGraphicsBounds","lastFrameEntityToPointers","currentFrameEntityToPointers","_receiver","pointers","entityCurrentlyUnderPointer","pointerId","entityWasUnderPointer","entered","addPointerToEntity","_processPointerToEntity","_dispatchEvents","currentFramePointerCoords","screenPos","graphicBounds","_processDownAndEmit","lastDownPerPointer","currentFrameDown","isDragStart","_processUpAndEmit","lastUpPerPointer","currentFrameUp","isDragEnd","_processMoveAndEmit","lastMovePerPointer","currentFrameMove","isDragging","_processEnterLeaveAndEmit","lastUpDownMoveEvents","_processCancelAndEmit","currentFrameCancel","_processWheelAndEmit","currentFrameWheel","lastFrameEntities","currentFrameEntities","entitiesWithEvents","ActionsSystem","ColorBlindnessMode","PointerScope","Keys","Buttons","Axes","WheelDeltaMode","NativePointerButton","PointerButton","PointerType","Scene_decorate","_timers","_cancelQueue","triggers","tileMaps","screenElements","timers","onActivate","_oldScene","_newScene","onDeactivate","_initializeChildren","_activate","_deactivate","removeTimer","timer","_collectActorStats","addTimer","addScreenElement","removeScreenElement","addTileMap","tileMap","removeTileMap","isTimerActive","isCurrentScene","_ui","ui","alive","ScreenShader","ColorBlindnessPostProcessor","_colorBlindnessMode","simulate","_simulate","colorBlindnessMode","colorBlindMode","Protanope","Deuteranope","Tritanope","ColorBlindFlags","_colorBlindPostProcessor","correct","colorBlindness","FrameStats","prevFrame","useTestClock","wasRunning","testClock","toTestClock","useStandardClock","currentClock","standardClock","toStandardClock","_id","_fps","_actorStats","remaining","total","_durationStats","_physicsStats","PhysicsStats","_graphicsStats","otherStats","fps","fs","_collisions","_contacts","_fastBodies","_fastBodyCollisions","_broadphase","_narrowphase","ps","KeyEvent","originalEvent","Keyboard","_keys","_keysUp","_keysDown","init","noop","keyEvent","getKeys","wasPressed","isHeld","wasReleased","Gamepads","_gamePadTimeStamps","_oldPads","_pads","_initSuccess","_navigator","_minimumConfiguration","_clonePads","setMinimumGamepadConfiguration","_enableAndUpdate","_isGamepadValid","pad","axesLength","buttonLength","buttons","connected","gamepads","at","timestamp","bi","ai","navigatorGamepad","getButton","pressed","updateButton","getAxes","updateAxes","_clonePad","Gamepad","getValidGamepads","pads","arr","clonedPad","MinAxisMoveThreshold","_buttons","isButtonPressed","buttonIndex","axesIndex","BrowserComponent","_paused","_nativeHandlers","_decorate","BrowserEvents","_windowGlobal","_documentGlobal","_windowComponent","_documentComponent","ExcaliburGraphicsContext2DCanvasDebug","ExcaliburGraphicsContext2DCanvas","setTransform","_postprocessor","GlobalCoordinates","pagePos","yOrEngine","engineOrUndefined","pageX","pageY","PointerEvent","pointerType","coordinates","nativeEvent","WheelEvent","screenX","screenY","deltaX","deltaY","deltaZ","deltaMode","PointerAbstraction","lastPagePos","lastScreenPos","lastWorldPos","_onPointerMove","_onPointerDown","PointerEventReceiver","primary","_activeNativePointerIdsToNormalized","lastFramePointerCoords","currentFramePointerDown","lastFramePointerDown","_pointers","_boundHandle","_handle","_boundWheel","_handleWheel","isDown","wasDown","native","touchAction","wheelOptions","passive","pageScrollPreventionMode","ScrollPreventionMode","onmousewheel","detach","_normalizePointerId","nativePointerId","findIndex","preventDefault","eventCoords","TouchEvent","Unknown","Touch","changedTouches","touch","fromPagePosition","_nativeButtonToPointerButton","Mouse","isPointerEvent","_stringToPointerType","ScrollWheelNormalizationFactor","wheelDeltaX","wheelDeltaY","wheelDelta","detail","Page","we","triggerEvent","page","clientX","clientY","MouseEvent","pointerSystem","transformEntities","NoButton","Pen","FpsSampler","_samplePeriod","_currentFrameTime","_frames","_previousSampleTime","_beginFrameTime","initialFps","samplePeriod","_nowFn","nowFn","instant","Clock","_onFatalException","_maxFps","_lastTime","_elapsed","_scheduledCbs","_totalElapsed","maxFps","onFatalException","fpsSampler","TestClock","defaultUpdateMs","StandardClock","setFatalExceptionHandler","timeoutMs","scheduledTime","_runScheduledCbs","overrideUpdateMs","fpsInterval","leftover","mainloop","_requestId","_currentTime","_updateMs","step","run","numberOfSteps","Engine_decorate","_hasStarted","scenes","_animations","_suppressPlayButton","pauseAudioWhenHidden","_isDebug","debugColor","enableCanvasTransparency","_timescale","_deferredGoTo","_loadingComplete","_isReady","_isReadyPromise","_isReadyResolve","_screenShotRequests","_DEFAULT_ENGINE_OPTIONS","freeze","detector","suppressMinimumBrowserFeatureDetection","_compatible","innerText","testMessage","canvasElementId","suppressConsoleBootMessage","EX_VERSION","ex2dCtx","exWebglCtx","suppressHiDPIScaling","_mainloop","_loader","rootScene","addScene","___EXCALIBUR_DEVTOOL","isFullscreen","shouldSnapToPixel","timescale","AnimationNode","removeScene","goToScene","scrollPreventionMode","pointerTarget","pointerScope","Document","hidden","visibilityChange","keyboard","_overrideInitialize","_update","_draw","_checkForScreenShots","toggle","toggleDebug","isReady","loader","frameId","beforeUpdate","afterUpdate","afterDraw","game","raf","lastTime","isPaused","screenshot","preserveHiDPIResolution","finalWidth","finalHeight","raw","MediaEvent","_value","_path","_val","propagate","layPath","_actor","NativeSoundEvent","NativeSoundProcessedEvent","_processedData","Label_decorate","Label_Label","newFont","isBold","fontFamily","sizeInUnit","fontStyle","fontUnit","align","_legacySpriteFont","sf","fromLegacySpriteFont","getTextWidth","clearTextShadow","exctx","CollisionGroupManager","_CURRENT_GROUP","_MAX_GROUPS","_GROUPS","_CURRENT_BIT","groups","_STARTING_BIT","filled","_points","fillColor","lineColor","Polygon_decorate","ExResponse","has_initialize","hasOnInitialize","has_preupdate","hasOnPreUpdate","has_postupdate","hasOnPostUpdate","hasPreDraw","hasPostDraw","any","json","WebAudioInstance","_volume","_loop","_isPlaying","_isPaused","_audioContext","_volumeNode","createGain","_currentOffset","_createNewBufferSource","_instance","_wireUpOnEnded","volume","gain","setTargetAtTime","_playbackRate","playbackRate","playStarted","_resumePlayBack","_startPlayBack","_playingPromise","_setPauseOffset","_handleOnEnded","_playingResolve","_rememberStartTime","restartTime","amend","_startTime","getTime","setValueAtTime","canPlayFile","file","Audio","filetype","canPlayType","Sound","paths","_isStopped","_tracks","_wasPlayingOnHidden","instances","audiobuffer","decodeAudio","instanceCount","_resumePlayback","_startPlayback","getTrackId","resumed","_getTrackInstance","newTrack","Gif","_stream","_gif","_animation","_transparentColor","Stream","ParseGif","toLegacySpriteSheet","toSpriteSheet","toLegacyAnimation","toAnimation","fromSpriteSheet","readCheckBytes","checkBytes","bitsToNum","ba","byteToBitArr","bite","dataArray","readByte","byteLength","readBytes","bytes","read","readUnsigned","Uint8Array","stream","_st","_handler","globalColorTable","parseColorTable","ct","readSubBlocks","parseHeader","hdr","sig","ver","colorRes","globalColorTableSize","gctFlag","sorted","bgColor","pixelAspectRatio","bits","parseExt","block","parseGCExt","reserved","disposalMethod","userInput","transparencyGiven","delayTime","transparencyIndex","terminator","gce","parseComExt","comment","com","parsePTExt","ptHeader","ptData","pte","parseAppExt","identifier","authCode","unknown","iterations","app","NETSCAPE","parseNetscapeExt","appData","parseUnknownAppExt","parseUnknownExt","label","extType","parseImg","img","leftPos","topPos","lctFlag","interlaced","lctSize","lct","lzwMinCodeSize","lzwData","pixels","minCodeSize","readCode","charCodeAt","output","clearCode","eoiCode","codeSize","dict","last","lzwDecode","newPixels","cpRow","toRow","fromRow","fromPixels","offsets","steps","pass","deinterlace","arrayToImage","parseBlock","sentinel","eof","frame","Polygon_Polygon","SortedList_decorate","SortedList","getComparable","_getComparable","_find","_root","getKey","getData","getLeft","getRight","_get","BinaryTreeNode","setLeft","setRight","removeByComparable","elementIndex","_findMinNode","setKey","setData","_cleanup","comparable","_list","treeNode","_data","_left","_right","MockedElement","getTheKey","Pool","builder","recycler","maxObjects","totalAllocations","objects","using","borrow","poolIndex","Promise_1","PromiseState","Promises_Promise","Pending","_successCallbacks","_rejectCallback","promises","isArray","_i","joinedPromise","successes","rejects","errors","successCallback","rejectCallback","Resolved","_handleError","Rejected","errorCallback","_errorCallback","Promises_decorate","__webpack_exports__ActionContext","fWn","__webpack_exports__ActionQueue","Ia8","__webpack_exports__ActionsComponent","hLI","__webpack_exports__ActionsSystem","yyv","__webpack_exports__ActivateEvent","tX5","__webpack_exports__Actor","vtX","__webpack_exports__AddedComponent","r7K","__webpack_exports__AddedEntity","lCh","__webpack_exports__Animation","fwF","__webpack_exports__AnimationDirection","sce","__webpack_exports__AnimationStrategy","_c7","__webpack_exports__ArcadeSolver","KUs","__webpack_exports__AudioContextFactory","Ajp","__webpack_exports__Axis","RDh","__webpack_exports__BaseAlign","_H9","__webpack_exports__BinaryTreeNode","Ulf","__webpack_exports__Blink","mxs","__webpack_exports__BodyComponent","OmD","__webpack_exports__BoundingBox","kBf","__webpack_exports__BroadphaseStrategy","C4F","__webpack_exports__BrowserComponent","NQt","__webpack_exports__BrowserEvents","JjN","__webpack_exports__Camera","V1s","__webpack_exports__Canvas","Xz7","__webpack_exports__Cell","bLd","__webpack_exports__Circle","Cdc","__webpack_exports__CircleCollider","FKn","__webpack_exports__Class","wTW","__webpack_exports__Clock","SUY","__webpack_exports__ClosestLine","ab2","__webpack_exports__ClosestLineJumpTable","GfZ","__webpack_exports__Collider","YMS","__webpack_exports__ColliderComponent","oyv","__webpack_exports__CollisionContact","aUb","__webpack_exports__CollisionEndEvent","SdD","__webpack_exports__CollisionGroup","JUv","__webpack_exports__CollisionGroupManager","jEj","__webpack_exports__CollisionJumpTable","TFq","__webpack_exports__CollisionPostSolveEvent","HDU","__webpack_exports__CollisionPreSolveEvent","R_y","__webpack_exports__CollisionResolutionStrategy","ydN","__webpack_exports__CollisionSolver","_N2","__webpack_exports__CollisionStartEvent","t50","__webpack_exports__CollisionSystem","s$$","__webpack_exports__CollisionType","v2G","__webpack_exports__Color","Ilk","__webpack_exports__ColorBlindFlags","s9i","__webpack_exports__ColorBlindnessMode","dxL","__webpack_exports__ColorBlindnessPostProcessor","LLX","__webpack_exports__Component","wA2","__webpack_exports__CompositeCollider","R_p","__webpack_exports__Configurable","IQ$","__webpack_exports__ConsoleAppender","I5F","__webpack_exports__ContactConstraintPoint","X8$","__webpack_exports__ContactEndEvent","FR6","__webpack_exports__ContactStartEvent","U8o","__webpack_exports__CoordPlane","kbG","__webpack_exports__CullingBox","oeJ","__webpack_exports__DeactivateEvent","iS_","__webpack_exports__Debug","cGG","__webpack_exports__DebugGraphicsComponent","RPN","__webpack_exports__DebugSystem","skb","__webpack_exports__DebugText","SLU","__webpack_exports__DegreeOfFreedom","RdJ","__webpack_exports__Detector","gU7","__webpack_exports__Die","LSk","__webpack_exports__Direction","Nmp","__webpack_exports__DisplayMode","d1Y","__webpack_exports__DynamicTree","xrL","__webpack_exports__DynamicTreeCollisionProcessor","sRW","__webpack_exports__EX_VERSION","cmV","__webpack_exports__EaseTo","N0Q","__webpack_exports__EasingFunctions","q8b","__webpack_exports__EdgeCollider","ynB","__webpack_exports__ElasticToActorStrategy","jT9","__webpack_exports__EmitterType","wAz","__webpack_exports__Engine","D4V","__webpack_exports__EnterTriggerEvent","N6H","__webpack_exports__EnterViewPortEvent","W1A","__webpack_exports__Entity","JHW","__webpack_exports__EntityManager","v2K","__webpack_exports__EventDispatcher","pBf","__webpack_exports__EventTypes","GMl","__webpack_exports__Events","zW2","__webpack_exports__ExResponse","B0K","__webpack_exports__ExcaliburGraphicsContext2DCanvas","Nv7","__webpack_exports__ExcaliburGraphicsContextWebGL","C_p","__webpack_exports__ExcaliburWebGLContextAccessor","iqw","__webpack_exports__ExitTriggerEvent","MUA","__webpack_exports__ExitViewPortEvent","xqU","__webpack_exports__Experiments","peG","__webpack_exports__Fade","pTp","__webpack_exports__Flags","vUK","__webpack_exports__Follow","j9l","__webpack_exports__Font","Zxw","__webpack_exports__FontStyle","Hdx","__webpack_exports__FontUnit","Z$d","__webpack_exports__FpsSampler","iqV","__webpack_exports__FrameStats","o$7","__webpack_exports__GameEvent","Zm$","__webpack_exports__GameStartEvent","$QH","__webpack_exports__GameStopEvent","i78","__webpack_exports__GamepadAxisEvent","h6u","__webpack_exports__GamepadButtonEvent","hts","__webpack_exports__GamepadConnectEvent","j88","__webpack_exports__GamepadDisconnectEvent","VME","__webpack_exports__Gif","nt","__webpack_exports__GlobalCoordinates","Ukr","__webpack_exports__Graphic","zsu","__webpack_exports__GraphicsComponent","oA6","__webpack_exports__GraphicsGroup","TVh","__webpack_exports__GraphicsLayer","TwZ","__webpack_exports__GraphicsLayers","GTT","__webpack_exports__GraphicsSystem","xxj","__webpack_exports__HiddenEvent","XdK","__webpack_exports__ImageFiltering","Jmb","__webpack_exports__ImageSource","cXo","__webpack_exports__InitializeEvent","Dm5","__webpack_exports__Input","IIB","__webpack_exports__Integrator","zI0","__webpack_exports__KillEvent","SKZ","__webpack_exports__Label","__J","__webpack_exports__Legacy","Dvr","__webpack_exports__LegacyDrawing","Tf9","__webpack_exports__LimitCameraBoundsStrategy","RI$","__webpack_exports__Line","x12","__webpack_exports__Loader","aNw","__webpack_exports__LockCameraToActorAxisStrategy","xwn","__webpack_exports__LockCameraToActorStrategy","dNK","__webpack_exports__LogLevel","ini","__webpack_exports__Logger","YdH","__webpack_exports__Matrix","y3G","__webpack_exports__MatrixLocations","l57","__webpack_exports__MediaEvent","xn0","__webpack_exports__Meet","t2V","__webpack_exports__MockedElement","ZyS","__webpack_exports__MotionComponent","uxB","__webpack_exports__MotionSystem","cpd","__webpack_exports__MoveBy","fiy","__webpack_exports__MoveTo","$XZ","__webpack_exports__NativeSoundEvent","uqK","__webpack_exports__NativeSoundProcessedEvent","STE","__webpack_exports__Observable","y$z","__webpack_exports__Pair","sOq","__webpack_exports__ParseGif","Sqs","__webpack_exports__Particle","hpZ","__webpack_exports__ParticleEmitter","Vol","__webpack_exports__Physics","wIZ","__webpack_exports__PhysicsStats","cBi","__webpack_exports__PointerComponent","RFv","__webpack_exports__PointerSystem","kfC","__webpack_exports__Polygon","mgq","__webpack_exports__PolygonCollider","YVA","__webpack_exports__Pool","Kgp","__webpack_exports__PostCollisionEvent","HH$","__webpack_exports__PostDebugDrawEvent","M_d","__webpack_exports__PostDrawEvent","rgh","__webpack_exports__PostFrameEvent","Ra6","__webpack_exports__PostKillEvent","KhR","__webpack_exports__PostUpdateEvent","BS5","__webpack_exports__PreCollisionEvent","xhz","__webpack_exports__PreDebugDrawEvent","xOq","__webpack_exports__PreDrawEvent","a9j","__webpack_exports__PreFrameEvent","bHk","__webpack_exports__PreKillEvent","CgK","__webpack_exports__PreUpdateEvent","cuY","__webpack_exports__Projection","kvE","__webpack_exports__Promise","JDb","__webpack_exports__PromiseState","Cbi","__webpack_exports__QuadIndexBuffer","SBu","__webpack_exports__Query","AE_","__webpack_exports__QueryManager","ctO","__webpack_exports__RadiusAroundActorStrategy","OLH","__webpack_exports__Random","kky","__webpack_exports__Raster","nSF","__webpack_exports__Ray","zHn","__webpack_exports__RealisticSolver","zwx","__webpack_exports__Rectangle","AeJ","__webpack_exports__RemovedComponent","hLz","__webpack_exports__RemovedEntity","D9g","__webpack_exports__Repeat","wA","__webpack_exports__RepeatForever","jhr","__webpack_exports__Resolution","GVs","__webpack_exports__Resource","_zO","__webpack_exports__RotateBy","w6$","__webpack_exports__RotateTo","mhV","__webpack_exports__RotationType","MOD","__webpack_exports__ScaleBy","kwd","__webpack_exports__ScaleTo","Lmr","__webpack_exports__Scene","xsS","__webpack_exports__Screen","lLr","__webpack_exports__ScreenAppender","Z$r","__webpack_exports__ScreenElement","IXb","__webpack_exports__ScreenShader","SGH","__webpack_exports__ScrollPreventionMode","SMj","__webpack_exports__Shader","exe","__webpack_exports__Shape","bnF","__webpack_exports__Side","MFA","__webpack_exports__SortedList","$XC","__webpack_exports__Sound","$uU","__webpack_exports__Sprite","jyi","__webpack_exports__SpriteFont","E03","__webpack_exports__SpriteSheet","V6q","__webpack_exports__StandardClock","rg2","__webpack_exports__StrategyContainer","nVo","__webpack_exports__Stream","F6N","__webpack_exports__SubscribeEvent","ad3","__webpack_exports__System","xP7","__webpack_exports__SystemManager","Odq","__webpack_exports__SystemType","Zif","__webpack_exports__TagComponent","ZGJ","__webpack_exports__TestClock","MJk","__webpack_exports__Text","xvT","__webpack_exports__TextAlign","PHM","__webpack_exports__TextureLoader","dpR","__webpack_exports__TileMap","KwO","__webpack_exports__Timer","B7y","__webpack_exports__Traits","SFp","__webpack_exports__TransformComponent","Uvn","__webpack_exports__TreeNode","OFT","__webpack_exports__Trigger","xzN","__webpack_exports__TwoPI","M5Z","__webpack_exports__UnsubscribeEvent","H6j","__webpack_exports__Util","ZrN","__webpack_exports__Vector","OWs","__webpack_exports__VectorView","dF9","__webpack_exports__VertexBuffer","oZy","__webpack_exports__VertexLayout","rD2","__webpack_exports__VisibleEvent","VHo","__webpack_exports__WebAudio","ohE","__webpack_exports__WebAudioInstance","R$E","__webpack_exports__World","q3I","__webpack_exports__canonicalizeAngle","Pab","__webpack_exports__clamp","uZ5","__webpack_exports__createId","McK","__webpack_exports__frac","F9c","__webpack_exports__hasGraphicsTick","k0b","__webpack_exports__hasOnInitialize","hnT","__webpack_exports__hasOnPostUpdate","RSJ","__webpack_exports__hasOnPreUpdate","Mku","__webpack_exports__hasPostDraw","h90","__webpack_exports__hasPreDraw","rms","__webpack_exports__has_initialize","ErP","__webpack_exports__has_postupdate","aVg","__webpack_exports__has_preupdate","lPc","__webpack_exports__isAddedComponent","Z8E","__webpack_exports__isAddedSystemEntity","NNA","__webpack_exports__isRemoveSystemEntity","yFn","__webpack_exports__isRemovedComponent","lNv","__webpack_exports__maxMessages","MZQ","__webpack_exports__obsolete","FUM","__webpack_exports__randomInRange","vdf","__webpack_exports__randomIntInRange","iaL","__webpack_exports__range","w6H","__webpack_exports__resetObsoleteCounter","Q4c","__webpack_exports__sign","Xxe","__webpack_exports__toDegrees","Uxb","__webpack_exports__toRadians","Yr5","__webpack_exports__vec","Bhw","__webpack_exports__webgl","yOA","Floor","groupByName","blockSprite","Level1","Samurai","isOnGround","isJumping","isAttacking1","isFacingRight","spriteSheetToAnimation","samuraiRunSpriteSheet","idle","samuraiIdleSpriteSheet","jump","samuraiJumpSpriteSheet","fall","samuraiFallSpriteSheet","attack1","samuraiAttack1SpriteSheet","onPostCollision","Input","Space","newGraphic","blockFile","samuraiRunFile","samuraiIdleFile","samuraiJumpFile","samuraiAttack1File","samuraiFallFile","samuraiDieFile","samuraiTakeHitFile","Resources","samuraiRun","samuraiIdle","samuraiJump","samuraiAttack1","samuraiFall","samuraiDie","samuraiTakeHit","imgToSpriteSheet","imgSrc","samuraiDieSpriteSheet","samuraiTakeHitSpriteSheet","__webpack_require__"],"sourceRoot":""}